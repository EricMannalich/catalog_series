/*! For license information please see main.js.LICENSE.txt */
!function(){var e,g,t={6751:function(e,g,t){"use strict";t.d(g,{Z:function(){return ne}});var n=function(){function e(e){var g=this;this._insertTag=function(e){var t;t=0===g.tags.length?g.insertionPoint?g.insertionPoint.nextSibling:g.prepend?g.container.firstChild:g.before:g.tags[g.tags.length-1].nextSibling,g.container.insertBefore(e,t),g.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var g=e.prototype;return g.hydrate=function(e){e.forEach(this._insertTag)},g.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var g=document.createElement("style");return g.setAttribute("data-emotion",e.key),void 0!==e.nonce&&g.setAttribute("nonce",e.nonce),g.appendChild(document.createTextNode("")),g.setAttribute("data-s",""),g}(this));var g=this.tags[this.tags.length-1];if(this.isSpeedy){var t=function(e){if(e.sheet)return e.sheet;for(var g=0;g<document.styleSheets.length;g++)if(document.styleSheets[g].ownerNode===e)return document.styleSheets[g]}(g);try{t.insertRule(e,t.cssRules.length)}catch(e){}}else g.appendChild(document.createTextNode(e));this.ctr++},g.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),l=Math.abs,I=String.fromCharCode,o=Object.assign;function a(e){return e.trim()}function C(e,g,t){return e.replace(g,t)}function i(e,g){return e.indexOf(g)}function r(e,g){return 0|e.charCodeAt(g)}function s(e,g,t){return e.slice(g,t)}function c(e){return e.length}function d(e){return e.length}function A(e,g){return g.push(e),e}var u=1,m=1,b=0,Z=0,h=0,p="";function G(e,g,t,n,l,I,o){return{value:e,root:g,parent:t,type:n,props:l,children:I,line:u,column:m,length:o,return:""}}function y(e,g){return o(G("",null,null,"",null,null,0),e,{length:-e.length},g)}function B(){return h=Z>0?r(p,--Z):0,m--,10===h&&(m=1,u--),h}function S(){return h=Z<b?r(p,Z++):0,m++,10===h&&(m=1,u++),h}function W(){return r(p,Z)}function V(){return Z}function f(e,g){return s(p,e,g)}function v(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){return u=m=1,b=c(p=e),Z=0,[]}function k(e){return p="",e}function X(e){return a(f(Z-1,H(91===e?e+2:40===e?e+1:e)))}function J(e){for(;(h=W())&&h<33;)S();return v(e)>2||v(h)>3?"":" "}function Y(e,g){for(;--g&&S()&&!(h<48||h>102||h>57&&h<65||h>70&&h<97););return f(e,V()+(g<6&&32==W()&&32==S()))}function H(e){for(;S();)switch(h){case e:return Z;case 34:case 39:34!==e&&39!==e&&H(h);break;case 40:41===e&&H(e);break;case 92:S()}return Z}function w(e,g){for(;S()&&e+h!==57&&(e+h!==84||47!==W()););return"/*"+f(g,Z-1)+"*"+I(47===e?e:S())}function x(e){for(;!v(W());)S();return f(e,Z)}var F="-ms-",N="-moz-",K="-webkit-",z="comm",M="rule",E="decl",L="@keyframes";function U(e,g){for(var t="",n=d(e),l=0;l<n;l++)t+=g(e[l],l,e,g)||"";return t}function Q(e,g,t,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case E:return e.return=e.return||e.value;case z:return"";case L:return e.return=e.value+"{"+U(e.children,n)+"}";case M:e.value=e.props.join(",")}return c(t=U(e.children,n))?e.return=e.value+"{"+t+"}":""}function T(e){return k(D("",null,null,null,[""],e=R(e),0,[0],e))}function D(e,g,t,n,l,o,a,s,d){for(var u=0,m=0,b=a,Z=0,h=0,p=0,G=1,y=1,f=1,v=0,R="",k=l,H=o,F=n,N=R;y;)switch(p=v,v=S()){case 40:if(108!=p&&58==r(N,b-1)){-1!=i(N+=C(X(v),"&","&\f"),"&\f")&&(f=-1);break}case 34:case 39:case 91:N+=X(v);break;case 9:case 10:case 13:case 32:N+=J(p);break;case 92:N+=Y(V()-1,7);continue;case 47:switch(W()){case 42:case 47:A(P(w(S(),V()),g,t),d);break;default:N+="/"}break;case 123*G:s[u++]=c(N)*f;case 125*G:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+m:-1==f&&(N=C(N,/\f/g,"")),h>0&&c(N)-b&&A(h>32?O(N+";",n,t,b-1):O(C(N," ","")+";",n,t,b-2),d);break;case 59:N+=";";default:if(A(F=j(N,g,t,u,m,l,s,R,k=[],H=[],b),o),123===v)if(0===m)D(N,g,F,F,k,o,b,s,H);else switch(99===Z&&110===r(N,3)?100:Z){case 100:case 108:case 109:case 115:D(e,F,F,n&&A(j(e,F,F,0,0,l,s,R,l,k=[],b),H),l,H,b,s,n?k:H);break;default:D(N,F,F,F,[""],H,0,s,H)}}u=m=h=0,G=f=1,R=N="",b=a;break;case 58:b=1+c(N),h=p;default:if(G<1)if(123==v)--G;else if(125==v&&0==G++&&125==B())continue;switch(N+=I(v),v*G){case 38:f=m>0?1:(N+="\f",-1);break;case 44:s[u++]=(c(N)-1)*f,f=1;break;case 64:45===W()&&(N+=X(S())),Z=W(),m=b=c(R=N+=x(V())),v++;break;case 45:45===p&&2==c(N)&&(G=0)}}return o}function j(e,g,t,n,I,o,i,r,c,A,u){for(var m=I-1,b=0===I?o:[""],Z=d(b),h=0,p=0,y=0;h<n;++h)for(var B=0,S=s(e,m+1,m=l(p=i[h])),W=e;B<Z;++B)(W=a(p>0?b[B]+" "+S:C(S,/&\f/g,b[B])))&&(c[y++]=W);return G(e,g,t,0===I?M:r,c,A,u)}function P(e,g,t){return G(e,g,t,z,I(h),s(e,2,-2),0)}function O(e,g,t,n){return G(e,g,t,E,s(e,0,n),s(e,n+1,-1),n)}var q=function(e,g,t){for(var n=0,l=0;n=l,l=W(),38===n&&12===l&&(g[t]=1),!v(l);)S();return f(e,Z)},_=new WeakMap,$=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var g=e.value,t=e.parent,n=e.column===t.column&&e.line===t.line;"rule"!==t.type;)if(!(t=t.parent))return;if((1!==e.props.length||58===g.charCodeAt(0)||_.get(t))&&!n){_.set(e,!0);for(var l=[],o=function(e,g){return k(function(e,g){var t=-1,n=44;do{switch(v(n)){case 0:38===n&&12===W()&&(g[t]=1),e[t]+=q(Z-1,g,t);break;case 2:e[t]+=X(n);break;case 4:if(44===n){e[++t]=58===W()?"&\f":"",g[t]=e[t].length;break}default:e[t]+=I(n)}}while(n=S());return e}(R(e),g))}(g,l),a=t.props,C=0,i=0;C<o.length;C++)for(var r=0;r<a.length;r++,i++)e.props[i]=l[C]?o[C].replace(/&\f/g,a[r]):a[r]+" "+o[C]}}},ee=function(e){if("decl"===e.type){var g=e.value;108===g.charCodeAt(0)&&98===g.charCodeAt(2)&&(e.return="",e.value="")}};function ge(e,g){switch(function(e,g){return 45^r(e,0)?(((g<<2^r(e,0))<<2^r(e,1))<<2^r(e,2))<<2^r(e,3):0}(e,g)){case 5103:return K+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return K+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return K+e+N+e+F+e+e;case 6828:case 4268:return K+e+F+e+e;case 6165:return K+e+F+"flex-"+e+e;case 5187:return K+e+C(e,/(\w+).+(:[^]+)/,K+"box-$1$2"+F+"flex-$1$2")+e;case 5443:return K+e+F+"flex-item-"+C(e,/flex-|-self/,"")+e;case 4675:return K+e+F+"flex-line-pack"+C(e,/align-content|flex-|-self/,"")+e;case 5548:return K+e+F+C(e,"shrink","negative")+e;case 5292:return K+e+F+C(e,"basis","preferred-size")+e;case 6060:return K+"box-"+C(e,"-grow","")+K+e+F+C(e,"grow","positive")+e;case 4554:return K+C(e,/([^-])(transform)/g,"$1"+K+"$2")+e;case 6187:return C(C(C(e,/(zoom-|grab)/,K+"$1"),/(image-set)/,K+"$1"),e,"")+e;case 5495:case 3959:return C(e,/(image-set\([^]*)/,K+"$1$`$1");case 4968:return C(C(e,/(.+:)(flex-)?(.*)/,K+"box-pack:$3"+F+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+K+e+e;case 4095:case 3583:case 4068:case 2532:return C(e,/(.+)-inline(.+)/,K+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(c(e)-1-g>6)switch(r(e,g+1)){case 109:if(45!==r(e,g+4))break;case 102:return C(e,/(.+:)(.+)-([^]+)/,"$1"+K+"$2-$3$1"+N+(108==r(e,g+3)?"$3":"$2-$3"))+e;case 115:return~i(e,"stretch")?ge(C(e,"stretch","fill-available"),g)+e:e}break;case 4949:if(115!==r(e,g+1))break;case 6444:switch(r(e,c(e)-3-(~i(e,"!important")&&10))){case 107:return C(e,":",":"+K)+e;case 101:return C(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+K+(45===r(e,14)?"inline-":"")+"box$3$1"+K+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(r(e,g+11)){case 114:return K+e+F+C(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return K+e+F+C(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return K+e+F+C(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return K+e+F+e+e}return e}var te=[function(e,g,t,n){if(e.length>-1&&!e.return)switch(e.type){case E:e.return=ge(e.value,e.length);break;case L:return U([y(e,{value:C(e.value,"@","@"+K)})],n);case M:if(e.length)return function(e,g){return e.map(g).join("")}(e.props,(function(g){switch(function(e,g){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(g)){case":read-only":case":read-write":return U([y(e,{props:[C(g,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return U([y(e,{props:[C(g,/:(plac\w+)/,":"+K+"input-$1")]}),y(e,{props:[C(g,/:(plac\w+)/,":-moz-$1")]}),y(e,{props:[C(g,/:(plac\w+)/,F+"input-$1")]})],n)}return""}))}}],ne=function(e){var g=e.key;if("css"===g){var t=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(t,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var l,I,o=e.stylisPlugins||te,a={},C=[];l=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+g+' "]'),(function(e){for(var g=e.getAttribute("data-emotion").split(" "),t=1;t<g.length;t++)a[g[t]]=!0;C.push(e)}));var i,r,s,c,A=[Q,(c=function(e){i.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],u=(r=[$,ee].concat(o,A),s=d(r),function(e,g,t,n){for(var l="",I=0;I<s;I++)l+=r[I](e,g,t,n)||"";return l});I=function(e,g,t,n){i=t,U(T(e?e+"{"+g.styles+"}":g.styles),u),n&&(m.inserted[g.name]=!0)};var m={key:g,sheet:new n({key:g,container:l,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:I};return m.sheet.hydrate(C),m}},5042:function(e,g,t){"use strict";function n(e){var g=Object.create(null);return function(t){return void 0===g[t]&&(g[t]=e(t)),g[t]}}t.d(g,{Z:function(){return n}})},5260:function(e,g,t){"use strict";t.d(g,{T:function(){return C},i:function(){return I},w:function(){return a}});var n=t(7294),l=t(6751),I=(t(6797),t(7278),!0),o=n.createContext("undefined"!=typeof HTMLElement?(0,l.Z)({key:"css"}):null);o.Provider;var a=function(e){return(0,n.forwardRef)((function(g,t){var l=(0,n.useContext)(o);return e(g,l,t)}))};I||(a=function(e){return function(g){var t=(0,n.useContext)(o);return null===t?(t=(0,l.Z)({key:"css"}),n.createElement(o.Provider,{value:t},e(g,t))):e(g,t)}});var C=n.createContext({})},6797:function(e,g,t){"use strict";t.d(g,{O:function(){return A}});var n={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},l=t(5042),I=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(e){return 45===e.charCodeAt(1)},C=function(e){return null!=e&&"boolean"!=typeof e},i=(0,l.Z)((function(e){return a(e)?e:e.replace(I,"-$&").toLowerCase()})),r=function(e,g){switch(e){case"animation":case"animationName":if("string"==typeof g)return g.replace(o,(function(e,g,t){return c={name:g,styles:t,next:c},g}))}return 1===n[e]||a(e)||"number"!=typeof g||0===g?g:g+"px"};function s(e,g,t){if(null==t)return"";if(void 0!==t.__emotion_styles)return t;switch(typeof t){case"boolean":return"";case"object":if(1===t.anim)return c={name:t.name,styles:t.styles,next:c},t.name;if(void 0!==t.styles){var n=t.next;if(void 0!==n)for(;void 0!==n;)c={name:n.name,styles:n.styles,next:c},n=n.next;return t.styles+";"}return function(e,g,t){var n="";if(Array.isArray(t))for(var l=0;l<t.length;l++)n+=s(e,g,t[l])+";";else for(var I in t){var o=t[I];if("object"!=typeof o)null!=g&&void 0!==g[o]?n+=I+"{"+g[o]+"}":C(o)&&(n+=i(I)+":"+r(I,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=g&&void 0!==g[o[0]]){var a=s(e,g,o);switch(I){case"animation":case"animationName":n+=i(I)+":"+a+";";break;default:n+=I+"{"+a+"}"}}else for(var c=0;c<o.length;c++)C(o[c])&&(n+=i(I)+":"+r(I,o[c])+";")}return n}(e,g,t);case"function":if(void 0!==e){var l=c,I=t(e);return c=l,s(e,g,I)}}if(null==g)return t;var o=g[t];return void 0!==o?o:t}var c,d=/label:\s*([^\s;\n{]+)\s*(;|$)/g,A=function(e,g,t){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,l="";c=void 0;var I=e[0];null==I||void 0===I.raw?(n=!1,l+=s(t,g,I)):l+=I[0];for(var o=1;o<e.length;o++)l+=s(t,g,e[o]),n&&(l+=I[o]);d.lastIndex=0;for(var a,C="";null!==(a=d.exec(l));)C+="-"+a[1];var i=function(e){for(var g,t=0,n=0,l=e.length;l>=4;++n,l-=4)g=1540483477*(65535&(g=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(g>>>16)<<16),t=1540483477*(65535&(g^=g>>>24))+(59797*(g>>>16)<<16)^1540483477*(65535&t)+(59797*(t>>>16)<<16);switch(l){case 3:t^=(255&e.charCodeAt(n+2))<<16;case 2:t^=(255&e.charCodeAt(n+1))<<8;case 1:t=1540483477*(65535&(t^=255&e.charCodeAt(n)))+(59797*(t>>>16)<<16)}return(((t=1540483477*(65535&(t^=t>>>13))+(59797*(t>>>16)<<16))^t>>>15)>>>0).toString(36)}(l)+C;return{name:i,styles:l,next:c}}},7278:function(e,g,t){"use strict";var n;t.d(g,{L:function(){return o},j:function(){return a}});var l=t(7294),I=!!(n||(n=t.t(l,2))).useInsertionEffect&&(n||(n=t.t(l,2))).useInsertionEffect,o=I||function(e){return e()},a=I||l.useLayoutEffect},444:function(e,g,t){"use strict";function n(e,g,t){var n="";return t.split(" ").forEach((function(t){void 0!==e[t]?g.push(e[t]+";"):n+=t+" "})),n}t.d(g,{My:function(){return I},fp:function(){return n},hC:function(){return l}});var l=function(e,g,t){var n=e.key+"-"+g.name;!1===t&&void 0===e.registered[n]&&(e.registered[n]=g.styles)},I=function(e,g,t){l(e,g,t);var n=e.key+"-"+g.name;if(void 0===e.inserted[g.name]){var I=g;do{e.insert(g===I?"."+n:"",I,e.sheet,!0),I=I.next}while(void 0!==I)}}},7327:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)([(0,I.jsx)("path",{d:"M15 2h-3.5l-1-1h-5l-1 1H1v2h14zm1 7c-.7 0-1.37.1-2 .29V5H2v12c0 1.1.9 2 2 2h5.68c1.12 2.36 3.53 4 6.32 4 3.87 0 7-3.13 7-7s-3.13-7-7-7zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"},"0"),(0,I.jsx)("path",{d:"M16.5 12H15v5l3.6 2.1.8-1.2-2.9-1.7z"},"1")],"AutoDelete");g.Z=o},9879:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6z"}),"Brightness4");g.Z=o},7289:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"}),"Brightness7");g.Z=o},9572:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");g.Z=o},6215:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");g.Z=o},7447:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M3 2h18v2H3zm0 18h18v2H3zm0-6h18v2H3zm0-6h18v2H3z"}),"DensitySmall");g.Z=o},8162:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");g.Z=o},1241:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M19.79 5.61C20.3 4.95 19.83 4 19 4H6.83l7.97 7.97 4.99-6.36zM2.81 2.81 1.39 4.22 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-2.17l5.78 5.78 1.41-1.41L2.81 2.81z"}),"FilterAltOff");g.Z=o},219:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm18-4H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z"}),"FilterNone");g.Z=o},4613:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace");g.Z=o},1775:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M21 15h2v2h-2v-2zm0-4h2v2h-2v-2zm2 8h-2v2c1 0 2-1 2-2zM13 3h2v2h-2V3zm8 4h2v2h-2V7zm0-4v2h2c0-1-1-2-2-2zM1 7h2v2H1V7zm16-4h2v2h-2V3zm0 16h2v2h-2v-2zM3 3C2 3 1 4 1 5h2V3zm6 0h2v2H9V3zM5 3h2v2H5V3zm-4 8v8c0 1.1.9 2 2 2h12V11H1zm2 8 2.5-3.21 1.79 2.15 2.5-3.22L13 19H3z"}),"PhotoSizeSelectLarge");g.Z=o},8394:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M9.5 6.5v3h-3v-3h3M11 5H5v6h6V5zm-1.5 9.5v3h-3v-3h3M11 13H5v6h6v-6zm6.5-6.5v3h-3v-3h3M19 5h-6v6h6V5zm-6 8h1.5v1.5H13V13zm1.5 1.5H16V16h-1.5v-1.5zM16 13h1.5v1.5H16V13zm-3 3h1.5v1.5H13V16zm1.5 1.5H16V19h-1.5v-1.5zM16 16h1.5v1.5H16V16zm1.5-1.5H19V16h-1.5v-1.5zm0 3H19V19h-1.5v-1.5zM22 7h-2V4h-3V2h5v5zm0 15v-5h-2v3h-3v2h5zM2 22h5v-2H4v-3H2v5zM2 2v5h2V4h3V2H2z"}),"QrCodeScanner");g.Z=o},6818:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");g.Z=o},2761:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");g.Z=o},4957:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star");g.Z=o},1334:function(e,g,t){"use strict";var n=t(4836);g.Z=void 0;var l=n(t(4938)),I=t(5893),o=(0,l.default)((0,I.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Sync");g.Z=o},4938:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),Object.defineProperty(g,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=t(4298)},4518:function(e,g){"use strict";g.Z={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"}},265:function(e,g){"use strict";g.Z={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"}},3023:function(e,g){"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},6607:function(e,g,t){"use strict";t(3023)},3527:function(e,g,t){"use strict";t.d(g,{Z:function(){return J}});var n=t(7462),l=t(3366),I=t(1387),o=t(9766),a=t(6268),C=t(8010),i=t(6523),r=t(1796),s={black:"#000",white:"#fff"},c={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d=t(4518),A=t(265),u={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},b={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Z={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const h=["mode","contrastThreshold","tonalOffset"],p={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:s.white,default:s.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},G={text:{primary:s.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:s.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function y(e,g,t,n){const l=n.light||n,I=n.dark||1.5*n;e[g]||(e.hasOwnProperty(t)?e[g]=e[t]:"light"===g?e.light=(0,r.$n)(e.main,l):"dark"===g&&(e.dark=(0,r._j)(e.main,I)))}const B=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"],S={textTransform:"uppercase"},W='"Roboto", "Helvetica", "Arial", sans-serif';function V(e,g){const t="function"==typeof g?g(e):g,{fontFamily:I=W,fontSize:a=14,fontWeightLight:C=300,fontWeightRegular:i=400,fontWeightMedium:r=500,fontWeightBold:s=700,htmlFontSize:c=16,allVariants:d,pxToRem:A}=t,u=(0,l.Z)(t,B),m=a/14,b=A||(e=>e/c*m+"rem"),Z=(e,g,t,l,o)=>{return(0,n.Z)({fontFamily:I,fontWeight:e,fontSize:b(g),lineHeight:t},I===W?{letterSpacing:(a=l/g,Math.round(1e5*a)/1e5+"em")}:{},o,d);var a},h={h1:Z(C,96,1.167,-1.5),h2:Z(C,60,1.2,-.5),h3:Z(i,48,1.167,0),h4:Z(i,34,1.235,.25),h5:Z(i,24,1.334,0),h6:Z(r,20,1.6,.15),subtitle1:Z(i,16,1.75,.15),subtitle2:Z(r,14,1.57,.1),body1:Z(i,16,1.5,.15),body2:Z(i,14,1.43,.15),button:Z(r,14,1.75,.4,S),caption:Z(i,12,1.66,.4),overline:Z(i,12,2.66,1,S),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return(0,o.Z)((0,n.Z)({htmlFontSize:c,pxToRem:b,fontFamily:I,fontSize:a,fontWeightLight:C,fontWeightRegular:i,fontWeightMedium:r,fontWeightBold:s},h),u,{clone:!1})}function f(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,0.2)`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,0.14)`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,0.12)`].join(",")}var v=["none",f(0,2,1,-1,0,1,1,0,0,1,3,0),f(0,3,1,-2,0,2,2,0,0,1,5,0),f(0,3,3,-2,0,3,4,0,0,1,8,0),f(0,2,4,-1,0,4,5,0,0,1,10,0),f(0,3,5,-1,0,5,8,0,0,1,14,0),f(0,3,5,-1,0,6,10,0,0,1,18,0),f(0,4,5,-2,0,7,10,1,0,2,16,1),f(0,5,5,-3,0,8,10,1,0,3,14,2),f(0,5,6,-3,0,9,12,1,0,3,16,2),f(0,6,6,-3,0,10,14,1,0,4,18,3),f(0,6,7,-4,0,11,15,1,0,4,20,3),f(0,7,8,-4,0,12,17,2,0,5,22,4),f(0,7,8,-4,0,13,19,2,0,5,24,4),f(0,7,9,-4,0,14,21,2,0,5,26,4),f(0,8,9,-5,0,15,22,2,0,6,28,5),f(0,8,10,-5,0,16,24,2,0,6,30,5),f(0,8,11,-5,0,17,26,2,0,6,32,5),f(0,9,11,-5,0,18,28,2,0,7,34,6),f(0,9,12,-6,0,19,29,2,0,7,36,6),f(0,10,13,-6,0,20,31,3,0,8,38,7),f(0,10,13,-6,0,21,33,3,0,8,40,7),f(0,10,14,-6,0,22,35,3,0,8,42,7),f(0,11,14,-7,0,23,36,3,0,9,44,8),f(0,11,15,-7,0,24,38,3,0,9,46,8)],R=t(6067),k={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const X=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];var J=function(e={},...g){const{mixins:t={},palette:B={},transitions:S={},typography:W={}}=e,f=(0,l.Z)(e,X);if(e.vars)throw new Error((0,I.Z)(18));const J=function(e){const{mode:g="light",contrastThreshold:t=3,tonalOffset:a=.2}=e,C=(0,l.Z)(e,h),i=e.primary||function(e="light"){return"dark"===e?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(g),B=e.secondary||function(e="light"){return"dark"===e?{main:d.Z[200],light:d.Z[50],dark:d.Z[400]}:{main:d.Z[500],light:d.Z[300],dark:d.Z[700]}}(g),S=e.error||function(e="light"){return"dark"===e?{main:A.Z[500],light:A.Z[300],dark:A.Z[700]}:{main:A.Z[700],light:A.Z[400],dark:A.Z[800]}}(g),W=e.info||function(e="light"){return"dark"===e?{main:b[400],light:b[300],dark:b[700]}:{main:b[700],light:b[500],dark:b[900]}}(g),V=e.success||function(e="light"){return"dark"===e?{main:Z[400],light:Z[300],dark:Z[700]}:{main:Z[800],light:Z[500],dark:Z[900]}}(g),f=e.warning||function(e="light"){return"dark"===e?{main:u[400],light:u[300],dark:u[700]}:{main:"#ed6c02",light:u[500],dark:u[900]}}(g);function v(e){return(0,r.mi)(e,G.text.primary)>=t?G.text.primary:p.text.primary}const R=({color:e,name:g,mainShade:t=500,lightShade:l=300,darkShade:o=700})=>{if(!(e=(0,n.Z)({},e)).main&&e[t]&&(e.main=e[t]),!e.hasOwnProperty("main"))throw new Error((0,I.Z)(11,g?` (${g})`:"",t));if("string"!=typeof e.main)throw new Error((0,I.Z)(12,g?` (${g})`:"",JSON.stringify(e.main)));return y(e,"light",l,a),y(e,"dark",o,a),e.contrastText||(e.contrastText=v(e.main)),e},k={dark:G,light:p};return(0,o.Z)((0,n.Z)({common:(0,n.Z)({},s),mode:g,primary:R({color:i,name:"primary"}),secondary:R({color:B,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:R({color:S,name:"error"}),warning:R({color:f,name:"warning"}),info:R({color:W,name:"info"}),success:R({color:V,name:"success"}),grey:c,contrastThreshold:t,getContrastText:v,augmentColor:R,tonalOffset:a},k[g]),C)}(B),Y=(0,a.Z)(e);let H=(0,o.Z)(Y,{mixins:(w=Y.breakpoints,x=t,(0,n.Z)({toolbar:{minHeight:56,[w.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[w.up("sm")]:{minHeight:64}}},x)),palette:J,shadows:v.slice(),typography:V(J,W),transitions:(0,R.ZP)(S),zIndex:(0,n.Z)({},k)});var w,x;return H=(0,o.Z)(H,f),H=g.reduce(((e,g)=>(0,o.Z)(e,g)),H),H.unstable_sxConfig=(0,n.Z)({},C.Z,null==f?void 0:f.unstable_sxConfig),H.unstable_sx=function(e){return(0,i.Z)({sx:e,theme:this})},H}},6067:function(e,g,t){"use strict";t.d(g,{ZP:function(){return r},x9:function(){return a}});var n=t(3366),l=t(7462);const I=["duration","easing","delay"],o={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},a={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function C(e){return`${Math.round(e)}ms`}function i(e){if(!e)return 0;const g=e/36;return Math.round(10*(4+15*g**.25+g/5))}function r(e){const g=(0,l.Z)({},o,e.easing),t=(0,l.Z)({},a,e.duration);return(0,l.Z)({getAutoHeightDuration:i,create:(e=["all"],l={})=>{const{duration:o=t.standard,easing:a=g.easeInOut,delay:i=0}=l;return(0,n.Z)(l,I),(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"==typeof o?o:C(o)} ${a} ${"string"==typeof i?i:C(i)}`)).join(",")}},e,{easing:g,duration:t})}},247:function(e,g,t){"use strict";const n=(0,t(3527).Z)();g.Z=n},606:function(e,g){"use strict";g.Z="$$material"},948:function(e,g,t){"use strict";t.d(g,{Dz:function(){return a},FO:function(){return o}});var n=t(2807),l=t(247),I=t(606);const o=e=>(0,n.x9)(e)&&"classes"!==e,a=n.x9,C=(0,n.ZP)({themeId:I.Z,defaultTheme:l.Z,rootShouldForwardProp:o});g.ZP=C},1657:function(e,g,t){"use strict";t.d(g,{Z:function(){return o}});var n=t(7333),l=t(247),I=t(606);function o({props:e,name:g}){return(0,n.Z)({props:e,name:g,defaultTheme:l.Z,themeId:I.Z})}},8216:function(e,g,t){"use strict";var n=t(4142);g.Z=n.Z},7450:function(e,g,t){"use strict";var n=t(9064);g.Z=n.Z},5949:function(e,g,t){"use strict";t.d(g,{Z:function(){return h}});var n=t(7462),l=t(7294),I=t(3366),o=t(512),a=t(4780),C=t(8216),i=t(1657),r=t(948),s=t(1588),c=t(4867);function d(e){return(0,c.Z)("MuiSvgIcon",e)}(0,s.Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var A=t(5893);const u=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,r.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,"inherit"!==t.color&&g[`color${(0,C.Z)(t.color)}`],g[`fontSize${(0,C.Z)(t.fontSize)}`]]}})((({theme:e,ownerState:g})=>{var t,n,l,I,o,a,C,i,r,s,c,d,A;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:g.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:null==(t=e.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(l=e.transitions)||null==(l=l.duration)?void 0:l.shorter}),fontSize:{inherit:"inherit",small:(null==(I=e.typography)||null==(o=I.pxToRem)?void 0:o.call(I,20))||"1.25rem",medium:(null==(a=e.typography)||null==(C=a.pxToRem)?void 0:C.call(a,24))||"1.5rem",large:(null==(i=e.typography)||null==(r=i.pxToRem)?void 0:r.call(i,35))||"2.1875rem"}[g.fontSize],color:null!=(s=null==(c=(e.vars||e).palette)||null==(c=c[g.color])?void 0:c.main)?s:{action:null==(d=(e.vars||e).palette)||null==(d=d.action)?void 0:d.active,disabled:null==(A=(e.vars||e).palette)||null==(A=A.action)?void 0:A.disabled,inherit:void 0}[g.color]}})),b=l.forwardRef((function(e,g){const t=(0,i.Z)({props:e,name:"MuiSvgIcon"}),{children:r,className:s,color:c="inherit",component:b="svg",fontSize:Z="medium",htmlColor:h,inheritViewBox:p=!1,titleAccess:G,viewBox:y="0 0 24 24"}=t,B=(0,I.Z)(t,u),S=l.isValidElement(r)&&"svg"===r.type,W=(0,n.Z)({},t,{color:c,component:b,fontSize:Z,instanceFontSize:e.fontSize,inheritViewBox:p,viewBox:y,hasSvgAsChild:S}),V={};p||(V.viewBox=y);const f=(e=>{const{color:g,fontSize:t,classes:n}=e,l={root:["root","inherit"!==g&&`color${(0,C.Z)(g)}`,`fontSize${(0,C.Z)(t)}`]};return(0,a.Z)(l,d,n)})(W);return(0,A.jsxs)(m,(0,n.Z)({as:b,className:(0,o.Z)(f.root,s),focusable:"false",color:h,"aria-hidden":!G||void 0,role:G?"img":void 0,ref:g},V,B,S&&r.props,{ownerState:W,children:[S?r.props.children:r,G?(0,A.jsx)("title",{children:G}):null]}))}));b.muiName="SvgIcon";var Z=b;function h(e,g){function t(t,l){return(0,A.jsx)(Z,(0,n.Z)({"data-testid":`${g}Icon`,ref:l},t,{children:e}))}return t.muiName=Z.muiName,l.memo(l.forwardRef(t))}},7144:function(e,g,t){"use strict";var n=t(9336);g.Z=n.Z},4298:function(e,g,t){"use strict";t.r(g),t.d(g,{capitalize:function(){return l.Z},createChainedFunction:function(){return I.Z},createSvgIcon:function(){return o.Z},debounce:function(){return a.Z},deprecatedPropType:function(){return C},isMuiElement:function(){return i.Z},ownerDocument:function(){return r.Z},ownerWindow:function(){return s.Z},requirePropFactory:function(){return c},setRef:function(){return d},unstable_ClassNameGenerator:function(){return G},unstable_useEnhancedEffect:function(){return A.Z},unstable_useId:function(){return u.Z},unsupportedProp:function(){return m},useControlled:function(){return b.Z},useEventCallback:function(){return Z.Z},useForkRef:function(){return h.Z},useIsFocusVisible:function(){return p.Z}});var n=t(7078),l=t(8216),I=t(7450),o=t(5949),a=t(7144),C=function(e,g){return()=>null},i=t(8502),r=t(8038),s=t(5340);t(7462);var c=function(e,g){return()=>null},d=t(7960).Z,A=t(8974),u=t(7909),m=function(e,g,t,n,l){return null},b=t(9299),Z=t(2068),h=t(1705),p=t(9674);const G={configure:e=>{n.Z.configure(e)}}},8502:function(e,g,t){"use strict";t.d(g,{Z:function(){return l}});var n=t(7294),l=function(e,g){return n.isValidElement(e)&&-1!==g.indexOf(e.type.muiName)}},8038:function(e,g,t){"use strict";var n=t(2690);g.Z=n.Z},5340:function(e,g,t){"use strict";var n=t(4161);g.Z=n.Z},9299:function(e,g,t){"use strict";var n=t(9032);g.Z=n.Z},8974:function(e,g,t){"use strict";var n=t(3546);g.Z=n.Z},2068:function(e,g,t){"use strict";var n=t(9948);g.Z=n.Z},1705:function(e,g,t){"use strict";var n=t(3703);g.Z=n.Z},7909:function(e,g,t){"use strict";var n=t(2996);g.Z=n.Z},9674:function(e,g,t){"use strict";var n=t(9962);g.Z=n.Z},9378:function(e,g,t){"use strict";t.d(g,{ZP:function(){return Z},Co:function(){return h}});var n=t(7462),l=t(7294),I=t(5042),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,I.Z)((function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),C=t(5260),i=t(444),r=t(6797),s=t(7278),c=a,d=function(e){return"theme"!==e},A=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?c:d},u=function(e,g,t){var n;if(g){var l=g.shouldForwardProp;n=e.__emotion_forwardProp&&l?function(g){return e.__emotion_forwardProp(g)&&l(g)}:l}return"function"!=typeof n&&t&&(n=e.__emotion_forwardProp),n},m=function(e){var g=e.cache,t=e.serialized,n=e.isStringTag;return(0,i.hC)(g,t,n),(0,s.L)((function(){return(0,i.My)(g,t,n)})),null},b=function e(g,t){var I,o,a=g.__emotion_real===g,s=a&&g.__emotion_base||g;void 0!==t&&(I=t.label,o=t.target);var c=u(g,t,a),d=c||A(s),b=!d("as");return function(){var Z=arguments,h=a&&void 0!==g.__emotion_styles?g.__emotion_styles.slice(0):[];if(void 0!==I&&h.push("label:"+I+";"),null==Z[0]||void 0===Z[0].raw)h.push.apply(h,Z);else{h.push(Z[0][0]);for(var p=Z.length,G=1;G<p;G++)h.push(Z[G],Z[0][G])}var y=(0,C.w)((function(e,g,t){var n=b&&e.as||s,I="",a=[],u=e;if(null==e.theme){for(var Z in u={},e)u[Z]=e[Z];u.theme=l.useContext(C.T)}"string"==typeof e.className?I=(0,i.fp)(g.registered,a,e.className):null!=e.className&&(I=e.className+" ");var p=(0,r.O)(h.concat(a),g.registered,u);I+=g.key+"-"+p.name,void 0!==o&&(I+=" "+o);var G=b&&void 0===c?A(n):d,y={};for(var B in e)b&&"as"===B||G(B)&&(y[B]=e[B]);return y.className=I,y.ref=t,l.createElement(l.Fragment,null,l.createElement(m,{cache:g,serialized:p,isStringTag:"string"==typeof n}),l.createElement(n,y))}));return y.displayName=void 0!==I?I:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",y.defaultProps=g.defaultProps,y.__emotion_real=y,y.__emotion_base=s,y.__emotion_styles=h,y.__emotion_forwardProp=c,Object.defineProperty(y,"toString",{value:function(){return"."+o}}),y.withComponent=function(g,l){return e(g,(0,n.Z)({},t,l,{shouldForwardProp:u(y,l,!0)})).apply(void 0,h)},y}}.bind();function Z(e,g){return b(e,g)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){b[e]=b(e)}));const h=(e,g)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=g(e.__emotion_styles))}},5408:function(e,g,t){"use strict";t.d(g,{L7:function(){return C},P$:function(){return r},VO:function(){return l},W8:function(){return a},dt:function(){return i},k9:function(){return o}});var n=t(9766);const l={xs:0,sm:600,md:900,lg:1200,xl:1536},I={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${l[e]}px)`};function o(e,g,t){const n=e.theme||{};if(Array.isArray(g)){const e=n.breakpoints||I;return g.reduce(((n,l,I)=>(n[e.up(e.keys[I])]=t(g[I]),n)),{})}if("object"==typeof g){const e=n.breakpoints||I;return Object.keys(g).reduce(((n,I)=>{if(-1!==Object.keys(e.values||l).indexOf(I))n[e.up(I)]=t(g[I],I);else{const e=I;n[e]=g[e]}return n}),{})}return t(g)}function a(e={}){var g;return(null==(g=e.keys)?void 0:g.reduce(((g,t)=>(g[e.up(t)]={},g)),{}))||{}}function C(e,g){return e.reduce(((e,g)=>{const t=e[g];return(!t||0===Object.keys(t).length)&&delete e[g],e}),g)}function i(e,...g){const t=a(e),l=[t,...g].reduce(((e,g)=>(0,n.Z)(e,g)),{});return C(Object.keys(t),l)}function r({values:e,breakpoints:g,base:t}){const n=t||function(e,g){if("object"!=typeof e)return{};const t={},n=Object.keys(g);return Array.isArray(e)?n.forEach(((g,n)=>{n<e.length&&(t[g]=!0)})):n.forEach((g=>{null!=e[g]&&(t[g]=!0)})),t}(e,g),l=Object.keys(n);if(0===l.length)return e;let I;return l.reduce(((g,t,n)=>(Array.isArray(e)?(g[t]=null!=e[n]?e[n]:e[I],I=n):"object"==typeof e?(g[t]=null!=e[t]?e[t]:e[I],I=t):g[t]=e,g)),{})}},1796:function(e,g,t){"use strict";t.d(g,{$n:function(){return s},Fq:function(){return i},_j:function(){return r},mi:function(){return C}});var n=t(1387);function l(e,g=0,t=1){return Math.min(Math.max(g,e),t)}function I(e){if(e.type)return e;if("#"===e.charAt(0))return I(function(e){e=e.slice(1);const g=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let t=e.match(g);return t&&1===t[0].length&&(t=t.map((e=>e+e))),t?`rgb${4===t.length?"a":""}(${t.map(((e,g)=>g<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const g=e.indexOf("("),t=e.substring(0,g);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(t))throw new Error((0,n.Z)(9,e));let l,o=e.substring(g+1,e.length-1);if("color"===t){if(o=o.split(" "),l=o.shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l))throw new Error((0,n.Z)(10,l))}else o=o.split(",");return o=o.map((e=>parseFloat(e))),{type:t,values:o,colorSpace:l}}function o(e){const{type:g,colorSpace:t}=e;let{values:n}=e;return-1!==g.indexOf("rgb")?n=n.map(((e,g)=>g<3?parseInt(e,10):e)):-1!==g.indexOf("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),n=-1!==g.indexOf("color")?`${t} ${n.join(" ")}`:`${n.join(", ")}`,`${g}(${n})`}function a(e){let g="hsl"===(e=I(e)).type||"hsla"===e.type?I(function(e){e=I(e);const{values:g}=e,t=g[0],n=g[1]/100,l=g[2]/100,a=n*Math.min(l,1-l),C=(e,g=(e+t/30)%12)=>l-a*Math.max(Math.min(g-3,9-g,1),-1);let i="rgb";const r=[Math.round(255*C(0)),Math.round(255*C(8)),Math.round(255*C(4))];return"hsla"===e.type&&(i+="a",r.push(g[3])),o({type:i,values:r})}(e)).values:e.values;return g=g.map((g=>("color"!==e.type&&(g/=255),g<=.03928?g/12.92:((g+.055)/1.055)**2.4))),Number((.2126*g[0]+.7152*g[1]+.0722*g[2]).toFixed(3))}function C(e,g){const t=a(e),n=a(g);return(Math.max(t,n)+.05)/(Math.min(t,n)+.05)}function i(e,g){return e=I(e),g=l(g),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${g}`:e.values[3]=g,o(e)}function r(e,g){if(e=I(e),g=l(g),-1!==e.type.indexOf("hsl"))e.values[2]*=1-g;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(let t=0;t<3;t+=1)e.values[t]*=1-g;return o(e)}function s(e,g){if(e=I(e),g=l(g),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*g;else if(-1!==e.type.indexOf("rgb"))for(let t=0;t<3;t+=1)e.values[t]+=(255-e.values[t])*g;else if(-1!==e.type.indexOf("color"))for(let t=0;t<3;t+=1)e.values[t]+=(1-e.values[t])*g;return o(e)}},2807:function(e,g,t){"use strict";t.d(g,{ZP:function(){return G},x9:function(){return m}});var n=t(3366),l=t(7462),I=t(9378),o=t(6268),a=t(4142);const C=["variant"];function i(e){return 0===e.length}function r(e){const{variant:g}=e,t=(0,n.Z)(e,C);let l=g||"";return Object.keys(t).sort().forEach((g=>{l+="color"===g?i(l)?e[g]:(0,a.Z)(e[g]):`${i(l)?g:(0,a.Z)(g)}${(0,a.Z)(e[g].toString())}`})),l}var s=t(6523);const c=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],d=(e,g)=>g.components&&g.components[e]&&g.components[e].styleOverrides?g.components[e].styleOverrides:null,A=(e,g)=>{let t=[];g&&g.components&&g.components[e]&&g.components[e].variants&&(t=g.components[e].variants);const n={};return t.forEach((e=>{const g=r(e.props);n[g]=e.style})),n},u=(e,g,t,n)=>{var l;const{ownerState:I={}}=e,o=[],a=null==t||null==(l=t.components)||null==(l=l[n])?void 0:l.variants;return a&&a.forEach((t=>{let n=!0;Object.keys(t.props).forEach((g=>{I[g]!==t.props[g]&&e[g]!==t.props[g]&&(n=!1)})),n&&o.push(g[r(t.props)])})),o};function m(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}const b=(0,o.Z)(),Z=e=>e?e.charAt(0).toLowerCase()+e.slice(1):e;function h({defaultTheme:e,theme:g,themeId:t}){return n=g,0===Object.keys(n).length?e:g[t]||g;var n}function p(e){return e?(g,t)=>t[e]:null}function G(e={}){const{themeId:g,defaultTheme:t=b,rootShouldForwardProp:o=m,slotShouldForwardProp:a=m}=e,C=e=>(0,s.Z)((0,l.Z)({},e,{theme:h((0,l.Z)({},e,{defaultTheme:t,themeId:g}))}));return C.__mui_systemSx=!0,(e,i={})=>{(0,I.Co)(e,(e=>e.filter((e=>!(null!=e&&e.__mui_systemSx)))));const{name:r,slot:s,skipVariantsResolver:b,skipSx:G,overridesResolver:y=p(Z(s))}=i,B=(0,n.Z)(i,c),S=void 0!==b?b:s&&"Root"!==s&&"root"!==s||!1,W=G||!1;let V=m;"Root"===s||"root"===s?V=o:s?V=a:function(e){return"string"==typeof e&&e.charCodeAt(0)>96}(e)&&(V=void 0);const f=(0,I.ZP)(e,(0,l.Z)({shouldForwardProp:V,label:void 0},B)),v=(n,...I)=>{const o=I?I.map((e=>"function"==typeof e&&e.__emotion_real!==e?n=>e((0,l.Z)({},n,{theme:h((0,l.Z)({},n,{defaultTheme:t,themeId:g}))})):e)):[];let a=n;r&&y&&o.push((e=>{const n=h((0,l.Z)({},e,{defaultTheme:t,themeId:g})),I=d(r,n);if(I){const g={};return Object.entries(I).forEach((([t,I])=>{g[t]="function"==typeof I?I((0,l.Z)({},e,{theme:n})):I})),y(e,g)}return null})),r&&!S&&o.push((e=>{const n=h((0,l.Z)({},e,{defaultTheme:t,themeId:g}));return u(e,A(r,n),n,r)})),W||o.push(C);const i=o.length-I.length;if(Array.isArray(n)&&i>0){const e=new Array(i).fill("");a=[...n,...e],a.raw=[...n.raw,...e]}else"function"==typeof n&&n.__emotion_real!==n&&(a=e=>n((0,l.Z)({},e,{theme:h((0,l.Z)({},e,{defaultTheme:t,themeId:g}))})));const s=f(a,...o);return e.muiName&&(s.muiName=e.muiName),s};return f.withConfig&&(v.withConfig=f.withConfig),v}}},6268:function(e,g,t){"use strict";t.d(g,{Z:function(){return c}});var n=t(7462),l=t(3366),I=t(9766);const o=["values","unit","step"];var a={borderRadius:4},C=t(2605),i=t(6523),r=t(8010);const s=["breakpoints","palette","spacing","shape"];var c=function(e={},...g){const{breakpoints:t={},palette:c={},spacing:d,shape:A={}}=e,u=(0,l.Z)(e,s),m=function(e){const{values:g={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:I=5}=e,a=(0,l.Z)(e,o),C=(e=>{const g=Object.keys(e).map((g=>({key:g,val:e[g]})))||[];return g.sort(((e,g)=>e.val-g.val)),g.reduce(((e,g)=>(0,n.Z)({},e,{[g.key]:g.val})),{})})(g),i=Object.keys(C);function r(e){return`@media (min-width:${"number"==typeof g[e]?g[e]:e}${t})`}function s(e){return`@media (max-width:${("number"==typeof g[e]?g[e]:e)-I/100}${t})`}function c(e,n){const l=i.indexOf(n);return`@media (min-width:${"number"==typeof g[e]?g[e]:e}${t}) and (max-width:${(-1!==l&&"number"==typeof g[i[l]]?g[i[l]]:n)-I/100}${t})`}return(0,n.Z)({keys:i,values:C,up:r,down:s,between:c,only:function(e){return i.indexOf(e)+1<i.length?c(e,i[i.indexOf(e)+1]):r(e)},not:function(e){const g=i.indexOf(e);return 0===g?r(i[1]):g===i.length-1?s(i[g]):c(e,i[i.indexOf(e)+1]).replace("@media","@media not all and")},unit:t},a)}(t),b=function(e=8){if(e.mui)return e;const g=(0,C.hB)({spacing:e}),t=(...e)=>(0===e.length?[1]:e).map((e=>{const t=g(e);return"number"==typeof t?`${t}px`:t})).join(" ");return t.mui=!0,t}(d);let Z=(0,I.Z)({breakpoints:m,direction:"ltr",components:{},palette:(0,n.Z)({mode:"light"},c),spacing:b,shape:(0,n.Z)({},a,A)},u);return Z=g.reduce(((e,g)=>(0,I.Z)(e,g)),Z),Z.unstable_sxConfig=(0,n.Z)({},r.Z,null==u?void 0:u.unstable_sxConfig),Z.unstable_sx=function(e){return(0,i.Z)({sx:e,theme:this})},Z}},7730:function(e,g,t){"use strict";var n=t(9766);g.Z=function(e,g){return g?(0,n.Z)(e,g,{clone:!1}):e}},2605:function(e,g,t){"use strict";t.d(g,{hB:function(){return A},eI:function(){return d},NA:function(){return u},e6:function(){return b},o3:function(){return Z}});var n=t(5408),l=t(4844),I=t(7730);const o={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},C={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},i=function(e){const g={};return e=>(void 0===g[e]&&(g[e]=(e=>{if(e.length>2){if(!C[e])return[e];e=C[e]}const[g,t]=e.split(""),n=o[g],l=a[t]||"";return Array.isArray(l)?l.map((e=>n+e)):[n+l]})(e)),g[e])}(),r=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],s=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],c=[...r,...s];function d(e,g,t,n){var I;const o=null!=(I=(0,l.DW)(e,g,!1))?I:t;return"number"==typeof o?e=>"string"==typeof e?e:o*e:Array.isArray(o)?e=>"string"==typeof e?e:o[e]:"function"==typeof o?o:()=>{}}function A(e){return d(e,"spacing",8)}function u(e,g){if("string"==typeof g||null==g)return g;const t=e(Math.abs(g));return g>=0?t:"number"==typeof t?-t:`-${t}`}function m(e,g){const t=A(e.theme);return Object.keys(e).map((l=>function(e,g,t,l){if(-1===g.indexOf(t))return null;const I=function(e,g){return t=>e.reduce(((e,n)=>(e[n]=u(g,t),e)),{})}(i(t),l),o=e[t];return(0,n.k9)(e,o,I)}(e,g,l,t))).reduce(I.Z,{})}function b(e){return m(e,r)}function Z(e){return m(e,s)}function h(e){return m(e,c)}b.propTypes={},b.filterProps=r,Z.propTypes={},Z.filterProps=s,h.propTypes={},h.filterProps=c},4844:function(e,g,t){"use strict";t.d(g,{DW:function(){return I},Jq:function(){return o}});var n=t(4142),l=t(5408);function I(e,g,t=!0){if(!g||"string"!=typeof g)return null;if(e&&e.vars&&t){const t=`vars.${g}`.split(".").reduce(((e,g)=>e&&e[g]?e[g]:null),e);if(null!=t)return t}return g.split(".").reduce(((e,g)=>e&&null!=e[g]?e[g]:null),e)}function o(e,g,t,n=t){let l;return l="function"==typeof e?e(t):Array.isArray(e)?e[t]||n:I(e,t)||n,g&&(l=g(l,n,e)),l}g.ZP=function(e){const{prop:g,cssProperty:t=e.prop,themeKey:a,transform:C}=e,i=e=>{if(null==e[g])return null;const i=e[g],r=I(e.theme,a)||{};return(0,l.k9)(e,i,(e=>{let l=o(r,C,e);return e===l&&"string"==typeof e&&(l=o(r,C,`${g}${"default"===e?"":(0,n.Z)(e)}`,e)),!1===t?l:{[t]:l}}))};return i.propTypes={},i.filterProps=[g],i}},8010:function(e,g,t){"use strict";t.d(g,{Z:function(){return X}});var n=t(2605),l=t(4844),I=t(7730),o=function(...e){const g=e.reduce(((e,g)=>(g.filterProps.forEach((t=>{e[t]=g})),e)),{}),t=e=>Object.keys(e).reduce(((t,n)=>g[n]?(0,I.Z)(t,g[n](e)):t),{});return t.propTypes={},t.filterProps=e.reduce(((e,g)=>e.concat(g.filterProps)),[]),t},a=t(5408);function C(e){return"number"!=typeof e?e:`${e}px solid`}const i=(0,l.ZP)({prop:"border",themeKey:"borders",transform:C}),r=(0,l.ZP)({prop:"borderTop",themeKey:"borders",transform:C}),s=(0,l.ZP)({prop:"borderRight",themeKey:"borders",transform:C}),c=(0,l.ZP)({prop:"borderBottom",themeKey:"borders",transform:C}),d=(0,l.ZP)({prop:"borderLeft",themeKey:"borders",transform:C}),A=(0,l.ZP)({prop:"borderColor",themeKey:"palette"}),u=(0,l.ZP)({prop:"borderTopColor",themeKey:"palette"}),m=(0,l.ZP)({prop:"borderRightColor",themeKey:"palette"}),b=(0,l.ZP)({prop:"borderBottomColor",themeKey:"palette"}),Z=(0,l.ZP)({prop:"borderLeftColor",themeKey:"palette"}),h=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const g=(0,n.eI)(e.theme,"shape.borderRadius",4,"borderRadius"),t=e=>({borderRadius:(0,n.NA)(g,e)});return(0,a.k9)(e,e.borderRadius,t)}return null};h.propTypes={},h.filterProps=["borderRadius"],o(i,r,s,c,d,A,u,m,b,Z,h);const p=e=>{if(void 0!==e.gap&&null!==e.gap){const g=(0,n.eI)(e.theme,"spacing",8,"gap"),t=e=>({gap:(0,n.NA)(g,e)});return(0,a.k9)(e,e.gap,t)}return null};p.propTypes={},p.filterProps=["gap"];const G=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const g=(0,n.eI)(e.theme,"spacing",8,"columnGap"),t=e=>({columnGap:(0,n.NA)(g,e)});return(0,a.k9)(e,e.columnGap,t)}return null};G.propTypes={},G.filterProps=["columnGap"];const y=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const g=(0,n.eI)(e.theme,"spacing",8,"rowGap"),t=e=>({rowGap:(0,n.NA)(g,e)});return(0,a.k9)(e,e.rowGap,t)}return null};function B(e,g){return"grey"===g?g:e}function S(e){return e<=1&&0!==e?100*e+"%":e}y.propTypes={},y.filterProps=["rowGap"],o(p,G,y,(0,l.ZP)({prop:"gridColumn"}),(0,l.ZP)({prop:"gridRow"}),(0,l.ZP)({prop:"gridAutoFlow"}),(0,l.ZP)({prop:"gridAutoColumns"}),(0,l.ZP)({prop:"gridAutoRows"}),(0,l.ZP)({prop:"gridTemplateColumns"}),(0,l.ZP)({prop:"gridTemplateRows"}),(0,l.ZP)({prop:"gridTemplateAreas"}),(0,l.ZP)({prop:"gridArea"})),o((0,l.ZP)({prop:"color",themeKey:"palette",transform:B}),(0,l.ZP)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:B}),(0,l.ZP)({prop:"backgroundColor",themeKey:"palette",transform:B}));const W=(0,l.ZP)({prop:"width",transform:S}),V=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const g=g=>{var t,n;const l=(null==(t=e.theme)||null==(t=t.breakpoints)||null==(t=t.values)?void 0:t[g])||a.VO[g];return l?"px"!==(null==(n=e.theme)||null==(n=n.breakpoints)?void 0:n.unit)?{maxWidth:`${l}${e.theme.breakpoints.unit}`}:{maxWidth:l}:{maxWidth:S(g)}};return(0,a.k9)(e,e.maxWidth,g)}return null};V.filterProps=["maxWidth"];const f=(0,l.ZP)({prop:"minWidth",transform:S}),v=(0,l.ZP)({prop:"height",transform:S}),R=(0,l.ZP)({prop:"maxHeight",transform:S}),k=(0,l.ZP)({prop:"minHeight",transform:S});(0,l.ZP)({prop:"size",cssProperty:"width",transform:S}),(0,l.ZP)({prop:"size",cssProperty:"height",transform:S}),o(W,V,f,v,R,k,(0,l.ZP)({prop:"boxSizing"}));var X={border:{themeKey:"borders",transform:C},borderTop:{themeKey:"borders",transform:C},borderRight:{themeKey:"borders",transform:C},borderBottom:{themeKey:"borders",transform:C},borderLeft:{themeKey:"borders",transform:C},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:h},color:{themeKey:"palette",transform:B},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:B},backgroundColor:{themeKey:"palette",transform:B},p:{style:n.o3},pt:{style:n.o3},pr:{style:n.o3},pb:{style:n.o3},pl:{style:n.o3},px:{style:n.o3},py:{style:n.o3},padding:{style:n.o3},paddingTop:{style:n.o3},paddingRight:{style:n.o3},paddingBottom:{style:n.o3},paddingLeft:{style:n.o3},paddingX:{style:n.o3},paddingY:{style:n.o3},paddingInline:{style:n.o3},paddingInlineStart:{style:n.o3},paddingInlineEnd:{style:n.o3},paddingBlock:{style:n.o3},paddingBlockStart:{style:n.o3},paddingBlockEnd:{style:n.o3},m:{style:n.e6},mt:{style:n.e6},mr:{style:n.e6},mb:{style:n.e6},ml:{style:n.e6},mx:{style:n.e6},my:{style:n.e6},margin:{style:n.e6},marginTop:{style:n.e6},marginRight:{style:n.e6},marginBottom:{style:n.e6},marginLeft:{style:n.e6},marginX:{style:n.e6},marginY:{style:n.e6},marginInline:{style:n.e6},marginInlineStart:{style:n.e6},marginInlineEnd:{style:n.e6},marginBlock:{style:n.e6},marginBlockStart:{style:n.e6},marginBlockEnd:{style:n.e6},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:p},rowGap:{style:y},columnGap:{style:G},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:S},maxWidth:{style:V},minWidth:{transform:S},height:{transform:S},maxHeight:{transform:S},minHeight:{transform:S},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}}},6523:function(e,g,t){"use strict";var n=t(4142),l=t(7730),I=t(4844),o=t(5408),a=t(8010);const C=function(){function e(e,g,t,l){const a={[e]:g,theme:t},C=l[e];if(!C)return{[e]:g};const{cssProperty:i=e,themeKey:r,transform:s,style:c}=C;if(null==g)return null;if("typography"===r&&"inherit"===g)return{[e]:g};const d=(0,I.DW)(t,r)||{};return c?c(a):(0,o.k9)(a,g,(g=>{let t=(0,I.Jq)(d,s,g);return g===t&&"string"==typeof g&&(t=(0,I.Jq)(d,s,`${e}${"default"===g?"":(0,n.Z)(g)}`,g)),!1===i?t:{[i]:t}}))}return function g(t){var n;const{sx:I,theme:C={}}=t||{};if(!I)return null;const i=null!=(n=C.unstable_sxConfig)?n:a.Z;function r(t){let n=t;if("function"==typeof t)n=t(C);else if("object"!=typeof t)return t;if(!n)return null;const I=(0,o.W8)(C.breakpoints),a=Object.keys(I);let r=I;return Object.keys(n).forEach((t=>{const I="function"==typeof(a=n[t])?a(C):a;var a;if(null!=I)if("object"==typeof I)if(i[t])r=(0,l.Z)(r,e(t,I,C,i));else{const e=(0,o.k9)({theme:C},I,(e=>({[t]:e})));!function(...e){const g=e.reduce(((e,g)=>e.concat(Object.keys(g))),[]),t=new Set(g);return e.every((e=>t.size===Object.keys(e).length))}(e,I)?r=(0,l.Z)(r,e):r[t]=g({sx:I,theme:C})}else r=(0,l.Z)(r,e(t,I,C,i))})),(0,o.L7)(a,r)}return Array.isArray(I)?I.map(r):r(I)}}();C.filterProps=["sx"],g.Z=C},6682:function(e,g,t){"use strict";var n=t(6268),l=t(4168);const I=(0,n.Z)();g.Z=function(e=I){return(0,l.Z)(e)}},7333:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(7925),l=t(6682);function I({props:e,name:g,defaultTheme:t,themeId:I}){let o=(0,l.Z)(t);I&&(o=o[I]||o);const a=function(e){const{theme:g,name:t,props:l}=e;return g&&g.components&&g.components[t]&&g.components[t].defaultProps?(0,n.Z)(g.components[t].defaultProps,l):l}({theme:o,name:g,props:e});return a}},4168:function(e,g,t){"use strict";var n=t(7294),l=t(5260);g.Z=function(e=null){const g=n.useContext(l.T);return g&&(t=g,0!==Object.keys(t).length)?g:e;var t}},7078:function(e,g){"use strict";const t=e=>e,n=(()=>{let e=t;return{configure(g){e=g},generate(g){return e(g)},reset(){e=t}}})();g.Z=n},4142:function(e,g,t){"use strict";t.d(g,{Z:function(){return l}});var n=t(1387);function l(e){if("string"!=typeof e)throw new Error((0,n.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4780:function(e,g,t){"use strict";function n(e,g,t=void 0){const n={};return Object.keys(e).forEach((l=>{n[l]=e[l].reduce(((e,n)=>{if(n){const l=g(n);""!==l&&e.push(l),t&&t[n]&&e.push(t[n])}return e}),[]).join(" ")})),n}t.d(g,{Z:function(){return n}})},9064:function(e,g,t){"use strict";function n(...e){return e.reduce(((e,g)=>null==g?e:function(...t){e.apply(this,t),g.apply(this,t)}),(()=>{}))}t.d(g,{Z:function(){return n}})},9336:function(e,g,t){"use strict";function n(e,g=166){let t;function n(...n){clearTimeout(t),t=setTimeout((()=>{e.apply(this,n)}),g)}return n.clear=()=>{clearTimeout(t)},n}t.d(g,{Z:function(){return n}})},9766:function(e,g,t){"use strict";t.d(g,{P:function(){return l},Z:function(){return o}});var n=t(7462);function l(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function I(e){if(!l(e))return e;const g={};return Object.keys(e).forEach((t=>{g[t]=I(e[t])})),g}function o(e,g,t={clone:!0}){const a=t.clone?(0,n.Z)({},e):e;return l(e)&&l(g)&&Object.keys(g).forEach((n=>{"__proto__"!==n&&(l(g[n])&&n in e&&l(e[n])?a[n]=o(e[n],g[n],t):t.clone?a[n]=l(g[n])?I(g[n]):g[n]:a[n]=g[n])})),a}},1387:function(e,g,t){"use strict";function n(e){let g="https://mui.com/production-error/?code="+e;for(let e=1;e<arguments.length;e+=1)g+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+e+"; visit "+g+" for the full message."}t.d(g,{Z:function(){return n}})},4867:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(7078);const l={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function I(e,g,t="Mui"){const I=l[g];return I?`${t}-${I}`:`${n.Z.generate(e)}-${g}`}},1588:function(e,g,t){"use strict";t.d(g,{Z:function(){return l}});var n=t(4867);function l(e,g,t="Mui"){const l={};return g.forEach((g=>{l[g]=(0,n.Z)(e,g,t)})),l}},2690:function(e,g,t){"use strict";function n(e){return e&&e.ownerDocument||document}t.d(g,{Z:function(){return n}})},4161:function(e,g,t){"use strict";t.d(g,{Z:function(){return l}});var n=t(2690);function l(e){return(0,n.Z)(e).defaultView||window}},7925:function(e,g,t){"use strict";t.d(g,{Z:function(){return l}});var n=t(7462);function l(e,g){const t=(0,n.Z)({},g);return Object.keys(e).forEach((I=>{if(I.toString().match(/^(components|slots)$/))t[I]=(0,n.Z)({},e[I],t[I]);else if(I.toString().match(/^(componentsProps|slotProps)$/)){const o=e[I]||{},a=g[I];t[I]={},a&&Object.keys(a)?o&&Object.keys(o)?(t[I]=(0,n.Z)({},a),Object.keys(o).forEach((e=>{t[I][e]=l(o[e],a[e])}))):t[I]=a:t[I]=o}else void 0===t[I]&&(t[I]=e[I])})),t}},7960:function(e,g,t){"use strict";function n(e,g){"function"==typeof e?e(g):e&&(e.current=g)}t.d(g,{Z:function(){return n}})},9032:function(e,g,t){"use strict";t.d(g,{Z:function(){return l}});var n=t(7294);function l({controlled:e,default:g,name:t,state:l="value"}){const{current:I}=n.useRef(void 0!==e),[o,a]=n.useState(g);return[I?e:o,n.useCallback((e=>{I||a(e)}),[])]}},3546:function(e,g,t){"use strict";var n=t(7294);const l="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;g.Z=l},9948:function(e,g,t){"use strict";var n=t(7294),l=t(3546);g.Z=function(e){const g=n.useRef(e);return(0,l.Z)((()=>{g.current=e})),n.useCallback(((...e)=>(0,g.current)(...e)),[])}},3703:function(e,g,t){"use strict";t.d(g,{Z:function(){return I}});var n=t(7294),l=t(7960);function I(...e){return n.useMemo((()=>e.every((e=>null==e))?null:g=>{e.forEach((e=>{(0,l.Z)(e,g)}))}),e)}},2996:function(e,g,t){"use strict";var n;t.d(g,{Z:function(){return a}});var l=t(7294);let I=0;const o=(n||(n=t.t(l,2)))["useId".toString()];function a(e){if(void 0!==o){const g=o();return null!=e?e:g}return function(e){const[g,t]=l.useState(e),n=e||g;return l.useEffect((()=>{null==g&&(I+=1,t(`mui-${I}`))}),[g]),n}(e)}},9962:function(e,g,t){"use strict";t.d(g,{Z:function(){return s}});var n=t(7294);let l,I=!0,o=!1;const a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function C(e){e.metaKey||e.altKey||e.ctrlKey||(I=!0)}function i(){I=!1}function r(){"hidden"===this.visibilityState&&o&&(I=!0)}function s(){const e=n.useCallback((e=>{var g;null!=e&&((g=e.ownerDocument).addEventListener("keydown",C,!0),g.addEventListener("mousedown",i,!0),g.addEventListener("pointerdown",i,!0),g.addEventListener("touchstart",i,!0),g.addEventListener("visibilitychange",r,!0))}),[]),g=n.useRef(!1);return{isFocusVisibleRef:g,onFocus:function(e){return!!function(e){const{target:g}=e;try{return g.matches(":focus-visible")}catch(e){}return I||function(e){const{type:g,tagName:t}=e;return!("INPUT"!==t||!a[g]||e.readOnly)||"TEXTAREA"===t&&!e.readOnly||!!e.isContentEditable}(g)}(e)&&(g.current=!0,!0)},onBlur:function(){return!!g.current&&(o=!0,window.clearTimeout(l),l=window.setTimeout((()=>{o=!1}),100),g.current=!1,!0)},ref:e}}},8679:function(e,g,t){"use strict";var n=t(1296),l={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},I={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function C(e){return n.isMemo(e)?o:a[e.$$typeof]||l}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=o;var i=Object.defineProperty,r=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,A=Object.prototype;e.exports=function e(g,t,n){if("string"!=typeof t){if(A){var l=d(t);l&&l!==A&&e(g,l,n)}var o=r(t);s&&(o=o.concat(s(t)));for(var a=C(g),u=C(t),m=0;m<o.length;++m){var b=o[m];if(!(I[b]||n&&n[b]||u&&u[b]||a&&a[b])){var Z=c(t,b);try{i(g,b,Z)}catch(e){}}}}return g}},6103:function(e,g){"use strict";var t="function"==typeof Symbol&&Symbol.for,n=t?Symbol.for("react.element"):60103,l=t?Symbol.for("react.portal"):60106,I=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,C=t?Symbol.for("react.provider"):60109,i=t?Symbol.for("react.context"):60110,r=t?Symbol.for("react.async_mode"):60111,s=t?Symbol.for("react.concurrent_mode"):60111,c=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,A=t?Symbol.for("react.suspense_list"):60120,u=t?Symbol.for("react.memo"):60115,m=t?Symbol.for("react.lazy"):60116,b=t?Symbol.for("react.block"):60121,Z=t?Symbol.for("react.fundamental"):60117,h=t?Symbol.for("react.responder"):60118,p=t?Symbol.for("react.scope"):60119;function G(e){if("object"==typeof e&&null!==e){var g=e.$$typeof;switch(g){case n:switch(e=e.type){case r:case s:case I:case a:case o:case d:return e;default:switch(e=e&&e.$$typeof){case i:case c:case m:case u:case C:return e;default:return g}}case l:return g}}}function y(e){return G(e)===s}g.AsyncMode=r,g.ConcurrentMode=s,g.ContextConsumer=i,g.ContextProvider=C,g.Element=n,g.ForwardRef=c,g.Fragment=I,g.Lazy=m,g.Memo=u,g.Portal=l,g.Profiler=a,g.StrictMode=o,g.Suspense=d,g.isAsyncMode=function(e){return y(e)||G(e)===r},g.isConcurrentMode=y,g.isContextConsumer=function(e){return G(e)===i},g.isContextProvider=function(e){return G(e)===C},g.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},g.isForwardRef=function(e){return G(e)===c},g.isFragment=function(e){return G(e)===I},g.isLazy=function(e){return G(e)===m},g.isMemo=function(e){return G(e)===u},g.isPortal=function(e){return G(e)===l},g.isProfiler=function(e){return G(e)===a},g.isStrictMode=function(e){return G(e)===o},g.isSuspense=function(e){return G(e)===d},g.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===I||e===s||e===a||e===o||e===d||e===A||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===u||e.$$typeof===C||e.$$typeof===i||e.$$typeof===c||e.$$typeof===Z||e.$$typeof===h||e.$$typeof===p||e.$$typeof===b)},g.typeOf=G},1296:function(e,g,t){"use strict";e.exports=t(6103)},1143:function(e){"use strict";e.exports=function(e,g,t,n,l,I,o,a){if(!e){var C;if(void 0===g)C=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=[t,n,l,I,o,a],r=0;(C=new Error(g.replace(/%s/g,(function(){return i[r++]})))).name="Invariant Violation"}throw C.framesToPop=1,C}}},2703:function(e,g,t){"use strict";var n=t(414);function l(){}function I(){}I.resetWarningCache=l,e.exports=function(){function e(e,g,t,l,I,o){if(o!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function g(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:I,resetWarningCache:l};return t.PropTypes=t,t}},5697:function(e,g,t){e.exports=t(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4448:function(e,g,t){"use strict";var n=t(7294),l=t(3840);function I(e){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)g+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function C(e,g){i(e,g),i(e+"Capture",g)}function i(e,g){for(a[e]=g,e=0;e<g.length;e++)o.add(g[e])}var r=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),s=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},A={};function u(e,g,t,n,l,I,o){this.acceptsBooleans=2===g||3===g||4===g,this.attributeName=n,this.attributeNamespace=l,this.mustUseProperty=t,this.propertyName=e,this.type=g,this.sanitizeURL=I,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new u(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var g=e[0];m[g]=new u(g,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new u(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new u(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new u(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new u(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new u(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new u(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new u(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function Z(e){return e[1].toUpperCase()}function h(e,g,t,n){var l=m.hasOwnProperty(g)?m[g]:null;(null!==l?0!==l.type:n||!(2<g.length)||"o"!==g[0]&&"O"!==g[0]||"n"!==g[1]&&"N"!==g[1])&&(function(e,g,t,n){if(null==g||function(e,g,t,n){if(null!==t&&0===t.type)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,g,t,n))return!0;if(n)return!1;if(null!==t)switch(t.type){case 3:return!g;case 4:return!1===g;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}(g,t,l,n)&&(t=null),n||null===l?function(e){return!!s.call(A,e)||!s.call(d,e)&&(c.test(e)?A[e]=!0:(d[e]=!0,!1))}(g)&&(null===t?e.removeAttribute(g):e.setAttribute(g,""+t)):l.mustUseProperty?e[l.propertyName]=null===t?3!==l.type&&"":t:(g=l.attributeName,n=l.attributeNamespace,null===t?e.removeAttribute(g):(t=3===(l=l.type)||4===l&&!0===t?"":""+t,n?e.setAttributeNS(n,g,t):e.setAttribute(g,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var g=e.replace(b,Z);m[g]=new u(g,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new u(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new u(e,1,!1,e.toLowerCase(),null,!0,!0)}));var p=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),y=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),f=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Y=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var H=Symbol.iterator;function w(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=H&&e[H]||e["@@iterator"])?e:null}var x,F=Object.assign;function N(e){if(void 0===x)try{throw Error()}catch(e){var g=e.stack.trim().match(/\n( *(at )?)/);x=g&&g[1]||""}return"\n"+x+e}var K=!1;function z(e,g){if(!e||K)return"";K=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(g,[])}catch(e){var n=e}Reflect.construct(e,[],g)}else{try{g.call()}catch(e){n=e}e.call(g.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(g){if(g&&n&&"string"==typeof g.stack){for(var l=g.stack.split("\n"),I=n.stack.split("\n"),o=l.length-1,a=I.length-1;1<=o&&0<=a&&l[o]!==I[a];)a--;for(;1<=o&&0<=a;o--,a--)if(l[o]!==I[a]){if(1!==o||1!==a)do{if(o--,0>--a||l[o]!==I[a]){var C="\n"+l[o].replace(" at new "," at ");return e.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",e.displayName)),C}}while(1<=o&&0<=a);break}}}finally{K=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?N(e):""}function M(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return z(e.type,!1);case 11:return z(e.type.render,!1);case 1:return z(e.type,!0);default:return""}}function E(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case B:return"Fragment";case y:return"Portal";case W:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case k:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case V:return(e._context.displayName||"Context")+".Provider";case v:var g=e.render;return(e=e.displayName)||(e=""!==(e=g.displayName||g.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case X:return null!==(g=e.displayName||null)?g:E(e.type)||"Memo";case J:g=e._payload,e=e._init;try{return E(e(g))}catch(e){}}return null}function L(e){var g=e.type;switch(e.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=g.render).displayName||e.name||"",g.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E(g);case 8:return g===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof g)return g.displayName||g.name||null;if("string"==typeof g)return g}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function Q(e){var g=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===g||"radio"===g)}function T(e){e._valueTracker||(e._valueTracker=function(e){var g=Q(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,g),n=""+e[g];if(!e.hasOwnProperty(g)&&void 0!==t&&"function"==typeof t.get&&"function"==typeof t.set){var l=t.get,I=t.set;return Object.defineProperty(e,g,{configurable:!0,get:function(){return l.call(this)},set:function(e){n=""+e,I.call(this,e)}}),Object.defineProperty(e,g,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[g]}}}}(e))}function D(e){if(!e)return!1;var g=e._valueTracker;if(!g)return!0;var t=g.getValue(),n="";return e&&(n=Q(e)?e.checked?"true":"false":e.value),(e=n)!==t&&(g.setValue(e),!0)}function j(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(g){return e.body}}function P(e,g){var t=g.checked;return F({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function O(e,g){var t=null==g.defaultValue?"":g.defaultValue,n=null!=g.checked?g.checked:g.defaultChecked;t=U(null!=g.value?g.value:t),e._wrapperState={initialChecked:n,initialValue:t,controlled:"checkbox"===g.type||"radio"===g.type?null!=g.checked:null!=g.value}}function q(e,g){null!=(g=g.checked)&&h(e,"checked",g,!1)}function _(e,g){q(e,g);var t=U(g.value),n=g.type;if(null!=t)"number"===n?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");g.hasOwnProperty("value")?ee(e,g.type,t):g.hasOwnProperty("defaultValue")&&ee(e,g.type,U(g.defaultValue)),null==g.checked&&null!=g.defaultChecked&&(e.defaultChecked=!!g.defaultChecked)}function $(e,g,t){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var n=g.type;if(!("submit"!==n&&"reset"!==n||void 0!==g.value&&null!==g.value))return;g=""+e._wrapperState.initialValue,t||g===e.value||(e.value=g),e.defaultValue=g}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,g,t){"number"===g&&j(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ge=Array.isArray;function te(e,g,t,n){if(e=e.options,g){g={};for(var l=0;l<t.length;l++)g["$"+t[l]]=!0;for(t=0;t<e.length;t++)l=g.hasOwnProperty("$"+e[t].value),e[t].selected!==l&&(e[t].selected=l),l&&n&&(e[t].defaultSelected=!0)}else{for(t=""+U(t),g=null,l=0;l<e.length;l++){if(e[l].value===t)return e[l].selected=!0,void(n&&(e[l].defaultSelected=!0));null!==g||e[l].disabled||(g=e[l])}null!==g&&(g.selected=!0)}}function ne(e,g){if(null!=g.dangerouslySetInnerHTML)throw Error(I(91));return F({},g,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,g){var t=g.value;if(null==t){if(t=g.children,g=g.defaultValue,null!=t){if(null!=g)throw Error(I(92));if(ge(t)){if(1<t.length)throw Error(I(93));t=t[0]}g=t}null==g&&(g=""),t=g}e._wrapperState={initialValue:U(t)}}function Ie(e,g){var t=U(g.value),n=U(g.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==g.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=n&&(e.defaultValue=""+n)}function oe(e){var g=e.textContent;g===e._wrapperState.initialValue&&""!==g&&null!==g&&(e.value=g)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ce(e,g){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(g):"http://www.w3.org/2000/svg"===e&&"foreignObject"===g?"http://www.w3.org/1999/xhtml":e}var ie,re,se=(re=function(e,g){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=g;else{for((ie=ie||document.createElement("div")).innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=ie.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;g.firstChild;)e.appendChild(g.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,g,t,n){MSApp.execUnsafeLocalFunction((function(){return re(e,g)}))}:re);function ce(e,g){if(g){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=g)}e.textContent=g}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ae=["Webkit","ms","Moz","O"];function ue(e,g,t){return null==g||"boolean"==typeof g||""===g?"":t||"number"!=typeof g||0===g||de.hasOwnProperty(e)&&de[e]?(""+g).trim():g+"px"}function me(e,g){for(var t in e=e.style,g)if(g.hasOwnProperty(t)){var n=0===t.indexOf("--"),l=ue(t,g[t],n);"float"===t&&(t="cssFloat"),n?e.setProperty(t,l):e[t]=l}}Object.keys(de).forEach((function(e){Ae.forEach((function(g){g=g+e.charAt(0).toUpperCase()+e.substring(1),de[g]=de[e]}))}));var be=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(e,g){if(g){if(be[e]&&(null!=g.children||null!=g.dangerouslySetInnerHTML))throw Error(I(137,e));if(null!=g.dangerouslySetInnerHTML){if(null!=g.children)throw Error(I(60));if("object"!=typeof g.dangerouslySetInnerHTML||!("__html"in g.dangerouslySetInnerHTML))throw Error(I(61))}if(null!=g.style&&"object"!=typeof g.style)throw Error(I(62))}}function he(e,g){if(-1===e.indexOf("-"))return"string"==typeof g.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pe=null;function Ge(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ye=null,Be=null,Se=null;function We(e){if(e=hl(e)){if("function"!=typeof ye)throw Error(I(280));var g=e.stateNode;g&&(g=Gl(g),ye(e.stateNode,e.type,g))}}function Ve(e){Be?Se?Se.push(e):Se=[e]:Be=e}function fe(){if(Be){var e=Be,g=Se;if(Se=Be=null,We(e),g)for(e=0;e<g.length;e++)We(g[e])}}function ve(e,g){return e(g)}function Re(){}var ke=!1;function Xe(e,g,t){if(ke)return e(g,t);ke=!0;try{return ve(e,g,t)}finally{ke=!1,(null!==Be||null!==Se)&&(Re(),fe())}}function Je(e,g){var t=e.stateNode;if(null===t)return null;var n=Gl(t);if(null===n)return null;t=n[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(t&&"function"!=typeof t)throw Error(I(231,g,typeof t));return t}var Ye=!1;if(r)try{var He={};Object.defineProperty(He,"passive",{get:function(){Ye=!0}}),window.addEventListener("test",He,He),window.removeEventListener("test",He,He)}catch(re){Ye=!1}function we(e,g,t,n,l,I,o,a,C){var i=Array.prototype.slice.call(arguments,3);try{g.apply(t,i)}catch(e){this.onError(e)}}var xe=!1,Fe=null,Ne=!1,Ke=null,ze={onError:function(e){xe=!0,Fe=e}};function Me(e,g,t,n,l,I,o,a,C){xe=!1,Fe=null,we.apply(ze,arguments)}function Ee(e){var g=e,t=e;if(e.alternate)for(;g.return;)g=g.return;else{e=g;do{0!=(4098&(g=e).flags)&&(t=g.return),e=g.return}while(e)}return 3===g.tag?t:null}function Le(e){if(13===e.tag){var g=e.memoizedState;if(null===g&&null!==(e=e.alternate)&&(g=e.memoizedState),null!==g)return g.dehydrated}return null}function Ue(e){if(Ee(e)!==e)throw Error(I(188))}function Qe(e){return null!==(e=function(e){var g=e.alternate;if(!g){if(null===(g=Ee(e)))throw Error(I(188));return g!==e?null:e}for(var t=e,n=g;;){var l=t.return;if(null===l)break;var o=l.alternate;if(null===o){if(null!==(n=l.return)){t=n;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===t)return Ue(l),e;if(o===n)return Ue(l),g;o=o.sibling}throw Error(I(188))}if(t.return!==n.return)t=l,n=o;else{for(var a=!1,C=l.child;C;){if(C===t){a=!0,t=l,n=o;break}if(C===n){a=!0,n=l,t=o;break}C=C.sibling}if(!a){for(C=o.child;C;){if(C===t){a=!0,t=o,n=l;break}if(C===n){a=!0,n=o,t=l;break}C=C.sibling}if(!a)throw Error(I(189))}}if(t.alternate!==n)throw Error(I(190))}if(3!==t.tag)throw Error(I(188));return t.stateNode.current===t?e:g}(e))?Te(e):null}function Te(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var g=Te(e);if(null!==g)return g;e=e.sibling}return null}var De=l.unstable_scheduleCallback,je=l.unstable_cancelCallback,Pe=l.unstable_shouldYield,Oe=l.unstable_requestPaint,qe=l.unstable_now,_e=l.unstable_getCurrentPriorityLevel,$e=l.unstable_ImmediatePriority,eg=l.unstable_UserBlockingPriority,gg=l.unstable_NormalPriority,tg=l.unstable_LowPriority,ng=l.unstable_IdlePriority,lg=null,Ig=null,og=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ag(e)/Cg|0)|0},ag=Math.log,Cg=Math.LN2,ig=64,rg=4194304;function sg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cg(e,g){var t=e.pendingLanes;if(0===t)return 0;var n=0,l=e.suspendedLanes,I=e.pingedLanes,o=268435455&t;if(0!==o){var a=o&~l;0!==a?n=sg(a):0!=(I&=o)&&(n=sg(I))}else 0!=(o=t&~l)?n=sg(o):0!==I&&(n=sg(I));if(0===n)return 0;if(0!==g&&g!==n&&0==(g&l)&&((l=n&-n)>=(I=g&-g)||16===l&&0!=(4194240&I)))return g;if(0!=(4&n)&&(n|=16&t),0!==(g=e.entangledLanes))for(e=e.entanglements,g&=n;0<g;)l=1<<(t=31-og(g)),n|=e[t],g&=~l;return n}function dg(e,g){switch(e){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;default:return-1}}function Ag(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ug(){var e=ig;return 0==(4194240&(ig<<=1))&&(ig=64),e}function mg(e){for(var g=[],t=0;31>t;t++)g.push(e);return g}function bg(e,g,t){e.pendingLanes|=g,536870912!==g&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[g=31-og(g)]=t}function Zg(e,g){var t=e.entangledLanes|=g;for(e=e.entanglements;t;){var n=31-og(t),l=1<<n;l&g|e[n]&g&&(e[n]|=g),t&=~l}}var hg=0;function pg(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Gg,yg,Bg,Sg,Wg,Vg=!1,fg=[],vg=null,Rg=null,kg=null,Xg=new Map,Jg=new Map,Yg=[],Hg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wg(e,g){switch(e){case"focusin":case"focusout":vg=null;break;case"dragenter":case"dragleave":Rg=null;break;case"mouseover":case"mouseout":kg=null;break;case"pointerover":case"pointerout":Xg.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(g.pointerId)}}function xg(e,g,t,n,l,I){return null===e||e.nativeEvent!==I?(e={blockedOn:g,domEventName:t,eventSystemFlags:n,nativeEvent:I,targetContainers:[l]},null!==g&&null!==(g=hl(g))&&yg(g),e):(e.eventSystemFlags|=n,g=e.targetContainers,null!==l&&-1===g.indexOf(l)&&g.push(l),e)}function Fg(e){var g=Zl(e.target);if(null!==g){var t=Ee(g);if(null!==t)if(13===(g=t.tag)){if(null!==(g=Le(t)))return e.blockedOn=g,void Wg(e.priority,(function(){Bg(t)}))}else if(3===g&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Ng(e){if(null!==e.blockedOn)return!1;for(var g=e.targetContainers;0<g.length;){var t=Pg(e.domEventName,e.eventSystemFlags,g[0],e.nativeEvent);if(null!==t)return null!==(g=hl(t))&&yg(g),e.blockedOn=t,!1;var n=new(t=e.nativeEvent).constructor(t.type,t);pe=n,t.target.dispatchEvent(n),pe=null,g.shift()}return!0}function Kg(e,g,t){Ng(e)&&t.delete(g)}function zg(){Vg=!1,null!==vg&&Ng(vg)&&(vg=null),null!==Rg&&Ng(Rg)&&(Rg=null),null!==kg&&Ng(kg)&&(kg=null),Xg.forEach(Kg),Jg.forEach(Kg)}function Mg(e,g){e.blockedOn===g&&(e.blockedOn=null,Vg||(Vg=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,zg)))}function Eg(e){function g(g){return Mg(g,e)}if(0<fg.length){Mg(fg[0],e);for(var t=1;t<fg.length;t++){var n=fg[t];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==vg&&Mg(vg,e),null!==Rg&&Mg(Rg,e),null!==kg&&Mg(kg,e),Xg.forEach(g),Jg.forEach(g),t=0;t<Yg.length;t++)(n=Yg[t]).blockedOn===e&&(n.blockedOn=null);for(;0<Yg.length&&null===(t=Yg[0]).blockedOn;)Fg(t),null===t.blockedOn&&Yg.shift()}var Lg=p.ReactCurrentBatchConfig,Ug=!0;function Qg(e,g,t,n){var l=hg,I=Lg.transition;Lg.transition=null;try{hg=1,Dg(e,g,t,n)}finally{hg=l,Lg.transition=I}}function Tg(e,g,t,n){var l=hg,I=Lg.transition;Lg.transition=null;try{hg=4,Dg(e,g,t,n)}finally{hg=l,Lg.transition=I}}function Dg(e,g,t,n){if(Ug){var l=Pg(e,g,t,n);if(null===l)Un(e,g,n,jg,t),wg(e,n);else if(function(e,g,t,n,l){switch(g){case"focusin":return vg=xg(vg,e,g,t,n,l),!0;case"dragenter":return Rg=xg(Rg,e,g,t,n,l),!0;case"mouseover":return kg=xg(kg,e,g,t,n,l),!0;case"pointerover":var I=l.pointerId;return Xg.set(I,xg(Xg.get(I)||null,e,g,t,n,l)),!0;case"gotpointercapture":return I=l.pointerId,Jg.set(I,xg(Jg.get(I)||null,e,g,t,n,l)),!0}return!1}(l,e,g,t,n))n.stopPropagation();else if(wg(e,n),4&g&&-1<Hg.indexOf(e)){for(;null!==l;){var I=hl(l);if(null!==I&&Gg(I),null===(I=Pg(e,g,t,n))&&Un(e,g,n,jg,t),I===l)break;l=I}null!==l&&n.stopPropagation()}else Un(e,g,n,null,t)}}var jg=null;function Pg(e,g,t,n){if(jg=null,null!==(e=Zl(e=Ge(n))))if(null===(g=Ee(e)))e=null;else if(13===(t=g.tag)){if(null!==(e=Le(g)))return e;e=null}else if(3===t){if(g.stateNode.current.memoizedState.isDehydrated)return 3===g.tag?g.stateNode.containerInfo:null;e=null}else g!==e&&(e=null);return jg=e,null}function Og(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_e()){case $e:return 1;case eg:return 4;case gg:case tg:return 16;case ng:return 536870912;default:return 16}default:return 16}}var qg=null,_g=null,$g=null;function et(){if($g)return $g;var e,g,t=_g,n=t.length,l="value"in qg?qg.value:qg.textContent,I=l.length;for(e=0;e<n&&t[e]===l[e];e++);var o=n-e;for(g=1;g<=o&&t[n-g]===l[I-g];g++);return $g=l.slice(e,1<g?1-g:void 0)}function gt(e){var g=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===g&&(e=13):e=g,10===e&&(e=13),32<=e||13===e?e:0}function tt(){return!0}function nt(){return!1}function lt(e){function g(g,t,n,l,I){for(var o in this._reactName=g,this._targetInst=n,this.type=t,this.nativeEvent=l,this.target=I,this.currentTarget=null,e)e.hasOwnProperty(o)&&(g=e[o],this[o]=g?g(l):l[o]);return this.isDefaultPrevented=(null!=l.defaultPrevented?l.defaultPrevented:!1===l.returnValue)?tt:nt,this.isPropagationStopped=nt,this}return F(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tt)},persist:function(){},isPersistent:tt}),g}var It,ot,at,Ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},it=lt(Ct),rt=F({},Ct,{view:0,detail:0}),st=lt(rt),ct=F({},rt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:St,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==at&&(at&&"mousemove"===e.type?(It=e.screenX-at.screenX,ot=e.screenY-at.screenY):ot=It=0,at=e),It)},movementY:function(e){return"movementY"in e?e.movementY:ot}}),dt=lt(ct),At=lt(F({},ct,{dataTransfer:0})),ut=lt(F({},rt,{relatedTarget:0})),mt=lt(F({},Ct,{animationName:0,elapsedTime:0,pseudoElement:0})),bt=F({},Ct,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zt=lt(bt),ht=lt(F({},Ct,{data:0})),pt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bt(e){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(e):!!(e=yt[e])&&!!g[e]}function St(){return Bt}var Wt=F({},rt,{key:function(e){if(e.key){var g=pt[e.key]||e.key;if("Unidentified"!==g)return g}return"keypress"===e.type?13===(e=gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Gt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:St,charCode:function(e){return"keypress"===e.type?gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Vt=lt(Wt),ft=lt(F({},ct,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vt=lt(F({},rt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:St})),Rt=lt(F({},Ct,{propertyName:0,elapsedTime:0,pseudoElement:0})),kt=F({},ct,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xt=lt(kt),Jt=[9,13,27,32],Yt=r&&"CompositionEvent"in window,Ht=null;r&&"documentMode"in document&&(Ht=document.documentMode);var wt=r&&"TextEvent"in window&&!Ht,xt=r&&(!Yt||Ht&&8<Ht&&11>=Ht),Ft=String.fromCharCode(32),Nt=!1;function Kt(e,g){switch(e){case"keyup":return-1!==Jt.indexOf(g.keyCode);case"keydown":return 229!==g.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zt(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Mt=!1,Et={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lt(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===g?!!Et[e.type]:"textarea"===g}function Ut(e,g,t,n){Ve(n),0<(g=Tn(g,"onChange")).length&&(t=new it("onChange","change",null,t,n),e.push({event:t,listeners:g}))}var Qt=null,Tt=null;function Dt(e){Nn(e,0)}function jt(e){if(D(pl(e)))return e}function Pt(e,g){if("change"===e)return g}var Ot=!1;if(r){var qt;if(r){var _t="oninput"in document;if(!_t){var $t=document.createElement("div");$t.setAttribute("oninput","return;"),_t="function"==typeof $t.oninput}qt=_t}else qt=!1;Ot=qt&&(!document.documentMode||9<document.documentMode)}function en(){Qt&&(Qt.detachEvent("onpropertychange",gn),Tt=Qt=null)}function gn(e){if("value"===e.propertyName&&jt(Tt)){var g=[];Ut(g,Tt,e,Ge(e)),Xe(Dt,g)}}function tn(e,g,t){"focusin"===e?(en(),Tt=t,(Qt=g).attachEvent("onpropertychange",gn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jt(Tt)}function ln(e,g){if("click"===e)return jt(g)}function In(e,g){if("input"===e||"change"===e)return jt(g)}var on="function"==typeof Object.is?Object.is:function(e,g){return e===g&&(0!==e||1/e==1/g)||e!=e&&g!=g};function an(e,g){if(on(e,g))return!0;if("object"!=typeof e||null===e||"object"!=typeof g||null===g)return!1;var t=Object.keys(e),n=Object.keys(g);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var l=t[n];if(!s.call(g,l)||!on(e[l],g[l]))return!1}return!0}function Cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rn(e,g){var t,n=Cn(e);for(e=0;n;){if(3===n.nodeType){if(t=e+n.textContent.length,e<=g&&t>=g)return{node:n,offset:g-e};e=t}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cn(n)}}function sn(e,g){return!(!e||!g)&&(e===g||(!e||3!==e.nodeType)&&(g&&3===g.nodeType?sn(e,g.parentNode):"contains"in e?e.contains(g):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(g))))}function cn(){for(var e=window,g=j();g instanceof e.HTMLIFrameElement;){try{var t="string"==typeof g.contentWindow.location.href}catch(e){t=!1}if(!t)break;g=j((e=g.contentWindow).document)}return g}function dn(e){var g=e&&e.nodeName&&e.nodeName.toLowerCase();return g&&("input"===g&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===g||"true"===e.contentEditable)}function An(e){var g=cn(),t=e.focusedElem,n=e.selectionRange;if(g!==t&&t&&t.ownerDocument&&sn(t.ownerDocument.documentElement,t)){if(null!==n&&dn(t))if(g=n.start,void 0===(e=n.end)&&(e=g),"selectionStart"in t)t.selectionStart=g,t.selectionEnd=Math.min(e,t.value.length);else if((e=(g=t.ownerDocument||document)&&g.defaultView||window).getSelection){e=e.getSelection();var l=t.textContent.length,I=Math.min(n.start,l);n=void 0===n.end?I:Math.min(n.end,l),!e.extend&&I>n&&(l=n,n=I,I=l),l=rn(t,I);var o=rn(t,n);l&&o&&(1!==e.rangeCount||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((g=g.createRange()).setStart(l.node,l.offset),e.removeAllRanges(),I>n?(e.addRange(g),e.extend(o.node,o.offset)):(g.setEnd(o.node,o.offset),e.addRange(g)))}for(g=[],e=t;e=e.parentNode;)1===e.nodeType&&g.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof t.focus&&t.focus(),t=0;t<g.length;t++)(e=g[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var un=r&&"documentMode"in document&&11>=document.documentMode,mn=null,bn=null,Zn=null,hn=!1;function pn(e,g,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;hn||null==mn||mn!==j(n)||(n="selectionStart"in(n=mn)&&dn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Zn&&an(Zn,n)||(Zn=n,0<(n=Tn(bn,"onSelect")).length&&(g=new it("onSelect","select",null,g,t),e.push({event:g,listeners:n}),g.target=mn)))}function Gn(e,g){var t={};return t[e.toLowerCase()]=g.toLowerCase(),t["Webkit"+e]="webkit"+g,t["Moz"+e]="moz"+g,t}var yn={animationend:Gn("Animation","AnimationEnd"),animationiteration:Gn("Animation","AnimationIteration"),animationstart:Gn("Animation","AnimationStart"),transitionend:Gn("Transition","TransitionEnd")},Bn={},Sn={};function Wn(e){if(Bn[e])return Bn[e];if(!yn[e])return e;var g,t=yn[e];for(g in t)if(t.hasOwnProperty(g)&&g in Sn)return Bn[e]=t[g];return e}r&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);var Vn=Wn("animationend"),fn=Wn("animationiteration"),vn=Wn("animationstart"),Rn=Wn("transitionend"),kn=new Map,Xn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,g){kn.set(e,g),C(g,[e])}for(var Yn=0;Yn<Xn.length;Yn++){var Hn=Xn[Yn];Jn(Hn.toLowerCase(),"on"+(Hn[0].toUpperCase()+Hn.slice(1)))}Jn(Vn,"onAnimationEnd"),Jn(fn,"onAnimationIteration"),Jn(vn,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(Rn,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),C("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),C("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),C("onBeforeInput",["compositionend","keypress","textInput","paste"]),C("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),C("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),C("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xn=new Set("cancel close invalid load scroll toggle".split(" ").concat(wn));function Fn(e,g,t){var n=e.type||"unknown-event";e.currentTarget=t,function(e,g,t,n,l,o,a,C,i){if(Me.apply(this,arguments),xe){if(!xe)throw Error(I(198));var r=Fe;xe=!1,Fe=null,Ne||(Ne=!0,Ke=r)}}(n,g,void 0,e),e.currentTarget=null}function Nn(e,g){g=0!=(4&g);for(var t=0;t<e.length;t++){var n=e[t],l=n.event;n=n.listeners;e:{var I=void 0;if(g)for(var o=n.length-1;0<=o;o--){var a=n[o],C=a.instance,i=a.currentTarget;if(a=a.listener,C!==I&&l.isPropagationStopped())break e;Fn(l,a,i),I=C}else for(o=0;o<n.length;o++){if(C=(a=n[o]).instance,i=a.currentTarget,a=a.listener,C!==I&&l.isPropagationStopped())break e;Fn(l,a,i),I=C}}}if(Ne)throw e=Ke,Ne=!1,Ke=null,e}function Kn(e,g){var t=g[ul];void 0===t&&(t=g[ul]=new Set);var n=e+"__bubble";t.has(n)||(Ln(g,e,2,!1),t.add(n))}function zn(e,g,t){var n=0;g&&(n|=4),Ln(t,e,n,g)}var Mn="_reactListening"+Math.random().toString(36).slice(2);function En(e){if(!e[Mn]){e[Mn]=!0,o.forEach((function(g){"selectionchange"!==g&&(xn.has(g)||zn(g,!1,e),zn(g,!0,e))}));var g=9===e.nodeType?e:e.ownerDocument;null===g||g[Mn]||(g[Mn]=!0,zn("selectionchange",!1,g))}}function Ln(e,g,t,n){switch(Og(g)){case 1:var l=Qg;break;case 4:l=Tg;break;default:l=Dg}t=l.bind(null,g,t,e),l=void 0,!Ye||"touchstart"!==g&&"touchmove"!==g&&"wheel"!==g||(l=!0),n?void 0!==l?e.addEventListener(g,t,{capture:!0,passive:l}):e.addEventListener(g,t,!0):void 0!==l?e.addEventListener(g,t,{passive:l}):e.addEventListener(g,t,!1)}function Un(e,g,t,n,l){var I=n;if(0==(1&g)&&0==(2&g)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===l||8===a.nodeType&&a.parentNode===l)break;if(4===o)for(o=n.return;null!==o;){var C=o.tag;if((3===C||4===C)&&((C=o.stateNode.containerInfo)===l||8===C.nodeType&&C.parentNode===l))return;o=o.return}for(;null!==a;){if(null===(o=Zl(a)))return;if(5===(C=o.tag)||6===C){n=I=o;continue e}a=a.parentNode}}n=n.return}Xe((function(){var n=I,l=Ge(t),o=[];e:{var a=kn.get(e);if(void 0!==a){var C=it,i=e;switch(e){case"keypress":if(0===gt(t))break e;case"keydown":case"keyup":C=Vt;break;case"focusin":i="focus",C=ut;break;case"focusout":i="blur",C=ut;break;case"beforeblur":case"afterblur":C=ut;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=dt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=At;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=vt;break;case Vn:case fn:case vn:C=mt;break;case Rn:C=Rt;break;case"scroll":C=st;break;case"wheel":C=Xt;break;case"copy":case"cut":case"paste":C=Zt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=ft}var r=0!=(4&g),s=!r&&"scroll"===e,c=r?null!==a?a+"Capture":null:a;r=[];for(var d,A=n;null!==A;){var u=(d=A).stateNode;if(5===d.tag&&null!==u&&(d=u,null!==c&&null!=(u=Je(A,c))&&r.push(Qn(A,u,d))),s)break;A=A.return}0<r.length&&(a=new C(a,i,null,t,l),o.push({event:a,listeners:r}))}}if(0==(7&g)){if(C="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||t===pe||!(i=t.relatedTarget||t.fromElement)||!Zl(i)&&!i[Al])&&(C||a)&&(a=l.window===l?l:(a=l.ownerDocument)?a.defaultView||a.parentWindow:window,C?(C=n,null!==(i=(i=t.relatedTarget||t.toElement)?Zl(i):null)&&(i!==(s=Ee(i))||5!==i.tag&&6!==i.tag)&&(i=null)):(C=null,i=n),C!==i)){if(r=dt,u="onMouseLeave",c="onMouseEnter",A="mouse","pointerout"!==e&&"pointerover"!==e||(r=ft,u="onPointerLeave",c="onPointerEnter",A="pointer"),s=null==C?a:pl(C),d=null==i?a:pl(i),(a=new r(u,A+"leave",C,t,l)).target=s,a.relatedTarget=d,u=null,Zl(l)===n&&((r=new r(c,A+"enter",i,t,l)).target=d,r.relatedTarget=s,u=r),s=u,C&&i)e:{for(c=i,A=0,d=r=C;d;d=Dn(d))A++;for(d=0,u=c;u;u=Dn(u))d++;for(;0<A-d;)r=Dn(r),A--;for(;0<d-A;)c=Dn(c),d--;for(;A--;){if(r===c||null!==c&&r===c.alternate)break e;r=Dn(r),c=Dn(c)}r=null}else r=null;null!==C&&jn(o,a,C,r,!1),null!==i&&null!==s&&jn(o,s,i,r,!0)}if("select"===(C=(a=n?pl(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===C&&"file"===a.type)var m=Pt;else if(Lt(a))if(Ot)m=In;else{m=nn;var b=tn}else(C=a.nodeName)&&"input"===C.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=ln);switch(m&&(m=m(e,n))?Ut(o,m,t,l):(b&&b(e,a,n),"focusout"===e&&(b=a._wrapperState)&&b.controlled&&"number"===a.type&&ee(a,"number",a.value)),b=n?pl(n):window,e){case"focusin":(Lt(b)||"true"===b.contentEditable)&&(mn=b,bn=n,Zn=null);break;case"focusout":Zn=bn=mn=null;break;case"mousedown":hn=!0;break;case"contextmenu":case"mouseup":case"dragend":hn=!1,pn(o,t,l);break;case"selectionchange":if(un)break;case"keydown":case"keyup":pn(o,t,l)}var Z;if(Yt)e:{switch(e){case"compositionstart":var h="onCompositionStart";break e;case"compositionend":h="onCompositionEnd";break e;case"compositionupdate":h="onCompositionUpdate";break e}h=void 0}else Mt?Kt(e,t)&&(h="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(h="onCompositionStart");h&&(xt&&"ko"!==t.locale&&(Mt||"onCompositionStart"!==h?"onCompositionEnd"===h&&Mt&&(Z=et()):(_g="value"in(qg=l)?qg.value:qg.textContent,Mt=!0)),0<(b=Tn(n,h)).length&&(h=new ht(h,e,null,t,l),o.push({event:h,listeners:b}),(Z||null!==(Z=zt(t)))&&(h.data=Z))),(Z=wt?function(e,g){switch(e){case"compositionend":return zt(g);case"keypress":return 32!==g.which?null:(Nt=!0,Ft);case"textInput":return(e=g.data)===Ft&&Nt?null:e;default:return null}}(e,t):function(e,g){if(Mt)return"compositionend"===e||!Yt&&Kt(e,g)?(e=et(),$g=_g=qg=null,Mt=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return xt&&"ko"!==g.locale?null:g.data}}(e,t))&&0<(n=Tn(n,"onBeforeInput")).length&&(l=new ht("onBeforeInput","beforeinput",null,t,l),o.push({event:l,listeners:n}),l.data=Z)}Nn(o,g)}))}function Qn(e,g,t){return{instance:e,listener:g,currentTarget:t}}function Tn(e,g){for(var t=g+"Capture",n=[];null!==e;){var l=e,I=l.stateNode;5===l.tag&&null!==I&&(l=I,null!=(I=Je(e,t))&&n.unshift(Qn(e,I,l)),null!=(I=Je(e,g))&&n.push(Qn(e,I,l))),e=e.return}return n}function Dn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jn(e,g,t,n,l){for(var I=g._reactName,o=[];null!==t&&t!==n;){var a=t,C=a.alternate,i=a.stateNode;if(null!==C&&C===n)break;5===a.tag&&null!==i&&(a=i,l?null!=(C=Je(t,I))&&o.unshift(Qn(t,C,a)):l||null!=(C=Je(t,I))&&o.push(Qn(t,C,a))),t=t.return}0!==o.length&&e.push({event:g,listeners:o})}var Pn=/\r\n?/g,On=/\u0000|\uFFFD/g;function qn(e){return("string"==typeof e?e:""+e).replace(Pn,"\n").replace(On,"")}function _n(e,g,t){if(g=qn(g),qn(e)!==g&&t)throw Error(I(425))}function $n(){}var el=null,gl=null;function tl(e,g){return"textarea"===e||"noscript"===e||"string"==typeof g.children||"number"==typeof g.children||"object"==typeof g.dangerouslySetInnerHTML&&null!==g.dangerouslySetInnerHTML&&null!=g.dangerouslySetInnerHTML.__html}var nl="function"==typeof setTimeout?setTimeout:void 0,ll="function"==typeof clearTimeout?clearTimeout:void 0,Il="function"==typeof Promise?Promise:void 0,ol="function"==typeof queueMicrotask?queueMicrotask:void 0!==Il?function(e){return Il.resolve(null).then(e).catch(al)}:nl;function al(e){setTimeout((function(){throw e}))}function Cl(e,g){var t=g,n=0;do{var l=t.nextSibling;if(e.removeChild(t),l&&8===l.nodeType)if("/$"===(t=l.data)){if(0===n)return e.removeChild(l),void Eg(g);n--}else"$"!==t&&"$?"!==t&&"$!"!==t||n++;t=l}while(t);Eg(g)}function il(e){for(;null!=e;e=e.nextSibling){var g=e.nodeType;if(1===g||3===g)break;if(8===g){if("$"===(g=e.data)||"$!"===g||"$?"===g)break;if("/$"===g)return null}}return e}function rl(e){e=e.previousSibling;for(var g=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===g)return e;g--}else"/$"===t&&g++}e=e.previousSibling}return null}var sl=Math.random().toString(36).slice(2),cl="__reactFiber$"+sl,dl="__reactProps$"+sl,Al="__reactContainer$"+sl,ul="__reactEvents$"+sl,ml="__reactListeners$"+sl,bl="__reactHandles$"+sl;function Zl(e){var g=e[cl];if(g)return g;for(var t=e.parentNode;t;){if(g=t[Al]||t[cl]){if(t=g.alternate,null!==g.child||null!==t&&null!==t.child)for(e=rl(e);null!==e;){if(t=e[cl])return t;e=rl(e)}return g}t=(e=t).parentNode}return null}function hl(e){return!(e=e[cl]||e[Al])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function pl(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(I(33))}function Gl(e){return e[dl]||null}var yl=[],Bl=-1;function Sl(e){return{current:e}}function Wl(e){0>Bl||(e.current=yl[Bl],yl[Bl]=null,Bl--)}function Vl(e,g){Bl++,yl[Bl]=e.current,e.current=g}var fl={},vl=Sl(fl),Rl=Sl(!1),kl=fl;function Xl(e,g){var t=e.type.contextTypes;if(!t)return fl;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===g)return n.__reactInternalMemoizedMaskedChildContext;var l,I={};for(l in t)I[l]=g[l];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=g,e.__reactInternalMemoizedMaskedChildContext=I),I}function Jl(e){return null!=e.childContextTypes}function Yl(){Wl(Rl),Wl(vl)}function Hl(e,g,t){if(vl.current!==fl)throw Error(I(168));Vl(vl,g),Vl(Rl,t)}function wl(e,g,t){var n=e.stateNode;if(g=g.childContextTypes,"function"!=typeof n.getChildContext)return t;for(var l in n=n.getChildContext())if(!(l in g))throw Error(I(108,L(e)||"Unknown",l));return F({},t,n)}function xl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fl,kl=vl.current,Vl(vl,e),Vl(Rl,Rl.current),!0}function Fl(e,g,t){var n=e.stateNode;if(!n)throw Error(I(169));t?(e=wl(e,g,kl),n.__reactInternalMemoizedMergedChildContext=e,Wl(Rl),Wl(vl),Vl(vl,e)):Wl(Rl),Vl(Rl,t)}var Nl=null,Kl=!1,zl=!1;function Ml(e){null===Nl?Nl=[e]:Nl.push(e)}function El(){if(!zl&&null!==Nl){zl=!0;var e=0,g=hg;try{var t=Nl;for(hg=1;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}Nl=null,Kl=!1}catch(g){throw null!==Nl&&(Nl=Nl.slice(e+1)),De($e,El),g}finally{hg=g,zl=!1}}return null}var Ll=[],Ul=0,Ql=null,Tl=0,Dl=[],jl=0,Pl=null,Ol=1,ql="";function _l(e,g){Ll[Ul++]=Tl,Ll[Ul++]=Ql,Ql=e,Tl=g}function $l(e,g,t){Dl[jl++]=Ol,Dl[jl++]=ql,Dl[jl++]=Pl,Pl=e;var n=Ol;e=ql;var l=32-og(n)-1;n&=~(1<<l),t+=1;var I=32-og(g)+l;if(30<I){var o=l-l%5;I=(n&(1<<o)-1).toString(32),n>>=o,l-=o,Ol=1<<32-og(g)+l|t<<l|n,ql=I+e}else Ol=1<<I|t<<l|n,ql=e}function eI(e){null!==e.return&&(_l(e,1),$l(e,1,0))}function gI(e){for(;e===Ql;)Ql=Ll[--Ul],Ll[Ul]=null,Tl=Ll[--Ul],Ll[Ul]=null;for(;e===Pl;)Pl=Dl[--jl],Dl[jl]=null,ql=Dl[--jl],Dl[jl]=null,Ol=Dl[--jl],Dl[jl]=null}var tI=null,nI=null,lI=!1,II=null;function oI(e,g){var t=Ji(5,null,null,0);t.elementType="DELETED",t.stateNode=g,t.return=e,null===(g=e.deletions)?(e.deletions=[t],e.flags|=16):g.push(t)}function aI(e,g){switch(e.tag){case 5:var t=e.type;return null!==(g=1!==g.nodeType||t.toLowerCase()!==g.nodeName.toLowerCase()?null:g)&&(e.stateNode=g,tI=e,nI=il(g.firstChild),!0);case 6:return null!==(g=""===e.pendingProps||3!==g.nodeType?null:g)&&(e.stateNode=g,tI=e,nI=null,!0);case 13:return null!==(g=8!==g.nodeType?null:g)&&(t=null!==Pl?{id:Ol,overflow:ql}:null,e.memoizedState={dehydrated:g,treeContext:t,retryLane:1073741824},(t=Ji(18,null,null,0)).stateNode=g,t.return=e,e.child=t,tI=e,nI=null,!0);default:return!1}}function CI(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function iI(e){if(lI){var g=nI;if(g){var t=g;if(!aI(e,g)){if(CI(e))throw Error(I(418));g=il(t.nextSibling);var n=tI;g&&aI(e,g)?oI(n,t):(e.flags=-4097&e.flags|2,lI=!1,tI=e)}}else{if(CI(e))throw Error(I(418));e.flags=-4097&e.flags|2,lI=!1,tI=e}}}function rI(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tI=e}function sI(e){if(e!==tI)return!1;if(!lI)return rI(e),lI=!0,!1;var g;if((g=3!==e.tag)&&!(g=5!==e.tag)&&(g="head"!==(g=e.type)&&"body"!==g&&!tl(e.type,e.memoizedProps)),g&&(g=nI)){if(CI(e))throw cI(),Error(I(418));for(;g;)oI(e,g),g=il(g.nextSibling)}if(rI(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(I(317));e:{for(e=e.nextSibling,g=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===g){nI=il(e.nextSibling);break e}g--}else"$"!==t&&"$!"!==t&&"$?"!==t||g++}e=e.nextSibling}nI=null}}else nI=tI?il(e.stateNode.nextSibling):null;return!0}function cI(){for(var e=nI;e;)e=il(e.nextSibling)}function dI(){nI=tI=null,lI=!1}function AI(e){null===II?II=[e]:II.push(e)}var uI=p.ReactCurrentBatchConfig;function mI(e,g){if(e&&e.defaultProps){for(var t in g=F({},g),e=e.defaultProps)void 0===g[t]&&(g[t]=e[t]);return g}return g}var bI=Sl(null),ZI=null,hI=null,pI=null;function GI(){pI=hI=ZI=null}function yI(e){var g=bI.current;Wl(bI),e._currentValue=g}function BI(e,g,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&g)!==g?(e.childLanes|=g,null!==n&&(n.childLanes|=g)):null!==n&&(n.childLanes&g)!==g&&(n.childLanes|=g),e===t)break;e=e.return}}function SI(e,g){ZI=e,pI=hI=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&g)&&(pa=!0),e.firstContext=null)}function WI(e){var g=e._currentValue;if(pI!==e)if(e={context:e,memoizedValue:g,next:null},null===hI){if(null===ZI)throw Error(I(308));hI=e,ZI.dependencies={lanes:0,firstContext:e}}else hI=hI.next=e;return g}var VI=null;function fI(e){null===VI?VI=[e]:VI.push(e)}function vI(e,g,t,n){var l=g.interleaved;return null===l?(t.next=t,fI(g)):(t.next=l.next,l.next=t),g.interleaved=t,RI(e,n)}function RI(e,g){e.lanes|=g;var t=e.alternate;for(null!==t&&(t.lanes|=g),t=e,e=e.return;null!==e;)e.childLanes|=g,null!==(t=e.alternate)&&(t.childLanes|=g),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var kI=!1;function XI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JI(e,g){e=e.updateQueue,g.updateQueue===e&&(g.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function YI(e,g){return{eventTime:e,lane:g,tag:0,payload:null,callback:null,next:null}}function HI(e,g,t){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&RC)){var l=n.pending;return null===l?g.next=g:(g.next=l.next,l.next=g),n.pending=g,RI(e,t)}return null===(l=n.interleaved)?(g.next=g,fI(n)):(g.next=l.next,l.next=g),n.interleaved=g,RI(e,t)}function wI(e,g,t){if(null!==(g=g.updateQueue)&&(g=g.shared,0!=(4194240&t))){var n=g.lanes;t|=n&=e.pendingLanes,g.lanes=t,Zg(e,t)}}function xI(e,g){var t=e.updateQueue,n=e.alternate;if(null!==n&&t===(n=n.updateQueue)){var l=null,I=null;if(null!==(t=t.firstBaseUpdate)){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===I?l=I=o:I=I.next=o,t=t.next}while(null!==t);null===I?l=I=g:I=I.next=g}else l=I=g;return t={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:I,shared:n.shared,effects:n.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=g:e.next=g,t.lastBaseUpdate=g}function FI(e,g,t,n){var l=e.updateQueue;kI=!1;var I=l.firstBaseUpdate,o=l.lastBaseUpdate,a=l.shared.pending;if(null!==a){l.shared.pending=null;var C=a,i=C.next;C.next=null,null===o?I=i:o.next=i,o=C;var r=e.alternate;null!==r&&(a=(r=r.updateQueue).lastBaseUpdate)!==o&&(null===a?r.firstBaseUpdate=i:a.next=i,r.lastBaseUpdate=C)}if(null!==I){var s=l.baseState;for(o=0,r=i=C=null,a=I;;){var c=a.lane,d=a.eventTime;if((n&c)===c){null!==r&&(r=r.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var A=e,u=a;switch(c=g,d=t,u.tag){case 1:if("function"==typeof(A=u.payload)){s=A.call(d,s,c);break e}s=A;break e;case 3:A.flags=-65537&A.flags|128;case 0:if(null==(c="function"==typeof(A=u.payload)?A.call(d,s,c):A))break e;s=F({},s,c);break e;case 2:kI=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(c=l.effects)?l.effects=[a]:c.push(a))}else d={eventTime:d,lane:c,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===r?(i=r=d,C=s):r=r.next=d,o|=c;if(null===(a=a.next)){if(null===(a=l.shared.pending))break;a=(c=a).next,c.next=null,l.lastBaseUpdate=c,l.shared.pending=null}}if(null===r&&(C=s),l.baseState=C,l.firstBaseUpdate=i,l.lastBaseUpdate=r,null!==(g=l.shared.interleaved)){l=g;do{o|=l.lane,l=l.next}while(l!==g)}else null===I&&(l.shared.lanes=0);FC|=o,e.lanes=o,e.memoizedState=s}}function NI(e,g,t){if(e=g.effects,g.effects=null,null!==e)for(g=0;g<e.length;g++){var n=e[g],l=n.callback;if(null!==l){if(n.callback=null,n=t,"function"!=typeof l)throw Error(I(191,l));l.call(n)}}}var KI=(new n.Component).refs;function zI(e,g,t,n){t=null==(t=t(n,g=e.memoizedState))?g:F({},g,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var MI={isMounted:function(e){return!!(e=e._reactInternals)&&Ee(e)===e},enqueueSetState:function(e,g,t){e=e._reactInternals;var n=gi(),l=ti(e),I=YI(n,l);I.payload=g,null!=t&&(I.callback=t),null!==(g=HI(e,I,l))&&(ni(g,e,l,n),wI(g,e,l))},enqueueReplaceState:function(e,g,t){e=e._reactInternals;var n=gi(),l=ti(e),I=YI(n,l);I.tag=1,I.payload=g,null!=t&&(I.callback=t),null!==(g=HI(e,I,l))&&(ni(g,e,l,n),wI(g,e,l))},enqueueForceUpdate:function(e,g){e=e._reactInternals;var t=gi(),n=ti(e),l=YI(t,n);l.tag=2,null!=g&&(l.callback=g),null!==(g=HI(e,l,n))&&(ni(g,e,n,t),wI(g,e,n))}};function EI(e,g,t,n,l,I,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,I,o):!(g.prototype&&g.prototype.isPureReactComponent&&an(t,n)&&an(l,I))}function LI(e,g,t){var n=!1,l=fl,I=g.contextType;return"object"==typeof I&&null!==I?I=WI(I):(l=Jl(g)?kl:vl.current,I=(n=null!=(n=g.contextTypes))?Xl(e,l):fl),g=new g(t,I),e.memoizedState=null!==g.state&&void 0!==g.state?g.state:null,g.updater=MI,e.stateNode=g,g._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=I),g}function UI(e,g,t,n){e=g.state,"function"==typeof g.componentWillReceiveProps&&g.componentWillReceiveProps(t,n),"function"==typeof g.UNSAFE_componentWillReceiveProps&&g.UNSAFE_componentWillReceiveProps(t,n),g.state!==e&&MI.enqueueReplaceState(g,g.state,null)}function QI(e,g,t,n){var l=e.stateNode;l.props=t,l.state=e.memoizedState,l.refs=KI,XI(e);var I=g.contextType;"object"==typeof I&&null!==I?l.context=WI(I):(I=Jl(g)?kl:vl.current,l.context=Xl(e,I)),l.state=e.memoizedState,"function"==typeof(I=g.getDerivedStateFromProps)&&(zI(e,g,I,t),l.state=e.memoizedState),"function"==typeof g.getDerivedStateFromProps||"function"==typeof l.getSnapshotBeforeUpdate||"function"!=typeof l.UNSAFE_componentWillMount&&"function"!=typeof l.componentWillMount||(g=l.state,"function"==typeof l.componentWillMount&&l.componentWillMount(),"function"==typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),g!==l.state&&MI.enqueueReplaceState(l,l.state,null),FI(e,t,l,n),l.state=e.memoizedState),"function"==typeof l.componentDidMount&&(e.flags|=4194308)}function TI(e,g,t){if(null!==(e=t.ref)&&"function"!=typeof e&&"object"!=typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(I(309));var n=t.stateNode}if(!n)throw Error(I(147,e));var l=n,o=""+e;return null!==g&&null!==g.ref&&"function"==typeof g.ref&&g.ref._stringRef===o?g.ref:(g=function(e){var g=l.refs;g===KI&&(g=l.refs={}),null===e?delete g[o]:g[o]=e},g._stringRef=o,g)}if("string"!=typeof e)throw Error(I(284));if(!t._owner)throw Error(I(290,e))}return e}function DI(e,g){throw e=Object.prototype.toString.call(g),Error(I(31,"[object Object]"===e?"object with keys {"+Object.keys(g).join(", ")+"}":e))}function jI(e){return(0,e._init)(e._payload)}function PI(e){function g(g,t){if(e){var n=g.deletions;null===n?(g.deletions=[t],g.flags|=16):n.push(t)}}function t(t,n){if(!e)return null;for(;null!==n;)g(t,n),n=n.sibling;return null}function n(e,g){for(e=new Map;null!==g;)null!==g.key?e.set(g.key,g):e.set(g.index,g),g=g.sibling;return e}function l(e,g){return(e=Hi(e,g)).index=0,e.sibling=null,e}function o(g,t,n){return g.index=n,e?null!==(n=g.alternate)?(n=n.index)<t?(g.flags|=2,t):n:(g.flags|=2,t):(g.flags|=1048576,t)}function a(g){return e&&null===g.alternate&&(g.flags|=2),g}function C(e,g,t,n){return null===g||6!==g.tag?((g=Ni(t,e.mode,n)).return=e,g):((g=l(g,t)).return=e,g)}function i(e,g,t,n){var I=t.type;return I===B?s(e,g,t.props.children,n,t.key):null!==g&&(g.elementType===I||"object"==typeof I&&null!==I&&I.$$typeof===J&&jI(I)===g.type)?((n=l(g,t.props)).ref=TI(e,g,t),n.return=e,n):((n=wi(t.type,t.key,t.props,null,e.mode,n)).ref=TI(e,g,t),n.return=e,n)}function r(e,g,t,n){return null===g||4!==g.tag||g.stateNode.containerInfo!==t.containerInfo||g.stateNode.implementation!==t.implementation?((g=Ki(t,e.mode,n)).return=e,g):((g=l(g,t.children||[])).return=e,g)}function s(e,g,t,n,I){return null===g||7!==g.tag?((g=xi(t,e.mode,n,I)).return=e,g):((g=l(g,t)).return=e,g)}function c(e,g,t){if("string"==typeof g&&""!==g||"number"==typeof g)return(g=Ni(""+g,e.mode,t)).return=e,g;if("object"==typeof g&&null!==g){switch(g.$$typeof){case G:return(t=wi(g.type,g.key,g.props,null,e.mode,t)).ref=TI(e,null,g),t.return=e,t;case y:return(g=Ki(g,e.mode,t)).return=e,g;case J:return c(e,(0,g._init)(g._payload),t)}if(ge(g)||w(g))return(g=xi(g,e.mode,t,null)).return=e,g;DI(e,g)}return null}function d(e,g,t,n){var l=null!==g?g.key:null;if("string"==typeof t&&""!==t||"number"==typeof t)return null!==l?null:C(e,g,""+t,n);if("object"==typeof t&&null!==t){switch(t.$$typeof){case G:return t.key===l?i(e,g,t,n):null;case y:return t.key===l?r(e,g,t,n):null;case J:return d(e,g,(l=t._init)(t._payload),n)}if(ge(t)||w(t))return null!==l?null:s(e,g,t,n,null);DI(e,t)}return null}function A(e,g,t,n,l){if("string"==typeof n&&""!==n||"number"==typeof n)return C(g,e=e.get(t)||null,""+n,l);if("object"==typeof n&&null!==n){switch(n.$$typeof){case G:return i(g,e=e.get(null===n.key?t:n.key)||null,n,l);case y:return r(g,e=e.get(null===n.key?t:n.key)||null,n,l);case J:return A(e,g,t,(0,n._init)(n._payload),l)}if(ge(n)||w(n))return s(g,e=e.get(t)||null,n,l,null);DI(g,n)}return null}function u(l,I,a,C){for(var i=null,r=null,s=I,u=I=0,m=null;null!==s&&u<a.length;u++){s.index>u?(m=s,s=null):m=s.sibling;var b=d(l,s,a[u],C);if(null===b){null===s&&(s=m);break}e&&s&&null===b.alternate&&g(l,s),I=o(b,I,u),null===r?i=b:r.sibling=b,r=b,s=m}if(u===a.length)return t(l,s),lI&&_l(l,u),i;if(null===s){for(;u<a.length;u++)null!==(s=c(l,a[u],C))&&(I=o(s,I,u),null===r?i=s:r.sibling=s,r=s);return lI&&_l(l,u),i}for(s=n(l,s);u<a.length;u++)null!==(m=A(s,l,u,a[u],C))&&(e&&null!==m.alternate&&s.delete(null===m.key?u:m.key),I=o(m,I,u),null===r?i=m:r.sibling=m,r=m);return e&&s.forEach((function(e){return g(l,e)})),lI&&_l(l,u),i}function m(l,a,C,i){var r=w(C);if("function"!=typeof r)throw Error(I(150));if(null==(C=r.call(C)))throw Error(I(151));for(var s=r=null,u=a,m=a=0,b=null,Z=C.next();null!==u&&!Z.done;m++,Z=C.next()){u.index>m?(b=u,u=null):b=u.sibling;var h=d(l,u,Z.value,i);if(null===h){null===u&&(u=b);break}e&&u&&null===h.alternate&&g(l,u),a=o(h,a,m),null===s?r=h:s.sibling=h,s=h,u=b}if(Z.done)return t(l,u),lI&&_l(l,m),r;if(null===u){for(;!Z.done;m++,Z=C.next())null!==(Z=c(l,Z.value,i))&&(a=o(Z,a,m),null===s?r=Z:s.sibling=Z,s=Z);return lI&&_l(l,m),r}for(u=n(l,u);!Z.done;m++,Z=C.next())null!==(Z=A(u,l,m,Z.value,i))&&(e&&null!==Z.alternate&&u.delete(null===Z.key?m:Z.key),a=o(Z,a,m),null===s?r=Z:s.sibling=Z,s=Z);return e&&u.forEach((function(e){return g(l,e)})),lI&&_l(l,m),r}return function e(n,I,o,C){if("object"==typeof o&&null!==o&&o.type===B&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case G:e:{for(var i=o.key,r=I;null!==r;){if(r.key===i){if((i=o.type)===B){if(7===r.tag){t(n,r.sibling),(I=l(r,o.props.children)).return=n,n=I;break e}}else if(r.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===J&&jI(i)===r.type){t(n,r.sibling),(I=l(r,o.props)).ref=TI(n,r,o),I.return=n,n=I;break e}t(n,r);break}g(n,r),r=r.sibling}o.type===B?((I=xi(o.props.children,n.mode,C,o.key)).return=n,n=I):((C=wi(o.type,o.key,o.props,null,n.mode,C)).ref=TI(n,I,o),C.return=n,n=C)}return a(n);case y:e:{for(r=o.key;null!==I;){if(I.key===r){if(4===I.tag&&I.stateNode.containerInfo===o.containerInfo&&I.stateNode.implementation===o.implementation){t(n,I.sibling),(I=l(I,o.children||[])).return=n,n=I;break e}t(n,I);break}g(n,I),I=I.sibling}(I=Ki(o,n.mode,C)).return=n,n=I}return a(n);case J:return e(n,I,(r=o._init)(o._payload),C)}if(ge(o))return u(n,I,o,C);if(w(o))return m(n,I,o,C);DI(n,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==I&&6===I.tag?(t(n,I.sibling),(I=l(I,o)).return=n,n=I):(t(n,I),(I=Ni(o,n.mode,C)).return=n,n=I),a(n)):t(n,I)}}var OI=PI(!0),qI=PI(!1),_I={},$I=Sl(_I),eo=Sl(_I),go=Sl(_I);function to(e){if(e===_I)throw Error(I(174));return e}function no(e,g){switch(Vl(go,g),Vl(eo,e),Vl($I,_I),e=g.nodeType){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:Ce(null,"");break;default:g=Ce(g=(e=8===e?g.parentNode:g).namespaceURI||null,e=e.tagName)}Wl($I),Vl($I,g)}function lo(){Wl($I),Wl(eo),Wl(go)}function Io(e){to(go.current);var g=to($I.current),t=Ce(g,e.type);g!==t&&(Vl(eo,e),Vl($I,t))}function oo(e){eo.current===e&&(Wl($I),Wl(eo))}var ao=Sl(0);function Co(e){for(var g=e;null!==g;){if(13===g.tag){var t=g.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return g}else if(19===g.tag&&void 0!==g.memoizedProps.revealOrder){if(0!=(128&g.flags))return g}else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var io=[];function ro(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var so=p.ReactCurrentDispatcher,co=p.ReactCurrentBatchConfig,Ao=0,uo=null,mo=null,bo=null,Zo=!1,ho=!1,po=0,Go=0;function yo(){throw Error(I(321))}function Bo(e,g){if(null===g)return!1;for(var t=0;t<g.length&&t<e.length;t++)if(!on(e[t],g[t]))return!1;return!0}function So(e,g,t,n,l,o){if(Ao=o,uo=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,so.current=null===e||null===e.memoizedState?aa:Ca,e=t(n,l),ho){o=0;do{if(ho=!1,po=0,25<=o)throw Error(I(301));o+=1,bo=mo=null,g.updateQueue=null,so.current=ia,e=t(n,l)}while(ho)}if(so.current=oa,g=null!==mo&&null!==mo.next,Ao=0,bo=mo=uo=null,Zo=!1,g)throw Error(I(300));return e}function Wo(){var e=0!==po;return po=0,e}function Vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bo?uo.memoizedState=bo=e:bo=bo.next=e,bo}function fo(){if(null===mo){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var g=null===bo?uo.memoizedState:bo.next;if(null!==g)bo=g,mo=e;else{if(null===e)throw Error(I(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===bo?uo.memoizedState=bo=e:bo=bo.next=e}return bo}function vo(e,g){return"function"==typeof g?g(e):g}function Ro(e){var g=fo(),t=g.queue;if(null===t)throw Error(I(311));t.lastRenderedReducer=e;var n=mo,l=n.baseQueue,o=t.pending;if(null!==o){if(null!==l){var a=l.next;l.next=o.next,o.next=a}n.baseQueue=l=o,t.pending=null}if(null!==l){o=l.next,n=n.baseState;var C=a=null,i=null,r=o;do{var s=r.lane;if((Ao&s)===s)null!==i&&(i=i.next={lane:0,action:r.action,hasEagerState:r.hasEagerState,eagerState:r.eagerState,next:null}),n=r.hasEagerState?r.eagerState:e(n,r.action);else{var c={lane:s,action:r.action,hasEagerState:r.hasEagerState,eagerState:r.eagerState,next:null};null===i?(C=i=c,a=n):i=i.next=c,uo.lanes|=s,FC|=s}r=r.next}while(null!==r&&r!==o);null===i?a=n:i.next=C,on(n,g.memoizedState)||(pa=!0),g.memoizedState=n,g.baseState=a,g.baseQueue=i,t.lastRenderedState=n}if(null!==(e=t.interleaved)){l=e;do{o=l.lane,uo.lanes|=o,FC|=o,l=l.next}while(l!==e)}else null===l&&(t.lanes=0);return[g.memoizedState,t.dispatch]}function ko(e){var g=fo(),t=g.queue;if(null===t)throw Error(I(311));t.lastRenderedReducer=e;var n=t.dispatch,l=t.pending,o=g.memoizedState;if(null!==l){t.pending=null;var a=l=l.next;do{o=e(o,a.action),a=a.next}while(a!==l);on(o,g.memoizedState)||(pa=!0),g.memoizedState=o,null===g.baseQueue&&(g.baseState=o),t.lastRenderedState=o}return[o,n]}function Xo(){}function Jo(e,g){var t=uo,n=fo(),l=g(),o=!on(n.memoizedState,l);if(o&&(n.memoizedState=l,pa=!0),n=n.queue,Uo(wo.bind(null,t,n,e),[e]),n.getSnapshot!==g||o||null!==bo&&1&bo.memoizedState.tag){if(t.flags|=2048,Ko(9,Ho.bind(null,t,n,l,g),void 0,null),null===kC)throw Error(I(349));0!=(30&Ao)||Yo(t,g,l)}return l}function Yo(e,g,t){e.flags|=16384,e={getSnapshot:g,value:t},null===(g=uo.updateQueue)?(g={lastEffect:null,stores:null},uo.updateQueue=g,g.stores=[e]):null===(t=g.stores)?g.stores=[e]:t.push(e)}function Ho(e,g,t,n){g.value=t,g.getSnapshot=n,xo(g)&&Fo(e)}function wo(e,g,t){return t((function(){xo(g)&&Fo(e)}))}function xo(e){var g=e.getSnapshot;e=e.value;try{var t=g();return!on(e,t)}catch(e){return!0}}function Fo(e){var g=RI(e,1);null!==g&&ni(g,e,1,-1)}function No(e){var g=Vo();return"function"==typeof e&&(e=e()),g.memoizedState=g.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vo,lastRenderedState:e},g.queue=e,e=e.dispatch=ta.bind(null,uo,e),[g.memoizedState,e]}function Ko(e,g,t,n){return e={tag:e,create:g,destroy:t,deps:n,next:null},null===(g=uo.updateQueue)?(g={lastEffect:null,stores:null},uo.updateQueue=g,g.lastEffect=e.next=e):null===(t=g.lastEffect)?g.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,g.lastEffect=e),e}function zo(){return fo().memoizedState}function Mo(e,g,t,n){var l=Vo();uo.flags|=e,l.memoizedState=Ko(1|g,t,void 0,void 0===n?null:n)}function Eo(e,g,t,n){var l=fo();n=void 0===n?null:n;var I=void 0;if(null!==mo){var o=mo.memoizedState;if(I=o.destroy,null!==n&&Bo(n,o.deps))return void(l.memoizedState=Ko(g,t,I,n))}uo.flags|=e,l.memoizedState=Ko(1|g,t,I,n)}function Lo(e,g){return Mo(8390656,8,e,g)}function Uo(e,g){return Eo(2048,8,e,g)}function Qo(e,g){return Eo(4,2,e,g)}function To(e,g){return Eo(4,4,e,g)}function Do(e,g){return"function"==typeof g?(e=e(),g(e),function(){g(null)}):null!=g?(e=e(),g.current=e,function(){g.current=null}):void 0}function jo(e,g,t){return t=null!=t?t.concat([e]):null,Eo(4,4,Do.bind(null,g,e),t)}function Po(){}function Oo(e,g){var t=fo();g=void 0===g?null:g;var n=t.memoizedState;return null!==n&&null!==g&&Bo(g,n[1])?n[0]:(t.memoizedState=[e,g],e)}function qo(e,g){var t=fo();g=void 0===g?null:g;var n=t.memoizedState;return null!==n&&null!==g&&Bo(g,n[1])?n[0]:(e=e(),t.memoizedState=[e,g],e)}function _o(e,g,t){return 0==(21&Ao)?(e.baseState&&(e.baseState=!1,pa=!0),e.memoizedState=t):(on(t,g)||(t=ug(),uo.lanes|=t,FC|=t,e.baseState=!0),g)}function $o(e,g){var t=hg;hg=0!==t&&4>t?t:4,e(!0);var n=co.transition;co.transition={};try{e(!1),g()}finally{hg=t,co.transition=n}}function ea(){return fo().memoizedState}function ga(e,g,t){var n=ti(e);t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},na(e)?la(g,t):null!==(t=vI(e,g,t,n))&&(ni(t,e,n,gi()),Ia(t,g,n))}function ta(e,g,t){var n=ti(e),l={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(na(e))la(g,l);else{var I=e.alternate;if(0===e.lanes&&(null===I||0===I.lanes)&&null!==(I=g.lastRenderedReducer))try{var o=g.lastRenderedState,a=I(o,t);if(l.hasEagerState=!0,l.eagerState=a,on(a,o)){var C=g.interleaved;return null===C?(l.next=l,fI(g)):(l.next=C.next,C.next=l),void(g.interleaved=l)}}catch(e){}null!==(t=vI(e,g,l,n))&&(ni(t,e,n,l=gi()),Ia(t,g,n))}}function na(e){var g=e.alternate;return e===uo||null!==g&&g===uo}function la(e,g){ho=Zo=!0;var t=e.pending;null===t?g.next=g:(g.next=t.next,t.next=g),e.pending=g}function Ia(e,g,t){if(0!=(4194240&t)){var n=g.lanes;t|=n&=e.pendingLanes,g.lanes=t,Zg(e,t)}}var oa={readContext:WI,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},aa={readContext:WI,useCallback:function(e,g){return Vo().memoizedState=[e,void 0===g?null:g],e},useContext:WI,useEffect:Lo,useImperativeHandle:function(e,g,t){return t=null!=t?t.concat([e]):null,Mo(4194308,4,Do.bind(null,g,e),t)},useLayoutEffect:function(e,g){return Mo(4194308,4,e,g)},useInsertionEffect:function(e,g){return Mo(4,2,e,g)},useMemo:function(e,g){var t=Vo();return g=void 0===g?null:g,e=e(),t.memoizedState=[e,g],e},useReducer:function(e,g,t){var n=Vo();return g=void 0!==t?t(g):g,n.memoizedState=n.baseState=g,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:g},n.queue=e,e=e.dispatch=ga.bind(null,uo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Vo().memoizedState=e},useState:No,useDebugValue:Po,useDeferredValue:function(e){return Vo().memoizedState=e},useTransition:function(){var e=No(!1),g=e[0];return e=$o.bind(null,e[1]),Vo().memoizedState=e,[g,e]},useMutableSource:function(){},useSyncExternalStore:function(e,g,t){var n=uo,l=Vo();if(lI){if(void 0===t)throw Error(I(407));t=t()}else{if(t=g(),null===kC)throw Error(I(349));0!=(30&Ao)||Yo(n,g,t)}l.memoizedState=t;var o={value:t,getSnapshot:g};return l.queue=o,Lo(wo.bind(null,n,o,e),[e]),n.flags|=2048,Ko(9,Ho.bind(null,n,o,t,g),void 0,null),t},useId:function(){var e=Vo(),g=kC.identifierPrefix;if(lI){var t=ql;g=":"+g+"R"+(t=(Ol&~(1<<32-og(Ol)-1)).toString(32)+t),0<(t=po++)&&(g+="H"+t.toString(32)),g+=":"}else g=":"+g+"r"+(t=Go++).toString(32)+":";return e.memoizedState=g},unstable_isNewReconciler:!1},Ca={readContext:WI,useCallback:Oo,useContext:WI,useEffect:Uo,useImperativeHandle:jo,useInsertionEffect:Qo,useLayoutEffect:To,useMemo:qo,useReducer:Ro,useRef:zo,useState:function(){return Ro(vo)},useDebugValue:Po,useDeferredValue:function(e){return _o(fo(),mo.memoizedState,e)},useTransition:function(){return[Ro(vo)[0],fo().memoizedState]},useMutableSource:Xo,useSyncExternalStore:Jo,useId:ea,unstable_isNewReconciler:!1},ia={readContext:WI,useCallback:Oo,useContext:WI,useEffect:Uo,useImperativeHandle:jo,useInsertionEffect:Qo,useLayoutEffect:To,useMemo:qo,useReducer:ko,useRef:zo,useState:function(){return ko(vo)},useDebugValue:Po,useDeferredValue:function(e){var g=fo();return null===mo?g.memoizedState=e:_o(g,mo.memoizedState,e)},useTransition:function(){return[ko(vo)[0],fo().memoizedState]},useMutableSource:Xo,useSyncExternalStore:Jo,useId:ea,unstable_isNewReconciler:!1};function ra(e,g){try{var t="",n=g;do{t+=M(n),n=n.return}while(n);var l=t}catch(e){l="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:g,stack:l,digest:null}}function sa(e,g,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=g?g:null}}function ca(e,g){try{console.error(g.value)}catch(e){setTimeout((function(){throw e}))}}var da="function"==typeof WeakMap?WeakMap:Map;function Aa(e,g,t){(t=YI(-1,t)).tag=3,t.payload={element:null};var n=g.value;return t.callback=function(){QC||(QC=!0,TC=n),ca(0,g)},t}function ua(e,g,t){(t=YI(-1,t)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var l=g.value;t.payload=function(){return n(l)},t.callback=function(){ca(0,g)}}var I=e.stateNode;return null!==I&&"function"==typeof I.componentDidCatch&&(t.callback=function(){ca(0,g),"function"!=typeof n&&(null===DC?DC=new Set([this]):DC.add(this));var e=g.stack;this.componentDidCatch(g.value,{componentStack:null!==e?e:""})}),t}function ma(e,g,t){var n=e.pingCache;if(null===n){n=e.pingCache=new da;var l=new Set;n.set(g,l)}else void 0===(l=n.get(g))&&(l=new Set,n.set(g,l));l.has(t)||(l.add(t),e=Vi.bind(null,e,g,t),g.then(e,e))}function ba(e){do{var g;if((g=13===e.tag)&&(g=null===(g=e.memoizedState)||null!==g.dehydrated),g)return e;e=e.return}while(null!==e);return null}function Za(e,g,t,n,l){return 0==(1&e.mode)?(e===g?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((g=YI(-1,1)).tag=2,HI(t,g,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var ha=p.ReactCurrentOwner,pa=!1;function Ga(e,g,t,n){g.child=null===e?qI(g,null,t,n):OI(g,e.child,t,n)}function ya(e,g,t,n,l){t=t.render;var I=g.ref;return SI(g,l),n=So(e,g,t,n,I,l),t=Wo(),null===e||pa?(lI&&t&&eI(g),g.flags|=1,Ga(e,g,n,l),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~l,Qa(e,g,l))}function Ba(e,g,t,n,l){if(null===e){var I=t.type;return"function"!=typeof I||Yi(I)||void 0!==I.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=wi(t.type,null,n,g,g.mode,l)).ref=g.ref,e.return=g,g.child=e):(g.tag=15,g.type=I,Sa(e,g,I,n,l))}if(I=e.child,0==(e.lanes&l)){var o=I.memoizedProps;if((t=null!==(t=t.compare)?t:an)(o,n)&&e.ref===g.ref)return Qa(e,g,l)}return g.flags|=1,(e=Hi(I,n)).ref=g.ref,e.return=g,g.child=e}function Sa(e,g,t,n,l){if(null!==e){var I=e.memoizedProps;if(an(I,n)&&e.ref===g.ref){if(pa=!1,g.pendingProps=n=I,0==(e.lanes&l))return g.lanes=e.lanes,Qa(e,g,l);0!=(131072&e.flags)&&(pa=!0)}}return fa(e,g,t,n,l)}function Wa(e,g,t){var n=g.pendingProps,l=n.children,I=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0==(1&g.mode))g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vl(HC,YC),YC|=t;else{if(0==(1073741824&t))return e=null!==I?I.baseLanes|t:t,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:e,cachePool:null,transitions:null},g.updateQueue=null,Vl(HC,YC),YC|=e,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==I?I.baseLanes:t,Vl(HC,YC),YC|=n}else null!==I?(n=I.baseLanes|t,g.memoizedState=null):n=t,Vl(HC,YC),YC|=n;return Ga(e,g,l,t),g.child}function Va(e,g){var t=g.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(g.flags|=512,g.flags|=2097152)}function fa(e,g,t,n,l){var I=Jl(t)?kl:vl.current;return I=Xl(g,I),SI(g,l),t=So(e,g,t,n,I,l),n=Wo(),null===e||pa?(lI&&n&&eI(g),g.flags|=1,Ga(e,g,t,l),g.child):(g.updateQueue=e.updateQueue,g.flags&=-2053,e.lanes&=~l,Qa(e,g,l))}function va(e,g,t,n,l){if(Jl(t)){var I=!0;xl(g)}else I=!1;if(SI(g,l),null===g.stateNode)Ua(e,g),LI(g,t,n),QI(g,t,n,l),n=!0;else if(null===e){var o=g.stateNode,a=g.memoizedProps;o.props=a;var C=o.context,i=t.contextType;i="object"==typeof i&&null!==i?WI(i):Xl(g,i=Jl(t)?kl:vl.current);var r=t.getDerivedStateFromProps,s="function"==typeof r||"function"==typeof o.getSnapshotBeforeUpdate;s||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==n||C!==i)&&UI(g,o,n,i),kI=!1;var c=g.memoizedState;o.state=c,FI(g,n,o,l),C=g.memoizedState,a!==n||c!==C||Rl.current||kI?("function"==typeof r&&(zI(g,t,r,n),C=g.memoizedState),(a=kI||EI(g,t,a,n,c,C,i))?(s||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(g.flags|=4194308)):("function"==typeof o.componentDidMount&&(g.flags|=4194308),g.memoizedProps=n,g.memoizedState=C),o.props=n,o.state=C,o.context=i,n=a):("function"==typeof o.componentDidMount&&(g.flags|=4194308),n=!1)}else{o=g.stateNode,JI(e,g),a=g.memoizedProps,i=g.type===g.elementType?a:mI(g.type,a),o.props=i,s=g.pendingProps,c=o.context,C="object"==typeof(C=t.contextType)&&null!==C?WI(C):Xl(g,C=Jl(t)?kl:vl.current);var d=t.getDerivedStateFromProps;(r="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==s||c!==C)&&UI(g,o,n,C),kI=!1,c=g.memoizedState,o.state=c,FI(g,n,o,l);var A=g.memoizedState;a!==s||c!==A||Rl.current||kI?("function"==typeof d&&(zI(g,t,d,n),A=g.memoizedState),(i=kI||EI(g,t,i,n,c,A,C)||!1)?(r||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,A,C),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,A,C)),"function"==typeof o.componentDidUpdate&&(g.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(g.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(g.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(g.flags|=1024),g.memoizedProps=n,g.memoizedState=A),o.props=n,o.state=A,o.context=C,n=i):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(g.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(g.flags|=1024),n=!1)}return Ra(e,g,t,n,I,l)}function Ra(e,g,t,n,l,I){Va(e,g);var o=0!=(128&g.flags);if(!n&&!o)return l&&Fl(g,t,!1),Qa(e,g,I);n=g.stateNode,ha.current=g;var a=o&&"function"!=typeof t.getDerivedStateFromError?null:n.render();return g.flags|=1,null!==e&&o?(g.child=OI(g,e.child,null,I),g.child=OI(g,null,a,I)):Ga(e,g,a,I),g.memoizedState=n.state,l&&Fl(g,t,!0),g.child}function ka(e){var g=e.stateNode;g.pendingContext?Hl(0,g.pendingContext,g.pendingContext!==g.context):g.context&&Hl(0,g.context,!1),no(e,g.containerInfo)}function Xa(e,g,t,n,l){return dI(),AI(l),g.flags|=256,Ga(e,g,t,n),g.child}var Ja,Ya,Ha,wa,xa={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Na(e,g,t){var n,l=g.pendingProps,o=ao.current,a=!1,C=0!=(128&g.flags);if((n=C)||(n=(null===e||null!==e.memoizedState)&&0!=(2&o)),n?(a=!0,g.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Vl(ao,1&o),null===e)return iI(g),null!==(e=g.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&g.mode)?g.lanes=1:"$!"===e.data?g.lanes=8:g.lanes=1073741824,null):(C=l.children,e=l.fallback,a?(l=g.mode,a=g.child,C={mode:"hidden",children:C},0==(1&l)&&null!==a?(a.childLanes=0,a.pendingProps=C):a=Fi(C,l,0,null),e=xi(e,l,t,null),a.return=g,e.return=g,a.sibling=e,g.child=a,g.child.memoizedState=Fa(t),g.memoizedState=xa,e):Ka(g,C));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,g,t,n,l,o,a){if(t)return 256&g.flags?(g.flags&=-257,za(e,g,a,n=sa(Error(I(422))))):null!==g.memoizedState?(g.child=e.child,g.flags|=128,null):(o=n.fallback,l=g.mode,n=Fi({mode:"visible",children:n.children},l,0,null),(o=xi(o,l,a,null)).flags|=2,n.return=g,o.return=g,n.sibling=o,g.child=n,0!=(1&g.mode)&&OI(g,e.child,null,a),g.child.memoizedState=Fa(a),g.memoizedState=xa,o);if(0==(1&g.mode))return za(e,g,a,null);if("$!"===l.data){if(n=l.nextSibling&&l.nextSibling.dataset)var C=n.dgst;return n=C,za(e,g,a,n=sa(o=Error(I(419)),n,void 0))}if(C=0!=(a&e.childLanes),pa||C){if(null!==(n=kC)){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}0!==(l=0!=(l&(n.suspendedLanes|a))?0:l)&&l!==o.retryLane&&(o.retryLane=l,RI(e,l),ni(n,e,l,-1))}return mi(),za(e,g,a,n=sa(Error(I(421))))}return"$?"===l.data?(g.flags|=128,g.child=e.child,g=vi.bind(null,e),l._reactRetry=g,null):(e=o.treeContext,nI=il(l.nextSibling),tI=g,lI=!0,II=null,null!==e&&(Dl[jl++]=Ol,Dl[jl++]=ql,Dl[jl++]=Pl,Ol=e.id,ql=e.overflow,Pl=g),(g=Ka(g,n.children)).flags|=4096,g)}(e,g,C,l,n,o,t);if(a){a=l.fallback,C=g.mode,n=(o=e.child).sibling;var i={mode:"hidden",children:l.children};return 0==(1&C)&&g.child!==o?((l=g.child).childLanes=0,l.pendingProps=i,g.deletions=null):(l=Hi(o,i)).subtreeFlags=14680064&o.subtreeFlags,null!==n?a=Hi(n,a):(a=xi(a,C,t,null)).flags|=2,a.return=g,l.return=g,l.sibling=a,g.child=l,l=a,a=g.child,C=null===(C=e.child.memoizedState)?Fa(t):{baseLanes:C.baseLanes|t,cachePool:null,transitions:C.transitions},a.memoizedState=C,a.childLanes=e.childLanes&~t,g.memoizedState=xa,l}return e=(a=e.child).sibling,l=Hi(a,{mode:"visible",children:l.children}),0==(1&g.mode)&&(l.lanes=t),l.return=g,l.sibling=null,null!==e&&(null===(t=g.deletions)?(g.deletions=[e],g.flags|=16):t.push(e)),g.child=l,g.memoizedState=null,l}function Ka(e,g){return(g=Fi({mode:"visible",children:g},e.mode,0,null)).return=e,e.child=g}function za(e,g,t,n){return null!==n&&AI(n),OI(g,e.child,null,t),(e=Ka(g,g.pendingProps.children)).flags|=2,g.memoizedState=null,e}function Ma(e,g,t){e.lanes|=g;var n=e.alternate;null!==n&&(n.lanes|=g),BI(e.return,g,t)}function Ea(e,g,t,n,l){var I=e.memoizedState;null===I?e.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:l}:(I.isBackwards=g,I.rendering=null,I.renderingStartTime=0,I.last=n,I.tail=t,I.tailMode=l)}function La(e,g,t){var n=g.pendingProps,l=n.revealOrder,I=n.tail;if(Ga(e,g,n.children,t),0!=(2&(n=ao.current)))n=1&n|2,g.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=g.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ma(e,t,g);else if(19===e.tag)Ma(e,t,g);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break e;for(;null===e.sibling;){if(null===e.return||e.return===g)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Vl(ao,n),0==(1&g.mode))g.memoizedState=null;else switch(l){case"forwards":for(t=g.child,l=null;null!==t;)null!==(e=t.alternate)&&null===Co(e)&&(l=t),t=t.sibling;null===(t=l)?(l=g.child,g.child=null):(l=t.sibling,t.sibling=null),Ea(g,!1,l,t,I);break;case"backwards":for(t=null,l=g.child,g.child=null;null!==l;){if(null!==(e=l.alternate)&&null===Co(e)){g.child=l;break}e=l.sibling,l.sibling=t,t=l,l=e}Ea(g,!0,t,null,I);break;case"together":Ea(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Ua(e,g){0==(1&g.mode)&&null!==e&&(e.alternate=null,g.alternate=null,g.flags|=2)}function Qa(e,g,t){if(null!==e&&(g.dependencies=e.dependencies),FC|=g.lanes,0==(t&g.childLanes))return null;if(null!==e&&g.child!==e.child)throw Error(I(153));if(null!==g.child){for(t=Hi(e=g.child,e.pendingProps),g.child=t,t.return=g;null!==e.sibling;)e=e.sibling,(t=t.sibling=Hi(e,e.pendingProps)).return=g;t.sibling=null}return g.child}function Ta(e,g){if(!lI)switch(e.tailMode){case"hidden":g=e.tail;for(var t=null;null!==g;)null!==g.alternate&&(t=g),g=g.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?g||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Da(e){var g=null!==e.alternate&&e.alternate.child===e.child,t=0,n=0;if(g)for(var l=e.child;null!==l;)t|=l.lanes|l.childLanes,n|=14680064&l.subtreeFlags,n|=14680064&l.flags,l.return=e,l=l.sibling;else for(l=e.child;null!==l;)t|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=t,g}function ja(e,g,t){var n=g.pendingProps;switch(gI(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Da(g),null;case 1:case 17:return Jl(g.type)&&Yl(),Da(g),null;case 3:return n=g.stateNode,lo(),Wl(Rl),Wl(vl),ro(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(sI(g)?g.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&g.flags)||(g.flags|=1024,null!==II&&(ai(II),II=null))),Ya(e,g),Da(g),null;case 5:oo(g);var l=to(go.current);if(t=g.type,null!==e&&null!=g.stateNode)Ha(e,g,t,n,l),e.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!n){if(null===g.stateNode)throw Error(I(166));return Da(g),null}if(e=to($I.current),sI(g)){n=g.stateNode,t=g.type;var o=g.memoizedProps;switch(n[cl]=g,n[dl]=o,e=0!=(1&g.mode),t){case"dialog":Kn("cancel",n),Kn("close",n);break;case"iframe":case"object":case"embed":Kn("load",n);break;case"video":case"audio":for(l=0;l<wn.length;l++)Kn(wn[l],n);break;case"source":Kn("error",n);break;case"img":case"image":case"link":Kn("error",n),Kn("load",n);break;case"details":Kn("toggle",n);break;case"input":O(n,o),Kn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Kn("invalid",n);break;case"textarea":le(n,o),Kn("invalid",n)}for(var C in Ze(t,o),l=null,o)if(o.hasOwnProperty(C)){var i=o[C];"children"===C?"string"==typeof i?n.textContent!==i&&(!0!==o.suppressHydrationWarning&&_n(n.textContent,i,e),l=["children",i]):"number"==typeof i&&n.textContent!==""+i&&(!0!==o.suppressHydrationWarning&&_n(n.textContent,i,e),l=["children",""+i]):a.hasOwnProperty(C)&&null!=i&&"onScroll"===C&&Kn("scroll",n)}switch(t){case"input":T(n),$(n,o,!0);break;case"textarea":T(n),oe(n);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(n.onclick=$n)}n=l,g.updateQueue=n,null!==n&&(g.flags|=4)}else{C=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=C.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=C.createElement(t,{is:n.is}):(e=C.createElement(t),"select"===t&&(C=e,n.multiple?C.multiple=!0:n.size&&(C.size=n.size))):e=C.createElementNS(e,t),e[cl]=g,e[dl]=n,Ja(e,g,!1,!1),g.stateNode=e;e:{switch(C=he(t,n),t){case"dialog":Kn("cancel",e),Kn("close",e),l=n;break;case"iframe":case"object":case"embed":Kn("load",e),l=n;break;case"video":case"audio":for(l=0;l<wn.length;l++)Kn(wn[l],e);l=n;break;case"source":Kn("error",e),l=n;break;case"img":case"image":case"link":Kn("error",e),Kn("load",e),l=n;break;case"details":Kn("toggle",e),l=n;break;case"input":O(e,n),l=P(e,n),Kn("invalid",e);break;case"option":default:l=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},l=F({},n,{value:void 0}),Kn("invalid",e);break;case"textarea":le(e,n),l=ne(e,n),Kn("invalid",e)}for(o in Ze(t,l),i=l)if(i.hasOwnProperty(o)){var r=i[o];"style"===o?me(e,r):"dangerouslySetInnerHTML"===o?null!=(r=r?r.__html:void 0)&&se(e,r):"children"===o?"string"==typeof r?("textarea"!==t||""!==r)&&ce(e,r):"number"==typeof r&&ce(e,""+r):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=r&&"onScroll"===o&&Kn("scroll",e):null!=r&&h(e,o,r,C))}switch(t){case"input":T(e),$(e,n,!1);break;case"textarea":T(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+U(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?te(e,!!n.multiple,o,!1):null!=n.defaultValue&&te(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=$n)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(g.flags|=4)}null!==g.ref&&(g.flags|=512,g.flags|=2097152)}return Da(g),null;case 6:if(e&&null!=g.stateNode)wa(e,g,e.memoizedProps,n);else{if("string"!=typeof n&&null===g.stateNode)throw Error(I(166));if(t=to(go.current),to($I.current),sI(g)){if(n=g.stateNode,t=g.memoizedProps,n[cl]=g,(o=n.nodeValue!==t)&&null!==(e=tI))switch(e.tag){case 3:_n(n.nodeValue,t,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&_n(n.nodeValue,t,0!=(1&e.mode))}o&&(g.flags|=4)}else(n=(9===t.nodeType?t:t.ownerDocument).createTextNode(n))[cl]=g,g.stateNode=n}return Da(g),null;case 13:if(Wl(ao),n=g.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(lI&&null!==nI&&0!=(1&g.mode)&&0==(128&g.flags))cI(),dI(),g.flags|=98560,o=!1;else if(o=sI(g),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(I(318));if(!(o=null!==(o=g.memoizedState)?o.dehydrated:null))throw Error(I(317));o[cl]=g}else dI(),0==(128&g.flags)&&(g.memoizedState=null),g.flags|=4;Da(g),o=!1}else null!==II&&(ai(II),II=null),o=!0;if(!o)return 65536&g.flags?g:null}return 0!=(128&g.flags)?(g.lanes=t,g):((n=null!==n)!=(null!==e&&null!==e.memoizedState)&&n&&(g.child.flags|=8192,0!=(1&g.mode)&&(null===e||0!=(1&ao.current)?0===wC&&(wC=3):mi())),null!==g.updateQueue&&(g.flags|=4),Da(g),null);case 4:return lo(),Ya(e,g),null===e&&En(g.stateNode.containerInfo),Da(g),null;case 10:return yI(g.type._context),Da(g),null;case 19:if(Wl(ao),null===(o=g.memoizedState))return Da(g),null;if(n=0!=(128&g.flags),null===(C=o.rendering))if(n)Ta(o,!1);else{if(0!==wC||null!==e&&0!=(128&e.flags))for(e=g.child;null!==e;){if(null!==(C=Co(e))){for(g.flags|=128,Ta(o,!1),null!==(n=C.updateQueue)&&(g.updateQueue=n,g.flags|=4),g.subtreeFlags=0,n=t,t=g.child;null!==t;)e=n,(o=t).flags&=14680066,null===(C=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=C.childLanes,o.lanes=C.lanes,o.child=C.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=C.memoizedProps,o.memoizedState=C.memoizedState,o.updateQueue=C.updateQueue,o.type=C.type,e=C.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Vl(ao,1&ao.current|2),g.child}e=e.sibling}null!==o.tail&&qe()>LC&&(g.flags|=128,n=!0,Ta(o,!1),g.lanes=4194304)}else{if(!n)if(null!==(e=Co(C))){if(g.flags|=128,n=!0,null!==(t=e.updateQueue)&&(g.updateQueue=t,g.flags|=4),Ta(o,!0),null===o.tail&&"hidden"===o.tailMode&&!C.alternate&&!lI)return Da(g),null}else 2*qe()-o.renderingStartTime>LC&&1073741824!==t&&(g.flags|=128,n=!0,Ta(o,!1),g.lanes=4194304);o.isBackwards?(C.sibling=g.child,g.child=C):(null!==(t=o.last)?t.sibling=C:g.child=C,o.last=C)}return null!==o.tail?(g=o.tail,o.rendering=g,o.tail=g.sibling,o.renderingStartTime=qe(),g.sibling=null,t=ao.current,Vl(ao,n?1&t|2:1&t),g):(Da(g),null);case 22:case 23:return ci(),n=null!==g.memoizedState,null!==e&&null!==e.memoizedState!==n&&(g.flags|=8192),n&&0!=(1&g.mode)?0!=(1073741824&YC)&&(Da(g),6&g.subtreeFlags&&(g.flags|=8192)):Da(g),null;case 24:case 25:return null}throw Error(I(156,g.tag))}function Pa(e,g){switch(gI(g),g.tag){case 1:return Jl(g.type)&&Yl(),65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 3:return lo(),Wl(Rl),Wl(vl),ro(),0!=(65536&(e=g.flags))&&0==(128&e)?(g.flags=-65537&e|128,g):null;case 5:return oo(g),null;case 13:if(Wl(ao),null!==(e=g.memoizedState)&&null!==e.dehydrated){if(null===g.alternate)throw Error(I(340));dI()}return 65536&(e=g.flags)?(g.flags=-65537&e|128,g):null;case 19:return Wl(ao),null;case 4:return lo(),null;case 10:return yI(g.type._context),null;case 22:case 23:return ci(),null;default:return null}}Ja=function(e,g){for(var t=g.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===g)break;for(;null===t.sibling;){if(null===t.return||t.return===g)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Ya=function(){},Ha=function(e,g,t,n){var l=e.memoizedProps;if(l!==n){e=g.stateNode,to($I.current);var I,o=null;switch(t){case"input":l=P(e,l),n=P(e,n),o=[];break;case"select":l=F({},l,{value:void 0}),n=F({},n,{value:void 0}),o=[];break;case"textarea":l=ne(e,l),n=ne(e,n),o=[];break;default:"function"!=typeof l.onClick&&"function"==typeof n.onClick&&(e.onclick=$n)}for(r in Ze(t,n),t=null,l)if(!n.hasOwnProperty(r)&&l.hasOwnProperty(r)&&null!=l[r])if("style"===r){var C=l[r];for(I in C)C.hasOwnProperty(I)&&(t||(t={}),t[I]="")}else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(a.hasOwnProperty(r)?o||(o=[]):(o=o||[]).push(r,null));for(r in n){var i=n[r];if(C=null!=l?l[r]:void 0,n.hasOwnProperty(r)&&i!==C&&(null!=i||null!=C))if("style"===r)if(C){for(I in C)!C.hasOwnProperty(I)||i&&i.hasOwnProperty(I)||(t||(t={}),t[I]="");for(I in i)i.hasOwnProperty(I)&&C[I]!==i[I]&&(t||(t={}),t[I]=i[I])}else t||(o||(o=[]),o.push(r,t)),t=i;else"dangerouslySetInnerHTML"===r?(i=i?i.__html:void 0,C=C?C.__html:void 0,null!=i&&C!==i&&(o=o||[]).push(r,i)):"children"===r?"string"!=typeof i&&"number"!=typeof i||(o=o||[]).push(r,""+i):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(a.hasOwnProperty(r)?(null!=i&&"onScroll"===r&&Kn("scroll",e),o||C===i||(o=[])):(o=o||[]).push(r,i))}t&&(o=o||[]).push("style",t);var r=o;(g.updateQueue=r)&&(g.flags|=4)}},wa=function(e,g,t,n){t!==n&&(g.flags|=4)};var Oa=!1,qa=!1,_a="function"==typeof WeakSet?WeakSet:Set,$a=null;function eC(e,g){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Wi(e,g,t)}else t.current=null}function gC(e,g,t){try{t()}catch(t){Wi(e,g,t)}}var tC=!1;function nC(e,g,t){var n=g.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var l=n=n.next;do{if((l.tag&e)===e){var I=l.destroy;l.destroy=void 0,void 0!==I&&gC(g,t,I)}l=l.next}while(l!==n)}}function lC(e,g){if(null!==(g=null!==(g=g.updateQueue)?g.lastEffect:null)){var t=g=g.next;do{if((t.tag&e)===e){var n=t.create;t.destroy=n()}t=t.next}while(t!==g)}}function IC(e){var g=e.ref;if(null!==g){var t=e.stateNode;e.tag,e=t,"function"==typeof g?g(e):g.current=e}}function oC(e){var g=e.alternate;null!==g&&(e.alternate=null,oC(g)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(g=e.stateNode)&&(delete g[cl],delete g[dl],delete g[ul],delete g[ml],delete g[bl]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function aC(e){return 5===e.tag||3===e.tag||4===e.tag}function CC(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||aC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function iC(e,g,t){var n=e.tag;if(5===n||6===n)e=e.stateNode,g?8===t.nodeType?t.parentNode.insertBefore(e,g):t.insertBefore(e,g):(8===t.nodeType?(g=t.parentNode).insertBefore(e,t):(g=t).appendChild(e),null!=(t=t._reactRootContainer)||null!==g.onclick||(g.onclick=$n));else if(4!==n&&null!==(e=e.child))for(iC(e,g,t),e=e.sibling;null!==e;)iC(e,g,t),e=e.sibling}function rC(e,g,t){var n=e.tag;if(5===n||6===n)e=e.stateNode,g?t.insertBefore(e,g):t.appendChild(e);else if(4!==n&&null!==(e=e.child))for(rC(e,g,t),e=e.sibling;null!==e;)rC(e,g,t),e=e.sibling}var sC=null,cC=!1;function dC(e,g,t){for(t=t.child;null!==t;)AC(e,g,t),t=t.sibling}function AC(e,g,t){if(Ig&&"function"==typeof Ig.onCommitFiberUnmount)try{Ig.onCommitFiberUnmount(lg,t)}catch(e){}switch(t.tag){case 5:qa||eC(t,g);case 6:var n=sC,l=cC;sC=null,dC(e,g,t),cC=l,null!==(sC=n)&&(cC?(e=sC,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):sC.removeChild(t.stateNode));break;case 18:null!==sC&&(cC?(e=sC,t=t.stateNode,8===e.nodeType?Cl(e.parentNode,t):1===e.nodeType&&Cl(e,t),Eg(e)):Cl(sC,t.stateNode));break;case 4:n=sC,l=cC,sC=t.stateNode.containerInfo,cC=!0,dC(e,g,t),sC=n,cC=l;break;case 0:case 11:case 14:case 15:if(!qa&&null!==(n=t.updateQueue)&&null!==(n=n.lastEffect)){l=n=n.next;do{var I=l,o=I.destroy;I=I.tag,void 0!==o&&(0!=(2&I)||0!=(4&I))&&gC(t,g,o),l=l.next}while(l!==n)}dC(e,g,t);break;case 1:if(!qa&&(eC(t,g),"function"==typeof(n=t.stateNode).componentWillUnmount))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(e){Wi(t,g,e)}dC(e,g,t);break;case 21:dC(e,g,t);break;case 22:1&t.mode?(qa=(n=qa)||null!==t.memoizedState,dC(e,g,t),qa=n):dC(e,g,t);break;default:dC(e,g,t)}}function uC(e){var g=e.updateQueue;if(null!==g){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new _a),g.forEach((function(g){var n=Ri.bind(null,e,g);t.has(g)||(t.add(g),g.then(n,n))}))}}function mC(e,g){var t=g.deletions;if(null!==t)for(var n=0;n<t.length;n++){var l=t[n];try{var o=e,a=g,C=a;e:for(;null!==C;){switch(C.tag){case 5:sC=C.stateNode,cC=!1;break e;case 3:case 4:sC=C.stateNode.containerInfo,cC=!0;break e}C=C.return}if(null===sC)throw Error(I(160));AC(o,a,l),sC=null,cC=!1;var i=l.alternate;null!==i&&(i.return=null),l.return=null}catch(e){Wi(l,g,e)}}if(12854&g.subtreeFlags)for(g=g.child;null!==g;)bC(g,e),g=g.sibling}function bC(e,g){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mC(g,e),ZC(e),4&n){try{nC(3,e,e.return),lC(3,e)}catch(g){Wi(e,e.return,g)}try{nC(5,e,e.return)}catch(g){Wi(e,e.return,g)}}break;case 1:mC(g,e),ZC(e),512&n&&null!==t&&eC(t,t.return);break;case 5:if(mC(g,e),ZC(e),512&n&&null!==t&&eC(t,t.return),32&e.flags){var l=e.stateNode;try{ce(l,"")}catch(g){Wi(e,e.return,g)}}if(4&n&&null!=(l=e.stateNode)){var o=e.memoizedProps,a=null!==t?t.memoizedProps:o,C=e.type,i=e.updateQueue;if(e.updateQueue=null,null!==i)try{"input"===C&&"radio"===o.type&&null!=o.name&&q(l,o),he(C,a);var r=he(C,o);for(a=0;a<i.length;a+=2){var s=i[a],c=i[a+1];"style"===s?me(l,c):"dangerouslySetInnerHTML"===s?se(l,c):"children"===s?ce(l,c):h(l,s,c,r)}switch(C){case"input":_(l,o);break;case"textarea":Ie(l,o);break;case"select":var d=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var A=o.value;null!=A?te(l,!!o.multiple,A,!1):d!==!!o.multiple&&(null!=o.defaultValue?te(l,!!o.multiple,o.defaultValue,!0):te(l,!!o.multiple,o.multiple?[]:"",!1))}l[dl]=o}catch(g){Wi(e,e.return,g)}}break;case 6:if(mC(g,e),ZC(e),4&n){if(null===e.stateNode)throw Error(I(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(g){Wi(e,e.return,g)}}break;case 3:if(mC(g,e),ZC(e),4&n&&null!==t&&t.memoizedState.isDehydrated)try{Eg(g.containerInfo)}catch(g){Wi(e,e.return,g)}break;case 4:default:mC(g,e),ZC(e);break;case 13:mC(g,e),ZC(e),8192&(l=e.child).flags&&(o=null!==l.memoizedState,l.stateNode.isHidden=o,!o||null!==l.alternate&&null!==l.alternate.memoizedState||(EC=qe())),4&n&&uC(e);break;case 22:if(s=null!==t&&null!==t.memoizedState,1&e.mode?(qa=(r=qa)||s,mC(g,e),qa=r):mC(g,e),ZC(e),8192&n){if(r=null!==e.memoizedState,(e.stateNode.isHidden=r)&&!s&&0!=(1&e.mode))for($a=e,s=e.child;null!==s;){for(c=$a=s;null!==$a;){switch(A=(d=$a).child,d.tag){case 0:case 11:case 14:case 15:nC(4,d,d.return);break;case 1:eC(d,d.return);var u=d.stateNode;if("function"==typeof u.componentWillUnmount){n=d,t=d.return;try{g=n,u.props=g.memoizedProps,u.state=g.memoizedState,u.componentWillUnmount()}catch(e){Wi(n,t,e)}}break;case 5:eC(d,d.return);break;case 22:if(null!==d.memoizedState){yC(c);continue}}null!==A?(A.return=d,$a=A):yC(c)}s=s.sibling}e:for(s=null,c=e;;){if(5===c.tag){if(null===s){s=c;try{l=c.stateNode,r?"function"==typeof(o=l.style).setProperty?o.setProperty("display","none","important"):o.display="none":(C=c.stateNode,a=null!=(i=c.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,C.style.display=ue("display",a))}catch(g){Wi(e,e.return,g)}}}else if(6===c.tag){if(null===s)try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(g){Wi(e,e.return,g)}}else if((22!==c.tag&&23!==c.tag||null===c.memoizedState||c===e)&&null!==c.child){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;null===c.sibling;){if(null===c.return||c.return===e)break e;s===c&&(s=null),c=c.return}s===c&&(s=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:mC(g,e),ZC(e),4&n&&uC(e);case 21:}}function ZC(e){var g=e.flags;if(2&g){try{e:{for(var t=e.return;null!==t;){if(aC(t)){var n=t;break e}t=t.return}throw Error(I(160))}switch(n.tag){case 5:var l=n.stateNode;32&n.flags&&(ce(l,""),n.flags&=-33),rC(e,CC(e),l);break;case 3:case 4:var o=n.stateNode.containerInfo;iC(e,CC(e),o);break;default:throw Error(I(161))}}catch(g){Wi(e,e.return,g)}e.flags&=-3}4096&g&&(e.flags&=-4097)}function hC(e,g,t){$a=e,pC(e,g,t)}function pC(e,g,t){for(var n=0!=(1&e.mode);null!==$a;){var l=$a,I=l.child;if(22===l.tag&&n){var o=null!==l.memoizedState||Oa;if(!o){var a=l.alternate,C=null!==a&&null!==a.memoizedState||qa;a=Oa;var i=qa;if(Oa=o,(qa=C)&&!i)for($a=l;null!==$a;)C=(o=$a).child,22===o.tag&&null!==o.memoizedState?BC(l):null!==C?(C.return=o,$a=C):BC(l);for(;null!==I;)$a=I,pC(I,g,t),I=I.sibling;$a=l,Oa=a,qa=i}GC(e)}else 0!=(8772&l.subtreeFlags)&&null!==I?(I.return=l,$a=I):GC(e)}}function GC(e){for(;null!==$a;){var g=$a;if(0!=(8772&g.flags)){var t=g.alternate;try{if(0!=(8772&g.flags))switch(g.tag){case 0:case 11:case 15:qa||lC(5,g);break;case 1:var n=g.stateNode;if(4&g.flags&&!qa)if(null===t)n.componentDidMount();else{var l=g.elementType===g.type?t.memoizedProps:mI(g.type,t.memoizedProps);n.componentDidUpdate(l,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=g.updateQueue;null!==o&&NI(g,o,n);break;case 3:var a=g.updateQueue;if(null!==a){if(t=null,null!==g.child)switch(g.child.tag){case 5:case 1:t=g.child.stateNode}NI(g,a,t)}break;case 5:var C=g.stateNode;if(null===t&&4&g.flags){t=C;var i=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&t.focus();break;case"img":i.src&&(t.src=i.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===g.memoizedState){var r=g.alternate;if(null!==r){var s=r.memoizedState;if(null!==s){var c=s.dehydrated;null!==c&&Eg(c)}}}break;default:throw Error(I(163))}qa||512&g.flags&&IC(g)}catch(e){Wi(g,g.return,e)}}if(g===e){$a=null;break}if(null!==(t=g.sibling)){t.return=g.return,$a=t;break}$a=g.return}}function yC(e){for(;null!==$a;){var g=$a;if(g===e){$a=null;break}var t=g.sibling;if(null!==t){t.return=g.return,$a=t;break}$a=g.return}}function BC(e){for(;null!==$a;){var g=$a;try{switch(g.tag){case 0:case 11:case 15:var t=g.return;try{lC(4,g)}catch(e){Wi(g,t,e)}break;case 1:var n=g.stateNode;if("function"==typeof n.componentDidMount){var l=g.return;try{n.componentDidMount()}catch(e){Wi(g,l,e)}}var I=g.return;try{IC(g)}catch(e){Wi(g,I,e)}break;case 5:var o=g.return;try{IC(g)}catch(e){Wi(g,o,e)}}}catch(e){Wi(g,g.return,e)}if(g===e){$a=null;break}var a=g.sibling;if(null!==a){a.return=g.return,$a=a;break}$a=g.return}}var SC,WC=Math.ceil,VC=p.ReactCurrentDispatcher,fC=p.ReactCurrentOwner,vC=p.ReactCurrentBatchConfig,RC=0,kC=null,XC=null,JC=0,YC=0,HC=Sl(0),wC=0,xC=null,FC=0,NC=0,KC=0,zC=null,MC=null,EC=0,LC=1/0,UC=null,QC=!1,TC=null,DC=null,jC=!1,PC=null,OC=0,qC=0,_C=null,$C=-1,ei=0;function gi(){return 0!=(6&RC)?qe():-1!==$C?$C:$C=qe()}function ti(e){return 0==(1&e.mode)?1:0!=(2&RC)&&0!==JC?JC&-JC:null!==uI.transition?(0===ei&&(ei=ug()),ei):0!==(e=hg)?e:e=void 0===(e=window.event)?16:Og(e.type)}function ni(e,g,t,n){if(50<qC)throw qC=0,_C=null,Error(I(185));bg(e,t,n),0!=(2&RC)&&e===kC||(e===kC&&(0==(2&RC)&&(NC|=t),4===wC&&Ci(e,JC)),li(e,n),1===t&&0===RC&&0==(1&g.mode)&&(LC=qe()+500,Kl&&El()))}function li(e,g){var t=e.callbackNode;!function(e,g){for(var t=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,I=e.pendingLanes;0<I;){var o=31-og(I),a=1<<o,C=l[o];-1===C?0!=(a&t)&&0==(a&n)||(l[o]=dg(a,g)):C<=g&&(e.expiredLanes|=a),I&=~a}}(e,g);var n=cg(e,e===kC?JC:0);if(0===n)null!==t&&je(t),e.callbackNode=null,e.callbackPriority=0;else if(g=n&-n,e.callbackPriority!==g){if(null!=t&&je(t),1===g)0===e.tag?function(e){Kl=!0,Ml(e)}(ii.bind(null,e)):Ml(ii.bind(null,e)),ol((function(){0==(6&RC)&&El()})),t=null;else{switch(pg(n)){case 1:t=$e;break;case 4:t=eg;break;case 16:default:t=gg;break;case 536870912:t=ng}t=ki(t,Ii.bind(null,e))}e.callbackPriority=g,e.callbackNode=t}}function Ii(e,g){if($C=-1,ei=0,0!=(6&RC))throw Error(I(327));var t=e.callbackNode;if(Bi()&&e.callbackNode!==t)return null;var n=cg(e,e===kC?JC:0);if(0===n)return null;if(0!=(30&n)||0!=(n&e.expiredLanes)||g)g=bi(e,n);else{g=n;var l=RC;RC|=2;var o=ui();for(kC===e&&JC===g||(UC=null,LC=qe()+500,di(e,g));;)try{hi();break}catch(g){Ai(e,g)}GI(),VC.current=o,RC=l,null!==XC?g=0:(kC=null,JC=0,g=wC)}if(0!==g){if(2===g&&0!==(l=Ag(e))&&(n=l,g=oi(e,l)),1===g)throw t=xC,di(e,0),Ci(e,n),li(e,qe()),t;if(6===g)Ci(e,n);else{if(l=e.current.alternate,0==(30&n)&&!function(e){for(var g=e;;){if(16384&g.flags){var t=g.updateQueue;if(null!==t&&null!==(t=t.stores))for(var n=0;n<t.length;n++){var l=t[n],I=l.getSnapshot;l=l.value;try{if(!on(I(),l))return!1}catch(e){return!1}}}if(t=g.child,16384&g.subtreeFlags&&null!==t)t.return=g,g=t;else{if(g===e)break;for(;null===g.sibling;){if(null===g.return||g.return===e)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}(l)&&(2===(g=bi(e,n))&&0!==(o=Ag(e))&&(n=o,g=oi(e,o)),1===g))throw t=xC,di(e,0),Ci(e,n),li(e,qe()),t;switch(e.finishedWork=l,e.finishedLanes=n,g){case 0:case 1:throw Error(I(345));case 2:case 5:yi(e,MC,UC);break;case 3:if(Ci(e,n),(130023424&n)===n&&10<(g=EC+500-qe())){if(0!==cg(e,0))break;if(((l=e.suspendedLanes)&n)!==n){gi(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=nl(yi.bind(null,e,MC,UC),g);break}yi(e,MC,UC);break;case 4:if(Ci(e,n),(4194240&n)===n)break;for(g=e.eventTimes,l=-1;0<n;){var a=31-og(n);o=1<<a,(a=g[a])>l&&(l=a),n&=~o}if(n=l,10<(n=(120>(n=qe()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*WC(n/1960))-n)){e.timeoutHandle=nl(yi.bind(null,e,MC,UC),n);break}yi(e,MC,UC);break;default:throw Error(I(329))}}}return li(e,qe()),e.callbackNode===t?Ii.bind(null,e):null}function oi(e,g){var t=zC;return e.current.memoizedState.isDehydrated&&(di(e,g).flags|=256),2!==(e=bi(e,g))&&(g=MC,MC=t,null!==g&&ai(g)),e}function ai(e){null===MC?MC=e:MC.push.apply(MC,e)}function Ci(e,g){for(g&=~KC,g&=~NC,e.suspendedLanes|=g,e.pingedLanes&=~g,e=e.expirationTimes;0<g;){var t=31-og(g),n=1<<t;e[t]=-1,g&=~n}}function ii(e){if(0!=(6&RC))throw Error(I(327));Bi();var g=cg(e,0);if(0==(1&g))return li(e,qe()),null;var t=bi(e,g);if(0!==e.tag&&2===t){var n=Ag(e);0!==n&&(g=n,t=oi(e,n))}if(1===t)throw t=xC,di(e,0),Ci(e,g),li(e,qe()),t;if(6===t)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=g,yi(e,MC,UC),li(e,qe()),null}function ri(e,g){var t=RC;RC|=1;try{return e(g)}finally{0===(RC=t)&&(LC=qe()+500,Kl&&El())}}function si(e){null!==PC&&0===PC.tag&&0==(6&RC)&&Bi();var g=RC;RC|=1;var t=vC.transition,n=hg;try{if(vC.transition=null,hg=1,e)return e()}finally{hg=n,vC.transition=t,0==(6&(RC=g))&&El()}}function ci(){YC=HC.current,Wl(HC)}function di(e,g){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,ll(t)),null!==XC)for(t=XC.return;null!==t;){var n=t;switch(gI(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&Yl();break;case 3:lo(),Wl(Rl),Wl(vl),ro();break;case 5:oo(n);break;case 4:lo();break;case 13:case 19:Wl(ao);break;case 10:yI(n.type._context);break;case 22:case 23:ci()}t=t.return}if(kC=e,XC=e=Hi(e.current,null),JC=YC=g,wC=0,xC=null,KC=NC=FC=0,MC=zC=null,null!==VI){for(g=0;g<VI.length;g++)if(null!==(n=(t=VI[g]).interleaved)){t.interleaved=null;var l=n.next,I=t.pending;if(null!==I){var o=I.next;I.next=l,n.next=o}t.pending=n}VI=null}return e}function Ai(e,g){for(;;){var t=XC;try{if(GI(),so.current=oa,Zo){for(var n=uo.memoizedState;null!==n;){var l=n.queue;null!==l&&(l.pending=null),n=n.next}Zo=!1}if(Ao=0,bo=mo=uo=null,ho=!1,po=0,fC.current=null,null===t||null===t.return){wC=1,xC=g,XC=null;break}e:{var o=e,a=t.return,C=t,i=g;if(g=JC,C.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){var r=i,s=C,c=s.tag;if(0==(1&s.mode)&&(0===c||11===c||15===c)){var d=s.alternate;d?(s.updateQueue=d.updateQueue,s.memoizedState=d.memoizedState,s.lanes=d.lanes):(s.updateQueue=null,s.memoizedState=null)}var A=ba(a);if(null!==A){A.flags&=-257,Za(A,a,C,0,g),1&A.mode&&ma(o,r,g),i=r;var u=(g=A).updateQueue;if(null===u){var m=new Set;m.add(i),g.updateQueue=m}else u.add(i);break e}if(0==(1&g)){ma(o,r,g),mi();break e}i=Error(I(426))}else if(lI&&1&C.mode){var b=ba(a);if(null!==b){0==(65536&b.flags)&&(b.flags|=256),Za(b,a,C,0,g),AI(ra(i,C));break e}}o=i=ra(i,C),4!==wC&&(wC=2),null===zC?zC=[o]:zC.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,g&=-g,o.lanes|=g,xI(o,Aa(0,i,g));break e;case 1:C=i;var Z=o.type,h=o.stateNode;if(0==(128&o.flags)&&("function"==typeof Z.getDerivedStateFromError||null!==h&&"function"==typeof h.componentDidCatch&&(null===DC||!DC.has(h)))){o.flags|=65536,g&=-g,o.lanes|=g,xI(o,ua(o,C,g));break e}}o=o.return}while(null!==o)}Gi(t)}catch(e){g=e,XC===t&&null!==t&&(XC=t=t.return);continue}break}}function ui(){var e=VC.current;return VC.current=oa,null===e?oa:e}function mi(){0!==wC&&3!==wC&&2!==wC||(wC=4),null===kC||0==(268435455&FC)&&0==(268435455&NC)||Ci(kC,JC)}function bi(e,g){var t=RC;RC|=2;var n=ui();for(kC===e&&JC===g||(UC=null,di(e,g));;)try{Zi();break}catch(g){Ai(e,g)}if(GI(),RC=t,VC.current=n,null!==XC)throw Error(I(261));return kC=null,JC=0,wC}function Zi(){for(;null!==XC;)pi(XC)}function hi(){for(;null!==XC&&!Pe();)pi(XC)}function pi(e){var g=SC(e.alternate,e,YC);e.memoizedProps=e.pendingProps,null===g?Gi(e):XC=g,fC.current=null}function Gi(e){var g=e;do{var t=g.alternate;if(e=g.return,0==(32768&g.flags)){if(null!==(t=ja(t,g,YC)))return void(XC=t)}else{if(null!==(t=Pa(t,g)))return t.flags&=32767,void(XC=t);if(null===e)return wC=6,void(XC=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(g=g.sibling))return void(XC=g);XC=g=e}while(null!==g);0===wC&&(wC=5)}function yi(e,g,t){var n=hg,l=vC.transition;try{vC.transition=null,hg=1,function(e,g,t,n){do{Bi()}while(null!==PC);if(0!=(6&RC))throw Error(I(327));t=e.finishedWork;var l=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var o=t.lanes|t.childLanes;if(function(e,g){var t=e.pendingLanes&~g;e.pendingLanes=g,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=g,e.mutableReadLanes&=g,e.entangledLanes&=g,g=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<t;){var l=31-og(t),I=1<<l;g[l]=0,n[l]=-1,e[l]=-1,t&=~I}}(e,o),e===kC&&(XC=kC=null,JC=0),0==(2064&t.subtreeFlags)&&0==(2064&t.flags)||jC||(jC=!0,ki(gg,(function(){return Bi(),null}))),o=0!=(15990&t.flags),0!=(15990&t.subtreeFlags)||o){o=vC.transition,vC.transition=null;var a=hg;hg=1;var C=RC;RC|=4,fC.current=null,function(e,g){if(el=Ug,dn(e=cn())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var l=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch(e){t=null;break e}var a=0,C=-1,i=-1,r=0,s=0,c=e,d=null;g:for(;;){for(var A;c!==t||0!==l&&3!==c.nodeType||(C=a+l),c!==o||0!==n&&3!==c.nodeType||(i=a+n),3===c.nodeType&&(a+=c.nodeValue.length),null!==(A=c.firstChild);)d=c,c=A;for(;;){if(c===e)break g;if(d===t&&++r===l&&(C=a),d===o&&++s===n&&(i=a),null!==(A=c.nextSibling))break;d=(c=d).parentNode}c=A}t=-1===C||-1===i?null:{start:C,end:i}}else t=null}t=t||{start:0,end:0}}else t=null;for(gl={focusedElem:e,selectionRange:t},Ug=!1,$a=g;null!==$a;)if(e=(g=$a).child,0!=(1028&g.subtreeFlags)&&null!==e)e.return=g,$a=e;else for(;null!==$a;){g=$a;try{var u=g.alternate;if(0!=(1024&g.flags))switch(g.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==u){var m=u.memoizedProps,b=u.memoizedState,Z=g.stateNode,h=Z.getSnapshotBeforeUpdate(g.elementType===g.type?m:mI(g.type,m),b);Z.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var p=g.stateNode.containerInfo;1===p.nodeType?p.textContent="":9===p.nodeType&&p.documentElement&&p.removeChild(p.documentElement);break;default:throw Error(I(163))}}catch(e){Wi(g,g.return,e)}if(null!==(e=g.sibling)){e.return=g.return,$a=e;break}$a=g.return}u=tC,tC=!1}(e,t),bC(t,e),An(gl),Ug=!!el,gl=el=null,e.current=t,hC(t,e,l),Oe(),RC=C,hg=a,vC.transition=o}else e.current=t;if(jC&&(jC=!1,PC=e,OC=l),0===(o=e.pendingLanes)&&(DC=null),function(e){if(Ig&&"function"==typeof Ig.onCommitFiberRoot)try{Ig.onCommitFiberRoot(lg,e,void 0,128==(128&e.current.flags))}catch(e){}}(t.stateNode),li(e,qe()),null!==g)for(n=e.onRecoverableError,t=0;t<g.length;t++)n((l=g[t]).value,{componentStack:l.stack,digest:l.digest});if(QC)throw QC=!1,e=TC,TC=null,e;0!=(1&OC)&&0!==e.tag&&Bi(),0!=(1&(o=e.pendingLanes))?e===_C?qC++:(qC=0,_C=e):qC=0,El()}(e,g,t,n)}finally{vC.transition=l,hg=n}return null}function Bi(){if(null!==PC){var e=pg(OC),g=vC.transition,t=hg;try{if(vC.transition=null,hg=16>e?16:e,null===PC)var n=!1;else{if(e=PC,PC=null,OC=0,0!=(6&RC))throw Error(I(331));var l=RC;for(RC|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!=(16&$a.flags)){var C=o.deletions;if(null!==C){for(var i=0;i<C.length;i++){var r=C[i];for($a=r;null!==$a;){var s=$a;switch(s.tag){case 0:case 11:case 15:nC(8,s,o)}var c=s.child;if(null!==c)c.return=s,$a=c;else for(;null!==$a;){var d=(s=$a).sibling,A=s.return;if(oC(s),s===r){$a=null;break}if(null!==d){d.return=A,$a=d;break}$a=A}}}var u=o.alternate;if(null!==u){var m=u.child;if(null!==m){u.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}$a=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!=(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:nC(9,o,o.return)}var Z=o.sibling;if(null!==Z){Z.return=o.return,$a=Z;break e}$a=o.return}}var h=e.current;for($a=h;null!==$a;){var p=(a=$a).child;if(0!=(2064&a.subtreeFlags)&&null!==p)p.return=a,$a=p;else e:for(a=h;null!==$a;){if(0!=(2048&(C=$a).flags))try{switch(C.tag){case 0:case 11:case 15:lC(9,C)}}catch(e){Wi(C,C.return,e)}if(C===a){$a=null;break e}var G=C.sibling;if(null!==G){G.return=C.return,$a=G;break e}$a=C.return}}if(RC=l,El(),Ig&&"function"==typeof Ig.onPostCommitFiberRoot)try{Ig.onPostCommitFiberRoot(lg,e)}catch(e){}n=!0}return n}finally{hg=t,vC.transition=g}}return!1}function Si(e,g,t){e=HI(e,g=Aa(0,g=ra(t,g),1),1),g=gi(),null!==e&&(bg(e,1,g),li(e,g))}function Wi(e,g,t){if(3===e.tag)Si(e,e,t);else for(;null!==g;){if(3===g.tag){Si(g,e,t);break}if(1===g.tag){var n=g.stateNode;if("function"==typeof g.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===DC||!DC.has(n))){g=HI(g,e=ua(g,e=ra(t,e),1),1),e=gi(),null!==g&&(bg(g,1,e),li(g,e));break}}g=g.return}}function Vi(e,g,t){var n=e.pingCache;null!==n&&n.delete(g),g=gi(),e.pingedLanes|=e.suspendedLanes&t,kC===e&&(JC&t)===t&&(4===wC||3===wC&&(130023424&JC)===JC&&500>qe()-EC?di(e,0):KC|=t),li(e,g)}function fi(e,g){0===g&&(0==(1&e.mode)?g=1:(g=rg,0==(130023424&(rg<<=1))&&(rg=4194304)));var t=gi();null!==(e=RI(e,g))&&(bg(e,g,t),li(e,t))}function vi(e){var g=e.memoizedState,t=0;null!==g&&(t=g.retryLane),fi(e,t)}function Ri(e,g){var t=0;switch(e.tag){case 13:var n=e.stateNode,l=e.memoizedState;null!==l&&(t=l.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(I(314))}null!==n&&n.delete(g),fi(e,t)}function ki(e,g){return De(e,g)}function Xi(e,g,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ji(e,g,t,n){return new Xi(e,g,t,n)}function Yi(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hi(e,g){var t=e.alternate;return null===t?((t=Ji(e.tag,g,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=g,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,g=e.dependencies,t.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function wi(e,g,t,n,l,o){var a=2;if(n=e,"function"==typeof e)Yi(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case B:return xi(t.children,l,o,g);case S:a=8,l|=8;break;case W:return(e=Ji(12,t,g,2|l)).elementType=W,e.lanes=o,e;case R:return(e=Ji(13,t,g,l)).elementType=R,e.lanes=o,e;case k:return(e=Ji(19,t,g,l)).elementType=k,e.lanes=o,e;case Y:return Fi(t,l,o,g);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case V:a=10;break e;case f:a=9;break e;case v:a=11;break e;case X:a=14;break e;case J:a=16,n=null;break e}throw Error(I(130,null==e?e:typeof e,""))}return(g=Ji(a,t,g,l)).elementType=e,g.type=n,g.lanes=o,g}function xi(e,g,t,n){return(e=Ji(7,e,n,g)).lanes=t,e}function Fi(e,g,t,n){return(e=Ji(22,e,n,g)).elementType=Y,e.lanes=t,e.stateNode={isHidden:!1},e}function Ni(e,g,t){return(e=Ji(6,e,null,g)).lanes=t,e}function Ki(e,g,t){return(g=Ji(4,null!==e.children?e.children:[],e.key,g)).lanes=t,g.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},g}function zi(e,g,t,n,l){this.tag=g,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=n,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Mi(e,g,t,n,l,I,o,a,C){return e=new zi(e,g,t,a,C),1===g?(g=1,!0===I&&(g|=8)):g=0,I=Ji(3,null,null,g),e.current=I,I.stateNode=e,I.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},XI(I),e}function Ei(e){if(!e)return fl;e:{if(Ee(e=e._reactInternals)!==e||1!==e.tag)throw Error(I(170));var g=e;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(Jl(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(null!==g);throw Error(I(171))}if(1===e.tag){var t=e.type;if(Jl(t))return wl(e,t,g)}return g}function Li(e,g,t,n,l,I,o,a,C){return(e=Mi(t,n,!0,e,0,I,0,a,C)).context=Ei(null),t=e.current,(I=YI(n=gi(),l=ti(t))).callback=null!=g?g:null,HI(t,I,l),e.current.lanes=l,bg(e,l,n),li(e,n),e}function Ui(e,g,t,n){var l=g.current,I=gi(),o=ti(l);return t=Ei(t),null===g.context?g.context=t:g.pendingContext=t,(g=YI(I,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(g.callback=n),null!==(e=HI(l,g,o))&&(ni(e,l,o,I),wI(e,l,o)),o}function Qi(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ti(e,g){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<g?t:g}}function Di(e,g){Ti(e,g),(e=e.alternate)&&Ti(e,g)}SC=function(e,g,t){if(null!==e)if(e.memoizedProps!==g.pendingProps||Rl.current)pa=!0;else{if(0==(e.lanes&t)&&0==(128&g.flags))return pa=!1,function(e,g,t){switch(g.tag){case 3:ka(g),dI();break;case 5:Io(g);break;case 1:Jl(g.type)&&xl(g);break;case 4:no(g,g.stateNode.containerInfo);break;case 10:var n=g.type._context,l=g.memoizedProps.value;Vl(bI,n._currentValue),n._currentValue=l;break;case 13:if(null!==(n=g.memoizedState))return null!==n.dehydrated?(Vl(ao,1&ao.current),g.flags|=128,null):0!=(t&g.child.childLanes)?Na(e,g,t):(Vl(ao,1&ao.current),null!==(e=Qa(e,g,t))?e.sibling:null);Vl(ao,1&ao.current);break;case 19:if(n=0!=(t&g.childLanes),0!=(128&e.flags)){if(n)return La(e,g,t);g.flags|=128}if(null!==(l=g.memoizedState)&&(l.rendering=null,l.tail=null,l.lastEffect=null),Vl(ao,ao.current),n)break;return null;case 22:case 23:return g.lanes=0,Wa(e,g,t)}return Qa(e,g,t)}(e,g,t);pa=0!=(131072&e.flags)}else pa=!1,lI&&0!=(1048576&g.flags)&&$l(g,Tl,g.index);switch(g.lanes=0,g.tag){case 2:var n=g.type;Ua(e,g),e=g.pendingProps;var l=Xl(g,vl.current);SI(g,t),l=So(null,g,n,e,l,t);var o=Wo();return g.flags|=1,"object"==typeof l&&null!==l&&"function"==typeof l.render&&void 0===l.$$typeof?(g.tag=1,g.memoizedState=null,g.updateQueue=null,Jl(n)?(o=!0,xl(g)):o=!1,g.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,XI(g),l.updater=MI,g.stateNode=l,l._reactInternals=g,QI(g,n,e,t),g=Ra(null,g,n,!0,o,t)):(g.tag=0,lI&&o&&eI(g),Ga(null,g,l,t),g=g.child),g;case 16:n=g.elementType;e:{switch(Ua(e,g),e=g.pendingProps,n=(l=n._init)(n._payload),g.type=n,l=g.tag=function(e){if("function"==typeof e)return Yi(e)?1:0;if(null!=e){if((e=e.$$typeof)===v)return 11;if(e===X)return 14}return 2}(n),e=mI(n,e),l){case 0:g=fa(null,g,n,e,t);break e;case 1:g=va(null,g,n,e,t);break e;case 11:g=ya(null,g,n,e,t);break e;case 14:g=Ba(null,g,n,mI(n.type,e),t);break e}throw Error(I(306,n,""))}return g;case 0:return n=g.type,l=g.pendingProps,fa(e,g,n,l=g.elementType===n?l:mI(n,l),t);case 1:return n=g.type,l=g.pendingProps,va(e,g,n,l=g.elementType===n?l:mI(n,l),t);case 3:e:{if(ka(g),null===e)throw Error(I(387));n=g.pendingProps,l=(o=g.memoizedState).element,JI(e,g),FI(g,n,null,t);var a=g.memoizedState;if(n=a.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},g.updateQueue.baseState=o,g.memoizedState=o,256&g.flags){g=Xa(e,g,n,t,l=ra(Error(I(423)),g));break e}if(n!==l){g=Xa(e,g,n,t,l=ra(Error(I(424)),g));break e}for(nI=il(g.stateNode.containerInfo.firstChild),tI=g,lI=!0,II=null,t=qI(g,null,n,t),g.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(dI(),n===l){g=Qa(e,g,t);break e}Ga(e,g,n,t)}g=g.child}return g;case 5:return Io(g),null===e&&iI(g),n=g.type,l=g.pendingProps,o=null!==e?e.memoizedProps:null,a=l.children,tl(n,l)?a=null:null!==o&&tl(n,o)&&(g.flags|=32),Va(e,g),Ga(e,g,a,t),g.child;case 6:return null===e&&iI(g),null;case 13:return Na(e,g,t);case 4:return no(g,g.stateNode.containerInfo),n=g.pendingProps,null===e?g.child=OI(g,null,n,t):Ga(e,g,n,t),g.child;case 11:return n=g.type,l=g.pendingProps,ya(e,g,n,l=g.elementType===n?l:mI(n,l),t);case 7:return Ga(e,g,g.pendingProps,t),g.child;case 8:case 12:return Ga(e,g,g.pendingProps.children,t),g.child;case 10:e:{if(n=g.type._context,l=g.pendingProps,o=g.memoizedProps,a=l.value,Vl(bI,n._currentValue),n._currentValue=a,null!==o)if(on(o.value,a)){if(o.children===l.children&&!Rl.current){g=Qa(e,g,t);break e}}else for(null!==(o=g.child)&&(o.return=g);null!==o;){var C=o.dependencies;if(null!==C){a=o.child;for(var i=C.firstContext;null!==i;){if(i.context===n){if(1===o.tag){(i=YI(-1,t&-t)).tag=2;var r=o.updateQueue;if(null!==r){var s=(r=r.shared).pending;null===s?i.next=i:(i.next=s.next,s.next=i),r.pending=i}}o.lanes|=t,null!==(i=o.alternate)&&(i.lanes|=t),BI(o.return,t,g),C.lanes|=t;break}i=i.next}}else if(10===o.tag)a=o.type===g.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(I(341));a.lanes|=t,null!==(C=a.alternate)&&(C.lanes|=t),BI(a,t,g),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===g){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ga(e,g,l.children,t),g=g.child}return g;case 9:return l=g.type,n=g.pendingProps.children,SI(g,t),n=n(l=WI(l)),g.flags|=1,Ga(e,g,n,t),g.child;case 14:return l=mI(n=g.type,g.pendingProps),Ba(e,g,n,l=mI(n.type,l),t);case 15:return Sa(e,g,g.type,g.pendingProps,t);case 17:return n=g.type,l=g.pendingProps,l=g.elementType===n?l:mI(n,l),Ua(e,g),g.tag=1,Jl(n)?(e=!0,xl(g)):e=!1,SI(g,t),LI(g,n,l),QI(g,n,l,t),Ra(null,g,n,!0,e,t);case 19:return La(e,g,t);case 22:return Wa(e,g,t)}throw Error(I(156,g.tag))};var ji="function"==typeof reportError?reportError:function(e){console.error(e)};function Pi(e){this._internalRoot=e}function Oi(e){this._internalRoot=e}function qi(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function _i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $i(){}function er(e,g,t,n,l){var I=t._reactRootContainer;if(I){var o=I;if("function"==typeof l){var a=l;l=function(){var e=Qi(o);a.call(e)}}Ui(g,o,e,l)}else o=function(e,g,t,n,l){if(l){if("function"==typeof n){var I=n;n=function(){var e=Qi(o);I.call(e)}}var o=Li(g,n,e,0,null,!1,0,"",$i);return e._reactRootContainer=o,e[Al]=o.current,En(8===e.nodeType?e.parentNode:e),si(),o}for(;l=e.lastChild;)e.removeChild(l);if("function"==typeof n){var a=n;n=function(){var e=Qi(C);a.call(e)}}var C=Mi(e,0,!1,null,0,!1,0,"",$i);return e._reactRootContainer=C,e[Al]=C.current,En(8===e.nodeType?e.parentNode:e),si((function(){Ui(g,C,t,n)})),C}(t,g,e,l,n);return Qi(o)}Oi.prototype.render=Pi.prototype.render=function(e){var g=this._internalRoot;if(null===g)throw Error(I(409));Ui(e,g,null,null)},Oi.prototype.unmount=Pi.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var g=e.containerInfo;si((function(){Ui(null,e,null,null)})),g[Al]=null}},Oi.prototype.unstable_scheduleHydration=function(e){if(e){var g=Sg();e={blockedOn:null,target:e,priority:g};for(var t=0;t<Yg.length&&0!==g&&g<Yg[t].priority;t++);Yg.splice(t,0,e),0===t&&Fg(e)}},Gg=function(e){switch(e.tag){case 3:var g=e.stateNode;if(g.current.memoizedState.isDehydrated){var t=sg(g.pendingLanes);0!==t&&(Zg(g,1|t),li(g,qe()),0==(6&RC)&&(LC=qe()+500,El()))}break;case 13:si((function(){var g=RI(e,1);if(null!==g){var t=gi();ni(g,e,1,t)}})),Di(e,1)}},yg=function(e){if(13===e.tag){var g=RI(e,134217728);null!==g&&ni(g,e,134217728,gi()),Di(e,134217728)}},Bg=function(e){if(13===e.tag){var g=ti(e),t=RI(e,g);null!==t&&ni(t,e,g,gi()),Di(e,g)}},Sg=function(){return hg},Wg=function(e,g){var t=hg;try{return hg=e,g()}finally{hg=t}},ye=function(e,g,t){switch(g){case"input":if(_(e,t),g=t.name,"radio"===t.type&&null!=g){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<t.length;g++){var n=t[g];if(n!==e&&n.form===e.form){var l=Gl(n);if(!l)throw Error(I(90));D(n),_(n,l)}}}break;case"textarea":Ie(e,t);break;case"select":null!=(g=t.value)&&te(e,!!t.multiple,g,!1)}},ve=ri,Re=si;var gr={usingClientEntryPoint:!1,Events:[hl,pl,Gl,Ve,fe,ri]},tr={findFiberByHostInstance:Zl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nr={bundleType:tr.bundleType,version:tr.version,rendererPackageName:tr.rendererPackageName,rendererConfig:tr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:p.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:tr.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lr.isDisabled&&lr.supportsFiber)try{lg=lr.inject(nr),Ig=lr}catch(re){}}g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gr,g.createPortal=function(e,g){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qi(g))throw Error(I(200));return function(e,g,t){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==n?null:""+n,children:e,containerInfo:g,implementation:t}}(e,g,null,t)},g.createRoot=function(e,g){if(!qi(e))throw Error(I(299));var t=!1,n="",l=ji;return null!=g&&(!0===g.unstable_strictMode&&(t=!0),void 0!==g.identifierPrefix&&(n=g.identifierPrefix),void 0!==g.onRecoverableError&&(l=g.onRecoverableError)),g=Mi(e,1,!1,null,0,t,0,n,l),e[Al]=g.current,En(8===e.nodeType?e.parentNode:e),new Pi(g)},g.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var g=e._reactInternals;if(void 0===g){if("function"==typeof e.render)throw Error(I(188));throw e=Object.keys(e).join(","),Error(I(268,e))}return null===(e=Qe(g))?null:e.stateNode},g.flushSync=function(e){return si(e)},g.hydrate=function(e,g,t){if(!_i(g))throw Error(I(200));return er(null,e,g,!0,t)},g.hydrateRoot=function(e,g,t){if(!qi(e))throw Error(I(405));var n=null!=t&&t.hydratedSources||null,l=!1,o="",a=ji;if(null!=t&&(!0===t.unstable_strictMode&&(l=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),g=Li(g,null,e,1,null!=t?t:null,l,0,o,a),e[Al]=g.current,En(e),n)for(e=0;e<n.length;e++)l=(l=(t=n[e])._getVersion)(t._source),null==g.mutableSourceEagerHydrationData?g.mutableSourceEagerHydrationData=[t,l]:g.mutableSourceEagerHydrationData.push(t,l);return new Oi(g)},g.render=function(e,g,t){if(!_i(g))throw Error(I(200));return er(null,e,g,!1,t)},g.unmountComponentAtNode=function(e){if(!_i(e))throw Error(I(40));return!!e._reactRootContainer&&(si((function(){er(null,null,e,!1,(function(){e._reactRootContainer=null,e[Al]=null}))})),!0)},g.unstable_batchedUpdates=ri,g.unstable_renderSubtreeIntoContainer=function(e,g,t,n){if(!_i(t))throw Error(I(200));if(null==e||void 0===e._reactInternals)throw Error(I(38));return er(e,g,t,!1,n)},g.version="18.2.0-next-9e3b772b8-20220608"},745:function(e,g,t){"use strict";var n=t(3935);g.createRoot=n.createRoot,g.hydrateRoot=n.hydrateRoot},3935:function(e,g,t){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=t(4448)},9590:function(e){var g="undefined"!=typeof Element,t="function"==typeof Map,n="function"==typeof Set,l="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function I(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var a,C,i,r;if(Array.isArray(e)){if((a=e.length)!=o.length)return!1;for(C=a;0!=C--;)if(!I(e[C],o[C]))return!1;return!0}if(t&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(r=e.entries();!(C=r.next()).done;)if(!o.has(C.value[0]))return!1;for(r=e.entries();!(C=r.next()).done;)if(!I(C.value[1],o.get(C.value[0])))return!1;return!0}if(n&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(r=e.entries();!(C=r.next()).done;)if(!o.has(C.value[0]))return!1;return!0}if(l&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((a=e.length)!=o.length)return!1;for(C=a;0!=C--;)if(e[C]!==o[C])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof o.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof o.toString)return e.toString()===o.toString();if((a=(i=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(C=a;0!=C--;)if(!Object.prototype.hasOwnProperty.call(o,i[C]))return!1;if(g&&e instanceof Element)return!1;for(C=a;0!=C--;)if(("_owner"!==i[C]&&"__v"!==i[C]&&"__o"!==i[C]||!e.$$typeof)&&!I(e[i[C]],o[i[C]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,g){try{return I(e,g)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},2090:function(e,g,t){e.exports=function(e){"use strict";function g(e){if(e&&e.__esModule)return e;var g=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(g,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),g.default=e,Object.freeze(g)}var t=g(e);function n(){return n=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},n.apply(this,arguments)}function l(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function I(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function o(e,g){return function(e){if(Array.isArray(e))return e}(e)||function(e,g){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,l,I=[],o=!0,a=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(I.push(n.value),!g||I.length!==g);o=!0);}catch(e){a=!0,l=e}finally{try{o||null==t.return||t.return()}finally{if(a)throw l}}return I}}(e,g)||function(e,g){if(e){if("string"==typeof e)return I(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?I(e,g):void 0}}(e,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,g){if(null==e)return{};var t,n,l=function(e,g){if(null==e)return{};var t,n,l={},I=Object.keys(e);for(n=0;n<I.length;n++)t=I[n],g.indexOf(t)>=0||(l[t]=e[t]);return l}(e,g);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(e);for(n=0;n<I.length;n++)t=I[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var C={exports:{}},i={exports:{}},r={},s="function"==typeof Symbol&&Symbol.for,c=s?Symbol.for("react.element"):60103,d=s?Symbol.for("react.portal"):60106,A=s?Symbol.for("react.fragment"):60107,u=s?Symbol.for("react.strict_mode"):60108,m=s?Symbol.for("react.profiler"):60114,b=s?Symbol.for("react.provider"):60109,Z=s?Symbol.for("react.context"):60110,h=s?Symbol.for("react.async_mode"):60111,p=s?Symbol.for("react.concurrent_mode"):60111,G=s?Symbol.for("react.forward_ref"):60112,y=s?Symbol.for("react.suspense"):60113,B=s?Symbol.for("react.suspense_list"):60120,S=s?Symbol.for("react.memo"):60115,W=s?Symbol.for("react.lazy"):60116,V=s?Symbol.for("react.block"):60121,f=s?Symbol.for("react.fundamental"):60117,v=s?Symbol.for("react.responder"):60118,R=s?Symbol.for("react.scope"):60119;function k(e){if("object"==typeof e&&null!==e){var g=e.$$typeof;switch(g){case c:switch(e=e.type){case h:case p:case A:case m:case u:case y:return e;default:switch(e=e&&e.$$typeof){case Z:case G:case W:case S:case b:return e;default:return g}}case d:return g}}}function X(e){return k(e)===p}r.AsyncMode=h,r.ConcurrentMode=p,r.ContextConsumer=Z,r.ContextProvider=b,r.Element=c,r.ForwardRef=G,r.Fragment=A,r.Lazy=W,r.Memo=S,r.Portal=d,r.Profiler=m,r.StrictMode=u,r.Suspense=y,r.isAsyncMode=function(e){return X(e)||k(e)===h},r.isConcurrentMode=X,r.isContextConsumer=function(e){return k(e)===Z},r.isContextProvider=function(e){return k(e)===b},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===c},r.isForwardRef=function(e){return k(e)===G},r.isFragment=function(e){return k(e)===A},r.isLazy=function(e){return k(e)===W},r.isMemo=function(e){return k(e)===S},r.isPortal=function(e){return k(e)===d},r.isProfiler=function(e){return k(e)===m},r.isStrictMode=function(e){return k(e)===u},r.isSuspense=function(e){return k(e)===y},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===A||e===p||e===m||e===u||e===y||e===B||"object"==typeof e&&null!==e&&(e.$$typeof===W||e.$$typeof===S||e.$$typeof===b||e.$$typeof===Z||e.$$typeof===G||e.$$typeof===f||e.$$typeof===v||e.$$typeof===R||e.$$typeof===V)},r.typeOf=k,i.exports=r,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var g={},t=0;t<10;t++)g["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(g).map((function(e){return g[e]}));if("0123456789"!==n.join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach((function(e){l[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(e){return!1}}()&&Object.assign;Function.call.bind(Object.prototype.hasOwnProperty),i.exports;function J(){}function Y(){}Y.resetWarningCache=J;C.exports=function(){function e(e,g,t,n,l,I){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==I){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function g(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:Y,resetWarningCache:J};return t.PropTypes=t,t}();var H=C.exports;function w(e,g,t){var n=void 0===g?null:g,l=function(e,g){var t=atob(e);if(g){for(var n=new Uint8Array(t.length),l=0,I=t.length;l<I;++l)n[l]=t.charCodeAt(l);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return t}(e,void 0!==t&&t),I=l.indexOf("\n",10)+1,o=l.substring(I)+(n?"//# sourceMappingURL="+n:""),a=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(a)}var x,F,N,K,z=(x="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",F=null,N=!1,function(e){return K=K||w(x,F,N),new Worker(K,e)}),M=["constraints","onError","onLoad","onScan","resolution","qrArea"];function E(e,g){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);g&&(n=n.filter((function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable}))),t.push.apply(t,n)}return t}function L(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{};g%2?E(Object(t),!0).forEach((function(g){l(e,g,t[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(t,g))}))}return e}var U=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach((function(g){e.removeTrack(g),g.stop()})),e.getAudioTracks().forEach((function(g){e.removeTrack(g),g.stop()}))):e.stop())},Q=function(e){var g=e.constraints,l=e.onError,I=e.onLoad,C=e.onScan,i=e.resolution,r=e.qrArea,s=a(e,M),c=t.useRef(null),d=t.useRef(null),A=t.useRef(document.createElement("canvas")),u=t.useRef(null),m=t.useRef(),b=o(t.useState(null),2),Z=b[0],h=b[1],p=t.useRef(!1),G=t.useRef();t.useEffect((function(){G.current=new z;var e=G.current;return e.onmessage=function(e){C&&C(e.data?L(L({},e.data),{},{canvas:A.current}):null),p.current=!1},function(){e.terminate()}}),[C]);var y=JSON.stringify(r),B=t.useCallback((function(){var e=JSON.parse(y),g=G.current,t=d.current&&d.current.readyState===d.current.HAVE_ENOUGH_DATA;if(!p.current&&t){p.current=!0;var n,l=d.current.videoWidth,I=d.current.videoHeight,o=l>I?l:I,a=Math.floor(i/o*100)/100;I=Math.floor(a*I),l=Math.floor(a*l),A.current.width=l,A.current.height=I,u.current=A.current.getContext("2d"),u.current.drawImage(d.current,0,0,l,I),n=e&&2===e.length&&e[0]>0&&e[1]>0?u.current.getImageData(Math.floor((l-e[0])/2),Math.floor((I-e[1])/2),e[0],e[1]):u.current.getImageData(0,0,l,I),g.postMessage(n)}m.current=requestAnimationFrame(B)}),[i,y]),S=JSON.stringify(g);return t.useEffect((function(){var e=JSON.parse(S),g=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(g){c.current=e;try{d.current&&(d.current.srcObject=e,d.current.setAttribute("playsinline",!0))}catch(g){h(window.URL.createObjectURL(e))}I&&I(),m.current=requestAnimationFrame(B)}else U(e)})).catch((function(e){return g?l(e):null})),function(){cancelAnimationFrame(m.current),g=!1,U(c.current),Z&&window.URL.revokeObjectURL(Z)}}),[B,S,l,I,Z]),t.createElement("video",n({autoPlay:!0,playsInline:!0,src:Z,ref:d},s))};return Q.propTypes={constraints:H.object,onError:H.func.isRequired,onLoad:H.func,onScan:H.func.isRequired,resolution:H.number,qrArea:H.array},Q.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]},Q}(t(7294))},5251:function(e,g,t){"use strict";var n=t(7294),l=Symbol.for("react.element"),I=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,C={key:!0,ref:!0,__self:!0,__source:!0};function i(e,g,t){var n,I={},i=null,r=null;for(n in void 0!==t&&(i=""+t),void 0!==g.key&&(i=""+g.key),void 0!==g.ref&&(r=g.ref),g)o.call(g,n)&&!C.hasOwnProperty(n)&&(I[n]=g[n]);if(e&&e.defaultProps)for(n in g=e.defaultProps)void 0===I[n]&&(I[n]=g[n]);return{$$typeof:l,type:e,key:i,ref:r,props:I,_owner:a.current}}g.Fragment=I,g.jsx=i,g.jsxs=i},2408:function(e,g){"use strict";var t=Symbol.for("react.element"),n=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),C=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),r=Symbol.for("react.suspense"),s=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator,A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u=Object.assign,m={};function b(e,g,t){this.props=e,this.context=g,this.refs=m,this.updater=t||A}function Z(){}function h(e,g,t){this.props=e,this.context=g,this.refs=m,this.updater=t||A}b.prototype.isReactComponent={},b.prototype.setState=function(e,g){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,g,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},Z.prototype=b.prototype;var p=h.prototype=new Z;p.constructor=h,u(p,b.prototype),p.isPureReactComponent=!0;var G=Array.isArray,y=Object.prototype.hasOwnProperty,B={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function W(e,g,n){var l,I={},o=null,a=null;if(null!=g)for(l in void 0!==g.ref&&(a=g.ref),void 0!==g.key&&(o=""+g.key),g)y.call(g,l)&&!S.hasOwnProperty(l)&&(I[l]=g[l]);var C=arguments.length-2;if(1===C)I.children=n;else if(1<C){for(var i=Array(C),r=0;r<C;r++)i[r]=arguments[r+2];I.children=i}if(e&&e.defaultProps)for(l in C=e.defaultProps)void 0===I[l]&&(I[l]=C[l]);return{$$typeof:t,type:e,key:o,ref:a,props:I,_owner:B.current}}function V(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var f=/\/+/g;function v(e,g){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var g={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return g[e]}))}(""+e.key):g.toString(36)}function R(e,g,l,I,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var C=!1;if(null===e)C=!0;else switch(a){case"string":case"number":C=!0;break;case"object":switch(e.$$typeof){case t:case n:C=!0}}if(C)return o=o(C=e),e=""===I?"."+v(C,0):I,G(o)?(l="",null!=e&&(l=e.replace(f,"$&/")+"/"),R(o,g,l,"",(function(e){return e}))):null!=o&&(V(o)&&(o=function(e,g){return{$$typeof:t,type:e.type,key:g,ref:e.ref,props:e.props,_owner:e._owner}}(o,l+(!o.key||C&&C.key===o.key?"":(""+o.key).replace(f,"$&/")+"/")+e)),g.push(o)),1;if(C=0,I=""===I?".":I+":",G(e))for(var i=0;i<e.length;i++){var r=I+v(a=e[i],i);C+=R(a,g,l,r,o)}else if(r=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof r)for(e=r.call(e),i=0;!(a=e.next()).done;)C+=R(a=a.value,g,l,r=I+v(a,i++),o);else if("object"===a)throw g=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===g?"object with keys {"+Object.keys(e).join(", ")+"}":g)+"). If you meant to render a collection of children, use an array instead.");return C}function k(e,g,t){if(null==e)return e;var n=[],l=0;return R(e,n,"","",(function(e){return g.call(t,e,l++)})),n}function X(e){if(-1===e._status){var g=e._result;(g=g()).then((function(g){0!==e._status&&-1!==e._status||(e._status=1,e._result=g)}),(function(g){0!==e._status&&-1!==e._status||(e._status=2,e._result=g)})),-1===e._status&&(e._status=0,e._result=g)}if(1===e._status)return e._result.default;throw e._result}var J={current:null},Y={transition:null},H={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:Y,ReactCurrentOwner:B};g.Children={map:k,forEach:function(e,g,t){k(e,(function(){g.apply(this,arguments)}),t)},count:function(e){var g=0;return k(e,(function(){g++})),g},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!V(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},g.Component=b,g.Fragment=l,g.Profiler=o,g.PureComponent=h,g.StrictMode=I,g.Suspense=r,g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,g.cloneElement=function(e,g,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=u({},e.props),I=e.key,o=e.ref,a=e._owner;if(null!=g){if(void 0!==g.ref&&(o=g.ref,a=B.current),void 0!==g.key&&(I=""+g.key),e.type&&e.type.defaultProps)var C=e.type.defaultProps;for(i in g)y.call(g,i)&&!S.hasOwnProperty(i)&&(l[i]=void 0===g[i]&&void 0!==C?C[i]:g[i])}var i=arguments.length-2;if(1===i)l.children=n;else if(1<i){C=Array(i);for(var r=0;r<i;r++)C[r]=arguments[r+2];l.children=C}return{$$typeof:t,type:e.type,key:I,ref:o,props:l,_owner:a}},g.createContext=function(e){return(e={$$typeof:C,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},g.createElement=W,g.createFactory=function(e){var g=W.bind(null,e);return g.type=e,g},g.createRef=function(){return{current:null}},g.forwardRef=function(e){return{$$typeof:i,render:e}},g.isValidElement=V,g.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:X}},g.memo=function(e,g){return{$$typeof:s,type:e,compare:void 0===g?null:g}},g.startTransition=function(e){var g=Y.transition;Y.transition={};try{e()}finally{Y.transition=g}},g.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},g.useCallback=function(e,g){return J.current.useCallback(e,g)},g.useContext=function(e){return J.current.useContext(e)},g.useDebugValue=function(){},g.useDeferredValue=function(e){return J.current.useDeferredValue(e)},g.useEffect=function(e,g){return J.current.useEffect(e,g)},g.useId=function(){return J.current.useId()},g.useImperativeHandle=function(e,g,t){return J.current.useImperativeHandle(e,g,t)},g.useInsertionEffect=function(e,g){return J.current.useInsertionEffect(e,g)},g.useLayoutEffect=function(e,g){return J.current.useLayoutEffect(e,g)},g.useMemo=function(e,g){return J.current.useMemo(e,g)},g.useReducer=function(e,g,t){return J.current.useReducer(e,g,t)},g.useRef=function(e){return J.current.useRef(e)},g.useState=function(e){return J.current.useState(e)},g.useSyncExternalStore=function(e,g,t){return J.current.useSyncExternalStore(e,g,t)},g.useTransition=function(){return J.current.useTransition()},g.version="18.2.0"},7294:function(e,g,t){"use strict";e.exports=t(2408)},5893:function(e,g,t){"use strict";e.exports=t(5251)},53:function(e,g){"use strict";function t(e,g){var t=e.length;e.push(g);e:for(;0<t;){var n=t-1>>>1,l=e[n];if(!(0<I(l,g)))break e;e[n]=g,e[t]=l,t=n}}function n(e){return 0===e.length?null:e[0]}function l(e){if(0===e.length)return null;var g=e[0],t=e.pop();if(t!==g){e[0]=t;e:for(var n=0,l=e.length,o=l>>>1;n<o;){var a=2*(n+1)-1,C=e[a],i=a+1,r=e[i];if(0>I(C,t))i<l&&0>I(r,C)?(e[n]=r,e[i]=t,n=i):(e[n]=C,e[a]=t,n=a);else{if(!(i<l&&0>I(r,t)))break e;e[n]=r,e[i]=t,n=i}}}return g}function I(e,g){var t=e.sortIndex-g.sortIndex;return 0!==t?t:e.id-g.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;g.unstable_now=function(){return o.now()}}else{var a=Date,C=a.now();g.unstable_now=function(){return a.now()-C}}var i=[],r=[],s=1,c=null,d=3,A=!1,u=!1,m=!1,b="function"==typeof setTimeout?setTimeout:null,Z="function"==typeof clearTimeout?clearTimeout:null,h="undefined"!=typeof setImmediate?setImmediate:null;function p(e){for(var g=n(r);null!==g;){if(null===g.callback)l(r);else{if(!(g.startTime<=e))break;l(r),g.sortIndex=g.expirationTime,t(i,g)}g=n(r)}}function G(e){if(m=!1,p(e),!u)if(null!==n(i))u=!0,Y(y);else{var g=n(r);null!==g&&H(G,g.startTime-e)}}function y(e,t){u=!1,m&&(m=!1,Z(V),V=-1),A=!0;var I=d;try{for(p(t),c=n(i);null!==c&&(!(c.expirationTime>t)||e&&!R());){var o=c.callback;if("function"==typeof o){c.callback=null,d=c.priorityLevel;var a=o(c.expirationTime<=t);t=g.unstable_now(),"function"==typeof a?c.callback=a:c===n(i)&&l(i),p(t)}else l(i);c=n(i)}if(null!==c)var C=!0;else{var s=n(r);null!==s&&H(G,s.startTime-t),C=!1}return C}finally{c=null,d=I,A=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var B,S=!1,W=null,V=-1,f=5,v=-1;function R(){return!(g.unstable_now()-v<f)}function k(){if(null!==W){var e=g.unstable_now();v=e;var t=!0;try{t=W(!0,e)}finally{t?B():(S=!1,W=null)}}else S=!1}if("function"==typeof h)B=function(){h(k)};else if("undefined"!=typeof MessageChannel){var X=new MessageChannel,J=X.port2;X.port1.onmessage=k,B=function(){J.postMessage(null)}}else B=function(){b(k,0)};function Y(e){W=e,S||(S=!0,B())}function H(e,t){V=b((function(){e(g.unstable_now())}),t)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(e){e.callback=null},g.unstable_continueExecution=function(){u||A||(u=!0,Y(y))},g.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):f=0<e?Math.floor(1e3/e):5},g.unstable_getCurrentPriorityLevel=function(){return d},g.unstable_getFirstCallbackNode=function(){return n(i)},g.unstable_next=function(e){switch(d){case 1:case 2:case 3:var g=3;break;default:g=d}var t=d;d=g;try{return e()}finally{d=t}},g.unstable_pauseExecution=function(){},g.unstable_requestPaint=function(){},g.unstable_runWithPriority=function(e,g){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=d;d=e;try{return g()}finally{d=t}},g.unstable_scheduleCallback=function(e,l,I){var o=g.unstable_now();switch(I="object"==typeof I&&null!==I&&"number"==typeof(I=I.delay)&&0<I?o+I:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:s++,callback:l,priorityLevel:e,startTime:I,expirationTime:a=I+a,sortIndex:-1},I>o?(e.sortIndex=I,t(r,e),null===n(i)&&e===n(r)&&(m?(Z(V),V=-1):m=!0,H(G,I-o))):(e.sortIndex=a,t(i,e),u||A||(u=!0,Y(y))),e},g.unstable_shouldYield=R,g.unstable_wrapCallback=function(e){var g=d;return function(){var t=d;d=g;try{return e.apply(this,arguments)}finally{d=t}}}},3840:function(e,g,t){"use strict";e.exports=t(53)},6774:function(e){e.exports=function(e,g,t,n){var l=t?t.call(n,e,g):void 0;if(void 0!==l)return!!l;if(e===g)return!0;if("object"!=typeof e||!e||"object"!=typeof g||!g)return!1;var I=Object.keys(e),o=Object.keys(g);if(I.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(g),C=0;C<I.length;C++){var i=I[C];if(!a(i))return!1;var r=e[i],s=g[i];if(!1===(l=t?t.call(n,r,s,i):void 0)||void 0===l&&r!==s)return!1}return!0}},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},7462:function(e,g,t){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},n.apply(this,arguments)}t.d(g,{Z:function(){return n}})},3366:function(e,g,t){"use strict";function n(e,g){if(null==e)return{};var t,n,l={},I=Object.keys(e);for(n=0;n<I.length;n++)t=I[n],g.indexOf(t)>=0||(l[t]=e[t]);return l}t.d(g,{Z:function(){return n}})},512:function(e,g,t){"use strict";function n(e){var g,t,l="";if("string"==typeof e||"number"==typeof e)l+=e;else if("object"==typeof e)if(Array.isArray(e))for(g=0;g<e.length;g++)e[g]&&(t=n(e[g]))&&(l&&(l+=" "),l+=t);else for(g in e)e[g]&&(l&&(l+=" "),l+=g);return l}g.Z=function(){for(var e,g,t=0,l="";t<arguments.length;)(e=arguments[t++])&&(g=n(e))&&(l&&(l+=" "),l+=g);return l}}},n={};function l(e){var g=n[e];if(void 0!==g)return g.exports;var I=n[e]={exports:{}};return t[e].call(I.exports,I,I.exports,l),I.exports}l.n=function(e){var g=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(g,{a:g}),g},g=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},l.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var I=Object.create(null);l.r(I);var o={};e=e||[null,g({}),g([]),g(g)];for(var a=2&n&&t;"object"==typeof a&&!~e.indexOf(a);a=g(a))Object.getOwnPropertyNames(a).forEach((function(e){o[e]=function(){return t[e]}}));return o.default=function(){return t},l.d(I,o),I},l.d=function(e,g){for(var t in g)l.o(g,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:g[t]})},l.o=function(e,g){return Object.prototype.hasOwnProperty.call(e,g)},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};l.r(e),l.d(e,{exclude:function(){return Ju},extract:function(){return Vu},parse:function(){return fu},parseUrl:function(){return Ru},pick:function(){return Xu},stringify:function(){return vu},stringifyUrl:function(){return ku}});var g=l(7294),t=l.t(g,2),n=l(745),I=l(948),o=l(6682),a=l(247),C=l(606);function i(){const e=(0,o.Z)(a.Z);return e[C.Z]||e}var r=l(3527),s=l(7462),c=l(3366),d=g.createContext(null);function A(){return g.useContext(d)}var u="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",m=l(5893),b=function(e){const{children:t,theme:n}=e,l=A(),I=g.useMemo((()=>{const e=null===l?n:function(e,g){return"function"==typeof g?g(e):(0,s.Z)({},e,g)}(l,n);return null!=e&&(e[u]=null!==l),e}),[n,l]);return(0,m.jsx)(d.Provider,{value:I,children:t})},Z=l(5260),h=l(4168);const p={};function G(e,t,n,l=!1){return g.useMemo((()=>{const g=e&&t[e]||t;if("function"==typeof n){const I=n(g),o=e?(0,s.Z)({},t,{[e]:I}):I;return l?()=>o:o}return e?(0,s.Z)({},t,{[e]:n}):(0,s.Z)({},t,n)}),[e,t,n,l])}var y=function(e){const{children:g,theme:t,themeId:n}=e,l=(0,h.Z)(p),I=A()||p,o=G(n,l,t),a=G(n,I,t,!0);return(0,m.jsx)(b,{theme:a,children:(0,m.jsx)(Z.T.Provider,{value:o,children:g})})};const B=["theme"];function S(e){let{theme:g}=e,t=(0,c.Z)(e,B);const n=g[C.Z];return(0,m.jsx)(y,(0,s.Z)({},t,{themeId:n?C.Z:void 0,theme:n||g}))}var W=l(512),V=l(9378),f=l(6523),v=l(9766),R=l(8010);const k=["sx"];function X(e){const{sx:g}=e,t=(0,c.Z)(e,k),{systemProps:n,otherProps:l}=(e=>{var g,t;const n={systemProps:{},otherProps:{}},l=null!=(g=null==e||null==(t=e.theme)?void 0:t.unstable_sxConfig)?g:R.Z;return Object.keys(e).forEach((g=>{l[g]?n.systemProps[g]=e[g]:n.otherProps[g]=e[g]})),n})(t);let I;return I=Array.isArray(g)?[n,...g]:"function"==typeof g?(...e)=>{const t=g(...e);return(0,v.P)(t)?(0,s.Z)({},n,t):n}:(0,s.Z)({},n,g),(0,s.Z)({},l,{sx:I})}const J=["className","component"];var Y=l(7078);const H=(0,r.Z)(),w=function(e={}){const{themeId:t,defaultTheme:n,defaultClassName:l="MuiBox-root",generateClassName:I}=e,a=(0,V.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(f.Z);return g.forwardRef((function(e,g){const C=(0,o.Z)(n),i=X(e),{className:r,component:d="div"}=i,A=(0,c.Z)(i,J);return(0,m.jsx)(a,(0,s.Z)({as:d,ref:g,className:(0,W.Z)(r,I?I(l):l),theme:t&&C[t]||C},A))}))}({themeId:C.Z,defaultTheme:H,defaultClassName:"MuiBox-root",generateClassName:Y.Z.generate});var x=w,F=l(4780),N=l(3703);function K(e){return"string"==typeof e}function z(e,g,t){return void 0===e||K(e)?g:(0,s.Z)({},g,{ownerState:(0,s.Z)({},g.ownerState,t)})}function M(e,g=[]){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>t.match(/^on[A-Z]/)&&"function"==typeof e[t]&&!g.includes(t))).forEach((g=>{t[g]=e[g]})),t}function E(e){if(void 0===e)return{};const g={};return Object.keys(e).filter((g=>!(g.match(/^on[A-Z]/)&&"function"==typeof e[g]))).forEach((t=>{g[t]=e[t]})),g}const L=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function U(e){var g;const{elementType:t,externalSlotProps:n,ownerState:l,skipResolvingSlotProps:I=!1}=e,o=(0,c.Z)(e,L),a=I?{}:function(e,g,t){return"function"==typeof e?e(g,void 0):e}(n,l),{props:C,internalRef:i}=function(e){const{getSlotProps:g,additionalProps:t,externalSlotProps:n,externalForwardedProps:l,className:I}=e;if(!g){const e=(0,W.Z)(null==l?void 0:l.className,null==n?void 0:n.className,I,null==t?void 0:t.className),g=(0,s.Z)({},null==t?void 0:t.style,null==l?void 0:l.style,null==n?void 0:n.style),o=(0,s.Z)({},t,l,n);return e.length>0&&(o.className=e),Object.keys(g).length>0&&(o.style=g),{props:o,internalRef:void 0}}const o=M((0,s.Z)({},l,n)),a=E(n),C=E(l),i=g(o),r=(0,W.Z)(null==i?void 0:i.className,null==t?void 0:t.className,I,null==l?void 0:l.className,null==n?void 0:n.className),c=(0,s.Z)({},null==i?void 0:i.style,null==t?void 0:t.style,null==l?void 0:l.style,null==n?void 0:n.style),d=(0,s.Z)({},i,t,C,a);return r.length>0&&(d.className=r),Object.keys(c).length>0&&(d.style=c),{props:d,internalRef:i.ref}}((0,s.Z)({},o,{externalSlotProps:a})),r=(0,N.Z)(i,null==a?void 0:a.ref,null==(g=e.additionalProps)?void 0:g.ref);return z(t,(0,s.Z)({},C,{ref:r}),l)}var Q=l(2690),T=l(9948),D=l(9064),j=l(4161);function P(e){const g=e.documentElement.clientWidth;return Math.abs(window.innerWidth-g)}function O(e,g){g?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function q(e){return parseInt((0,j.Z)(e).getComputedStyle(e).paddingRight,10)||0}function _(e,g,t,n,l){const I=[g,t,...n];[].forEach.call(e.children,(e=>{const g=-1===I.indexOf(e),t=!function(e){const g=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),t="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return g||t}(e);g&&t&&O(e,l)}))}function $(e,g){let t=-1;return e.some(((e,n)=>!!g(e)&&(t=n,!0))),t}const ee=new class{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,g){let t=this.modals.indexOf(e);if(-1!==t)return t;t=this.modals.length,this.modals.push(e),e.modalRef&&O(e.modalRef,!1);const n=function(e){const g=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&g.push(e)})),g}(g);_(g,e.mount,e.modalRef,n,!0);const l=$(this.containers,(e=>e.container===g));return-1!==l?(this.containers[l].modals.push(e),t):(this.containers.push({modals:[e],container:g,restore:null,hiddenSiblings:n}),t)}mount(e,g){const t=$(this.containers,(g=>-1!==g.modals.indexOf(e))),n=this.containers[t];n.restore||(n.restore=function(e,g){const t=[],n=e.container;if(!g.disableScrollLock){if(function(e){const g=(0,Q.Z)(e);return g.body===e?(0,j.Z)(e).innerWidth>g.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(n)){const e=P((0,Q.Z)(n));t.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${q(n)+e}px`;const g=(0,Q.Z)(n).querySelectorAll(".mui-fixed");[].forEach.call(g,(g=>{t.push({value:g.style.paddingRight,property:"padding-right",el:g}),g.style.paddingRight=`${q(g)+e}px`}))}let e;if(n.parentNode instanceof DocumentFragment)e=(0,Q.Z)(n).body;else{const g=n.parentElement,t=(0,j.Z)(n);e="HTML"===(null==g?void 0:g.nodeName)&&"scroll"===t.getComputedStyle(g).overflowY?g:n}t.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{t.forEach((({value:e,el:g,property:t})=>{e?g.style.setProperty(t,e):g.style.removeProperty(t)}))}}(n,g))}remove(e,g=!0){const t=this.modals.indexOf(e);if(-1===t)return t;const n=$(this.containers,(g=>-1!==g.modals.indexOf(e))),l=this.containers[n];if(l.modals.splice(l.modals.indexOf(e),1),this.modals.splice(t,1),0===l.modals.length)l.restore&&l.restore(),e.modalRef&&O(e.modalRef,g),_(l.container,e.mount,e.modalRef,l.hiddenSiblings,!1),this.containers.splice(n,1);else{const e=l.modals[l.modals.length-1];e.modalRef&&O(e.modalRef,!1)}return t}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const ge=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function te(e){const g=[],t=[];return Array.from(e.querySelectorAll(ge)).forEach(((e,n)=>{const l=function(e){const g=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(g)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:g}(e);-1!==l&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const g=g=>e.ownerDocument.querySelector(`input[type="radio"]${g}`);let t=g(`[name="${e.name}"]:checked`);return t||(t=g(`[name="${e.name}"]`)),t!==e}(e))}(e)&&(0===l?g.push(e):t.push({documentOrder:n,tabIndex:l,node:e}))})),t.sort(((e,g)=>e.tabIndex===g.tabIndex?e.documentOrder-g.documentOrder:e.tabIndex-g.tabIndex)).map((e=>e.node)).concat(g)}function ne(){return!0}function le(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:l=!1,disableRestoreFocus:I=!1,getTabbable:o=te,isEnabled:a=ne,open:C}=e,i=g.useRef(!1),r=g.useRef(null),s=g.useRef(null),c=g.useRef(null),d=g.useRef(null),A=g.useRef(!1),u=g.useRef(null),b=(0,N.Z)(t.ref,u),Z=g.useRef(null);g.useEffect((()=>{C&&u.current&&(A.current=!n)}),[n,C]),g.useEffect((()=>{if(!C||!u.current)return;const e=(0,Q.Z)(u.current);return u.current.contains(e.activeElement)||(u.current.hasAttribute("tabIndex")||u.current.setAttribute("tabIndex","-1"),A.current&&u.current.focus()),()=>{I||(c.current&&c.current.focus&&(i.current=!0,c.current.focus()),c.current=null)}}),[C]),g.useEffect((()=>{if(!C||!u.current)return;const e=(0,Q.Z)(u.current),g=g=>{Z.current=g,!l&&a()&&"Tab"===g.key&&e.activeElement===u.current&&g.shiftKey&&(i.current=!0,s.current&&s.current.focus())},t=()=>{const g=u.current;if(null===g)return;if(!e.hasFocus()||!a()||i.current)return void(i.current=!1);if(g.contains(e.activeElement))return;if(l&&e.activeElement!==r.current&&e.activeElement!==s.current)return;if(e.activeElement!==d.current)d.current=null;else if(null!==d.current)return;if(!A.current)return;let t=[];if(e.activeElement!==r.current&&e.activeElement!==s.current||(t=o(u.current)),t.length>0){var n,I;const e=Boolean((null==(n=Z.current)?void 0:n.shiftKey)&&"Tab"===(null==(I=Z.current)?void 0:I.key)),g=t[0],l=t[t.length-1];"string"!=typeof g&&"string"!=typeof l&&(e?l.focus():g.focus())}else g.focus()};e.addEventListener("focusin",t),e.addEventListener("keydown",g,!0);const n=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&t()}),50);return()=>{clearInterval(n),e.removeEventListener("focusin",t),e.removeEventListener("keydown",g,!0)}}),[n,l,I,a,C,o]);const h=e=>{null===c.current&&(c.current=e.relatedTarget),A.current=!0};return(0,m.jsxs)(g.Fragment,{children:[(0,m.jsx)("div",{tabIndex:C?0:-1,onFocus:h,ref:r,"data-testid":"sentinelStart"}),g.cloneElement(t,{ref:b,onFocus:e=>{null===c.current&&(c.current=e.relatedTarget),A.current=!0,d.current=e.target;const g=t.props.onFocus;g&&g(e)}}),(0,m.jsx)("div",{tabIndex:C?0:-1,onFocus:h,ref:s,"data-testid":"sentinelEnd"})]})}var Ie=l(3935),oe=l(3546),ae=l(7960);const Ce=g.forwardRef((function(e,t){const{children:n,container:l,disablePortal:I=!1}=e,[o,a]=g.useState(null),C=(0,N.Z)(g.isValidElement(n)?n.ref:null,t);if((0,oe.Z)((()=>{I||a(function(e){return"function"==typeof e?e():e}(l)||document.body)}),[l,I]),(0,oe.Z)((()=>{if(o&&!I)return(0,ae.Z)(t,o),()=>{(0,ae.Z)(t,null)}}),[t,o,I]),I){if(g.isValidElement(n)){const e={ref:C};return g.cloneElement(n,e)}return(0,m.jsx)(g.Fragment,{children:n})}return(0,m.jsx)(g.Fragment,{children:o?Ie.createPortal(n,o):o})}));var ie=l(1657);function re(e,g){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,g){return e.__proto__=g,e},re(e,g)}function se(e,g){e.prototype=Object.create(g.prototype),e.prototype.constructor=e,re(e,g)}var ce=g.createContext(null),de="unmounted",Ae="exited",ue="entering",me="entered",be="exiting",Ze=function(e){function t(g,t){var n;n=e.call(this,g,t)||this;var l,I=t&&!t.isMounting?g.enter:g.appear;return n.appearStatus=null,g.in?I?(l=Ae,n.appearStatus=ue):l=me:l=g.unmountOnExit||g.mountOnEnter?de:Ae,n.state={status:l},n.nextCallback=null,n}se(t,e),t.getDerivedStateFromProps=function(e,g){return e.in&&g.status===de?{status:Ae}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var g=null;if(e!==this.props){var t=this.state.status;this.props.in?t!==ue&&t!==me&&(g=ue):t!==ue&&t!==me||(g=be)}this.updateStatus(!1,g)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,g,t,n=this.props.timeout;return e=g=t=n,null!=n&&"number"!=typeof n&&(e=n.exit,g=n.enter,t=void 0!==n.appear?n.appear:g),{exit:e,enter:g,appear:t}},n.updateStatus=function(e,g){if(void 0===e&&(e=!1),null!==g)if(this.cancelNextCallback(),g===ue){if(this.props.unmountOnExit||this.props.mountOnEnter){var t=this.props.nodeRef?this.props.nodeRef.current:Ie.findDOMNode(this);t&&function(e){e.scrollTop}(t)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ae&&this.setState({status:de})},n.performEnter=function(e){var g=this,t=this.props.enter,n=this.context?this.context.isMounting:e,l=this.props.nodeRef?[n]:[Ie.findDOMNode(this),n],I=l[0],o=l[1],a=this.getTimeouts(),C=n?a.appear:a.enter;e||t?(this.props.onEnter(I,o),this.safeSetState({status:ue},(function(){g.props.onEntering(I,o),g.onTransitionEnd(C,(function(){g.safeSetState({status:me},(function(){g.props.onEntered(I,o)}))}))}))):this.safeSetState({status:me},(function(){g.props.onEntered(I)}))},n.performExit=function(){var e=this,g=this.props.exit,t=this.getTimeouts(),n=this.props.nodeRef?void 0:Ie.findDOMNode(this);g?(this.props.onExit(n),this.safeSetState({status:be},(function(){e.props.onExiting(n),e.onTransitionEnd(t.exit,(function(){e.safeSetState({status:Ae},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:Ae},(function(){e.props.onExited(n)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,g){g=this.setNextCallback(g),this.setState(e,g)},n.setNextCallback=function(e){var g=this,t=!0;return this.nextCallback=function(n){t&&(t=!1,g.nextCallback=null,e(n))},this.nextCallback.cancel=function(){t=!1},this.nextCallback},n.onTransitionEnd=function(e,g){this.setNextCallback(g);var t=this.props.nodeRef?this.props.nodeRef.current:Ie.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(t&&!n){if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[t,this.nextCallback],I=l[0],o=l[1];this.props.addEndListener(I,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===de)return null;var t=this.props,n=t.children,l=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,c.Z)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return g.createElement(ce.Provider,{value:null},"function"==typeof n?n(e,l):g.cloneElement(g.Children.only(n),l))},t}(g.Component);function he(){}Ze.contextType=ce,Ze.propTypes={},Ze.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:he,onEntering:he,onEntered:he,onExit:he,onExiting:he,onExited:he},Ze.UNMOUNTED=de,Ze.EXITED=Ae,Ze.ENTERING=ue,Ze.ENTERED=me,Ze.EXITING=be;var pe=Ze;const Ge=e=>e.scrollTop;function ye(e,g){var t,n;const{timeout:l,easing:I,style:o={}}=e;return{duration:null!=(t=o.transitionDuration)?t:"number"==typeof l?l:l[g.mode]||0,easing:null!=(n=o.transitionTimingFunction)?n:"object"==typeof I?I[g.mode]:I,delay:o.transitionDelay}}var Be=l(1705);const Se=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],We={entering:{opacity:1},entered:{opacity:1}},Ve=g.forwardRef((function(e,t){const n=i(),l={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:I,appear:o=!0,children:a,easing:C,in:r,onEnter:d,onEntered:A,onEntering:u,onExit:b,onExited:Z,onExiting:h,style:p,timeout:G=l,TransitionComponent:y=pe}=e,B=(0,c.Z)(e,Se),S=g.useRef(null),W=(0,Be.Z)(S,a.ref,t),V=e=>g=>{if(e){const t=S.current;void 0===g?e(t):e(t,g)}},f=V(u),v=V(((e,g)=>{Ge(e);const t=ye({style:p,timeout:G,easing:C},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),d&&d(e,g)})),R=V(A),k=V(h),X=V((e=>{const g=ye({style:p,timeout:G,easing:C},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",g),e.style.transition=n.transitions.create("opacity",g),b&&b(e)})),J=V(Z);return(0,m.jsx)(y,(0,s.Z)({appear:o,in:r,nodeRef:S,onEnter:v,onEntered:R,onEntering:f,onExit:X,onExited:J,onExiting:k,addEndListener:e=>{I&&I(S.current,e)},timeout:G},B,{children:(e,t)=>g.cloneElement(a,(0,s.Z)({style:(0,s.Z)({opacity:0,visibility:"exited"!==e||r?void 0:"hidden"},We[e],p,a.props.style),ref:W},t))}))}));var fe=Ve,ve=l(1588),Re=l(4867);function ke(e){return(0,Re.Z)("MuiBackdrop",e)}(0,ve.Z)("MuiBackdrop",["root","invisible"]);const Xe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Je=(0,I.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.invisible&&g.invisible]}})((({ownerState:e})=>(0,s.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})));var Ye=g.forwardRef((function(e,g){var t,n,l;const I=(0,ie.Z)({props:e,name:"MuiBackdrop"}),{children:o,className:a,component:C="div",components:i={},componentsProps:r={},invisible:d=!1,open:A,slotProps:u={},slots:b={},TransitionComponent:Z=fe,transitionDuration:h}=I,p=(0,c.Z)(I,Xe),G=(0,s.Z)({},I,{component:C,invisible:d}),y=(e=>{const{classes:g,invisible:t}=e,n={root:["root",t&&"invisible"]};return(0,F.Z)(n,ke,g)})(G),B=null!=(t=u.root)?t:r.root;return(0,m.jsx)(Z,(0,s.Z)({in:A,timeout:h},p,{children:(0,m.jsx)(Je,(0,s.Z)({"aria-hidden":!0},B,{as:null!=(n=null!=(l=b.root)?l:i.Root)?n:C,className:(0,W.Z)(y.root,a,null==B?void 0:B.className),ownerState:(0,s.Z)({},G,null==B?void 0:B.ownerState),classes:y,ref:g,children:o}))}))}));function He(e){return(0,Re.Z)("MuiModal",e)}(0,ve.Z)("MuiModal",["root","hidden","backdrop"]);const we=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],xe=(0,I.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,!t.open&&t.exited&&g.hidden]}})((({theme:e,ownerState:g})=>(0,s.Z)({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!g.open&&g.exited&&{visibility:"hidden"}))),Fe=(0,I.ZP)(Ye,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,g)=>g.backdrop})({zIndex:-1}),Ne=g.forwardRef((function(e,t){var n,l,I,o,a,C;const i=(0,ie.Z)({name:"MuiModal",props:e}),{BackdropComponent:r=Fe,BackdropProps:d,className:A,closeAfterTransition:u=!1,children:b,container:Z,component:h,components:p={},componentsProps:G={},disableAutoFocus:y=!1,disableEnforceFocus:B=!1,disableEscapeKeyDown:S=!1,disablePortal:V=!1,disableRestoreFocus:f=!1,disableScrollLock:v=!1,hideBackdrop:R=!1,keepMounted:k=!1,onBackdropClick:X,open:J,slotProps:Y,slots:H}=i,w=(0,c.Z)(i,we),x=(0,s.Z)({},i,{closeAfterTransition:u,disableAutoFocus:y,disableEnforceFocus:B,disableEscapeKeyDown:S,disablePortal:V,disableRestoreFocus:f,disableScrollLock:v,hideBackdrop:R,keepMounted:k}),{getRootProps:K,getBackdropProps:z,getTransitionProps:E,portalRef:L,isTopModal:j,exited:P,hasTransition:q}=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:l=!1,manager:I=ee,closeAfterTransition:o=!1,onTransitionEnter:a,onTransitionExited:C,children:i,onClose:r,open:c,rootRef:d}=e,A=g.useRef({}),u=g.useRef(null),m=g.useRef(null),b=(0,N.Z)(m,d),[Z,h]=g.useState(!c),p=function(e){return!!e&&e.props.hasOwnProperty("in")}(i);let G=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(G=!1);const y=()=>(A.current.modalRef=m.current,A.current.mount=u.current,A.current),B=()=>{I.mount(y(),{disableScrollLock:l}),m.current&&(m.current.scrollTop=0)},S=(0,T.Z)((()=>{const e=function(e){return"function"==typeof e?e():e}(t)||(0,Q.Z)(u.current).body;I.add(y(),e),m.current&&B()})),W=g.useCallback((()=>I.isTopModal(y())),[I]),V=(0,T.Z)((e=>{u.current=e,e&&(c&&W()?B():m.current&&O(m.current,G))})),f=g.useCallback((()=>{I.remove(y(),G)}),[G,I]);g.useEffect((()=>()=>{f()}),[f]),g.useEffect((()=>{c?S():p&&o||f()}),[c,f,p,o,S]);const v=e=>g=>{var t;null==(t=e.onKeyDown)||t.call(e,g),"Escape"===g.key&&W()&&(n||(g.stopPropagation(),r&&r(g,"escapeKeyDown")))},R=e=>g=>{var t;null==(t=e.onClick)||t.call(e,g),g.target===g.currentTarget&&r&&r(g,"backdropClick")};return{getRootProps:(g={})=>{const t=M(e);delete t.onTransitionEnter,delete t.onTransitionExited;const n=(0,s.Z)({},t,g);return(0,s.Z)({role:"presentation"},n,{onKeyDown:v(n),ref:b})},getBackdropProps:(e={})=>{const g=e;return(0,s.Z)({"aria-hidden":!0},g,{onClick:R(g),open:c})},getTransitionProps:()=>({onEnter:(0,D.Z)((()=>{h(!1),a&&a()}),null==i?void 0:i.props.onEnter),onExited:(0,D.Z)((()=>{h(!0),C&&C(),o&&f()}),null==i?void 0:i.props.onExited)}),rootRef:b,portalRef:V,isTopModal:W,exited:Z,hasTransition:p}}((0,s.Z)({},x,{rootRef:t})),_=(0,s.Z)({},x,{exited:P}),$=(e=>{const{open:g,exited:t,classes:n}=e,l={root:["root",!g&&t&&"hidden"],backdrop:["backdrop"]};return(0,F.Z)(l,He,n)})(_),ge={};if(void 0===b.props.tabIndex&&(ge.tabIndex="-1"),q){const{onEnter:e,onExited:g}=E();ge.onEnter=e,ge.onExited=g}const te=null!=(n=null!=(l=null==H?void 0:H.root)?l:p.Root)?n:xe,ne=null!=(I=null!=(o=null==H?void 0:H.backdrop)?o:p.Backdrop)?I:r,Ie=null!=(a=null==Y?void 0:Y.root)?a:G.root,oe=null!=(C=null==Y?void 0:Y.backdrop)?C:G.backdrop,ae=U({elementType:te,externalSlotProps:Ie,externalForwardedProps:w,getSlotProps:K,additionalProps:{ref:t,as:h},ownerState:_,className:(0,W.Z)(A,null==Ie?void 0:Ie.className,null==$?void 0:$.root,!_.open&&_.exited&&(null==$?void 0:$.hidden))}),re=U({elementType:ne,externalSlotProps:oe,additionalProps:d,getSlotProps:e=>z((0,s.Z)({},e,{onClick:g=>{X&&X(g),null!=e&&e.onClick&&e.onClick(g)}})),className:(0,W.Z)(null==oe?void 0:oe.className,null==d?void 0:d.className,null==$?void 0:$.backdrop),ownerState:_});return k||J||q&&!P?(0,m.jsx)(Ce,{ref:L,container:Z,disablePortal:V,children:(0,m.jsxs)(te,(0,s.Z)({},ae,{children:[!R&&r?(0,m.jsx)(ne,(0,s.Z)({},re)):null,(0,m.jsx)(le,{disableEnforceFocus:B,disableAutoFocus:y,disableRestoreFocus:f,isEnabled:j,open:J,children:g.cloneElement(b,ge)})]}))}):null}));var Ke=Ne,ze=l(7144),Me=l(5340);const Ee=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Le(e,g,t){var n;const l=function(e,g,t){const n=g.getBoundingClientRect(),l=t&&t.getBoundingClientRect(),I=(0,Me.Z)(g);let o;if(g.fakeTransform)o=g.fakeTransform;else{const e=I.getComputedStyle(g);o=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let a=0,C=0;if(o&&"none"!==o&&"string"==typeof o){const e=o.split("(")[1].split(")")[0].split(",");a=parseInt(e[4],10),C=parseInt(e[5],10)}return"left"===e?l?`translateX(${l.right+a-n.left}px)`:`translateX(${I.innerWidth+a-n.left}px)`:"right"===e?l?`translateX(-${n.right-l.left-a}px)`:`translateX(-${n.left+n.width-a}px)`:"up"===e?l?`translateY(${l.bottom+C-n.top}px)`:`translateY(${I.innerHeight+C-n.top}px)`:l?`translateY(-${n.top-l.top+n.height-C}px)`:`translateY(-${n.top+n.height-C}px)`}(e,g,"function"==typeof(n=t)?n():n);l&&(g.style.webkitTransform=l,g.style.transform=l)}const Ue=g.forwardRef((function(e,t){const n=i(),l={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},I={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:C,container:r,direction:d="down",easing:A=l,in:u,onEnter:b,onEntered:Z,onEntering:h,onExit:p,onExited:G,onExiting:y,style:B,timeout:S=I,TransitionComponent:W=pe}=e,V=(0,c.Z)(e,Ee),f=g.useRef(null),v=(0,Be.Z)(C.ref,f,t),R=e=>g=>{e&&(void 0===g?e(f.current):e(f.current,g))},k=R(((e,g)=>{Le(d,e,r),Ge(e),b&&b(e,g)})),X=R(((e,g)=>{const t=ye({timeout:S,style:B,easing:A},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",(0,s.Z)({},t)),e.style.transition=n.transitions.create("transform",(0,s.Z)({},t)),e.style.webkitTransform="none",e.style.transform="none",h&&h(e,g)})),J=R(Z),Y=R(y),H=R((e=>{const g=ye({timeout:S,style:B,easing:A},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",g),e.style.transition=n.transitions.create("transform",g),Le(d,e,r),p&&p(e)})),w=R((e=>{e.style.webkitTransition="",e.style.transition="",G&&G(e)})),x=g.useCallback((()=>{f.current&&Le(d,f.current,r)}),[d,r]);return g.useEffect((()=>{if(u||"down"===d||"right"===d)return;const e=(0,ze.Z)((()=>{f.current&&Le(d,f.current,r)})),g=(0,Me.Z)(f.current);return g.addEventListener("resize",e),()=>{e.clear(),g.removeEventListener("resize",e)}}),[d,u,r]),g.useEffect((()=>{u||x()}),[u,x]),(0,m.jsx)(W,(0,s.Z)({nodeRef:f,onEnter:k,onEntered:J,onEntering:X,onExit:H,onExited:w,onExiting:Y,addEndListener:e=>{o&&o(f.current,e)},appear:a,in:u,timeout:S},V,{children:(e,t)=>g.cloneElement(C,(0,s.Z)({ref:v,style:(0,s.Z)({visibility:"exited"!==e||u?void 0:"hidden"},B,C.props.style)},t))}))}));var Qe=Ue,Te=l(1796),De=e=>{let g;return g=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,(g/100).toFixed(2)};function je(e){return(0,Re.Z)("MuiPaper",e)}(0,ve.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Pe=["className","component","elevation","square","variant"],Oe=(0,I.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[t.variant],!t.square&&g.rounded,"elevation"===t.variant&&g[`elevation${t.elevation}`]]}})((({theme:e,ownerState:g})=>{var t;return(0,s.Z)({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!g.square&&{borderRadius:e.shape.borderRadius},"outlined"===g.variant&&{border:`1px solid ${(e.vars||e).palette.divider}`},"elevation"===g.variant&&(0,s.Z)({boxShadow:(e.vars||e).shadows[g.elevation]},!e.vars&&"dark"===e.palette.mode&&{backgroundImage:`linear-gradient(${(0,Te.Fq)("#fff",De(g.elevation))}, ${(0,Te.Fq)("#fff",De(g.elevation))})`},e.vars&&{backgroundImage:null==(t=e.vars.overlays)?void 0:t[g.elevation]}))}));var qe=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiPaper"}),{className:n,component:l="div",elevation:I=1,square:o=!1,variant:a="elevation"}=t,C=(0,c.Z)(t,Pe),i=(0,s.Z)({},t,{component:l,elevation:I,square:o,variant:a}),r=(e=>{const{square:g,elevation:t,variant:n,classes:l}=e,I={root:["root",n,!g&&"rounded","elevation"===n&&`elevation${t}`]};return(0,F.Z)(I,je,l)})(i);return(0,m.jsx)(Oe,(0,s.Z)({as:l,ownerState:i,className:(0,W.Z)(r.root,n),ref:g},C))})),_e=l(8216);function $e(e){return(0,Re.Z)("MuiDrawer",e)}(0,ve.Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const eg=["BackdropProps"],gg=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],tg=(e,g)=>{const{ownerState:t}=e;return[g.root,("permanent"===t.variant||"persistent"===t.variant)&&g.docked,g.modal]},ng=(0,I.ZP)(Ke,{name:"MuiDrawer",slot:"Root",overridesResolver:tg})((({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),lg=(0,I.ZP)("div",{shouldForwardProp:I.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:tg})({flex:"0 0 auto"}),Ig=(0,I.ZP)(qe,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.paper,g[`paperAnchor${(0,_e.Z)(t.anchor)}`],"temporary"!==t.variant&&g[`paperAnchorDocked${(0,_e.Z)(t.anchor)}`]]}})((({theme:e,ownerState:g})=>(0,s.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===g.anchor&&{left:0},"top"===g.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===g.anchor&&{right:0},"bottom"===g.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===g.anchor&&"temporary"!==g.variant&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},"top"===g.anchor&&"temporary"!==g.variant&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},"right"===g.anchor&&"temporary"!==g.variant&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},"bottom"===g.anchor&&"temporary"!==g.variant&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`}))),og={left:"right",right:"left",top:"down",bottom:"up"};var ag=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiDrawer"}),l=i(),I={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{anchor:o="left",BackdropProps:a,children:C,className:r,elevation:d=16,hideBackdrop:A=!1,ModalProps:{BackdropProps:u}={},onClose:b,open:Z=!1,PaperProps:h={},SlideProps:p,TransitionComponent:G=Qe,transitionDuration:y=I,variant:B="temporary"}=n,S=(0,c.Z)(n.ModalProps,eg),V=(0,c.Z)(n,gg),f=g.useRef(!1);g.useEffect((()=>{f.current=!0}),[]);const v=function(e,g){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(g)?og[g]:g}(l,o),R=o,k=(0,s.Z)({},n,{anchor:R,elevation:d,open:Z,variant:B},V),X=(e=>{const{classes:g,anchor:t,variant:n}=e,l={root:["root"],docked:[("permanent"===n||"persistent"===n)&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${(0,_e.Z)(t)}`,"temporary"!==n&&`paperAnchorDocked${(0,_e.Z)(t)}`]};return(0,F.Z)(l,$e,g)})(k),J=(0,m.jsx)(Ig,(0,s.Z)({elevation:"temporary"===B?d:0,square:!0},h,{className:(0,W.Z)(X.paper,h.className),ownerState:k,children:C}));if("permanent"===B)return(0,m.jsx)(lg,(0,s.Z)({className:(0,W.Z)(X.root,X.docked,r),ownerState:k,ref:t},V,{children:J}));const Y=(0,m.jsx)(G,(0,s.Z)({in:Z,direction:og[v],timeout:y,appear:f.current},p,{children:J}));return"persistent"===B?(0,m.jsx)(lg,(0,s.Z)({className:(0,W.Z)(X.root,X.docked,r),ownerState:k,ref:t},V,{children:Y})):(0,m.jsx)(ng,(0,s.Z)({BackdropProps:(0,s.Z)({},a,u,{transitionDuration:y}),className:(0,W.Z)(X.root,X.modal,r),open:Z,ownerState:k,onClose:b,hideBackdrop:A,ref:t},V,S,{children:Y}))}));function Cg(e){return(0,Re.Z)("MuiAppBar",e)}(0,ve.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const ig=["className","color","enableColorOnDark","position"],rg=(e,g)=>e?`${null==e?void 0:e.replace(")","")}, ${g})`:g,sg=(0,I.ZP)(qe,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[`position${(0,_e.Z)(t.position)}`],g[`color${(0,_e.Z)(t.color)}`]]}})((({theme:e,ownerState:g})=>{const t="light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900];return(0,s.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===g.position&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===g.position&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===g.position&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"static"===g.position&&{position:"static"},"relative"===g.position&&{position:"relative"},!e.vars&&(0,s.Z)({},"default"===g.color&&{backgroundColor:t,color:e.palette.getContrastText(t)},g.color&&"default"!==g.color&&"inherit"!==g.color&&"transparent"!==g.color&&{backgroundColor:e.palette[g.color].main,color:e.palette[g.color].contrastText},"inherit"===g.color&&{color:"inherit"},"dark"===e.palette.mode&&!g.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===g.color&&(0,s.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===e.palette.mode&&{backgroundImage:"none"})),e.vars&&(0,s.Z)({},"default"===g.color&&{"--AppBar-background":g.enableColorOnDark?e.vars.palette.AppBar.defaultBg:rg(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":g.enableColorOnDark?e.vars.palette.text.primary:rg(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},g.color&&!g.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":g.enableColorOnDark?e.vars.palette[g.color].main:rg(e.vars.palette.AppBar.darkBg,e.vars.palette[g.color].main),"--AppBar-color":g.enableColorOnDark?e.vars.palette[g.color].contrastText:rg(e.vars.palette.AppBar.darkColor,e.vars.palette[g.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===g.color?"inherit":"var(--AppBar-color)"},"transparent"===g.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),cg=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiAppBar"}),{className:n,color:l="primary",enableColorOnDark:I=!1,position:o="fixed"}=t,a=(0,c.Z)(t,ig),C=(0,s.Z)({},t,{color:l,position:o,enableColorOnDark:I}),i=(e=>{const{color:g,position:t,classes:n}=e,l={root:["root",`color${(0,_e.Z)(g)}`,`position${(0,_e.Z)(t)}`]};return(0,F.Z)(l,Cg,n)})(C);return(0,m.jsx)(sg,(0,s.Z)({square:!0,component:"header",ownerState:C,elevation:4,className:(0,W.Z)(i.root,n,"fixed"===o&&"mui-fixed"),ref:g},a))}));var dg=cg;function Ag(e){return(0,Re.Z)("MuiToolbar",e)}(0,ve.Z)("MuiToolbar",["root","gutters","regular","dense"]);const ug=["className","component","disableGutters","variant"],mg=(0,I.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,!t.disableGutters&&g.gutters,g[t.variant]]}})((({theme:e,ownerState:g})=>(0,s.Z)({position:"relative",display:"flex",alignItems:"center"},!g.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===g.variant&&{minHeight:48})),(({theme:e,ownerState:g})=>"regular"===g.variant&&e.mixins.toolbar));var bg=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiToolbar"}),{className:n,component:l="div",disableGutters:I=!1,variant:o="regular"}=t,a=(0,c.Z)(t,ug),C=(0,s.Z)({},t,{component:l,disableGutters:I,variant:o}),i=(e=>{const{classes:g,disableGutters:t,variant:n}=e,l={root:["root",!t&&"gutters",n]};return(0,F.Z)(l,Ag,g)})(C);return(0,m.jsx)(mg,(0,s.Z)({as:l,className:(0,W.Z)(i.root,n),ref:g,ownerState:C},a))})),Zg=l(444),hg=l(7278),pg=l(6797),Gg=(l(6751),l(8679),(0,Z.w)((function(e,t){var n=e.styles,l=(0,pg.O)([n],void 0,g.useContext(Z.T));if(!Z.i){for(var I,o=l.name,a=l.styles,C=l.next;void 0!==C;)o+=" "+C.name,a+=C.styles,C=C.next;var i=!0===t.compat,r=t.insert("",{name:o,styles:a},t.sheet,i);return i?null:g.createElement("style",((I={})["data-emotion"]=t.key+"-global "+o,I.dangerouslySetInnerHTML={__html:r},I.nonce=t.sheet.nonce,I))}var s=g.useRef();return(0,hg.j)((function(){var e=t.key+"-global",g=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),n=!1,I=document.querySelector('style[data-emotion="'+e+" "+l.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),null!==I&&(n=!0,I.setAttribute("data-emotion",e),g.hydrate([I])),s.current=[g,n],function(){g.flush()}}),[t]),(0,hg.j)((function(){var e=s.current,g=e[0];if(e[1])e[1]=!1;else{if(void 0!==l.next&&(0,Zg.My)(t,l.next,!0),g.tags.length){var n=g.tags[g.tags.length-1].nextElementSibling;g.before=n,g.flush()}t.insert("",l,g,!1)}}),[t,l.name]),null})));function yg(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return(0,pg.O)(g)}var Bg=function(){var e=yg.apply(void 0,arguments),g="animation-"+e.name;return{name:g,styles:"@keyframes "+g+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Sg(e){const{styles:g,defaultTheme:t={}}=e,n="function"==typeof g?e=>{return g(null==(n=e)||0===Object.keys(n).length?t:e);var n}:g;return(0,m.jsx)(Gg,{styles:n})}var Wg=function({styles:e,themeId:g,defaultTheme:t={}}){const n=(0,o.Z)(t),l="function"==typeof e?e(g&&n[g]||n):e;return(0,m.jsx)(Sg,{styles:l})},Vg=function(e){return(0,m.jsx)(Wg,(0,s.Z)({},e,{defaultTheme:a.Z,themeId:C.Z}))};const fg=(e,g)=>(0,s.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},g&&!e.vars&&{colorScheme:e.palette.mode}),vg=e=>(0,s.Z)({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}});var Rg=function(e){const t=(0,ie.Z)({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:l=!1}=t;return(0,m.jsxs)(g.Fragment,{children:[(0,m.jsx)(Vg,{styles:e=>((e,g=!1)=>{var t;const n={};g&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach((([g,t])=>{var l;n[e.getColorSchemeSelector(g).replace(/\s*&/,"")]={colorScheme:null==(l=t.palette)?void 0:l.mode}}));let l=(0,s.Z)({html:fg(e,g),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:(0,s.Z)({margin:0},vg(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},n);const I=null==(t=e.components)||null==(t=t.MuiCssBaseline)?void 0:t.styleOverrides;return I&&(l=[l,I]),l})(e,l)}),n]})};function kg(e){return(0,Re.Z)("MuiDivider",e)}var Xg=(0,ve.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const Jg=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Yg=(0,I.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.absolute&&g.absolute,g[t.variant],t.light&&g.light,"vertical"===t.orientation&&g.vertical,t.flexItem&&g.flexItem,t.children&&g.withChildren,t.children&&"vertical"===t.orientation&&g.withChildrenVertical,"right"===t.textAlign&&"vertical"!==t.orientation&&g.textAlignRight,"left"===t.textAlign&&"vertical"!==t.orientation&&g.textAlignLeft]}})((({theme:e,ownerState:g})=>(0,s.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},g.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},g.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,Te.Fq)(e.palette.divider,.08)},"inset"===g.variant&&{marginLeft:72},"middle"===g.variant&&"horizontal"===g.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===g.variant&&"vertical"===g.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===g.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},g.flexItem&&{alignSelf:"stretch",height:"auto"})),(({ownerState:e})=>(0,s.Z)({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}})),(({theme:e,ownerState:g})=>(0,s.Z)({},g.children&&"vertical"!==g.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}})),(({theme:e,ownerState:g})=>(0,s.Z)({},g.children&&"vertical"===g.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}})),(({ownerState:e})=>(0,s.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}))),Hg=(0,I.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.wrapper,"vertical"===t.orientation&&g.wrapperVertical]}})((({theme:e,ownerState:g})=>(0,s.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===g.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}))),wg=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiDivider"}),{absolute:n=!1,children:l,className:I,component:o=(l?"div":"hr"),flexItem:a=!1,light:C=!1,orientation:i="horizontal",role:r=("hr"!==o?"separator":void 0),textAlign:d="center",variant:A="fullWidth"}=t,u=(0,c.Z)(t,Jg),b=(0,s.Z)({},t,{absolute:n,component:o,flexItem:a,light:C,orientation:i,role:r,textAlign:d,variant:A}),Z=(e=>{const{absolute:g,children:t,classes:n,flexItem:l,light:I,orientation:o,textAlign:a,variant:C}=e,i={root:["root",g&&"absolute",C,I&&"light","vertical"===o&&"vertical",l&&"flexItem",t&&"withChildren",t&&"vertical"===o&&"withChildrenVertical","right"===a&&"vertical"!==o&&"textAlignRight","left"===a&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]};return(0,F.Z)(i,kg,n)})(b);return(0,m.jsx)(Yg,(0,s.Z)({as:o,className:(0,W.Z)(Z.root,I),role:r,ref:g,ownerState:b},u,{children:l?(0,m.jsx)(Hg,{className:Z.wrapper,ownerState:b,children:l}):null}))}));wg.muiSkipListHighlight=!0;var xg=wg,Fg=l(2068),Ng=l(9674);function Kg(e,t){var n=Object.create(null);return e&&g.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,g.isValidElement)(e)?t(e):e}(e)})),n}function zg(e,g,t){return null!=t[g]?t[g]:e.props[g]}function Mg(e,t,n){var l=Kg(e.children),I=function(e,g){function t(t){return t in g?g[t]:e[t]}e=e||{},g=g||{};var n,l=Object.create(null),I=[];for(var o in e)o in g?I.length&&(l[o]=I,I=[]):I.push(o);var a={};for(var C in g){if(l[C])for(n=0;n<l[C].length;n++){var i=l[C][n];a[l[C][n]]=t(i)}a[C]=t(C)}for(n=0;n<I.length;n++)a[I[n]]=t(I[n]);return a}(t,l);return Object.keys(I).forEach((function(o){var a=I[o];if((0,g.isValidElement)(a)){var C=o in t,i=o in l,r=t[o],s=(0,g.isValidElement)(r)&&!r.props.in;!i||C&&!s?i||!C||s?i&&C&&(0,g.isValidElement)(r)&&(I[o]=(0,g.cloneElement)(a,{onExited:n.bind(null,a),in:r.props.in,exit:zg(a,"exit",e),enter:zg(a,"enter",e)})):I[o]=(0,g.cloneElement)(a,{in:!1}):I[o]=(0,g.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:zg(a,"exit",e),enter:zg(a,"enter",e)})}})),I}var Eg=Object.values||function(e){return Object.keys(e).map((function(g){return e[g]}))},Lg=function(e){function t(g,t){var n,l=(n=e.call(this,g,t)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));return n.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},n}se(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,l,I=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,l=o,Kg(n.children,(function(e){return(0,g.cloneElement)(e,{onExited:l.bind(null,e),in:!0,appear:zg(e,"appear",n),enter:zg(e,"enter",n),exit:zg(e,"exit",n)})}))):Mg(e,I,o),firstRender:!1}},n.handleExited=function(e,g){var t=Kg(this.props.children);e.key in t||(e.props.onExited&&e.props.onExited(g),this.mounted&&this.setState((function(g){var t=(0,s.Z)({},g.children);return delete t[e.key],{children:t}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,l=(0,c.Z)(e,["component","childFactory"]),I=this.state.contextValue,o=Eg(this.state.children).map(n);return delete l.appear,delete l.enter,delete l.exit,null===t?g.createElement(ce.Provider,{value:I},o):g.createElement(ce.Provider,{value:I},g.createElement(t,l,o))},t}(g.Component);Lg.propTypes={},Lg.defaultProps={component:"div",childFactory:function(e){return e}};var Ug=Lg,Qg=(0,ve.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);const Tg=["center","classes","className"];let Dg,jg,Pg,Og,qg=e=>e;const _g=Bg(Dg||(Dg=qg`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),$g=Bg(jg||(jg=qg`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),et=Bg(Pg||(Pg=qg`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),gt=(0,I.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),tt=(0,I.ZP)((function(e){const{className:t,classes:n,pulsate:l=!1,rippleX:I,rippleY:o,rippleSize:a,in:C,onExited:i,timeout:r}=e,[s,c]=g.useState(!1),d=(0,W.Z)(t,n.ripple,n.rippleVisible,l&&n.ripplePulsate),A={width:a,height:a,top:-a/2+o,left:-a/2+I},u=(0,W.Z)(n.child,s&&n.childLeaving,l&&n.childPulsate);return C||s||c(!0),g.useEffect((()=>{if(!C&&null!=i){const e=setTimeout(i,r);return()=>{clearTimeout(e)}}}),[i,C,r]),(0,m.jsx)("span",{className:d,style:A,children:(0,m.jsx)("span",{className:u})})}),{name:"MuiTouchRipple",slot:"Ripple"})(Og||(Og=qg`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Qg.rippleVisible,_g,550,(({theme:e})=>e.transitions.easing.easeInOut),Qg.ripplePulsate,(({theme:e})=>e.transitions.duration.shorter),Qg.child,Qg.childLeaving,$g,550,(({theme:e})=>e.transitions.easing.easeInOut),Qg.childPulsate,et,(({theme:e})=>e.transitions.easing.easeInOut)),nt=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiTouchRipple"}),{center:l=!1,classes:I={},className:o}=n,a=(0,c.Z)(n,Tg),[C,i]=g.useState([]),r=g.useRef(0),d=g.useRef(null);g.useEffect((()=>{d.current&&(d.current(),d.current=null)}),[C]);const A=g.useRef(!1),u=g.useRef(0),b=g.useRef(null),Z=g.useRef(null);g.useEffect((()=>()=>{u.current&&clearTimeout(u.current)}),[]);const h=g.useCallback((e=>{const{pulsate:g,rippleX:t,rippleY:n,rippleSize:l,cb:o}=e;i((e=>[...e,(0,m.jsx)(tt,{classes:{ripple:(0,W.Z)(I.ripple,Qg.ripple),rippleVisible:(0,W.Z)(I.rippleVisible,Qg.rippleVisible),ripplePulsate:(0,W.Z)(I.ripplePulsate,Qg.ripplePulsate),child:(0,W.Z)(I.child,Qg.child),childLeaving:(0,W.Z)(I.childLeaving,Qg.childLeaving),childPulsate:(0,W.Z)(I.childPulsate,Qg.childPulsate)},timeout:550,pulsate:g,rippleX:t,rippleY:n,rippleSize:l},r.current)])),r.current+=1,d.current=o}),[I]),p=g.useCallback(((e={},g={},t=(()=>{}))=>{const{pulsate:n=!1,center:I=l||g.pulsate,fakeElement:o=!1}=g;if("mousedown"===(null==e?void 0:e.type)&&A.current)return void(A.current=!1);"touchstart"===(null==e?void 0:e.type)&&(A.current=!0);const a=o?null:Z.current,C=a?a.getBoundingClientRect():{width:0,height:0,left:0,top:0};let i,r,s;if(I||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)i=Math.round(C.width/2),r=Math.round(C.height/2);else{const{clientX:g,clientY:t}=e.touches&&e.touches.length>0?e.touches[0]:e;i=Math.round(g-C.left),r=Math.round(t-C.top)}if(I)s=Math.sqrt((2*C.width**2+C.height**2)/3),s%2==0&&(s+=1);else{const e=2*Math.max(Math.abs((a?a.clientWidth:0)-i),i)+2,g=2*Math.max(Math.abs((a?a.clientHeight:0)-r),r)+2;s=Math.sqrt(e**2+g**2)}null!=e&&e.touches?null===b.current&&(b.current=()=>{h({pulsate:n,rippleX:i,rippleY:r,rippleSize:s,cb:t})},u.current=setTimeout((()=>{b.current&&(b.current(),b.current=null)}),80)):h({pulsate:n,rippleX:i,rippleY:r,rippleSize:s,cb:t})}),[l,h]),G=g.useCallback((()=>{p({},{pulsate:!0})}),[p]),y=g.useCallback(((e,g)=>{if(clearTimeout(u.current),"touchend"===(null==e?void 0:e.type)&&b.current)return b.current(),b.current=null,void(u.current=setTimeout((()=>{y(e,g)})));b.current=null,i((e=>e.length>0?e.slice(1):e)),d.current=g}),[]);return g.useImperativeHandle(t,(()=>({pulsate:G,start:p,stop:y})),[G,p,y]),(0,m.jsx)(gt,(0,s.Z)({className:(0,W.Z)(Qg.root,I.root,o),ref:Z},a,{children:(0,m.jsx)(Ug,{component:null,exit:!0,children:C})}))}));var lt=nt;function It(e){return(0,Re.Z)("MuiButtonBase",e)}var ot=(0,ve.Z)("MuiButtonBase",["root","disabled","focusVisible"]);const at=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Ct=(0,I.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,g)=>g.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${ot.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}});var it=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiButtonBase"}),{action:l,centerRipple:I=!1,children:o,className:a,component:C="button",disabled:i=!1,disableRipple:r=!1,disableTouchRipple:d=!1,focusRipple:A=!1,LinkComponent:u="a",onBlur:b,onClick:Z,onContextMenu:h,onDragLeave:p,onFocus:G,onFocusVisible:y,onKeyDown:B,onKeyUp:S,onMouseDown:V,onMouseLeave:f,onMouseUp:v,onTouchEnd:R,onTouchMove:k,onTouchStart:X,tabIndex:J=0,TouchRippleProps:Y,touchRippleRef:H,type:w}=n,x=(0,c.Z)(n,at),N=g.useRef(null),K=g.useRef(null),z=(0,Be.Z)(K,H),{isFocusVisibleRef:M,onFocus:E,onBlur:L,ref:U}=(0,Ng.Z)(),[Q,T]=g.useState(!1);i&&Q&&T(!1),g.useImperativeHandle(l,(()=>({focusVisible:()=>{T(!0),N.current.focus()}})),[]);const[D,j]=g.useState(!1);g.useEffect((()=>{j(!0)}),[]);const P=D&&!r&&!i;function O(e,g,t=d){return(0,Fg.Z)((n=>(g&&g(n),!t&&K.current&&K.current[e](n),!0)))}g.useEffect((()=>{Q&&A&&!r&&D&&K.current.pulsate()}),[r,A,Q,D]);const q=O("start",V),_=O("stop",h),$=O("stop",p),ee=O("stop",v),ge=O("stop",(e=>{Q&&e.preventDefault(),f&&f(e)})),te=O("start",X),ne=O("stop",R),le=O("stop",k),Ie=O("stop",(e=>{L(e),!1===M.current&&T(!1),b&&b(e)}),!1),oe=(0,Fg.Z)((e=>{N.current||(N.current=e.currentTarget),E(e),!0===M.current&&(T(!0),y&&y(e)),G&&G(e)})),ae=()=>{const e=N.current;return C&&"button"!==C&&!("A"===e.tagName&&e.href)},Ce=g.useRef(!1),re=(0,Fg.Z)((e=>{A&&!Ce.current&&Q&&K.current&&" "===e.key&&(Ce.current=!0,K.current.stop(e,(()=>{K.current.start(e)}))),e.target===e.currentTarget&&ae()&&" "===e.key&&e.preventDefault(),B&&B(e),e.target===e.currentTarget&&ae()&&"Enter"===e.key&&!i&&(e.preventDefault(),Z&&Z(e))})),se=(0,Fg.Z)((e=>{A&&" "===e.key&&K.current&&Q&&!e.defaultPrevented&&(Ce.current=!1,K.current.stop(e,(()=>{K.current.pulsate(e)}))),S&&S(e),Z&&e.target===e.currentTarget&&ae()&&" "===e.key&&!e.defaultPrevented&&Z(e)}));let ce=C;"button"===ce&&(x.href||x.to)&&(ce=u);const de={};"button"===ce?(de.type=void 0===w?"button":w,de.disabled=i):(x.href||x.to||(de.role="button"),i&&(de["aria-disabled"]=i));const Ae=(0,Be.Z)(t,U,N),ue=(0,s.Z)({},n,{centerRipple:I,component:C,disabled:i,disableRipple:r,disableTouchRipple:d,focusRipple:A,tabIndex:J,focusVisible:Q}),me=(e=>{const{disabled:g,focusVisible:t,focusVisibleClassName:n,classes:l}=e,I={root:["root",g&&"disabled",t&&"focusVisible"]},o=(0,F.Z)(I,It,l);return t&&n&&(o.root+=` ${n}`),o})(ue);return(0,m.jsxs)(Ct,(0,s.Z)({as:ce,className:(0,W.Z)(me.root,a),ownerState:ue,onBlur:Ie,onClick:Z,onContextMenu:_,onFocus:oe,onKeyDown:re,onKeyUp:se,onMouseDown:q,onMouseLeave:ge,onMouseUp:ee,onDragLeave:$,onTouchEnd:ne,onTouchMove:le,onTouchStart:te,ref:Ae,tabIndex:i?-1:J,type:w},de,x,{children:[o,P?(0,m.jsx)(lt,(0,s.Z)({ref:z,center:I},Y)):null]}))}));function rt(e){return(0,Re.Z)("MuiIconButton",e)}var st=(0,ve.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);const ct=["edge","children","className","color","disabled","disableFocusRipple","size"],dt=(0,I.ZP)(it,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,"default"!==t.color&&g[`color${(0,_e.Z)(t.color)}`],t.edge&&g[`edge${(0,_e.Z)(t.edge)}`],g[`size${(0,_e.Z)(t.size)}`]]}})((({theme:e,ownerState:g})=>(0,s.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!g.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Te.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===g.edge&&{marginLeft:"small"===g.size?-3:-12},"end"===g.edge&&{marginRight:"small"===g.size?-3:-12})),(({theme:e,ownerState:g})=>{var t;const n=null==(t=(e.vars||e).palette)?void 0:t[g.color];return(0,s.Z)({},"inherit"===g.color&&{color:"inherit"},"inherit"!==g.color&&"default"!==g.color&&(0,s.Z)({color:null==n?void 0:n.main},!g.disableRipple&&{"&:hover":(0,s.Z)({},n&&{backgroundColor:e.vars?`rgba(${n.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Te.Fq)(n.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===g.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===g.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${st.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})})),At=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiIconButton"}),{edge:n=!1,children:l,className:I,color:o="default",disabled:a=!1,disableFocusRipple:C=!1,size:i="medium"}=t,r=(0,c.Z)(t,ct),d=(0,s.Z)({},t,{edge:n,color:o,disabled:a,disableFocusRipple:C,size:i}),A=(e=>{const{classes:g,disabled:t,color:n,edge:l,size:I}=e,o={root:["root",t&&"disabled","default"!==n&&`color${(0,_e.Z)(n)}`,l&&`edge${(0,_e.Z)(l)}`,`size${(0,_e.Z)(I)}`]};return(0,F.Z)(o,rt,g)})(d);return(0,m.jsx)(dt,(0,s.Z)({className:(0,W.Z)(A.root,I),centerRipple:!0,focusRipple:!C,disabled:a,ref:g,ownerState:d},r,{children:l}))}));var ut=At,mt=l(9572),bt=l(6215),Zt=l(8974),ht=g.createContext({});function pt(e){return(0,Re.Z)("MuiListItemButton",e)}var Gt=(0,ve.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);const yt=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],Bt=(0,I.ZP)(it,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.dense&&g.dense,"flex-start"===t.alignItems&&g.alignItemsFlexStart,t.divider&&g.divider,!t.disableGutters&&g.gutters]}})((({theme:e,ownerState:g})=>(0,s.Z)({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Gt.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Gt.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Gt.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Gt.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Gt.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},g.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},"flex-start"===g.alignItems&&{alignItems:"flex-start"},!g.disableGutters&&{paddingLeft:16,paddingRight:16},g.dense&&{paddingTop:4,paddingBottom:4})));var St=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiListItemButton"}),{alignItems:l="center",autoFocus:I=!1,component:o="div",children:a,dense:C=!1,disableGutters:i=!1,divider:r=!1,focusVisibleClassName:d,selected:A=!1,className:u}=n,b=(0,c.Z)(n,yt),Z=g.useContext(ht),h=g.useMemo((()=>({dense:C||Z.dense||!1,alignItems:l,disableGutters:i})),[l,Z.dense,C,i]),p=g.useRef(null);(0,Zt.Z)((()=>{I&&p.current&&p.current.focus()}),[I]);const G=(0,s.Z)({},n,{alignItems:l,dense:h.dense,disableGutters:i,divider:r,selected:A}),y=(e=>{const{alignItems:g,classes:t,dense:n,disabled:l,disableGutters:I,divider:o,selected:a}=e,C={root:["root",n&&"dense",!I&&"gutters",o&&"divider",l&&"disabled","flex-start"===g&&"alignItemsFlexStart",a&&"selected"]},i=(0,F.Z)(C,pt,t);return(0,s.Z)({},t,i)})(G),B=(0,Be.Z)(p,t);return(0,m.jsx)(ht.Provider,{value:h,children:(0,m.jsx)(Bt,(0,s.Z)({ref:B,href:b.href||b.to,component:(b.href||b.to)&&"div"===o?"button":o,focusVisibleClassName:(0,W.Z)(y.focusVisible,d),ownerState:G,className:(0,W.Z)(y.root,u)},b,{classes:y,children:a}))})}));function Wt(e){return(0,Re.Z)("MuiListItemIcon",e)}var Vt=(0,ve.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);const ft=["className"],vt=(0,I.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,"flex-start"===t.alignItems&&g.alignItemsFlexStart]}})((({theme:e,ownerState:g})=>(0,s.Z)({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===g.alignItems&&{marginTop:8})));var Rt=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiListItemIcon"}),{className:l}=n,I=(0,c.Z)(n,ft),o=g.useContext(ht),a=(0,s.Z)({},n,{alignItems:o.alignItems}),C=(e=>{const{alignItems:g,classes:t}=e,n={root:["root","flex-start"===g&&"alignItemsFlexStart"]};return(0,F.Z)(n,Wt,t)})(a);return(0,m.jsx)(vt,(0,s.Z)({className:(0,W.Z)(C.root,l),ownerState:a,ref:t},I))}));function kt(e){return(0,Re.Z)("MuiTypography",e)}(0,ve.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Xt=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Jt=(0,I.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.variant&&g[t.variant],"inherit"!==t.align&&g[`align${(0,_e.Z)(t.align)}`],t.noWrap&&g.noWrap,t.gutterBottom&&g.gutterBottom,t.paragraph&&g.paragraph]}})((({theme:e,ownerState:g})=>(0,s.Z)({margin:0},"inherit"===g.variant&&{font:"inherit"},"inherit"!==g.variant&&e.typography[g.variant],"inherit"!==g.align&&{textAlign:g.align},g.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},g.gutterBottom&&{marginBottom:"0.35em"},g.paragraph&&{marginBottom:16}))),Yt={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ht={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},wt=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiTypography"}),n=(e=>Ht[e]||e)(t.color),l=X((0,s.Z)({},t,{color:n})),{align:I="inherit",className:o,component:a,gutterBottom:C=!1,noWrap:i=!1,paragraph:r=!1,variant:d="body1",variantMapping:A=Yt}=l,u=(0,c.Z)(l,Xt),b=(0,s.Z)({},l,{align:I,color:n,className:o,component:a,gutterBottom:C,noWrap:i,paragraph:r,variant:d,variantMapping:A}),Z=a||(r?"p":A[d]||Yt[d])||"span",h=(e=>{const{align:g,gutterBottom:t,noWrap:n,paragraph:l,variant:I,classes:o}=e,a={root:["root",I,"inherit"!==e.align&&`align${(0,_e.Z)(g)}`,t&&"gutterBottom",n&&"noWrap",l&&"paragraph"]};return(0,F.Z)(a,kt,o)})(b);return(0,m.jsx)(Jt,(0,s.Z)({as:Z,ref:g,ownerState:b,className:(0,W.Z)(h.root,o)},u))}));var xt=wt;function Ft(e){return(0,Re.Z)("MuiListItemText",e)}var Nt=(0,ve.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);const Kt=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],zt=(0,I.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[{[`& .${Nt.primary}`]:g.primary},{[`& .${Nt.secondary}`]:g.secondary},g.root,t.inset&&g.inset,t.primary&&t.secondary&&g.multiline,t.dense&&g.dense]}})((({ownerState:e})=>(0,s.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})));var Mt=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiListItemText"}),{children:l,className:I,disableTypography:o=!1,inset:a=!1,primary:C,primaryTypographyProps:i,secondary:r,secondaryTypographyProps:d}=n,A=(0,c.Z)(n,Kt),{dense:u}=g.useContext(ht);let b=null!=C?C:l,Z=r;const h=(0,s.Z)({},n,{disableTypography:o,inset:a,primary:!!b,secondary:!!Z,dense:u}),p=(e=>{const{classes:g,inset:t,primary:n,secondary:l,dense:I}=e,o={root:["root",t&&"inset",I&&"dense",n&&l&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,F.Z)(o,Ft,g)})(h);return null==b||b.type===xt||o||(b=(0,m.jsx)(xt,(0,s.Z)({variant:u?"body2":"body1",className:p.primary,component:null!=i&&i.variant?void 0:"span",display:"block"},i,{children:b}))),null==Z||Z.type===xt||o||(Z=(0,m.jsx)(xt,(0,s.Z)({variant:"body2",className:p.secondary,color:"text.secondary",display:"block"},d,{children:Z}))),(0,m.jsxs)(zt,(0,s.Z)({className:(0,W.Z)(p.root,I),ownerState:h,ref:t},A,{children:[b,Z]}))}));function Et(e){return(0,Re.Z)("MuiList",e)}(0,ve.Z)("MuiList",["root","padding","dense","subheader"]);const Lt=["children","className","component","dense","disablePadding","subheader"],Ut=(0,I.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,!t.disablePadding&&g.padding,t.dense&&g.dense,t.subheader&&g.subheader]}})((({ownerState:e})=>(0,s.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})));var Qt,Tt=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiList"}),{children:l,className:I,component:o="ul",dense:a=!1,disablePadding:C=!1,subheader:i}=n,r=(0,c.Z)(n,Lt),d=g.useMemo((()=>({dense:a})),[a]),A=(0,s.Z)({},n,{component:o,dense:a,disablePadding:C}),u=(e=>{const{classes:g,disablePadding:t,dense:n,subheader:l}=e,I={root:["root",!t&&"padding",n&&"dense",l&&"subheader"]};return(0,F.Z)(I,Et,g)})(A);return(0,m.jsx)(ht.Provider,{value:d,children:(0,m.jsxs)(Ut,(0,s.Z)({as:o,className:(0,W.Z)(u.root,I),ref:t,ownerState:A},r,{children:[i,l]}))})}));function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Dt.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Qt||(Qt={}));const jt="popstate";function Pt(e,g){if(!1===e||null==e)throw new Error(g)}function Ot(e,g){if(!e){"undefined"!=typeof console&&console.warn(g);try{throw new Error(g)}catch(e){}}}function qt(e,g){return{usr:e.state,key:e.key,idx:g}}function _t(e,g,t,n){return void 0===t&&(t=null),Dt({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof g?en(g):g,{state:t,key:g&&g.key||n||Math.random().toString(36).substr(2,8)})}function $t(e){let{pathname:g="/",search:t="",hash:n=""}=e;return t&&"?"!==t&&(g+="?"===t.charAt(0)?t:"?"+t),n&&"#"!==n&&(g+="#"===n.charAt(0)?n:"#"+n),g}function en(e){let g={};if(e){let t=e.indexOf("#");t>=0&&(g.hash=e.substr(t),e=e.substr(0,t));let n=e.indexOf("?");n>=0&&(g.search=e.substr(n),e=e.substr(0,n)),e&&(g.pathname=e)}return g}var gn;function tn(e,g,t){void 0===t&&(t="/");let n=bn(("string"==typeof g?en(g):g).pathname||"/",t);if(null==n)return null;let l=nn(e);!function(e){e.sort(((e,g)=>e.score!==g.score?g.score-e.score:function(e,g){return e.length===g.length&&e.slice(0,-1).every(((e,t)=>e===g[t]))?e[e.length-1]-g[g.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),g.routesMeta.map((e=>e.childrenIndex)))))}(l);let I=null;for(let e=0;null==I&&e<l.length;++e)I=An(l[e],mn(n));return I}function nn(e,g,t,n){void 0===g&&(g=[]),void 0===t&&(t=[]),void 0===n&&(n="");let l=(e,l,I)=>{let o={relativePath:void 0===I?e.path||"":I,caseSensitive:!0===e.caseSensitive,childrenIndex:l,route:e};o.relativePath.startsWith("/")&&(Pt(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let a=hn([n,o.relativePath]),C=t.concat(o);e.children&&e.children.length>0&&(Pt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),nn(e.children,g,C,a)),(null!=e.path||e.index)&&g.push({path:a,score:dn(a,e.index),routesMeta:C})};return e.forEach(((e,g)=>{var t;if(""!==e.path&&null!=(t=e.path)&&t.includes("?"))for(let t of ln(e.path))l(e,g,t);else l(e,g)})),g}function ln(e){let g=e.split("/");if(0===g.length)return[];let[t,...n]=g,l=t.endsWith("?"),I=t.replace(/\?$/,"");if(0===n.length)return l?[I,""]:[I];let o=ln(n.join("/")),a=[];return a.push(...o.map((e=>""===e?I:[I,e].join("/")))),l&&a.push(...o),a.map((g=>e.startsWith("/")&&""===g?"/":g))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(gn||(gn={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const In=/^:\w+$/,on=3,an=2,Cn=1,rn=10,sn=-2,cn=e=>"*"===e;function dn(e,g){let t=e.split("/"),n=t.length;return t.some(cn)&&(n+=sn),g&&(n+=an),t.filter((e=>!cn(e))).reduce(((e,g)=>e+(In.test(g)?on:""===g?Cn:rn)),n)}function An(e,g){let{routesMeta:t}=e,n={},l="/",I=[];for(let e=0;e<t.length;++e){let o=t[e],a=e===t.length-1,C="/"===l?g:g.slice(l.length)||"/",i=un({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},C);if(!i)return null;Object.assign(n,i.params);let r=o.route;I.push({params:n,pathname:hn([l,i.pathname]),pathnameBase:pn(hn([l,i.pathnameBase])),route:r}),"/"!==i.pathnameBase&&(l=hn([l,i.pathnameBase]))}return I}function un(e,g){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[t,n]=function(e,g,t){void 0===g&&(g=!1),void 0===t&&(t=!0),Ot("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,g)=>(n.push(g),"/([^\\/]+)")));return e.endsWith("*")?(n.push("*"),l+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":""!==e&&"/"!==e&&(l+="(?:(?=\\/|$))"),[new RegExp(l,g?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),l=g.match(t);if(!l)return null;let I=l[0],o=I.replace(/(.)\/+$/,"$1"),a=l.slice(1);return{params:n.reduce(((e,g,t)=>{if("*"===g){let e=a[t]||"";o=I.slice(0,I.length-e.length).replace(/(.)\/+$/,"$1")}return e[g]=function(e,g){try{return decodeURIComponent(e)}catch(t){return Ot(!1,'The value for the URL param "'+g+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}(a[t]||"",g),e}),{}),pathname:I,pathnameBase:o,pattern:e}}function mn(e){try{return decodeURI(e)}catch(g){return Ot(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+g+")."),e}}function bn(e,g){if("/"===g)return e;if(!e.toLowerCase().startsWith(g.toLowerCase()))return null;let t=g.endsWith("/")?g.length-1:g.length,n=e.charAt(t);return n&&"/"!==n?null:e.slice(t)||"/"}function Zn(e,g,t,n){return"Cannot include a '"+e+"' character in a manually specified `to."+g+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+t+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}const hn=e=>e.join("/").replace(/\/\/+/g,"/"),pn=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gn=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",yn=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const Bn=["post","put","patch","delete"],Sn=(new Set(Bn),["get",...Bn]);function Wn(){return Wn=Object.assign?Object.assign.bind():function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Wn.apply(this,arguments)}new Set(Sn),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const Vn=g.createContext(null),fn=g.createContext(null),vn=g.createContext(null),Rn=g.createContext(null),kn=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Xn=g.createContext(null);function Jn(){return null!=g.useContext(Rn)}function Yn(){return Jn()||Pt(!1),g.useContext(Rn).location}function Hn(e){g.useContext(vn).static||g.useLayoutEffect(e)}function wn(){let{isDataRoute:e}=g.useContext(kn);return e?function(){let{router:e}=function(e){let t=g.useContext(Vn);return t||Pt(!1),t}(Mn.UseNavigateStable),t=Ln(En.UseNavigateStable),n=g.useRef(!1);Hn((()=>{n.current=!0}));let l=g.useCallback((function(g,l){void 0===l&&(l={}),n.current&&("number"==typeof g?e.navigate(g):e.navigate(g,Wn({fromRouteId:t},l)))}),[e,t]);return l}():function(){Jn()||Pt(!1);let e=g.useContext(Vn),{basename:t,navigator:n}=g.useContext(vn),{matches:l}=g.useContext(kn),{pathname:I}=Yn(),o=JSON.stringify(function(e){return e.filter(((e,g)=>0===g||e.route.path&&e.route.path.length>0))}(l).map((e=>e.pathnameBase))),a=g.useRef(!1);Hn((()=>{a.current=!0}));let C=g.useCallback((function(g,l){if(void 0===l&&(l={}),!a.current)return;if("number"==typeof g)return void n.go(g);let C=function(e,g,t,n){let l;void 0===n&&(n=!1),"string"==typeof e?l=en(e):(l=Dt({},e),Pt(!l.pathname||!l.pathname.includes("?"),Zn("?","pathname","search",l)),Pt(!l.pathname||!l.pathname.includes("#"),Zn("#","pathname","hash",l)),Pt(!l.search||!l.search.includes("#"),Zn("#","search","hash",l)));let I,o=""===e||""===l.pathname,a=o?"/":l.pathname;if(n||null==a)I=t;else{let e=g.length-1;if(a.startsWith("..")){let g=a.split("/");for(;".."===g[0];)g.shift(),e-=1;l.pathname=g.join("/")}I=e>=0?g[e]:"/"}let C=function(e,g){void 0===g&&(g="/");let{pathname:t,search:n="",hash:l=""}="string"==typeof e?en(e):e,I=t?t.startsWith("/")?t:function(e,g){let t=g.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?t.length>1&&t.pop():"."!==e&&t.push(e)})),t.length>1?t.join("/"):"/"}(t,g):g;return{pathname:I,search:Gn(n),hash:yn(l)}}(l,I),i=a&&"/"!==a&&a.endsWith("/"),r=(o||"."===a)&&t.endsWith("/");return C.pathname.endsWith("/")||!i&&!r||(C.pathname+="/"),C}(g,JSON.parse(o),I,"path"===l.relative);null==e&&"/"!==t&&(C.pathname="/"===C.pathname?t:hn([t,C.pathname])),(l.replace?n.replace:n.push)(C,l.state,l)}),[t,n,o,I,e]);return C}()}function xn(e,t,n){Jn()||Pt(!1);let{navigator:l}=g.useContext(vn),{matches:I}=g.useContext(kn),o=I[I.length-1],a=o?o.params:{},C=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let i,r=Yn();if(t){var s;let e="string"==typeof t?en(t):t;"/"===C||(null==(s=e.pathname)?void 0:s.startsWith(C))||Pt(!1),i=e}else i=r;let c=i.pathname||"/",d=tn(e,{pathname:"/"===C?c:c.slice(C.length)||"/"}),A=function(e,t,n){var l;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var I;if(null==(I=n)||!I.errors)return null;e=n.matches}let o=e,a=null==(l=n)?void 0:l.errors;if(null!=a){let e=o.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||Pt(!1),o=o.slice(0,Math.min(o.length,e+1))}return o.reduceRight(((e,l,I)=>{let C=l.route.id?null==a?void 0:a[l.route.id]:null,i=null;n&&(i=l.route.errorElement||Nn);let r=t.concat(o.slice(0,I+1)),s=()=>{let t;return t=C?i:l.route.Component?g.createElement(l.route.Component,null):l.route.element?l.route.element:e,g.createElement(zn,{match:l,routeContext:{outlet:e,matches:r,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===I)?g.createElement(Kn,{location:n.location,revalidation:n.revalidation,component:i,error:C,children:s(),routeContext:{outlet:null,matches:r,isDataRoute:!0}}):s()}),null)}(d&&d.map((e=>Object.assign({},e,{params:Object.assign({},a,e.params),pathname:hn([C,l.encodeLocation?l.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?C:hn([C,l.encodeLocation?l.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),I,n);return t&&A?g.createElement(Rn.Provider,{value:{location:Wn({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:Qt.Pop}},A):A}function Fn(){let e=function(){var e;let t=g.useContext(Xn),n=function(e){let t=g.useContext(fn);return t||Pt(!1),t}(En.UseRouteError),l=Ln(En.UseRouteError);return t||(null==(e=n.errors)?void 0:e[l])}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:l},n):null,null)}const Nn=g.createElement(Fn,null);class Kn extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,g){return g.location!==e.location||"idle"!==g.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||g.error,location:g.location,revalidation:e.revalidation||g.revalidation}}componentDidCatch(e,g){console.error("React Router caught the following error during render",e,g)}render(){return this.state.error?g.createElement(kn.Provider,{value:this.props.routeContext},g.createElement(Xn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zn(e){let{routeContext:t,match:n,children:l}=e,I=g.useContext(Vn);return I&&I.static&&I.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(I.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(kn.Provider,{value:t},l)}var Mn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Mn||{}),En=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(En||{});function Ln(e){let t=function(e){let t=g.useContext(kn);return t||Pt(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||Pt(!1),n.route.id}function Un(e){Pt(!1)}function Qn(e){let{basename:t="/",children:n=null,location:l,navigationType:I=Qt.Pop,navigator:o,static:a=!1}=e;Jn()&&Pt(!1);let C=t.replace(/^\/*/,"/"),i=g.useMemo((()=>({basename:C,navigator:o,static:a})),[C,o,a]);"string"==typeof l&&(l=en(l));let{pathname:r="/",search:s="",hash:c="",state:d=null,key:A="default"}=l,u=g.useMemo((()=>{let e=bn(r,C);return null==e?null:{location:{pathname:e,search:s,hash:c,state:d,key:A},navigationType:I}}),[C,r,s,c,d,A,I]);return null==u?null:g.createElement(vn.Provider,{value:i},g.createElement(Rn.Provider,{children:n,value:u}))}function Tn(e){let{children:g,location:t}=e;return xn(Dn(g),t)}function Dn(e,t){void 0===t&&(t=[]);let n=[];return g.Children.forEach(e,((e,l)=>{if(!g.isValidElement(e))return;let I=[...t,l];if(e.type===g.Fragment)return void n.push.apply(n,Dn(e.props.children,I));e.type!==Un&&Pt(!1),e.props.index&&e.props.children&&Pt(!1);let o={id:e.props.id||I.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Dn(e.props.children,I)),n.push(o)})),n}t.startTransition,new Promise((()=>{})),g.Component;const jn=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Pn(e){return`scale(${e}, ${e**2})`}const On={entering:{opacity:1,transform:Pn(1)},entered:{opacity:1,transform:"none"}},qn="undefined"!=typeof navigator&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),_n=g.forwardRef((function(e,t){const{addEndListener:n,appear:l=!0,children:I,easing:o,in:a,onEnter:C,onEntered:r,onEntering:d,onExit:A,onExited:u,onExiting:b,style:Z,timeout:h="auto",TransitionComponent:p=pe}=e,G=(0,c.Z)(e,jn),y=g.useRef(),B=g.useRef(),S=i(),W=g.useRef(null),V=(0,Be.Z)(W,I.ref,t),f=e=>g=>{if(e){const t=W.current;void 0===g?e(t):e(t,g)}},v=f(d),R=f(((e,g)=>{Ge(e);const{duration:t,delay:n,easing:l}=ye({style:Z,timeout:h,easing:o},{mode:"enter"});let I;"auto"===h?(I=S.transitions.getAutoHeightDuration(e.clientHeight),B.current=I):I=t,e.style.transition=[S.transitions.create("opacity",{duration:I,delay:n}),S.transitions.create("transform",{duration:qn?I:.666*I,delay:n,easing:l})].join(","),C&&C(e,g)})),k=f(r),X=f(b),J=f((e=>{const{duration:g,delay:t,easing:n}=ye({style:Z,timeout:h,easing:o},{mode:"exit"});let l;"auto"===h?(l=S.transitions.getAutoHeightDuration(e.clientHeight),B.current=l):l=g,e.style.transition=[S.transitions.create("opacity",{duration:l,delay:t}),S.transitions.create("transform",{duration:qn?l:.666*l,delay:qn?t:t||.333*l,easing:n})].join(","),e.style.opacity=0,e.style.transform=Pn(.75),A&&A(e)})),Y=f(u);return g.useEffect((()=>()=>{clearTimeout(y.current)}),[]),(0,m.jsx)(p,(0,s.Z)({appear:l,in:a,nodeRef:W,onEnter:R,onEntered:k,onEntering:v,onExit:J,onExited:Y,onExiting:X,addEndListener:e=>{"auto"===h&&(y.current=setTimeout(e,B.current||0)),n&&n(W.current,e)},timeout:"auto"===h?null:h},G,{children:(e,t)=>g.cloneElement(I,(0,s.Z)({style:(0,s.Z)({opacity:0,transform:Pn(.75),visibility:"exited"!==e||a?void 0:"hidden"},On[e],Z,I.props.style),ref:V},t))}))}));_n.muiSupportAuto=!0;var $n=_n;function el(e){if(null==e)return window;if("[object Window]"!==e.toString()){var g=e.ownerDocument;return g&&g.defaultView||window}return e}function gl(e){return e instanceof el(e).Element||e instanceof Element}function tl(e){return e instanceof el(e).HTMLElement||e instanceof HTMLElement}function nl(e){return"undefined"!=typeof ShadowRoot&&(e instanceof el(e).ShadowRoot||e instanceof ShadowRoot)}var ll=Math.max,Il=Math.min,ol=Math.round;function al(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Cl(){return!/^((?!chrome|android).)*safari/i.test(al())}function il(e,g,t){void 0===g&&(g=!1),void 0===t&&(t=!1);var n=e.getBoundingClientRect(),l=1,I=1;g&&tl(e)&&(l=e.offsetWidth>0&&ol(n.width)/e.offsetWidth||1,I=e.offsetHeight>0&&ol(n.height)/e.offsetHeight||1);var o=(gl(e)?el(e):window).visualViewport,a=!Cl()&&t,C=(n.left+(a&&o?o.offsetLeft:0))/l,i=(n.top+(a&&o?o.offsetTop:0))/I,r=n.width/l,s=n.height/I;return{width:r,height:s,top:i,right:C+r,bottom:i+s,left:C,x:C,y:i}}function rl(e){var g=el(e);return{scrollLeft:g.pageXOffset,scrollTop:g.pageYOffset}}function sl(e){return e?(e.nodeName||"").toLowerCase():null}function cl(e){return((gl(e)?e.ownerDocument:e.document)||window.document).documentElement}function dl(e){return il(cl(e)).left+rl(e).scrollLeft}function Al(e){return el(e).getComputedStyle(e)}function ul(e){var g=Al(e),t=g.overflow,n=g.overflowX,l=g.overflowY;return/auto|scroll|overlay|hidden/.test(t+l+n)}function ml(e,g,t){void 0===t&&(t=!1);var n,l,I=tl(g),o=tl(g)&&function(e){var g=e.getBoundingClientRect(),t=ol(g.width)/e.offsetWidth||1,n=ol(g.height)/e.offsetHeight||1;return 1!==t||1!==n}(g),a=cl(g),C=il(e,o,t),i={scrollLeft:0,scrollTop:0},r={x:0,y:0};return(I||!I&&!t)&&(("body"!==sl(g)||ul(a))&&(i=(n=g)!==el(n)&&tl(n)?{scrollLeft:(l=n).scrollLeft,scrollTop:l.scrollTop}:rl(n)),tl(g)?((r=il(g,!0)).x+=g.clientLeft,r.y+=g.clientTop):a&&(r.x=dl(a))),{x:C.left+i.scrollLeft-r.x,y:C.top+i.scrollTop-r.y,width:C.width,height:C.height}}function bl(e){var g=il(e),t=e.offsetWidth,n=e.offsetHeight;return Math.abs(g.width-t)<=1&&(t=g.width),Math.abs(g.height-n)<=1&&(n=g.height),{x:e.offsetLeft,y:e.offsetTop,width:t,height:n}}function Zl(e){return"html"===sl(e)?e:e.assignedSlot||e.parentNode||(nl(e)?e.host:null)||cl(e)}function hl(e){return["html","body","#document"].indexOf(sl(e))>=0?e.ownerDocument.body:tl(e)&&ul(e)?e:hl(Zl(e))}function pl(e,g){var t;void 0===g&&(g=[]);var n=hl(e),l=n===(null==(t=e.ownerDocument)?void 0:t.body),I=el(n),o=l?[I].concat(I.visualViewport||[],ul(n)?n:[]):n,a=g.concat(o);return l?a:a.concat(pl(Zl(o)))}function Gl(e){return["table","td","th"].indexOf(sl(e))>=0}function yl(e){return tl(e)&&"fixed"!==Al(e).position?e.offsetParent:null}function Bl(e){for(var g=el(e),t=yl(e);t&&Gl(t)&&"static"===Al(t).position;)t=yl(t);return t&&("html"===sl(t)||"body"===sl(t)&&"static"===Al(t).position)?g:t||function(e){var g=/firefox/i.test(al());if(/Trident/i.test(al())&&tl(e)&&"fixed"===Al(e).position)return null;var t=Zl(e);for(nl(t)&&(t=t.host);tl(t)&&["html","body"].indexOf(sl(t))<0;){var n=Al(t);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||g&&"filter"===n.willChange||g&&n.filter&&"none"!==n.filter)return t;t=t.parentNode}return null}(e)||g}var Sl="top",Wl="bottom",Vl="right",fl="left",vl="auto",Rl=[Sl,Wl,Vl,fl],kl="start",Xl="end",Jl="viewport",Yl="popper",Hl=Rl.reduce((function(e,g){return e.concat([g+"-"+kl,g+"-"+Xl])}),[]),wl=[].concat(Rl,[vl]).reduce((function(e,g){return e.concat([g,g+"-"+kl,g+"-"+Xl])}),[]),xl=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Fl(e){var g=new Map,t=new Set,n=[];function l(e){t.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!t.has(e)){var n=g.get(e);n&&l(n)}})),n.push(e)}return e.forEach((function(e){g.set(e.name,e)})),e.forEach((function(e){t.has(e.name)||l(e)})),n}var Nl={placement:"bottom",modifiers:[],strategy:"absolute"};function Kl(){for(var e=arguments.length,g=new Array(e),t=0;t<e;t++)g[t]=arguments[t];return!g.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function zl(e){void 0===e&&(e={});var g=e,t=g.defaultModifiers,n=void 0===t?[]:t,l=g.defaultOptions,I=void 0===l?Nl:l;return function(e,g,t){void 0===t&&(t=I);var l,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Nl,I),modifiersData:{},elements:{reference:e,popper:g},attributes:{},styles:{}},C=[],i=!1,r={state:a,setOptions:function(t){var l="function"==typeof t?t(a.options):t;s(),a.options=Object.assign({},I,a.options,l),a.scrollParents={reference:gl(e)?pl(e):e.contextElement?pl(e.contextElement):[],popper:pl(g)};var o,i,c=function(e){var g=Fl(e);return xl.reduce((function(e,t){return e.concat(g.filter((function(e){return e.phase===t})))}),[])}((o=[].concat(n,a.options.modifiers),i=o.reduce((function(e,g){var t=e[g.name];return e[g.name]=t?Object.assign({},t,g,{options:Object.assign({},t.options,g.options),data:Object.assign({},t.data,g.data)}):g,e}),{}),Object.keys(i).map((function(e){return i[e]}))));return a.orderedModifiers=c.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var g=e.name,t=e.options,n=void 0===t?{}:t,l=e.effect;if("function"==typeof l){var I=l({state:a,name:g,instance:r,options:n});C.push(I||function(){})}})),r.update()},forceUpdate:function(){if(!i){var e=a.elements,g=e.reference,t=e.popper;if(Kl(g,t)){a.rects={reference:ml(g,Bl(t),"fixed"===a.options.strategy),popper:bl(t)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var n=0;n<a.orderedModifiers.length;n++)if(!0!==a.reset){var l=a.orderedModifiers[n],I=l.fn,o=l.options,C=void 0===o?{}:o,s=l.name;"function"==typeof I&&(a=I({state:a,options:C,name:s,instance:r})||a)}else a.reset=!1,n=-1}}},update:(l=function(){return new Promise((function(e){r.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(l())}))}))),o}),destroy:function(){s(),i=!0}};if(!Kl(e,g))return r;function s(){C.forEach((function(e){return e()})),C=[]}return r.setOptions(t).then((function(e){!i&&t.onFirstUpdate&&t.onFirstUpdate(e)})),r}}var Ml={passive:!0};function El(e){return e.split("-")[0]}function Ll(e){return e.split("-")[1]}function Ul(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ql(e){var g,t=e.reference,n=e.element,l=e.placement,I=l?El(l):null,o=l?Ll(l):null,a=t.x+t.width/2-n.width/2,C=t.y+t.height/2-n.height/2;switch(I){case Sl:g={x:a,y:t.y-n.height};break;case Wl:g={x:a,y:t.y+t.height};break;case Vl:g={x:t.x+t.width,y:C};break;case fl:g={x:t.x-n.width,y:C};break;default:g={x:t.x,y:t.y}}var i=I?Ul(I):null;if(null!=i){var r="y"===i?"height":"width";switch(o){case kl:g[i]=g[i]-(t[r]/2-n[r]/2);break;case Xl:g[i]=g[i]+(t[r]/2-n[r]/2)}}return g}var Tl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Dl(e){var g,t=e.popper,n=e.popperRect,l=e.placement,I=e.variation,o=e.offsets,a=e.position,C=e.gpuAcceleration,i=e.adaptive,r=e.roundOffsets,s=e.isFixed,c=o.x,d=void 0===c?0:c,A=o.y,u=void 0===A?0:A,m="function"==typeof r?r({x:d,y:u}):{x:d,y:u};d=m.x,u=m.y;var b=o.hasOwnProperty("x"),Z=o.hasOwnProperty("y"),h=fl,p=Sl,G=window;if(i){var y=Bl(t),B="clientHeight",S="clientWidth";y===el(t)&&"static"!==Al(y=cl(t)).position&&"absolute"===a&&(B="scrollHeight",S="scrollWidth"),(l===Sl||(l===fl||l===Vl)&&I===Xl)&&(p=Wl,u-=(s&&y===G&&G.visualViewport?G.visualViewport.height:y[B])-n.height,u*=C?1:-1),l!==fl&&(l!==Sl&&l!==Wl||I!==Xl)||(h=Vl,d-=(s&&y===G&&G.visualViewport?G.visualViewport.width:y[S])-n.width,d*=C?1:-1)}var W,V=Object.assign({position:a},i&&Tl),f=!0===r?function(e,g){var t=e.x,n=e.y,l=g.devicePixelRatio||1;return{x:ol(t*l)/l||0,y:ol(n*l)/l||0}}({x:d,y:u},el(t)):{x:d,y:u};return d=f.x,u=f.y,C?Object.assign({},V,((W={})[p]=Z?"0":"",W[h]=b?"0":"",W.transform=(G.devicePixelRatio||1)<=1?"translate("+d+"px, "+u+"px)":"translate3d("+d+"px, "+u+"px, 0)",W)):Object.assign({},V,((g={})[p]=Z?u+"px":"",g[h]=b?d+"px":"",g.transform="",g))}var jl={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var g=e.state;Object.keys(g.elements).forEach((function(e){var t=g.styles[e]||{},n=g.attributes[e]||{},l=g.elements[e];tl(l)&&sl(l)&&(Object.assign(l.style,t),Object.keys(n).forEach((function(e){var g=n[e];!1===g?l.removeAttribute(e):l.setAttribute(e,!0===g?"":g)})))}))},effect:function(e){var g=e.state,t={popper:{position:g.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(g.elements.popper.style,t.popper),g.styles=t,g.elements.arrow&&Object.assign(g.elements.arrow.style,t.arrow),function(){Object.keys(g.elements).forEach((function(e){var n=g.elements[e],l=g.attributes[e]||{},I=Object.keys(g.styles.hasOwnProperty(e)?g.styles[e]:t[e]).reduce((function(e,g){return e[g]="",e}),{});tl(n)&&sl(n)&&(Object.assign(n.style,I),Object.keys(l).forEach((function(e){n.removeAttribute(e)})))}))}},requires:["computeStyles"]},Pl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var g=e.state,t=e.options,n=e.name,l=t.offset,I=void 0===l?[0,0]:l,o=wl.reduce((function(e,t){return e[t]=function(e,g,t){var n=El(e),l=[fl,Sl].indexOf(n)>=0?-1:1,I="function"==typeof t?t(Object.assign({},g,{placement:e})):t,o=I[0],a=I[1];return o=o||0,a=(a||0)*l,[fl,Vl].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}(t,g.rects,I),e}),{}),a=o[g.placement],C=a.x,i=a.y;null!=g.modifiersData.popperOffsets&&(g.modifiersData.popperOffsets.x+=C,g.modifiersData.popperOffsets.y+=i),g.modifiersData[n]=o}},Ol={left:"right",right:"left",bottom:"top",top:"bottom"};function ql(e){return e.replace(/left|right|bottom|top/g,(function(e){return Ol[e]}))}var _l={start:"end",end:"start"};function $l(e){return e.replace(/start|end/g,(function(e){return _l[e]}))}function eI(e,g){var t=g.getRootNode&&g.getRootNode();if(e.contains(g))return!0;if(t&&nl(t)){var n=g;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function gI(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function tI(e,g,t){return g===Jl?gI(function(e,g){var t=el(e),n=cl(e),l=t.visualViewport,I=n.clientWidth,o=n.clientHeight,a=0,C=0;if(l){I=l.width,o=l.height;var i=Cl();(i||!i&&"fixed"===g)&&(a=l.offsetLeft,C=l.offsetTop)}return{width:I,height:o,x:a+dl(e),y:C}}(e,t)):gl(g)?function(e,g){var t=il(e,!1,"fixed"===g);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(g,t):gI(function(e){var g,t=cl(e),n=rl(e),l=null==(g=e.ownerDocument)?void 0:g.body,I=ll(t.scrollWidth,t.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),o=ll(t.scrollHeight,t.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),a=-n.scrollLeft+dl(e),C=-n.scrollTop;return"rtl"===Al(l||t).direction&&(a+=ll(t.clientWidth,l?l.clientWidth:0)-I),{width:I,height:o,x:a,y:C}}(cl(e)))}function nI(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function lI(e,g){return g.reduce((function(g,t){return g[t]=e,g}),{})}function II(e,g){void 0===g&&(g={});var t=g,n=t.placement,l=void 0===n?e.placement:n,I=t.strategy,o=void 0===I?e.strategy:I,a=t.boundary,C=void 0===a?"clippingParents":a,i=t.rootBoundary,r=void 0===i?Jl:i,s=t.elementContext,c=void 0===s?Yl:s,d=t.altBoundary,A=void 0!==d&&d,u=t.padding,m=void 0===u?0:u,b=nI("number"!=typeof m?m:lI(m,Rl)),Z=c===Yl?"reference":Yl,h=e.rects.popper,p=e.elements[A?Z:c],G=function(e,g,t,n){var l="clippingParents"===g?function(e){var g=pl(Zl(e)),t=["absolute","fixed"].indexOf(Al(e).position)>=0&&tl(e)?Bl(e):e;return gl(t)?g.filter((function(e){return gl(e)&&eI(e,t)&&"body"!==sl(e)})):[]}(e):[].concat(g),I=[].concat(l,[t]),o=I[0],a=I.reduce((function(g,t){var l=tI(e,t,n);return g.top=ll(l.top,g.top),g.right=Il(l.right,g.right),g.bottom=Il(l.bottom,g.bottom),g.left=ll(l.left,g.left),g}),tI(e,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(gl(p)?p:p.contextElement||cl(e.elements.popper),C,r,o),y=il(e.elements.reference),B=Ql({reference:y,element:h,strategy:"absolute",placement:l}),S=gI(Object.assign({},h,B)),W=c===Yl?S:y,V={top:G.top-W.top+b.top,bottom:W.bottom-G.bottom+b.bottom,left:G.left-W.left+b.left,right:W.right-G.right+b.right},f=e.modifiersData.offset;if(c===Yl&&f){var v=f[l];Object.keys(V).forEach((function(e){var g=[Vl,Wl].indexOf(e)>=0?1:-1,t=[Sl,Wl].indexOf(e)>=0?"y":"x";V[e]+=v[t]*g}))}return V}var oI={name:"flip",enabled:!0,phase:"main",fn:function(e){var g=e.state,t=e.options,n=e.name;if(!g.modifiersData[n]._skip){for(var l=t.mainAxis,I=void 0===l||l,o=t.altAxis,a=void 0===o||o,C=t.fallbackPlacements,i=t.padding,r=t.boundary,s=t.rootBoundary,c=t.altBoundary,d=t.flipVariations,A=void 0===d||d,u=t.allowedAutoPlacements,m=g.options.placement,b=El(m),Z=C||(b!==m&&A?function(e){if(El(e)===vl)return[];var g=ql(e);return[$l(e),g,$l(g)]}(m):[ql(m)]),h=[m].concat(Z).reduce((function(e,t){return e.concat(El(t)===vl?function(e,g){void 0===g&&(g={});var t=g,n=t.placement,l=t.boundary,I=t.rootBoundary,o=t.padding,a=t.flipVariations,C=t.allowedAutoPlacements,i=void 0===C?wl:C,r=Ll(n),s=r?a?Hl:Hl.filter((function(e){return Ll(e)===r})):Rl,c=s.filter((function(e){return i.indexOf(e)>=0}));0===c.length&&(c=s);var d=c.reduce((function(g,t){return g[t]=II(e,{placement:t,boundary:l,rootBoundary:I,padding:o})[El(t)],g}),{});return Object.keys(d).sort((function(e,g){return d[e]-d[g]}))}(g,{placement:t,boundary:r,rootBoundary:s,padding:i,flipVariations:A,allowedAutoPlacements:u}):t)}),[]),p=g.rects.reference,G=g.rects.popper,y=new Map,B=!0,S=h[0],W=0;W<h.length;W++){var V=h[W],f=El(V),v=Ll(V)===kl,R=[Sl,Wl].indexOf(f)>=0,k=R?"width":"height",X=II(g,{placement:V,boundary:r,rootBoundary:s,altBoundary:c,padding:i}),J=R?v?Vl:fl:v?Wl:Sl;p[k]>G[k]&&(J=ql(J));var Y=ql(J),H=[];if(I&&H.push(X[f]<=0),a&&H.push(X[J]<=0,X[Y]<=0),H.every((function(e){return e}))){S=V,B=!1;break}y.set(V,H)}if(B)for(var w=function(e){var g=h.find((function(g){var t=y.get(g);if(t)return t.slice(0,e).every((function(e){return e}))}));if(g)return S=g,"break"},x=A?3:1;x>0&&"break"!==w(x);x--);g.placement!==S&&(g.modifiersData[n]._skip=!0,g.placement=S,g.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function aI(e,g,t){return ll(e,Il(g,t))}var CI={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var g=e.state,t=e.options,n=e.name,l=t.mainAxis,I=void 0===l||l,o=t.altAxis,a=void 0!==o&&o,C=t.boundary,i=t.rootBoundary,r=t.altBoundary,s=t.padding,c=t.tether,d=void 0===c||c,A=t.tetherOffset,u=void 0===A?0:A,m=II(g,{boundary:C,rootBoundary:i,padding:s,altBoundary:r}),b=El(g.placement),Z=Ll(g.placement),h=!Z,p=Ul(b),G="x"===p?"y":"x",y=g.modifiersData.popperOffsets,B=g.rects.reference,S=g.rects.popper,W="function"==typeof u?u(Object.assign({},g.rects,{placement:g.placement})):u,V="number"==typeof W?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),f=g.modifiersData.offset?g.modifiersData.offset[g.placement]:null,v={x:0,y:0};if(y){if(I){var R,k="y"===p?Sl:fl,X="y"===p?Wl:Vl,J="y"===p?"height":"width",Y=y[p],H=Y+m[k],w=Y-m[X],x=d?-S[J]/2:0,F=Z===kl?B[J]:S[J],N=Z===kl?-S[J]:-B[J],K=g.elements.arrow,z=d&&K?bl(K):{width:0,height:0},M=g.modifiersData["arrow#persistent"]?g.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},E=M[k],L=M[X],U=aI(0,B[J],z[J]),Q=h?B[J]/2-x-U-E-V.mainAxis:F-U-E-V.mainAxis,T=h?-B[J]/2+x+U+L+V.mainAxis:N+U+L+V.mainAxis,D=g.elements.arrow&&Bl(g.elements.arrow),j=D?"y"===p?D.clientTop||0:D.clientLeft||0:0,P=null!=(R=null==f?void 0:f[p])?R:0,O=Y+T-P,q=aI(d?Il(H,Y+Q-P-j):H,Y,d?ll(w,O):w);y[p]=q,v[p]=q-Y}if(a){var _,$="x"===p?Sl:fl,ee="x"===p?Wl:Vl,ge=y[G],te="y"===G?"height":"width",ne=ge+m[$],le=ge-m[ee],Ie=-1!==[Sl,fl].indexOf(b),oe=null!=(_=null==f?void 0:f[G])?_:0,ae=Ie?ne:ge-B[te]-S[te]-oe+V.altAxis,Ce=Ie?ge+B[te]+S[te]-oe-V.altAxis:le,ie=d&&Ie?function(e,g,t){var n=aI(e,g,t);return n>t?t:n}(ae,ge,Ce):aI(d?ae:ne,ge,d?Ce:le);y[G]=ie,v[G]=ie-ge}g.modifiersData[n]=v}},requiresIfExists:["offset"]};function iI(e,g,t){return void 0===t&&(t={x:0,y:0}),{top:e.top-g.height-t.y,right:e.right-g.width+t.x,bottom:e.bottom-g.height+t.y,left:e.left-g.width-t.x}}function rI(e){return[Sl,Vl,Wl,fl].some((function(g){return e[g]>=0}))}var sI=zl({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var g=e.state,t=e.instance,n=e.options,l=n.scroll,I=void 0===l||l,o=n.resize,a=void 0===o||o,C=el(g.elements.popper),i=[].concat(g.scrollParents.reference,g.scrollParents.popper);return I&&i.forEach((function(e){e.addEventListener("scroll",t.update,Ml)})),a&&C.addEventListener("resize",t.update,Ml),function(){I&&i.forEach((function(e){e.removeEventListener("scroll",t.update,Ml)})),a&&C.removeEventListener("resize",t.update,Ml)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var g=e.state,t=e.name;g.modifiersData[t]=Ql({reference:g.rects.reference,element:g.rects.popper,strategy:"absolute",placement:g.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var g=e.state,t=e.options,n=t.gpuAcceleration,l=void 0===n||n,I=t.adaptive,o=void 0===I||I,a=t.roundOffsets,C=void 0===a||a,i={placement:El(g.placement),variation:Ll(g.placement),popper:g.elements.popper,popperRect:g.rects.popper,gpuAcceleration:l,isFixed:"fixed"===g.options.strategy};null!=g.modifiersData.popperOffsets&&(g.styles.popper=Object.assign({},g.styles.popper,Dl(Object.assign({},i,{offsets:g.modifiersData.popperOffsets,position:g.options.strategy,adaptive:o,roundOffsets:C})))),null!=g.modifiersData.arrow&&(g.styles.arrow=Object.assign({},g.styles.arrow,Dl(Object.assign({},i,{offsets:g.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:C})))),g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-placement":g.placement})},data:{}},jl,Pl,oI,CI,{name:"arrow",enabled:!0,phase:"main",fn:function(e){var g,t=e.state,n=e.name,l=e.options,I=t.elements.arrow,o=t.modifiersData.popperOffsets,a=El(t.placement),C=Ul(a),i=[fl,Vl].indexOf(a)>=0?"height":"width";if(I&&o){var r=function(e,g){return nI("number"!=typeof(e="function"==typeof e?e(Object.assign({},g.rects,{placement:g.placement})):e)?e:lI(e,Rl))}(l.padding,t),s=bl(I),c="y"===C?Sl:fl,d="y"===C?Wl:Vl,A=t.rects.reference[i]+t.rects.reference[C]-o[C]-t.rects.popper[i],u=o[C]-t.rects.reference[C],m=Bl(I),b=m?"y"===C?m.clientHeight||0:m.clientWidth||0:0,Z=A/2-u/2,h=r[c],p=b-s[i]-r[d],G=b/2-s[i]/2+Z,y=aI(h,G,p),B=C;t.modifiersData[n]=((g={})[B]=y,g.centerOffset=y-G,g)}},effect:function(e){var g=e.state,t=e.options.element,n=void 0===t?"[data-popper-arrow]":t;null!=n&&("string"!=typeof n||(n=g.elements.popper.querySelector(n)))&&eI(g.elements.popper,n)&&(g.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var g=e.state,t=e.name,n=g.rects.reference,l=g.rects.popper,I=g.modifiersData.preventOverflow,o=II(g,{elementContext:"reference"}),a=II(g,{altBoundary:!0}),C=iI(o,n),i=iI(a,l,I),r=rI(C),s=rI(i);g.modifiersData[t]={referenceClippingOffsets:C,popperEscapeOffsets:i,isReferenceHidden:r,hasPopperEscaped:s},g.attributes.popper=Object.assign({},g.attributes.popper,{"data-popper-reference-hidden":r,"data-popper-escaped":s})}}]});function cI(e){return(0,Re.Z)("MuiPopper",e)}(0,ve.Z)("MuiPopper",["root"]);const dI={disableDefaultClasses:!1},AI=g.createContext(dI),uI=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],mI=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function bI(e){return"function"==typeof e?e():e}const ZI={},hI=g.forwardRef((function(e,t){var n;const{anchorEl:l,children:I,direction:o,disablePortal:a,modifiers:C,open:i,placement:r,popperOptions:d,popperRef:A,slotProps:u={},slots:b={},TransitionProps:Z}=e,h=(0,c.Z)(e,uI),p=g.useRef(null),G=(0,N.Z)(p,t),y=g.useRef(null),B=(0,N.Z)(y,A),S=g.useRef(B);(0,oe.Z)((()=>{S.current=B}),[B]),g.useImperativeHandle(A,(()=>y.current),[]);const W=function(e,g){if("ltr"===g)return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}(r,o),[V,f]=g.useState(W),[v,R]=g.useState(bI(l));g.useEffect((()=>{y.current&&y.current.forceUpdate()})),g.useEffect((()=>{l&&R(bI(l))}),[l]),(0,oe.Z)((()=>{if(!v||!i)return;let e=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:e})=>{f(e.placement)}}];null!=C&&(e=e.concat(C)),d&&null!=d.modifiers&&(e=e.concat(d.modifiers));const g=sI(v,p.current,(0,s.Z)({placement:W},d,{modifiers:e}));return S.current(g),()=>{g.destroy(),S.current(null)}}),[v,a,C,i,d,W]);const k={placement:V};null!==Z&&(k.TransitionProps=Z);const X=(0,F.Z)({root:["root"]},function(e){const{disableDefaultClasses:t}=g.useContext(AI);return g=>t?"":e(g)}(cI)),J=null!=(n=b.root)?n:"div",Y=U({elementType:J,externalSlotProps:u.root,externalForwardedProps:h,additionalProps:{role:"tooltip",ref:G},ownerState:e,className:X.root});return(0,m.jsx)(J,(0,s.Z)({},Y,{children:"function"==typeof I?I(k):I}))})),pI=g.forwardRef((function(e,t){const{anchorEl:n,children:l,container:I,direction:o="ltr",disablePortal:a=!1,keepMounted:C=!1,modifiers:i,open:r,placement:d="bottom",popperOptions:A=ZI,popperRef:u,style:b,transition:Z=!1,slotProps:h={},slots:p={}}=e,G=(0,c.Z)(e,mI),[y,B]=g.useState(!0);if(!C&&!r&&(!Z||y))return null;let S;if(I)S=I;else if(n){const e=bI(n);S=e&&void 0!==e.nodeType?(0,Q.Z)(e).body:(0,Q.Z)(null).body}const W=r||!C||Z&&!y?void 0:"none",V=Z?{in:r,onEnter:()=>{B(!1)},onExited:()=>{B(!0)}}:void 0;return(0,m.jsx)(Ce,{disablePortal:a,container:S,children:(0,m.jsx)(hI,(0,s.Z)({anchorEl:n,direction:o,disablePortal:a,modifiers:i,ref:t,open:Z?!y:r,placement:d,popperOptions:A,popperRef:u,slotProps:h,slots:p},G,{style:(0,s.Z)({position:"fixed",top:0,left:0,display:W},b),TransitionProps:V,children:l}))})})),GI=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],yI=(0,I.ZP)(pI,{name:"MuiPopper",slot:"Root",overridesResolver:(e,g)=>g.root})({});var BI=g.forwardRef((function(e,g){var t;const n=(0,h.Z)(),l=(0,ie.Z)({props:e,name:"MuiPopper"}),{anchorEl:I,component:o,components:a,componentsProps:C,container:i,disablePortal:r,keepMounted:d,modifiers:A,open:u,placement:b,popperOptions:Z,popperRef:p,transition:G,slots:y,slotProps:B}=l,S=(0,c.Z)(l,GI),W=null!=(t=null==y?void 0:y.root)?t:null==a?void 0:a.Root,V=(0,s.Z)({anchorEl:I,container:i,disablePortal:r,keepMounted:d,modifiers:A,open:u,placement:b,popperOptions:Z,popperRef:p,transition:G},S);return(0,m.jsx)(yI,(0,s.Z)({as:o,direction:null==n?void 0:n.direction,slots:{root:W},slotProps:null!=B?B:C},V,{ref:g}))})),SI=l(7909),WI=l(9299);function VI(e){return(0,Re.Z)("MuiTooltip",e)}var fI=(0,ve.Z)("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);const vI=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"],RI=(0,I.ZP)(BI,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.popper,!t.disableInteractive&&g.popperInteractive,t.arrow&&g.popperArrow,!t.open&&g.popperClose]}})((({theme:e,ownerState:g,open:t})=>(0,s.Z)({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!g.disableInteractive&&{pointerEvents:"auto"},!t&&{pointerEvents:"none"},g.arrow&&{[`&[data-popper-placement*="bottom"] .${fI.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${fI.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${fI.arrow}`]:(0,s.Z)({},g.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${fI.arrow}`]:(0,s.Z)({},g.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})}))),kI=(0,I.ZP)("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.tooltip,t.touch&&g.touch,t.arrow&&g.tooltipArrow,g[`tooltipPlacement${(0,_e.Z)(t.placement.split("-")[0])}`]]}})((({theme:e,ownerState:g})=>(0,s.Z)({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:(0,Te.Fq)(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},g.arrow&&{position:"relative",margin:0},g.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:(16/14,Math.round(114285.71428571428)/1e5+"em"),fontWeight:e.typography.fontWeightRegular},{[`.${fI.popper}[data-popper-placement*="left"] &`]:(0,s.Z)({transformOrigin:"right center"},g.isRtl?(0,s.Z)({marginLeft:"14px"},g.touch&&{marginLeft:"24px"}):(0,s.Z)({marginRight:"14px"},g.touch&&{marginRight:"24px"})),[`.${fI.popper}[data-popper-placement*="right"] &`]:(0,s.Z)({transformOrigin:"left center"},g.isRtl?(0,s.Z)({marginRight:"14px"},g.touch&&{marginRight:"24px"}):(0,s.Z)({marginLeft:"14px"},g.touch&&{marginLeft:"24px"})),[`.${fI.popper}[data-popper-placement*="top"] &`]:(0,s.Z)({transformOrigin:"center bottom",marginBottom:"14px"},g.touch&&{marginBottom:"24px"}),[`.${fI.popper}[data-popper-placement*="bottom"] &`]:(0,s.Z)({transformOrigin:"center top",marginTop:"14px"},g.touch&&{marginTop:"24px"})}))),XI=(0,I.ZP)("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,g)=>g.arrow})((({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:(0,Te.Fq)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let JI=!1,YI=null,HI={x:0,y:0};function wI(e,g){return t=>{g&&g(t),e(t)}}var xI=g.forwardRef((function(e,t){var n,l,I,o,a,C,r,d,A,u,b,Z,h,p,G,y,B,S,V;const f=(0,ie.Z)({props:e,name:"MuiTooltip"}),{arrow:v=!1,children:R,components:k={},componentsProps:X={},describeChild:J=!1,disableFocusListener:Y=!1,disableHoverListener:H=!1,disableInteractive:w=!1,disableTouchListener:x=!1,enterDelay:N=100,enterNextDelay:K=0,enterTouchDelay:M=700,followCursor:E=!1,id:L,leaveDelay:U=0,leaveTouchDelay:Q=1500,onClose:T,onOpen:D,open:j,placement:P="bottom",PopperComponent:O,PopperProps:q={},slotProps:_={},slots:$={},title:ee,TransitionComponent:ge=$n,TransitionProps:te}=f,ne=(0,c.Z)(f,vI),le=g.isValidElement(R)?R:(0,m.jsx)("span",{children:R}),Ie=i(),oe="rtl"===Ie.direction,[ae,Ce]=g.useState(),[re,se]=g.useState(null),ce=g.useRef(!1),de=w||E,Ae=g.useRef(),ue=g.useRef(),me=g.useRef(),be=g.useRef(),[Ze,he]=(0,WI.Z)({controlled:j,default:!1,name:"Tooltip",state:"open"});let pe=Ze;const Ge=(0,SI.Z)(L),ye=g.useRef(),Se=g.useCallback((()=>{void 0!==ye.current&&(document.body.style.WebkitUserSelect=ye.current,ye.current=void 0),clearTimeout(be.current)}),[]);g.useEffect((()=>()=>{clearTimeout(Ae.current),clearTimeout(ue.current),clearTimeout(me.current),Se()}),[Se]);const We=e=>{clearTimeout(YI),JI=!0,he(!0),D&&!pe&&D(e)},Ve=(0,Fg.Z)((e=>{clearTimeout(YI),YI=setTimeout((()=>{JI=!1}),800+U),he(!1),T&&pe&&T(e),clearTimeout(Ae.current),Ae.current=setTimeout((()=>{ce.current=!1}),Ie.transitions.duration.shortest)})),fe=e=>{ce.current&&"touchstart"!==e.type||(ae&&ae.removeAttribute("title"),clearTimeout(ue.current),clearTimeout(me.current),N||JI&&K?ue.current=setTimeout((()=>{We(e)}),JI?K:N):We(e))},ve=e=>{clearTimeout(ue.current),clearTimeout(me.current),me.current=setTimeout((()=>{Ve(e)}),U)},{isFocusVisibleRef:Re,onBlur:ke,onFocus:Xe,ref:Je}=(0,Ng.Z)(),[,Ye]=g.useState(!1),He=e=>{ke(e),!1===Re.current&&(Ye(!1),ve(e))},we=e=>{ae||Ce(e.currentTarget),Xe(e),!0===Re.current&&(Ye(!0),fe(e))},xe=e=>{ce.current=!0;const g=le.props;g.onTouchStart&&g.onTouchStart(e)},Fe=fe,Ne=ve;g.useEffect((()=>{if(pe)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||Ve(e)}}),[Ve,pe]);const Ke=(0,Be.Z)(le.ref,Je,Ce,t);ee||0===ee||(pe=!1);const ze=g.useRef(),Me={},Ee="string"==typeof ee;J?(Me.title=pe||!Ee||H?null:ee,Me["aria-describedby"]=pe?Ge:null):(Me["aria-label"]=Ee?ee:null,Me["aria-labelledby"]=pe&&!Ee?Ge:null);const Le=(0,s.Z)({},Me,ne,le.props,{className:(0,W.Z)(ne.className,le.props.className),onTouchStart:xe,ref:Ke},E?{onMouseMove:e=>{const g=le.props;g.onMouseMove&&g.onMouseMove(e),HI={x:e.clientX,y:e.clientY},ze.current&&ze.current.update()}}:{}),Ue={};x||(Le.onTouchStart=e=>{xe(e),clearTimeout(me.current),clearTimeout(Ae.current),Se(),ye.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",be.current=setTimeout((()=>{document.body.style.WebkitUserSelect=ye.current,fe(e)}),M)},Le.onTouchEnd=e=>{le.props.onTouchEnd&&le.props.onTouchEnd(e),Se(),clearTimeout(me.current),me.current=setTimeout((()=>{Ve(e)}),Q)}),H||(Le.onMouseOver=wI(Fe,Le.onMouseOver),Le.onMouseLeave=wI(Ne,Le.onMouseLeave),de||(Ue.onMouseOver=Fe,Ue.onMouseLeave=Ne)),Y||(Le.onFocus=wI(we,Le.onFocus),Le.onBlur=wI(He,Le.onBlur),de||(Ue.onFocus=we,Ue.onBlur=He));const Qe=g.useMemo((()=>{var e;let g=[{name:"arrow",enabled:Boolean(re),options:{element:re,padding:4}}];return null!=(e=q.popperOptions)&&e.modifiers&&(g=g.concat(q.popperOptions.modifiers)),(0,s.Z)({},q.popperOptions,{modifiers:g})}),[re,q]),Te=(0,s.Z)({},f,{isRtl:oe,arrow:v,disableInteractive:de,placement:P,PopperComponentProp:O,touch:ce.current}),De=(e=>{const{classes:g,disableInteractive:t,arrow:n,touch:l,placement:I}=e,o={popper:["popper",!t&&"popperInteractive",n&&"popperArrow"],tooltip:["tooltip",n&&"tooltipArrow",l&&"touch",`tooltipPlacement${(0,_e.Z)(I.split("-")[0])}`],arrow:["arrow"]};return(0,F.Z)(o,VI,g)})(Te),je=null!=(n=null!=(l=$.popper)?l:k.Popper)?n:RI,Pe=null!=(I=null!=(o=null!=(a=$.transition)?a:k.Transition)?o:ge)?I:$n,Oe=null!=(C=null!=(r=$.tooltip)?r:k.Tooltip)?C:kI,qe=null!=(d=null!=(A=$.arrow)?A:k.Arrow)?d:XI,$e=z(je,(0,s.Z)({},q,null!=(u=_.popper)?u:X.popper,{className:(0,W.Z)(De.popper,null==q?void 0:q.className,null==(b=null!=(Z=_.popper)?Z:X.popper)?void 0:b.className)}),Te),eg=z(Pe,(0,s.Z)({},te,null!=(h=_.transition)?h:X.transition),Te),gg=z(Oe,(0,s.Z)({},null!=(p=_.tooltip)?p:X.tooltip,{className:(0,W.Z)(De.tooltip,null==(G=null!=(y=_.tooltip)?y:X.tooltip)?void 0:G.className)}),Te),tg=z(qe,(0,s.Z)({},null!=(B=_.arrow)?B:X.arrow,{className:(0,W.Z)(De.arrow,null==(S=null!=(V=_.arrow)?V:X.arrow)?void 0:S.className)}),Te);return(0,m.jsxs)(g.Fragment,{children:[g.cloneElement(le,Le),(0,m.jsx)(je,(0,s.Z)({as:null!=O?O:BI,placement:P,anchorEl:E?{getBoundingClientRect:()=>({top:HI.y,left:HI.x,right:HI.x,bottom:HI.y,width:0,height:0})}:ae,popperRef:ze,open:!!ae&&pe,id:Ge,transition:!0},Ue,$e,{popperOptions:Qe,children:({TransitionProps:e})=>(0,m.jsx)(Pe,(0,s.Z)({timeout:Ie.transitions.duration.shorter},e,eg,{children:(0,m.jsxs)(Oe,(0,s.Z)({},gg,{children:[ee,v?(0,m.jsx)(qe,(0,s.Z)({},tg,{ref:se})):null]}))}))}))]})}));const FI=(0,I.ZP)((({className:e,...g})=>(0,m.jsx)(xI,{...g,classes:{popper:e}})))((({theme:e})=>({[`& .${fI.tooltip}`]:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,boxShadow:e.shadows[1],fontSize:11,textAlign:"justify"}})));function NI(e,g){return e.orden<g.orden?-1:e.orden>g.orden?1:0}function KI({items:e}){let t=wn();const[n,l]=(0,g.useState)(JSON.parse(localStorage.getItem("LateralMenuIndex")));return(0,m.jsx)(x,{sx:{marginLeft:-1},children:(0,m.jsx)(Tt,{component:"nav","aria-label":"lateral menu",children:e.sort(NI).map((e=>(0,m.jsxs)(x,{children:[(0,m.jsx)(FI,{title:e.descripcion,placement:"right-start",arrow:!0,children:(0,m.jsxs)(St,{selected:n===e.id,onClick:g=>{return n=e.id,I=e.url,l(n),localStorage.setItem("LateralMenuIndex",JSON.stringify(n)),void t("/"+I,{replace:!0});var n,I},children:[(0,m.jsx)(Rt,{sx:{paddingLeft:.5},children:(0,m.jsx)("img",{src:e.image,width:30})}),(0,m.jsx)(Mt,{primary:e.nombre})]},e.id)}),(0,m.jsx)(xg,{variant:"middle"})]},e.id)))})})}var zI=l(6067);function MI(e){return(0,Re.Z)("MuiCollapse",e)}(0,ve.Z)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const EI=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],LI=(0,I.ZP)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[t.orientation],"entered"===t.state&&g.entered,"exited"===t.state&&!t.in&&"0px"===t.collapsedSize&&g.hidden]}})((({theme:e,ownerState:g})=>(0,s.Z)({height:0,overflow:"hidden",transition:e.transitions.create("height")},"horizontal"===g.orientation&&{height:"auto",width:0,transition:e.transitions.create("width")},"entered"===g.state&&(0,s.Z)({height:"auto",overflow:"visible"},"horizontal"===g.orientation&&{width:"auto"}),"exited"===g.state&&!g.in&&"0px"===g.collapsedSize&&{visibility:"hidden"}))),UI=(0,I.ZP)("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,g)=>g.wrapper})((({ownerState:e})=>(0,s.Z)({display:"flex",width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"}))),QI=(0,I.ZP)("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,g)=>g.wrapperInner})((({ownerState:e})=>(0,s.Z)({width:"100%"},"horizontal"===e.orientation&&{width:"auto",height:"100%"}))),TI=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiCollapse"}),{addEndListener:l,children:I,className:o,collapsedSize:a="0px",component:C,easing:r,in:d,onEnter:A,onEntered:u,onEntering:b,onExit:Z,onExited:h,onExiting:p,orientation:G="vertical",style:y,timeout:B=zI.x9.standard,TransitionComponent:S=pe}=n,V=(0,c.Z)(n,EI),f=(0,s.Z)({},n,{orientation:G,collapsedSize:a}),v=(e=>{const{orientation:g,classes:t}=e,n={root:["root",`${g}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${g}`],wrapperInner:["wrapperInner",`${g}`]};return(0,F.Z)(n,MI,t)})(f),R=i(),k=g.useRef(),X=g.useRef(null),J=g.useRef(),Y="number"==typeof a?`${a}px`:a,H="horizontal"===G,w=H?"width":"height";g.useEffect((()=>()=>{clearTimeout(k.current)}),[]);const x=g.useRef(null),N=(0,Be.Z)(t,x),K=e=>g=>{if(e){const t=x.current;void 0===g?e(t):e(t,g)}},z=()=>X.current?X.current[H?"clientWidth":"clientHeight"]:0,M=K(((e,g)=>{X.current&&H&&(X.current.style.position="absolute"),e.style[w]=Y,A&&A(e,g)})),E=K(((e,g)=>{const t=z();X.current&&H&&(X.current.style.position="");const{duration:n,easing:l}=ye({style:y,timeout:B,easing:r},{mode:"enter"});if("auto"===B){const g=R.transitions.getAutoHeightDuration(t);e.style.transitionDuration=`${g}ms`,J.current=g}else e.style.transitionDuration="string"==typeof n?n:`${n}ms`;e.style[w]=`${t}px`,e.style.transitionTimingFunction=l,b&&b(e,g)})),L=K(((e,g)=>{e.style[w]="auto",u&&u(e,g)})),U=K((e=>{e.style[w]=`${z()}px`,Z&&Z(e)})),Q=K(h),T=K((e=>{const g=z(),{duration:t,easing:n}=ye({style:y,timeout:B,easing:r},{mode:"exit"});if("auto"===B){const t=R.transitions.getAutoHeightDuration(g);e.style.transitionDuration=`${t}ms`,J.current=t}else e.style.transitionDuration="string"==typeof t?t:`${t}ms`;e.style[w]=Y,e.style.transitionTimingFunction=n,p&&p(e)}));return(0,m.jsx)(S,(0,s.Z)({in:d,onEnter:M,onEntered:L,onEntering:E,onExit:U,onExited:Q,onExiting:T,addEndListener:e=>{"auto"===B&&(k.current=setTimeout(e,J.current||0)),l&&l(x.current,e)},nodeRef:x,timeout:"auto"===B?null:B},V,{children:(e,g)=>(0,m.jsx)(LI,(0,s.Z)({as:C,className:(0,W.Z)(v.root,o,{entered:v.entered,exited:!d&&"0px"===Y&&v.hidden}[e]),style:(0,s.Z)({[H?"minWidth":"minHeight"]:Y},y),ownerState:(0,s.Z)({},f,{state:e}),ref:N},g,{children:(0,m.jsx)(UI,{ownerState:(0,s.Z)({},f,{state:e}),className:v.wrapper,ref:X,children:(0,m.jsx)(QI,{ownerState:(0,s.Z)({},f,{state:e}),className:v.wrapperInner,children:I})})}))}))}));TI.muiSupportAuto=!0;var DI=TI,jI=l(5949),PI=(0,jI.Z)((0,m.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),OI=(0,jI.Z)((0,m.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),qI=g.createContext(void 0);function _I(){return g.useContext(qI)}function $I(e){return(0,Re.Z)("PrivateSwitchBase",e)}(0,ve.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const eo=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],go=(0,I.ZP)(it)((({ownerState:e})=>(0,s.Z)({padding:9,borderRadius:"50%"},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12}))),to=(0,I.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1});var no=g.forwardRef((function(e,g){const{autoFocus:t,checked:n,checkedIcon:l,className:I,defaultChecked:o,disabled:a,disableFocusRipple:C=!1,edge:i=!1,icon:r,id:d,inputProps:A,inputRef:u,name:b,onBlur:Z,onChange:h,onFocus:p,readOnly:G,required:y=!1,tabIndex:B,type:S,value:V}=e,f=(0,c.Z)(e,eo),[v,R]=(0,WI.Z)({controlled:n,default:Boolean(o),name:"SwitchBase",state:"checked"}),k=_I();let X=a;k&&void 0===X&&(X=k.disabled);const J="checkbox"===S||"radio"===S,Y=(0,s.Z)({},e,{checked:v,disabled:X,disableFocusRipple:C,edge:i}),H=(e=>{const{classes:g,checked:t,disabled:n,edge:l}=e,I={root:["root",t&&"checked",n&&"disabled",l&&`edge${(0,_e.Z)(l)}`],input:["input"]};return(0,F.Z)(I,$I,g)})(Y);return(0,m.jsxs)(go,(0,s.Z)({component:"span",className:(0,W.Z)(H.root,I),centerRipple:!0,focusRipple:!C,disabled:X,tabIndex:null,role:void 0,onFocus:e=>{p&&p(e),k&&k.onFocus&&k.onFocus(e)},onBlur:e=>{Z&&Z(e),k&&k.onBlur&&k.onBlur(e)},ownerState:Y,ref:g},f,{children:[(0,m.jsx)(to,(0,s.Z)({autoFocus:t,checked:n,defaultChecked:o,className:H.input,disabled:X,id:J?d:void 0,name:b,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const g=e.target.checked;R(g),h&&h(e,g)},readOnly:G,ref:u,required:y,ownerState:Y,tabIndex:B,type:S},"checkbox"===S&&void 0===V?{}:{value:V},A)),v?l:r]}))})),lo=(0,jI.Z)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Io=(0,jI.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),oo=(0,jI.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function ao(e){return(0,Re.Z)("MuiCheckbox",e)}var Co=(0,ve.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);const io=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],ro=(0,I.ZP)(no,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.indeterminate&&g.indeterminate,"default"!==t.color&&g[`color${(0,_e.Z)(t.color)}`]]}})((({theme:e,ownerState:g})=>(0,s.Z)({color:(e.vars||e).palette.text.secondary},!g.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===g.color?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Te.Fq)("default"===g.color?e.palette.action.active:e.palette[g.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==g.color&&{[`&.${Co.checked}, &.${Co.indeterminate}`]:{color:(e.vars||e).palette[g.color].main},[`&.${Co.disabled}`]:{color:(e.vars||e).palette.action.disabled}}))),so=(0,m.jsx)(Io,{}),co=(0,m.jsx)(lo,{}),Ao=(0,m.jsx)(oo,{}),uo=g.forwardRef((function(e,t){var n,l;const I=(0,ie.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:o=so,color:a="primary",icon:C=co,indeterminate:i=!1,indeterminateIcon:r=Ao,inputProps:d,size:A="medium",className:u}=I,b=(0,c.Z)(I,io),Z=i?r:C,h=i?r:o,p=(0,s.Z)({},I,{color:a,indeterminate:i,size:A}),G=(e=>{const{classes:g,indeterminate:t,color:n,size:l}=e,I={root:["root",t&&"indeterminate",`color${(0,_e.Z)(n)}`,`size${(0,_e.Z)(l)}`]},o=(0,F.Z)(I,ao,g);return(0,s.Z)({},g,o)})(p);return(0,m.jsx)(ro,(0,s.Z)({type:"checkbox",inputProps:(0,s.Z)({"data-indeterminate":i},d),icon:g.cloneElement(Z,{fontSize:null!=(n=Z.props.fontSize)?n:A}),checkedIcon:g.cloneElement(h,{fontSize:null!=(l=h.props.fontSize)?l:A}),ownerState:p,ref:t,className:(0,W.Z)(G.root,u)},b,{classes:G}))}));var mo=uo,bo=(0,l(2807).ZP)(),Zo=l(7333),ho=l(6268),po=l(5408),Go=l(2605);const yo=["component","direction","spacing","divider","children","className","useFlexGap"],Bo=(0,ho.Z)(),So=bo("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,g)=>g.root});function Wo(e){return(0,Zo.Z)({props:e,name:"MuiStack",defaultTheme:Bo})}function Vo(e,t){const n=g.Children.toArray(e).filter(Boolean);return n.reduce(((e,l,I)=>(e.push(l),I<n.length-1&&e.push(g.cloneElement(t,{key:`separator-${I}`})),e)),[])}const fo=({ownerState:e,theme:g})=>{let t=(0,s.Z)({display:"flex",flexDirection:"column"},(0,po.k9)({theme:g},(0,po.P$)({values:e.direction,breakpoints:g.breakpoints.values}),(e=>({flexDirection:e}))));if(e.spacing){const n=(0,Go.hB)(g),l=Object.keys(g.breakpoints.values).reduce(((g,t)=>(("object"==typeof e.spacing&&null!=e.spacing[t]||"object"==typeof e.direction&&null!=e.direction[t])&&(g[t]=!0),g)),{}),I=(0,po.P$)({values:e.direction,base:l}),o=(0,po.P$)({values:e.spacing,base:l});"object"==typeof I&&Object.keys(I).forEach(((e,g,t)=>{if(!I[e]){const n=g>0?I[t[g-1]]:"column";I[e]=n}}));const a=(g,t)=>{return e.useFlexGap?{gap:(0,Go.NA)(n,g)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${l=t?I[t]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[l]}`]:(0,Go.NA)(n,g)}};var l};t=(0,v.Z)(t,(0,po.k9)({theme:g},o,a))}return t=(0,po.dt)(g.breakpoints,t),t},vo=function(e={}){const{createStyledComponent:t=So,useThemeProps:n=Wo,componentName:l="MuiStack"}=e,I=t(fo),o=g.forwardRef((function(e,g){const t=X(n(e)),{component:o="div",direction:a="column",spacing:C=0,divider:i,children:r,className:d,useFlexGap:A=!1}=t,u=(0,c.Z)(t,yo),b={direction:a,spacing:C,useFlexGap:A},Z=(0,F.Z)({root:["root"]},(e=>(0,Re.Z)(l,e)),{});return(0,m.jsx)(I,(0,s.Z)({as:o,ownerState:b,ref:g,className:(0,W.Z)(Z.root,d)},u,{children:i?Vo(r,i):r}))}));return o}({createStyledComponent:(0,I.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,g)=>g.root}),useThemeProps:e=>(0,ie.Z)({props:e,name:"MuiStack"})});var Ro=vo;function ko(e){return(0,Re.Z)("MuiFormControlLabel",e)}var Xo=(0,ve.Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);function Jo({props:e,states:g,muiFormControl:t}){return g.reduce(((g,n)=>(g[n]=e[n],t&&void 0===e[n]&&(g[n]=t[n]),g)),{})}const Yo=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Ho=(0,I.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[{[`& .${Xo.label}`]:g.label},g.root,g[`labelPlacement${(0,_e.Z)(t.labelPlacement)}`]]}})((({theme:e,ownerState:g})=>(0,s.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Xo.disabled}`]:{cursor:"default"}},"start"===g.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===g.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===g.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${Xo.label}`]:{[`&.${Xo.disabled}`]:{color:(e.vars||e).palette.text.disabled}}}))),wo=(0,I.ZP)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,g)=>g.asterisk})((({theme:e})=>({[`&.${Xo.error}`]:{color:(e.vars||e).palette.error.main}})));var xo=g.forwardRef((function(e,t){var n,l;const I=(0,ie.Z)({props:e,name:"MuiFormControlLabel"}),{className:o,componentsProps:a={},control:C,disabled:i,disableTypography:r,label:d,labelPlacement:A="end",required:u,slotProps:b={}}=I,Z=(0,c.Z)(I,Yo),h=_I(),p=null!=(n=null!=i?i:C.props.disabled)?n:null==h?void 0:h.disabled,G=null!=u?u:C.props.required,y={disabled:p,required:G};["checked","name","onChange","value","inputRef"].forEach((e=>{void 0===C.props[e]&&void 0!==I[e]&&(y[e]=I[e])}));const B=Jo({props:I,muiFormControl:h,states:["error"]}),S=(0,s.Z)({},I,{disabled:p,labelPlacement:A,required:G,error:B.error}),V=(e=>{const{classes:g,disabled:t,labelPlacement:n,error:l,required:I}=e,o={root:["root",t&&"disabled",`labelPlacement${(0,_e.Z)(n)}`,l&&"error",I&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",l&&"error"]};return(0,F.Z)(o,ko,g)})(S),f=null!=(l=b.typography)?l:a.typography;let v=d;return null==v||v.type===xt||r||(v=(0,m.jsx)(xt,(0,s.Z)({component:"span"},f,{className:(0,W.Z)(V.label,null==f?void 0:f.className),children:v}))),(0,m.jsxs)(Ho,(0,s.Z)({className:(0,W.Z)(V.root,o),ownerState:S,ref:t},Z,{children:[g.cloneElement(C,y),G?(0,m.jsxs)(Ro,{direction:"row",alignItems:"center",children:[v,(0,m.jsxs)(wo,{ownerState:S,"aria-hidden":!0,className:V.asterisk,children:["","*"]})]}):v]}))})),Fo=l(2996),No=l(1387),Ko=l(9336);const zo=["onChange","maxRows","minRows","style","value"];function Mo(e){return parseInt(e,10)||0}const Eo={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function Lo(e){return null==e||0===Object.keys(e).length||0===e.outerHeightStyle&&!e.overflow}const Uo=g.forwardRef((function(e,t){const{onChange:n,maxRows:l,minRows:I=1,style:o,value:a}=e,C=(0,c.Z)(e,zo),{current:i}=g.useRef(null!=a),r=g.useRef(null),d=(0,N.Z)(t,r),A=g.useRef(null),u=g.useRef(0),[b,Z]=g.useState({outerHeightStyle:0}),h=g.useCallback((()=>{const g=r.current,t=(0,j.Z)(g).getComputedStyle(g);if("0px"===t.width)return{outerHeightStyle:0};const n=A.current;n.style.width=t.width,n.value=g.value||e.placeholder||"x","\n"===n.value.slice(-1)&&(n.value+=" ");const o=t.boxSizing,a=Mo(t.paddingBottom)+Mo(t.paddingTop),C=Mo(t.borderBottomWidth)+Mo(t.borderTopWidth),i=n.scrollHeight;n.value="x";const s=n.scrollHeight;let c=i;return I&&(c=Math.max(Number(I)*s,c)),l&&(c=Math.min(Number(l)*s,c)),c=Math.max(c,s),{outerHeightStyle:c+("border-box"===o?a+C:0),overflow:Math.abs(c-i)<=1}}),[l,I,e.placeholder]),p=(e,g)=>{const{outerHeightStyle:t,overflow:n}=g;return u.current<20&&(t>0&&Math.abs((e.outerHeightStyle||0)-t)>1||e.overflow!==n)?(u.current+=1,{overflow:n,outerHeightStyle:t}):e},G=g.useCallback((()=>{const e=h();Lo(e)||Z((g=>p(g,e)))}),[h]),y=()=>{const e=h();Lo(e)||Ie.flushSync((()=>{Z((g=>p(g,e)))}))};return g.useEffect((()=>{const e=(0,Ko.Z)((()=>{u.current=0,r.current&&y()}));let g;const t=r.current,n=(0,j.Z)(t);return n.addEventListener("resize",e),"undefined"!=typeof ResizeObserver&&(g=new ResizeObserver((()=>{u.current=0,r.current&&y()})),g.observe(t)),()=>{e.clear(),n.removeEventListener("resize",e),g&&g.disconnect()}})),(0,oe.Z)((()=>{G()})),g.useEffect((()=>{u.current=0}),[a]),(0,m.jsxs)(g.Fragment,{children:[(0,m.jsx)("textarea",(0,s.Z)({value:a,onChange:e=>{u.current=0,i||G(),n&&n(e)},ref:d,rows:I,style:(0,s.Z)({height:b.outerHeightStyle,overflow:b.overflow?"hidden":void 0},o)},C)),(0,m.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:A,tabIndex:-1,style:(0,s.Z)({},Eo,o,{paddingTop:0,paddingBottom:0})})]})}));function Qo(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function To(e,g=!1){return e&&(Qo(e.value)&&""!==e.value||g&&Qo(e.defaultValue)&&""!==e.defaultValue)}function Do(e){return(0,Re.Z)("MuiInputBase",e)}var jo=(0,ve.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);const Po=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Oo=(e,g)=>{const{ownerState:t}=e;return[g.root,t.formControl&&g.formControl,t.startAdornment&&g.adornedStart,t.endAdornment&&g.adornedEnd,t.error&&g.error,"small"===t.size&&g.sizeSmall,t.multiline&&g.multiline,t.color&&g[`color${(0,_e.Z)(t.color)}`],t.fullWidth&&g.fullWidth,t.hiddenLabel&&g.hiddenLabel]},qo=(e,g)=>{const{ownerState:t}=e;return[g.input,"small"===t.size&&g.inputSizeSmall,t.multiline&&g.inputMultiline,"search"===t.type&&g.inputTypeSearch,t.startAdornment&&g.inputAdornedStart,t.endAdornment&&g.inputAdornedEnd,t.hiddenLabel&&g.inputHiddenLabel]},_o=(0,I.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Oo})((({theme:e,ownerState:g})=>(0,s.Z)({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${jo.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},g.multiline&&(0,s.Z)({padding:"4px 0 5px"},"small"===g.size&&{paddingTop:1}),g.fullWidth&&{width:"100%"}))),$o=(0,I.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:qo})((({theme:e,ownerState:g})=>{const t="light"===e.palette.mode,n=(0,s.Z)({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),l={opacity:"0 !important"},I=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return(0,s.Z)({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&:-ms-input-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${jo.formControl} &`]:{"&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus::-webkit-input-placeholder":I,"&:focus::-moz-placeholder":I,"&:focus:-ms-input-placeholder":I,"&:focus::-ms-input-placeholder":I},[`&.${jo.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},"small"===g.size&&{paddingTop:1},g.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===g.type&&{MozAppearance:"textfield"})})),ea=(0,m.jsx)(Vg,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),ga=g.forwardRef((function(e,t){var n;const l=(0,ie.Z)({props:e,name:"MuiInputBase"}),{"aria-describedby":I,autoComplete:o,autoFocus:a,className:C,components:i={},componentsProps:r={},defaultValue:d,disabled:A,disableInjectingGlobalStyles:u,endAdornment:b,fullWidth:Z=!1,id:h,inputComponent:p="input",inputProps:G={},inputRef:y,maxRows:B,minRows:S,multiline:V=!1,name:f,onBlur:v,onChange:R,onClick:k,onFocus:X,onKeyDown:J,onKeyUp:Y,placeholder:H,readOnly:w,renderSuffix:x,rows:N,slotProps:z={},slots:M={},startAdornment:E,type:L="text",value:U}=l,Q=(0,c.Z)(l,Po),T=null!=G.value?G.value:U,{current:D}=g.useRef(null!=T),j=g.useRef(),P=g.useCallback((e=>{}),[]),O=(0,Be.Z)(j,y,G.ref,P),[q,_]=g.useState(!1),$=_I(),ee=Jo({props:l,muiFormControl:$,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ee.focused=$?$.focused:q,g.useEffect((()=>{!$&&A&&q&&(_(!1),v&&v())}),[$,A,q,v]);const ge=$&&$.onFilled,te=$&&$.onEmpty,ne=g.useCallback((e=>{To(e)?ge&&ge():te&&te()}),[ge,te]);(0,Zt.Z)((()=>{D&&ne({value:T})}),[T,ne,D]),g.useEffect((()=>{ne(j.current)}),[]);let le=p,Ie=G;V&&"input"===le&&(Ie=N?(0,s.Z)({type:void 0,minRows:N,maxRows:N},Ie):(0,s.Z)({type:void 0,maxRows:B,minRows:S},Ie),le=Uo),g.useEffect((()=>{$&&$.setAdornedStart(Boolean(E))}),[$,E]);const oe=(0,s.Z)({},l,{color:ee.color||"primary",disabled:ee.disabled,endAdornment:b,error:ee.error,focused:ee.focused,formControl:$,fullWidth:Z,hiddenLabel:ee.hiddenLabel,multiline:V,size:ee.size,startAdornment:E,type:L}),ae=(e=>{const{classes:g,color:t,disabled:n,error:l,endAdornment:I,focused:o,formControl:a,fullWidth:C,hiddenLabel:i,multiline:r,readOnly:s,size:c,startAdornment:d,type:A}=e,u={root:["root",`color${(0,_e.Z)(t)}`,n&&"disabled",l&&"error",C&&"fullWidth",o&&"focused",a&&"formControl",c&&"medium"!==c&&`size${(0,_e.Z)(c)}`,r&&"multiline",d&&"adornedStart",I&&"adornedEnd",i&&"hiddenLabel",s&&"readOnly"],input:["input",n&&"disabled","search"===A&&"inputTypeSearch",r&&"inputMultiline","small"===c&&"inputSizeSmall",i&&"inputHiddenLabel",d&&"inputAdornedStart",I&&"inputAdornedEnd",s&&"readOnly"]};return(0,F.Z)(u,Do,g)})(oe),Ce=M.root||i.Root||_o,re=z.root||r.root||{},se=M.input||i.Input||$o;return Ie=(0,s.Z)({},Ie,null!=(n=z.input)?n:r.input),(0,m.jsxs)(g.Fragment,{children:[!u&&ea,(0,m.jsxs)(Ce,(0,s.Z)({},re,!K(Ce)&&{ownerState:(0,s.Z)({},oe,re.ownerState)},{ref:t,onClick:e=>{j.current&&e.currentTarget===e.target&&j.current.focus(),k&&k(e)}},Q,{className:(0,W.Z)(ae.root,re.className,C,w&&"MuiInputBase-readOnly"),children:[E,(0,m.jsx)(qI.Provider,{value:null,children:(0,m.jsx)(se,(0,s.Z)({ownerState:oe,"aria-invalid":ee.error,"aria-describedby":I,autoComplete:o,autoFocus:a,defaultValue:d,disabled:ee.disabled,id:h,onAnimationStart:e=>{ne("mui-auto-fill-cancel"===e.animationName?j.current:{value:"x"})},name:f,placeholder:H,readOnly:w,required:ee.required,rows:N,value:T,onKeyDown:J,onKeyUp:Y,type:L},Ie,!K(se)&&{as:le,ownerState:(0,s.Z)({},oe,Ie.ownerState)},{ref:O,className:(0,W.Z)(ae.input,Ie.className,w&&"MuiInputBase-readOnly"),onBlur:e=>{v&&v(e),G.onBlur&&G.onBlur(e),$&&$.onBlur?$.onBlur(e):_(!1)},onChange:(e,...g)=>{if(!D){const g=e.target||j.current;if(null==g)throw new Error((0,No.Z)(1));ne({value:g.value})}G.onChange&&G.onChange(e,...g),R&&R(e,...g)},onFocus:e=>{ee.disabled?e.stopPropagation():(X&&X(e),G.onFocus&&G.onFocus(e),$&&$.onFocus?$.onFocus(e):_(!0))}}))}),b,x?x((0,s.Z)({},ee,{startAdornment:E})):null]}))]})}));var ta=ga;function na(e){return(0,Re.Z)("MuiInput",e)}var la=(0,s.Z)({},jo,(0,ve.Z)("MuiInput",["root","underline","input"]));const Ia=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],oa=(0,I.ZP)(_o,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiInput",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[...Oo(e,g),!t.disableUnderline&&g.underline]}})((({theme:e,ownerState:g})=>{let t="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(t=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),(0,s.Z)({position:"relative"},g.formControl&&{"label + &":{marginTop:16}},!g.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[g.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${la.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${la.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${la.disabled}, .${la.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${la.disabled}:before`]:{borderBottomStyle:"dotted"}})})),aa=(0,I.ZP)($o,{name:"MuiInput",slot:"Input",overridesResolver:qo})({}),Ca=g.forwardRef((function(e,g){var t,n,l,I;const o=(0,ie.Z)({props:e,name:"MuiInput"}),{disableUnderline:a,components:C={},componentsProps:i,fullWidth:r=!1,inputComponent:d="input",multiline:A=!1,slotProps:u,slots:b={},type:Z="text"}=o,h=(0,c.Z)(o,Ia),p=(e=>{const{classes:g,disableUnderline:t}=e,n={root:["root",!t&&"underline"],input:["input"]},l=(0,F.Z)(n,na,g);return(0,s.Z)({},g,l)})(o),G={root:{ownerState:{disableUnderline:a}}},y=(null!=u?u:i)?(0,v.Z)(null!=u?u:i,G):G,B=null!=(t=null!=(n=b.root)?n:C.Root)?t:oa,S=null!=(l=null!=(I=b.input)?I:C.Input)?l:aa;return(0,m.jsx)(ta,(0,s.Z)({slots:{root:B,input:S},slotProps:y,fullWidth:r,inputComponent:d,multiline:A,ref:g,type:Z},h,{classes:p}))}));Ca.muiName="Input";var ia=Ca;function ra(e){return(0,Re.Z)("MuiFilledInput",e)}var sa=(0,s.Z)({},jo,(0,ve.Z)("MuiFilledInput",["root","underline","input"]));const ca=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],da=(0,I.ZP)(_o,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiFilledInput",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[...Oo(e,g),!t.disableUnderline&&g.underline]}})((({theme:e,ownerState:g})=>{var t;const n="light"===e.palette.mode,l=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",I=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return(0,s.Z)({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:I,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:I}},[`&.${sa.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:I},[`&.${sa.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a}},!g.disableUnderline&&{"&:after":{borderBottom:`2px solid ${null==(t=(e.vars||e).palette[g.color||"primary"])?void 0:t.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${sa.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${sa.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:l}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${sa.disabled}, .${sa.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${sa.disabled}:before`]:{borderBottomStyle:"dotted"}},g.startAdornment&&{paddingLeft:12},g.endAdornment&&{paddingRight:12},g.multiline&&(0,s.Z)({padding:"25px 12px 8px"},"small"===g.size&&{paddingTop:21,paddingBottom:4},g.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),Aa=(0,I.ZP)($o,{name:"MuiFilledInput",slot:"Input",overridesResolver:qo})((({theme:e,ownerState:g})=>(0,s.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===g.size&&{paddingTop:21,paddingBottom:4},g.hiddenLabel&&{paddingTop:16,paddingBottom:17},g.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},g.startAdornment&&{paddingLeft:0},g.endAdornment&&{paddingRight:0},g.hiddenLabel&&"small"===g.size&&{paddingTop:8,paddingBottom:9}))),ua=g.forwardRef((function(e,g){var t,n,l,I;const o=(0,ie.Z)({props:e,name:"MuiFilledInput"}),{components:a={},componentsProps:C,fullWidth:i=!1,inputComponent:r="input",multiline:d=!1,slotProps:A,slots:u={},type:b="text"}=o,Z=(0,c.Z)(o,ca),h=(0,s.Z)({},o,{fullWidth:i,inputComponent:r,multiline:d,type:b}),p=(e=>{const{classes:g,disableUnderline:t}=e,n={root:["root",!t&&"underline"],input:["input"]},l=(0,F.Z)(n,ra,g);return(0,s.Z)({},g,l)})(o),G={root:{ownerState:h},input:{ownerState:h}},y=(null!=A?A:C)?(0,v.Z)(null!=A?A:C,G):G,B=null!=(t=null!=(n=u.root)?n:a.Root)?t:da,S=null!=(l=null!=(I=u.input)?I:a.Input)?l:Aa;return(0,m.jsx)(ta,(0,s.Z)({slots:{root:B,input:S},componentsProps:y,fullWidth:i,inputComponent:r,multiline:d,ref:g,type:b},Z,{classes:p}))}));ua.muiName="Input";var ma,ba=ua;const Za=["children","classes","className","label","notched"],ha=(0,I.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),pa=(0,I.ZP)("legend")((({ownerState:e,theme:g})=>(0,s.Z)({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:g.transitions.create("width",{duration:150,easing:g.transitions.easing.easeOut})},e.withLabel&&(0,s.Z)({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:g.transitions.create("max-width",{duration:50,easing:g.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:g.transitions.create("max-width",{duration:100,easing:g.transitions.easing.easeOut,delay:50})}))));function Ga(e){return(0,Re.Z)("MuiOutlinedInput",e)}var ya=(0,s.Z)({},jo,(0,ve.Z)("MuiOutlinedInput",["root","notchedOutline","input"]));const Ba=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],Sa=(0,I.ZP)(_o,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiOutlinedInput",slot:"Root",overridesResolver:Oo})((({theme:e,ownerState:g})=>{const t="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,s.Z)({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${ya.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${ya.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${ya.focused} .${ya.notchedOutline}`]:{borderColor:(e.vars||e).palette[g.color].main,borderWidth:2},[`&.${ya.error} .${ya.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${ya.disabled} .${ya.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},g.startAdornment&&{paddingLeft:14},g.endAdornment&&{paddingRight:14},g.multiline&&(0,s.Z)({padding:"16.5px 14px"},"small"===g.size&&{padding:"8.5px 14px"}))})),Wa=(0,I.ZP)((function(e){const{className:g,label:t,notched:n}=e,l=(0,c.Z)(e,Za),I=null!=t&&""!==t,o=(0,s.Z)({},e,{notched:n,withLabel:I});return(0,m.jsx)(ha,(0,s.Z)({"aria-hidden":!0,className:g,ownerState:o},l,{children:(0,m.jsx)(pa,{ownerState:o,children:I?(0,m.jsx)("span",{children:t}):ma||(ma=(0,m.jsx)("span",{className:"notranslate",children:""}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,g)=>g.notchedOutline})((({theme:e})=>{const g="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:g}})),Va=(0,I.ZP)($o,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:qo})((({theme:e,ownerState:g})=>(0,s.Z)({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:"light"===e.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===e.palette.mode?null:"#fff",caretColor:"light"===e.palette.mode?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},"small"===g.size&&{padding:"8.5px 14px"},g.multiline&&{padding:0},g.startAdornment&&{paddingLeft:0},g.endAdornment&&{paddingRight:0}))),fa=g.forwardRef((function(e,t){var n,l,I,o,a;const C=(0,ie.Z)({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:r=!1,inputComponent:d="input",label:A,multiline:u=!1,notched:b,slots:Z={},type:h="text"}=C,p=(0,c.Z)(C,Ba),G=(e=>{const{classes:g}=e,t=(0,F.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Ga,g);return(0,s.Z)({},g,t)})(C),y=_I(),B=Jo({props:C,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),S=(0,s.Z)({},C,{color:B.color||"primary",disabled:B.disabled,error:B.error,focused:B.focused,formControl:y,fullWidth:r,hiddenLabel:B.hiddenLabel,multiline:u,size:B.size,type:h}),W=null!=(n=null!=(l=Z.root)?l:i.Root)?n:Sa,V=null!=(I=null!=(o=Z.input)?o:i.Input)?I:Va;return(0,m.jsx)(ta,(0,s.Z)({slots:{root:W,input:V},renderSuffix:e=>(0,m.jsx)(Wa,{ownerState:S,className:G.notchedOutline,label:null!=A&&""!==A&&B.required?a||(a=(0,m.jsxs)(g.Fragment,{children:[A,"","*"]})):A,notched:void 0!==b?b:Boolean(e.startAdornment||e.filled||e.focused)}),fullWidth:r,inputComponent:d,multiline:u,ref:t,type:h},p,{classes:(0,s.Z)({},G,{notchedOutline:null})}))}));fa.muiName="Input";var va=fa;function Ra(e){return(0,Re.Z)("MuiFormLabel",e)}var ka=(0,ve.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]);const Xa=["children","className","color","component","disabled","error","filled","focused","required"],Ja=(0,I.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},g)=>(0,s.Z)({},g.root,"secondary"===e.color&&g.colorSecondary,e.filled&&g.filled)})((({theme:e,ownerState:g})=>(0,s.Z)({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${ka.focused}`]:{color:(e.vars||e).palette[g.color].main},[`&.${ka.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${ka.error}`]:{color:(e.vars||e).palette.error.main}}))),Ya=(0,I.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,g)=>g.asterisk})((({theme:e})=>({[`&.${ka.error}`]:{color:(e.vars||e).palette.error.main}}))),Ha=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiFormLabel"}),{children:n,className:l,component:I="label"}=t,o=(0,c.Z)(t,Xa),a=Jo({props:t,muiFormControl:_I(),states:["color","required","focused","disabled","error","filled"]}),C=(0,s.Z)({},t,{color:a.color||"primary",component:I,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),i=(e=>{const{classes:g,color:t,focused:n,disabled:l,error:I,filled:o,required:a}=e,C={root:["root",`color${(0,_e.Z)(t)}`,l&&"disabled",I&&"error",o&&"filled",n&&"focused",a&&"required"],asterisk:["asterisk",I&&"error"]};return(0,F.Z)(C,Ra,g)})(C);return(0,m.jsxs)(Ja,(0,s.Z)({as:I,ownerState:C,className:(0,W.Z)(i.root,l),ref:g},o,{children:[n,a.required&&(0,m.jsxs)(Ya,{ownerState:C,"aria-hidden":!0,className:i.asterisk,children:["","*"]})]}))}));var wa=Ha;function xa(e){return(0,Re.Z)("MuiInputLabel",e)}(0,ve.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Fa=["disableAnimation","margin","shrink","variant","className"],Na=(0,I.ZP)(wa,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiInputLabel",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[{[`& .${ka.asterisk}`]:g.asterisk},g.root,t.formControl&&g.formControl,"small"===t.size&&g.sizeSmall,t.shrink&&g.shrink,!t.disableAnimation&&g.animated,g[t.variant]]}})((({theme:e,ownerState:g})=>(0,s.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},g.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===g.size&&{transform:"translate(0, 17px) scale(1)"},g.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!g.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},"filled"===g.variant&&(0,s.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===g.size&&{transform:"translate(12px, 13px) scale(1)"},g.shrink&&(0,s.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===g.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===g.variant&&(0,s.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===g.size&&{transform:"translate(14px, 9px) scale(1)"},g.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))));var Ka=g.forwardRef((function(e,g){const t=(0,ie.Z)({name:"MuiInputLabel",props:e}),{disableAnimation:n=!1,shrink:l,className:I}=t,o=(0,c.Z)(t,Fa),a=_I();let C=l;void 0===C&&a&&(C=a.filled||a.focused||a.adornedStart);const i=Jo({props:t,muiFormControl:a,states:["size","variant","required"]}),r=(0,s.Z)({},t,{disableAnimation:n,formControl:a,shrink:C,size:i.size,variant:i.variant,required:i.required}),d=(e=>{const{classes:g,formControl:t,size:n,shrink:l,disableAnimation:I,variant:o,required:a}=e,C={root:["root",t&&"formControl",!I&&"animated",l&&"shrink",n&&"normal"!==n&&`size${(0,_e.Z)(n)}`,o],asterisk:[a&&"asterisk"]},i=(0,F.Z)(C,xa,g);return(0,s.Z)({},g,i)})(r);return(0,m.jsx)(Na,(0,s.Z)({"data-shrink":C,ownerState:r,ref:g,className:(0,W.Z)(d.root,I)},o,{classes:d}))})),za=l(8502);function Ma(e){return(0,Re.Z)("MuiFormControl",e)}(0,ve.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ea=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],La=(0,I.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},g)=>(0,s.Z)({},g.root,g[`margin${(0,_e.Z)(e.margin)}`],e.fullWidth&&g.fullWidth)})((({ownerState:e})=>(0,s.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===e.margin&&{marginTop:16,marginBottom:8},"dense"===e.margin&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"}))),Ua=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiFormControl"}),{children:l,className:I,color:o="primary",component:a="div",disabled:C=!1,error:i=!1,focused:r,fullWidth:d=!1,hiddenLabel:A=!1,margin:u="none",required:b=!1,size:Z="medium",variant:h="outlined"}=n,p=(0,c.Z)(n,Ea),G=(0,s.Z)({},n,{color:o,component:a,disabled:C,error:i,fullWidth:d,hiddenLabel:A,margin:u,required:b,size:Z,variant:h}),y=(e=>{const{classes:g,margin:t,fullWidth:n}=e,l={root:["root","none"!==t&&`margin${(0,_e.Z)(t)}`,n&&"fullWidth"]};return(0,F.Z)(l,Ma,g)})(G),[B,S]=g.useState((()=>{let e=!1;return l&&g.Children.forEach(l,(g=>{if(!(0,za.Z)(g,["Input","Select"]))return;const t=(0,za.Z)(g,["Select"])?g.props.input:g;t&&t.props.startAdornment&&(e=!0)})),e})),[V,f]=g.useState((()=>{let e=!1;return l&&g.Children.forEach(l,(g=>{(0,za.Z)(g,["Input","Select"])&&(To(g.props,!0)||To(g.props.inputProps,!0))&&(e=!0)})),e})),[v,R]=g.useState(!1);C&&v&&R(!1);const k=void 0===r||C?v:r;let X;const J=g.useMemo((()=>({adornedStart:B,setAdornedStart:S,color:o,disabled:C,error:i,filled:V,focused:k,fullWidth:d,hiddenLabel:A,size:Z,onBlur:()=>{R(!1)},onEmpty:()=>{f(!1)},onFilled:()=>{f(!0)},onFocus:()=>{R(!0)},registerEffect:X,required:b,variant:h})),[B,o,C,i,V,k,d,A,X,b,Z,h]);return(0,m.jsx)(qI.Provider,{value:J,children:(0,m.jsx)(La,(0,s.Z)({as:a,ownerState:G,className:(0,W.Z)(y.root,I),ref:t},p,{children:l}))})}));var Qa=Ua;function Ta(e){return(0,Re.Z)("MuiFormHelperText",e)}var Da,ja=(0,ve.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);const Pa=["children","className","component","disabled","error","filled","focused","margin","required","variant"],Oa=(0,I.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.size&&g[`size${(0,_e.Z)(t.size)}`],t.contained&&g.contained,t.filled&&g.filled]}})((({theme:e,ownerState:g})=>(0,s.Z)({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${ja.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${ja.error}`]:{color:(e.vars||e).palette.error.main}},"small"===g.size&&{marginTop:4},g.contained&&{marginLeft:14,marginRight:14})));var qa=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiFormHelperText"}),{children:n,className:l,component:I="p"}=t,o=(0,c.Z)(t,Pa),a=Jo({props:t,muiFormControl:_I(),states:["variant","size","disabled","error","filled","focused","required"]}),C=(0,s.Z)({},t,{component:I,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),i=(e=>{const{classes:g,contained:t,size:n,disabled:l,error:I,filled:o,focused:a,required:C}=e,i={root:["root",l&&"disabled",I&&"error",n&&`size${(0,_e.Z)(n)}`,t&&"contained",a&&"focused",o&&"filled",C&&"required"]};return(0,F.Z)(i,Ta,g)})(C);return(0,m.jsx)(Oa,(0,s.Z)({as:I,ownerState:C,className:(0,W.Z)(i.root,l),ref:g},o,{children:" "===n?Da||(Da=(0,m.jsx)("span",{className:"notranslate",children:""})):n}))})),_a=(l(6607),l(8038)),$a=P;const eC=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function gC(e,g,t){return e===g?e.firstChild:g&&g.nextElementSibling?g.nextElementSibling:t?null:e.firstChild}function tC(e,g,t){return e===g?t?e.firstChild:e.lastChild:g&&g.previousElementSibling?g.previousElementSibling:t?null:e.lastChild}function nC(e,g){if(void 0===g)return!0;let t=e.innerText;return void 0===t&&(t=e.textContent),t=t.trim().toLowerCase(),0!==t.length&&(g.repeating?t[0]===g.keys[0]:0===t.indexOf(g.keys.join("")))}function lC(e,g,t,n,l,I){let o=!1,a=l(e,g,!!g&&t);for(;a;){if(a===e.firstChild){if(o)return!1;o=!0}const g=!n&&(a.disabled||"true"===a.getAttribute("aria-disabled"));if(a.hasAttribute("tabindex")&&nC(a,I)&&!g)return a.focus(),!0;a=l(e,a,t)}return!1}var IC=g.forwardRef((function(e,t){const{actions:n,autoFocus:l=!1,autoFocusItem:I=!1,children:o,className:a,disabledItemsFocusable:C=!1,disableListWrap:i=!1,onKeyDown:r,variant:d="selectedMenu"}=e,A=(0,c.Z)(e,eC),u=g.useRef(null),b=g.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Zt.Z)((()=>{l&&u.current.focus()}),[l]),g.useImperativeHandle(n,(()=>({adjustStyleForScrollbar:(e,g)=>{const t=!u.current.style.width;if(e.clientHeight<u.current.clientHeight&&t){const t=`${$a((0,_a.Z)(e))}px`;u.current.style["rtl"===g.direction?"paddingLeft":"paddingRight"]=t,u.current.style.width=`calc(100% + ${t})`}return u.current}})),[]);const Z=(0,Be.Z)(u,t);let h=-1;g.Children.forEach(o,((e,t)=>{g.isValidElement(e)?(e.props.disabled||("selectedMenu"===d&&e.props.selected||-1===h)&&(h=t),h===t&&(e.props.disabled||e.props.muiSkipListHighlight||e.type.muiSkipListHighlight)&&(h+=1,h>=o.length&&(h=-1))):h===t&&(h+=1,h>=o.length&&(h=-1))}));const p=g.Children.map(o,((e,t)=>{if(t===h){const t={};return I&&(t.autoFocus=!0),void 0===e.props.tabIndex&&"selectedMenu"===d&&(t.tabIndex=0),g.cloneElement(e,t)}return e}));return(0,m.jsx)(Tt,(0,s.Z)({role:"menu",ref:Z,className:a,onKeyDown:e=>{const g=u.current,t=e.key,n=(0,_a.Z)(g).activeElement;if("ArrowDown"===t)e.preventDefault(),lC(g,n,i,C,gC);else if("ArrowUp"===t)e.preventDefault(),lC(g,n,i,C,tC);else if("Home"===t)e.preventDefault(),lC(g,null,i,C,gC);else if("End"===t)e.preventDefault(),lC(g,null,i,C,tC);else if(1===t.length){const l=b.current,I=t.toLowerCase(),o=performance.now();l.keys.length>0&&(o-l.lastTime>500?(l.keys=[],l.repeating=!0,l.previousKeyMatched=!0):l.repeating&&I!==l.keys[0]&&(l.repeating=!1)),l.lastTime=o,l.keys.push(I);const a=n&&!l.repeating&&nC(n,l);l.previousKeyMatched&&(a||lC(g,n,!1,C,gC,l))?e.preventDefault():l.previousKeyMatched=!1}r&&r(e)},tabIndex:l?0:-1},A,{children:p}))}));function oC(e){return(0,Re.Z)("MuiPopover",e)}(0,ve.Z)("MuiPopover",["root","paper"]);const aC=["onEntering"],CC=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],iC=["slotProps"];function rC(e,g){let t=0;return"number"==typeof g?t=g:"center"===g?t=e.height/2:"bottom"===g&&(t=e.height),t}function sC(e,g){let t=0;return"number"==typeof g?t=g:"center"===g?t=e.width/2:"right"===g&&(t=e.width),t}function cC(e){return[e.horizontal,e.vertical].map((e=>"number"==typeof e?`${e}px`:e)).join(" ")}function dC(e){return"function"==typeof e?e():e}const AC=(0,I.ZP)(Ke,{name:"MuiPopover",slot:"Root",overridesResolver:(e,g)=>g.root})({}),uC=(0,I.ZP)(qe,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,g)=>g.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),mC=g.forwardRef((function(e,t){var n,l,I;const o=(0,ie.Z)({props:e,name:"MuiPopover"}),{action:a,anchorEl:C,anchorOrigin:i={vertical:"top",horizontal:"left"},anchorPosition:r,anchorReference:d="anchorEl",children:A,className:u,container:b,elevation:Z=8,marginThreshold:h=16,open:p,PaperProps:G={},slots:y,slotProps:B,transformOrigin:S={vertical:"top",horizontal:"left"},TransitionComponent:V=$n,transitionDuration:f="auto",TransitionProps:{onEntering:v}={},disableScrollLock:R=!1}=o,k=(0,c.Z)(o.TransitionProps,aC),X=(0,c.Z)(o,CC),J=null!=(n=null==B?void 0:B.paper)?n:G,Y=g.useRef(),H=(0,Be.Z)(Y,J.ref),w=(0,s.Z)({},o,{anchorOrigin:i,anchorReference:d,elevation:Z,marginThreshold:h,externalPaperSlotProps:J,transformOrigin:S,TransitionComponent:V,transitionDuration:f,TransitionProps:k}),x=(e=>{const{classes:g}=e;return(0,F.Z)({root:["root"],paper:["paper"]},oC,g)})(w),N=g.useCallback((()=>{if("anchorPosition"===d)return r;const e=dC(C),g=(e&&1===e.nodeType?e:(0,_a.Z)(Y.current).body).getBoundingClientRect();return{top:g.top+rC(g,i.vertical),left:g.left+sC(g,i.horizontal)}}),[C,i.horizontal,i.vertical,r,d]),z=g.useCallback((e=>({vertical:rC(e,S.vertical),horizontal:sC(e,S.horizontal)})),[S.horizontal,S.vertical]),M=g.useCallback((e=>{const g={width:e.offsetWidth,height:e.offsetHeight},t=z(g);if("none"===d)return{top:null,left:null,transformOrigin:cC(t)};const n=N();let l=n.top-t.vertical,I=n.left-t.horizontal;const o=l+g.height,a=I+g.width,i=(0,Me.Z)(dC(C)),r=i.innerHeight-h,s=i.innerWidth-h;if(null!==h&&l<h){const e=l-h;l-=e,t.vertical+=e}else if(null!==h&&o>r){const e=o-r;l-=e,t.vertical+=e}if(null!==h&&I<h){const e=I-h;I-=e,t.horizontal+=e}else if(a>s){const e=a-s;I-=e,t.horizontal+=e}return{top:`${Math.round(l)}px`,left:`${Math.round(I)}px`,transformOrigin:cC(t)}}),[C,d,N,z,h]),[E,L]=g.useState(p),Q=g.useCallback((()=>{const e=Y.current;if(!e)return;const g=M(e);null!==g.top&&(e.style.top=g.top),null!==g.left&&(e.style.left=g.left),e.style.transformOrigin=g.transformOrigin,L(!0)}),[M]);g.useEffect((()=>(R&&window.addEventListener("scroll",Q),()=>window.removeEventListener("scroll",Q))),[C,R,Q]),g.useEffect((()=>{p&&Q()})),g.useImperativeHandle(a,(()=>p?{updatePosition:()=>{Q()}}:null),[p,Q]),g.useEffect((()=>{if(!p)return;const e=(0,ze.Z)((()=>{Q()})),g=(0,Me.Z)(C);return g.addEventListener("resize",e),()=>{e.clear(),g.removeEventListener("resize",e)}}),[C,p,Q]);let T=f;"auto"!==f||V.muiSupportAuto||(T=void 0);const D=b||(C?(0,_a.Z)(dC(C)).body:void 0),j=null!=(l=null==y?void 0:y.root)?l:AC,P=null!=(I=null==y?void 0:y.paper)?I:uC,O=U({elementType:P,externalSlotProps:(0,s.Z)({},J,{style:E?J.style:(0,s.Z)({},J.style,{opacity:0})}),additionalProps:{elevation:Z,ref:H},ownerState:w,className:(0,W.Z)(x.paper,null==J?void 0:J.className)}),q=U({elementType:j,externalSlotProps:(null==B?void 0:B.root)||{},externalForwardedProps:X,additionalProps:{ref:t,slotProps:{backdrop:{invisible:!0}},container:D,open:p},ownerState:w,className:(0,W.Z)(x.root,u)}),{slotProps:_}=q,$=(0,c.Z)(q,iC);return(0,m.jsx)(j,(0,s.Z)({},$,!K(j)&&{slotProps:_,disableScrollLock:R},{children:(0,m.jsx)(V,(0,s.Z)({appear:!0,in:p,onEntering:(e,g)=>{v&&v(e,g),Q()},onExited:()=>{L(!1)},timeout:T},k,{children:(0,m.jsx)(P,(0,s.Z)({},O,{children:A}))}))}))}));var bC=mC;function ZC(e){return(0,Re.Z)("MuiMenu",e)}(0,ve.Z)("MuiMenu",["root","paper","list"]);const hC=["onEntering"],pC=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],GC={vertical:"top",horizontal:"right"},yC={vertical:"top",horizontal:"left"},BC=(0,I.ZP)(bC,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiMenu",slot:"Root",overridesResolver:(e,g)=>g.root})({}),SC=(0,I.ZP)(uC,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,g)=>g.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),WC=(0,I.ZP)(IC,{name:"MuiMenu",slot:"List",overridesResolver:(e,g)=>g.list})({outline:0});var VC=g.forwardRef((function(e,t){var n,l;const I=(0,ie.Z)({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:C,disableAutoFocusItem:r=!1,MenuListProps:d={},onClose:A,open:u,PaperProps:b={},PopoverClasses:Z,transitionDuration:h="auto",TransitionProps:{onEntering:p}={},variant:G="selectedMenu",slots:y={},slotProps:B={}}=I,S=(0,c.Z)(I.TransitionProps,hC),V=(0,c.Z)(I,pC),f=i(),v="rtl"===f.direction,R=(0,s.Z)({},I,{autoFocus:o,disableAutoFocusItem:r,MenuListProps:d,onEntering:p,PaperProps:b,transitionDuration:h,TransitionProps:S,variant:G}),k=(e=>{const{classes:g}=e;return(0,F.Z)({root:["root"],paper:["paper"],list:["list"]},ZC,g)})(R),X=o&&!r&&u,J=g.useRef(null);let Y=-1;g.Children.map(a,((e,t)=>{g.isValidElement(e)&&(e.props.disabled||("selectedMenu"===G&&e.props.selected||-1===Y)&&(Y=t))}));const H=null!=(n=y.paper)?n:SC,w=null!=(l=B.paper)?l:b,x=U({elementType:y.root,externalSlotProps:B.root,ownerState:R,className:[k.root,C]}),N=U({elementType:H,externalSlotProps:w,ownerState:R,className:k.paper});return(0,m.jsx)(BC,(0,s.Z)({onClose:A,anchorOrigin:{vertical:"bottom",horizontal:v?"right":"left"},transformOrigin:v?GC:yC,slots:{paper:H,root:y.root},slotProps:{root:x,paper:N},open:u,ref:t,transitionDuration:h,TransitionProps:(0,s.Z)({onEntering:(e,g)=>{J.current&&J.current.adjustStyleForScrollbar(e,f),p&&p(e,g)}},S),ownerState:R},V,{classes:Z,children:(0,m.jsx)(WC,(0,s.Z)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),A&&A(e,"tabKeyDown"))},actions:J,autoFocus:o&&(-1===Y||r),autoFocusItem:X,variant:G},d,{className:(0,W.Z)(k.list,d.className),children:a}))}))}));function fC(e){return(0,Re.Z)("MuiNativeSelect",e)}var vC=(0,ve.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);const RC=["className","disabled","error","IconComponent","inputRef","variant"],kC=({ownerState:e,theme:g})=>(0,s.Z)({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":(0,s.Z)({},g.vars?{backgroundColor:`rgba(${g.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:"light"===g.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${vC.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(g.vars||g).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:(g.vars||g).shape.borderRadius,"&:focus":{borderRadius:(g.vars||g).shape.borderRadius},"&&&":{paddingRight:32}}),XC=(0,I.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:I.FO,overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.select,g[t.variant],t.error&&g.error,{[`&.${vC.multiple}`]:g.multiple}]}})(kC),JC=({ownerState:e,theme:g})=>(0,s.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(g.vars||g).palette.action.active,[`&.${vC.disabled}`]:{color:(g.vars||g).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},"filled"===e.variant&&{right:7},"outlined"===e.variant&&{right:7}),YC=(0,I.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.icon,t.variant&&g[`icon${(0,_e.Z)(t.variant)}`],t.open&&g.iconOpen]}})(JC);var HC=g.forwardRef((function(e,t){const{className:n,disabled:l,error:I,IconComponent:o,inputRef:a,variant:C="standard"}=e,i=(0,c.Z)(e,RC),r=(0,s.Z)({},e,{disabled:l,variant:C,error:I}),d=(e=>{const{classes:g,variant:t,disabled:n,multiple:l,open:I,error:o}=e,a={select:["select",t,n&&"disabled",l&&"multiple",o&&"error"],icon:["icon",`icon${(0,_e.Z)(t)}`,I&&"iconOpen",n&&"disabled"]};return(0,F.Z)(a,fC,g)})(r);return(0,m.jsxs)(g.Fragment,{children:[(0,m.jsx)(XC,(0,s.Z)({ownerState:r,className:(0,W.Z)(d.select,n),disabled:l,ref:a||t},i)),e.multiple?null:(0,m.jsx)(YC,{as:o,ownerState:r,className:d.icon})]})}));function wC(e){return(0,Re.Z)("MuiSelect",e)}var xC,FC=(0,ve.Z)("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);const NC=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],KC=(0,I.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[{[`&.${FC.select}`]:g.select},{[`&.${FC.select}`]:g[t.variant]},{[`&.${FC.error}`]:g.error},{[`&.${FC.multiple}`]:g.multiple}]}})(kC,{[`&.${FC.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),zC=(0,I.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.icon,t.variant&&g[`icon${(0,_e.Z)(t.variant)}`],t.open&&g.iconOpen]}})(JC),MC=(0,I.ZP)("input",{shouldForwardProp:e=>(0,I.Dz)(e)&&"classes"!==e,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,g)=>g.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function EC(e,g){return"object"==typeof g&&null!==g?e===g:String(e)===String(g)}function LC(e){return null==e||"string"==typeof e&&!e.trim()}const UC=g.forwardRef((function(e,t){var n;const{"aria-describedby":l,"aria-label":I,autoFocus:o,autoWidth:a,children:C,className:i,defaultOpen:r,defaultValue:d,disabled:A,displayEmpty:u,error:b=!1,IconComponent:Z,inputRef:h,labelId:p,MenuProps:G={},multiple:y,name:B,onBlur:S,onChange:V,onClose:f,onFocus:v,onOpen:R,open:k,readOnly:X,renderValue:J,SelectDisplayProps:Y={},tabIndex:H,value:w,variant:x="standard"}=e,N=(0,c.Z)(e,NC),[K,z]=(0,WI.Z)({controlled:w,default:d,name:"Select"}),[M,E]=(0,WI.Z)({controlled:k,default:r,name:"Select"}),L=g.useRef(null),U=g.useRef(null),[Q,T]=g.useState(null),{current:D}=g.useRef(null!=k),[j,P]=g.useState(),O=(0,Be.Z)(t,h),q=g.useCallback((e=>{U.current=e,e&&T(e)}),[]),_=null==Q?void 0:Q.parentNode;g.useImperativeHandle(O,(()=>({focus:()=>{U.current.focus()},node:L.current,value:K})),[K]),g.useEffect((()=>{r&&M&&Q&&!D&&(P(a?null:_.clientWidth),U.current.focus())}),[Q,a]),g.useEffect((()=>{o&&U.current.focus()}),[o]),g.useEffect((()=>{if(!p)return;const e=(0,_a.Z)(U.current).getElementById(p);if(e){const g=()=>{getSelection().isCollapsed&&U.current.focus()};return e.addEventListener("click",g),()=>{e.removeEventListener("click",g)}}}),[p]);const $=(e,g)=>{e?R&&R(g):f&&f(g),D||(P(a?null:_.clientWidth),E(e))},ee=g.Children.toArray(C),ge=e=>g=>{let t;if(g.currentTarget.hasAttribute("tabindex")){if(y){t=Array.isArray(K)?K.slice():[];const g=K.indexOf(e.props.value);-1===g?t.push(e.props.value):t.splice(g,1)}else t=e.props.value;if(e.props.onClick&&e.props.onClick(g),K!==t&&(z(t),V)){const n=g.nativeEvent||g,l=new n.constructor(n.type,n);Object.defineProperty(l,"target",{writable:!0,value:{value:t,name:B}}),V(l,e)}y||$(!1,g)}},te=null!==Q&&M;let ne,le;delete N["aria-invalid"];const Ie=[];let oe=!1,ae=!1;(To({value:K})||u)&&(J?ne=J(K):oe=!0);const Ce=ee.map((e=>{if(!g.isValidElement(e))return null;let t;if(y){if(!Array.isArray(K))throw new Error((0,No.Z)(2));t=K.some((g=>EC(g,e.props.value))),t&&oe&&Ie.push(e.props.children)}else t=EC(K,e.props.value),t&&oe&&(le=e.props.children);return t&&(ae=!0),g.cloneElement(e,{"aria-selected":t?"true":"false",onClick:ge(e),onKeyUp:g=>{" "===g.key&&g.preventDefault(),e.props.onKeyUp&&e.props.onKeyUp(g)},role:"option",selected:t,value:void 0,"data-value":e.props.value})}));oe&&(ne=y?0===Ie.length?null:Ie.reduce(((e,g,t)=>(e.push(g),t<Ie.length-1&&e.push(", "),e)),[]):le);let ie,re=j;!a&&D&&Q&&(re=_.clientWidth),ie=void 0!==H?H:A?null:0;const se=Y.id||(B?`mui-component-select-${B}`:void 0),ce=(0,s.Z)({},e,{variant:x,value:K,open:te,error:b}),de=(e=>{const{classes:g,variant:t,disabled:n,multiple:l,open:I,error:o}=e,a={select:["select",t,n&&"disabled",l&&"multiple",o&&"error"],icon:["icon",`icon${(0,_e.Z)(t)}`,I&&"iconOpen",n&&"disabled"],nativeInput:["nativeInput"]};return(0,F.Z)(a,wC,g)})(ce),Ae=(0,s.Z)({},G.PaperProps,null==(n=G.slotProps)?void 0:n.paper);return(0,m.jsxs)(g.Fragment,{children:[(0,m.jsx)(KC,(0,s.Z)({ref:q,tabIndex:ie,role:"button","aria-disabled":A?"true":void 0,"aria-expanded":te?"true":"false","aria-haspopup":"listbox","aria-label":I,"aria-labelledby":[p,se].filter(Boolean).join(" ")||void 0,"aria-describedby":l,onKeyDown:e=>{X||-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(e.key)&&(e.preventDefault(),$(!0,e))},onMouseDown:A||X?null:e=>{0===e.button&&(e.preventDefault(),U.current.focus(),$(!0,e))},onBlur:e=>{!te&&S&&(Object.defineProperty(e,"target",{writable:!0,value:{value:K,name:B}}),S(e))},onFocus:v},Y,{ownerState:ce,className:(0,W.Z)(Y.className,de.select,i),id:se,children:LC(ne)?xC||(xC=(0,m.jsx)("span",{className:"notranslate",children:""})):ne})),(0,m.jsx)(MC,(0,s.Z)({"aria-invalid":b,value:Array.isArray(K)?K.join(","):K,name:B,ref:L,"aria-hidden":!0,onChange:e=>{const g=ee.find((g=>g.props.value===e.target.value));void 0!==g&&(z(g.props.value),V&&V(e,g))},tabIndex:-1,disabled:A,className:de.nativeInput,autoFocus:o,ownerState:ce},N)),(0,m.jsx)(zC,{as:Z,className:de.icon,ownerState:ce}),(0,m.jsx)(VC,(0,s.Z)({id:`menu-${B||""}`,anchorEl:_,open:te,onClose:e=>{$(!1,e)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},G,{MenuListProps:(0,s.Z)({"aria-labelledby":p,role:"listbox",disableListWrap:!0},G.MenuListProps),slotProps:{paper:(0,s.Z)({},Ae,{style:(0,s.Z)({minWidth:re},null!=Ae?Ae.style:null)})},children:Ce}))]})}));var QC=UC,TC=(0,jI.Z)((0,m.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");const DC=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],jC=["root"],PC={name:"MuiSelect",overridesResolver:(e,g)=>g.root,shouldForwardProp:e=>(0,I.FO)(e)&&"variant"!==e,slot:"Root"},OC=(0,I.ZP)(ia,PC)(""),qC=(0,I.ZP)(va,PC)(""),_C=(0,I.ZP)(ba,PC)(""),$C=g.forwardRef((function(e,t){const n=(0,ie.Z)({name:"MuiSelect",props:e}),{autoWidth:l=!1,children:I,classes:o={},className:a,defaultOpen:C=!1,displayEmpty:i=!1,IconComponent:r=TC,id:d,input:A,inputProps:u,label:b,labelId:Z,MenuProps:h,multiple:p=!1,native:G=!1,onClose:y,onOpen:B,open:S,renderValue:V,SelectDisplayProps:f,variant:R="outlined"}=n,k=(0,c.Z)(n,DC),X=G?HC:QC,J=Jo({props:n,muiFormControl:_I(),states:["variant","error"]}),Y=J.variant||R,H=(0,s.Z)({},n,{variant:Y,classes:o}),w=(e=>{const{classes:g}=e;return g})(H),x=(0,c.Z)(w,jC),F=A||{standard:(0,m.jsx)(OC,{ownerState:H}),outlined:(0,m.jsx)(qC,{label:b,ownerState:H}),filled:(0,m.jsx)(_C,{ownerState:H})}[Y],N=(0,Be.Z)(t,F.ref);return(0,m.jsx)(g.Fragment,{children:g.cloneElement(F,(0,s.Z)({inputComponent:X,inputProps:(0,s.Z)({children:I,error:J.error,IconComponent:r,variant:Y,type:void 0,multiple:p},G?{id:d}:{autoWidth:l,defaultOpen:C,displayEmpty:i,labelId:Z,MenuProps:h,onClose:y,onOpen:B,open:S,renderValue:V,SelectDisplayProps:(0,s.Z)({id:d},f)},u,{classes:u?(0,v.Z)(x,u.classes):x},A?A.props.inputProps:{})},p&&G&&"outlined"===Y?{notched:!0}:{},{ref:N,className:(0,W.Z)(F.props.className,a,w.root)},!A&&{variant:Y},k))})}));$C.muiName="Select";var ei=$C;function gi(e){return(0,Re.Z)("MuiTextField",e)}(0,ve.Z)("MuiTextField",["root"]);const ti=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],ni={standard:ia,filled:ba,outlined:va},li=(0,I.ZP)(Qa,{name:"MuiTextField",slot:"Root",overridesResolver:(e,g)=>g.root})({}),Ii=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiTextField"}),{autoComplete:n,autoFocus:l=!1,children:I,className:o,color:a="primary",defaultValue:C,disabled:i=!1,error:r=!1,FormHelperTextProps:d,fullWidth:A=!1,helperText:u,id:b,InputLabelProps:Z,inputProps:h,InputProps:p,inputRef:G,label:y,maxRows:B,minRows:S,multiline:V=!1,name:f,onBlur:v,onChange:R,onFocus:k,placeholder:X,required:J=!1,rows:Y,select:H=!1,SelectProps:w,type:x,value:N,variant:K="outlined"}=t,z=(0,c.Z)(t,ti),M=(0,s.Z)({},t,{autoFocus:l,color:a,disabled:i,error:r,fullWidth:A,multiline:V,required:J,select:H,variant:K}),E=(e=>{const{classes:g}=e;return(0,F.Z)({root:["root"]},gi,g)})(M),L={};"outlined"===K&&(Z&&void 0!==Z.shrink&&(L.notched=Z.shrink),L.label=y),H&&(w&&w.native||(L.id=void 0),L["aria-describedby"]=void 0);const U=(0,Fo.Z)(b),Q=u&&U?`${U}-helper-text`:void 0,T=y&&U?`${U}-label`:void 0,D=ni[K],j=(0,m.jsx)(D,(0,s.Z)({"aria-describedby":Q,autoComplete:n,autoFocus:l,defaultValue:C,fullWidth:A,multiline:V,name:f,rows:Y,maxRows:B,minRows:S,type:x,value:N,id:U,inputRef:G,onBlur:v,onChange:R,onFocus:k,placeholder:X,inputProps:h},L,p));return(0,m.jsxs)(li,(0,s.Z)({className:(0,W.Z)(E.root,o),disabled:i,error:r,fullWidth:A,ref:g,required:J,color:a,variant:K,ownerState:M},z,{children:[null!=y&&""!==y&&(0,m.jsx)(Ka,(0,s.Z)({htmlFor:U,id:T},Z,{children:y})),H?(0,m.jsx)(ei,(0,s.Z)({"aria-describedby":Q,id:U,labelId:T,value:N,input:j},w,{children:I})):j,u&&(0,m.jsx)(qa,(0,s.Z)({id:Q},d,{children:u}))]}))}));var oi=Ii,ai=g.createContext();function Ci(e){return(0,Re.Z)("MuiGrid",e)}const ii=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],ri=(0,ve.Z)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map((e=>`spacing-xs-${e}`)),...["column-reverse","column","row-reverse","row"].map((e=>`direction-xs-${e}`)),...["nowrap","wrap-reverse","wrap"].map((e=>`wrap-xs-${e}`)),...ii.map((e=>`grid-xs-${e}`)),...ii.map((e=>`grid-sm-${e}`)),...ii.map((e=>`grid-md-${e}`)),...ii.map((e=>`grid-lg-${e}`)),...ii.map((e=>`grid-xl-${e}`))]);var si=ri;const ci=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function di(e){const g=parseFloat(e);return`${g}${String(e).replace(String(g),"")||"px"}`}function Ai({breakpoints:e,values:g}){let t="";Object.keys(g).forEach((e=>{""===t&&0!==g[e]&&(t=e)}));const n=Object.keys(e).sort(((g,t)=>e[g]-e[t]));return n.slice(0,n.indexOf(t))}const ui=(0,I.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e,{container:n,direction:l,item:I,spacing:o,wrap:a,zeroMinWidth:C,breakpoints:i}=t;let r=[];n&&(r=function(e,g,t={}){if(!e||e<=0)return[];if("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e)return[t[`spacing-xs-${String(e)}`]];const n=[];return g.forEach((g=>{const l=e[g];Number(l)>0&&n.push(t[`spacing-${g}-${String(l)}`])})),n}(o,i,g));const s=[];return i.forEach((e=>{const n=t[e];n&&s.push(g[`grid-${e}-${String(n)}`])})),[g.root,n&&g.container,I&&g.item,C&&g.zeroMinWidth,...r,"row"!==l&&g[`direction-xs-${String(l)}`],"wrap"!==a&&g[`wrap-xs-${String(a)}`],...s]}})((({ownerState:e})=>(0,s.Z)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"wrap"!==e.wrap&&{flexWrap:e.wrap})),(function({theme:e,ownerState:g}){const t=(0,po.P$)({values:g.direction,breakpoints:e.breakpoints.values});return(0,po.k9)({theme:e},t,(e=>{const g={flexDirection:e};return 0===e.indexOf("column")&&(g[`& > .${si.item}`]={maxWidth:"none"}),g}))}),(function({theme:e,ownerState:g}){const{container:t,rowSpacing:n}=g;let l={};if(t&&0!==n){const g=(0,po.P$)({values:n,breakpoints:e.breakpoints.values});let t;"object"==typeof g&&(t=Ai({breakpoints:e.breakpoints.values,values:g})),l=(0,po.k9)({theme:e},g,((g,n)=>{var l;const I=e.spacing(g);return"0px"!==I?{marginTop:`-${di(I)}`,[`& > .${si.item}`]:{paddingTop:di(I)}}:null!=(l=t)&&l.includes(n)?{}:{marginTop:0,[`& > .${si.item}`]:{paddingTop:0}}}))}return l}),(function({theme:e,ownerState:g}){const{container:t,columnSpacing:n}=g;let l={};if(t&&0!==n){const g=(0,po.P$)({values:n,breakpoints:e.breakpoints.values});let t;"object"==typeof g&&(t=Ai({breakpoints:e.breakpoints.values,values:g})),l=(0,po.k9)({theme:e},g,((g,n)=>{var l;const I=e.spacing(g);return"0px"!==I?{width:`calc(100% + ${di(I)})`,marginLeft:`-${di(I)}`,[`& > .${si.item}`]:{paddingLeft:di(I)}}:null!=(l=t)&&l.includes(n)?{}:{width:"100%",marginLeft:0,[`& > .${si.item}`]:{paddingLeft:0}}}))}return l}),(function({theme:e,ownerState:g}){let t;return e.breakpoints.keys.reduce(((n,l)=>{let I={};if(g[l]&&(t=g[l]),!t)return n;if(!0===t)I={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)I={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=(0,po.P$)({values:g.columns,breakpoints:e.breakpoints.values}),a="object"==typeof o?o[l]:o;if(null==a)return n;const C=Math.round(t/a*1e8)/1e6+"%";let i={};if(g.container&&g.item&&0!==g.columnSpacing){const t=e.spacing(g.columnSpacing);if("0px"!==t){const e=`calc(${C} + ${di(t)})`;i={flexBasis:e,maxWidth:e}}}I=(0,s.Z)({flexBasis:C,flexGrow:0,maxWidth:C},i)}return 0===e.breakpoints.values[l]?Object.assign(n,I):n[e.breakpoints.up(l)]=I,n}),{})})),mi=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiGrid"}),{breakpoints:l}=i(),I=X(n),{className:o,columns:a,columnSpacing:C,component:r="div",container:d=!1,direction:A="row",item:u=!1,rowSpacing:b,spacing:Z=0,wrap:h="wrap",zeroMinWidth:p=!1}=I,G=(0,c.Z)(I,ci),y=b||Z,B=C||Z,S=g.useContext(ai),V=d?a||12:S,f={},v=(0,s.Z)({},G);l.keys.forEach((e=>{null!=G[e]&&(f[e]=G[e],delete v[e])}));const R=(0,s.Z)({},I,{columns:V,container:d,direction:A,item:u,rowSpacing:y,columnSpacing:B,wrap:h,zeroMinWidth:p,spacing:Z},f,{breakpoints:l.keys}),k=(e=>{const{classes:g,container:t,direction:n,item:l,spacing:I,wrap:o,zeroMinWidth:a,breakpoints:C}=e;let i=[];t&&(i=function(e,g){if(!e||e<=0)return[];if("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e)return[`spacing-xs-${String(e)}`];const t=[];return g.forEach((g=>{const n=e[g];if(Number(n)>0){const e=`spacing-${g}-${String(n)}`;t.push(e)}})),t}(I,C));const r=[];C.forEach((g=>{const t=e[g];t&&r.push(`grid-${g}-${String(t)}`)}));const s={root:["root",t&&"container",l&&"item",a&&"zeroMinWidth",...i,"row"!==n&&`direction-xs-${String(n)}`,"wrap"!==o&&`wrap-xs-${String(o)}`,...r]};return(0,F.Z)(s,Ci,g)})(R);return(0,m.jsx)(ai.Provider,{value:V,children:(0,m.jsx)(ui,(0,s.Z)({ownerState:R,className:(0,W.Z)(k.root,o),as:r,ref:t},v))})}));var bi,Zi=mi,hi=l(5697),pi=l.n(hi);function Gi(e,g){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&g.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)g.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(t[n[l]]=e[n[l]])}return t}function yi(){}function Bi(e){return!!(e||"").match(/\d/)}function Si(e){return null==e}function Wi(e){return Si(e)||function(e){return"number"==typeof e&&isNaN(e)}(e)||"number"==typeof e&&!isFinite(e)}function Vi(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function fi(e,g){void 0===g&&(g=!0);var t="-"===e[0],n=t&&g,l=(e=e.replace("-","")).split(".");return{beforeDecimal:l[0],afterDecimal:l[1]||"",hasNegation:t,addNegation:n}}function vi(e,g,t){for(var n="",l=t?"0":"",I=0;I<=g-1;I++)n+=e[I]||l;return n}function Ri(e,g){return Array(g+1).join(e)}function ki(e){var g=e+"",t="-"===g[0]?"-":"";t&&(g=g.substring(1));var n=g.split(/[eE]/g),l=n[0],I=n[1];if(!(I=Number(I)))return t+l;var o=1+I,a=(l=l.replace(".","")).length;return o<0?l="0."+Ri("0",Math.abs(o))+l:o>=a?l+=Ri("0",o-a):l=(l.substring(0,o)||"0")+"."+l.substring(o),t+l}function Xi(e,g,t){if(-1!==["","-"].indexOf(e))return e;var n=(-1!==e.indexOf(".")||t)&&g,l=fi(e),I=l.beforeDecimal,o=l.afterDecimal,a=l.hasNegation,C=parseFloat("0."+(o||"0")),i=(o.length<=g?"0."+o:C.toFixed(g)).split(".");return(a?"-":"")+I.split("").reverse().reduce((function(e,g,t){return e.length>t?(Number(e[0])+Number(g)).toString()+e.substring(1,e.length):g+e}),i[0])+(n?".":"")+vi(i[1]||"",g,t)}function Ji(e,g){if(e.value=e.value,null!==e){if(e.createTextRange){var t=e.createTextRange();return t.move("character",g),t.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(g,g),!0):(e.focus(),!1)}}!function(e){e.event="event",e.props="prop"}(bi||(bi={}));var Yi,Hi,wi,xi=(Yi=function(e,g){for(var t=0,n=0,l=e.length,I=g.length;e[t]===g[t]&&t<l;)t++;for(;e[l-1-n]===g[I-1-n]&&I-n>t&&l-n>t;)n++;return{from:{start:t,end:l-n},to:{start:t,end:I-n}}},wi=void 0,function(){for(var e=[],g=arguments.length;g--;)e[g]=arguments[g];return Hi&&e.length===Hi.length&&e.every((function(e,g){return e===Hi[g]}))?wi:(Hi=e,wi=Yi.apply(void 0,e))});function Fi(e){return Math.max(e.selectionStart,e.selectionEnd)}function Ni(e){var g=e.currentValue,t=e.formattedValue,n=e.currentValueIndex,l=e.formattedValueIndex;return g[n]===t[l]}function Ki(e,g,t,n){var l,I,o=e.length;if(l=g,0,I=o,g=Math.min(Math.max(l,0),I),"left"===n){for(;g>=0&&!t[g];)g--;-1===g&&(g=t.indexOf(!0))}else{for(;g<=o&&!t[g];)g++;g>o&&(g=t.lastIndexOf(!0))}return-1===g&&(g=o),g}function zi(e){for(var g=Array.from({length:e.length+1}).map((function(){return!0})),t=0,n=g.length;t<n;t++)g[t]=Boolean(Bi(e[t])||Bi(e[t-1]));return g}function Mi(e,t,n,l,I,o){void 0===o&&(o=yi);var a=function(e){var t=(0,g.useRef)(e);t.current=e;var n=(0,g.useRef)((function(){for(var e=[],g=arguments.length;g--;)e[g]=arguments[g];return t.current.apply(t,e)}));return n.current}((function(e,g){var t,n;return Wi(e)?(n="",t=""):"number"==typeof e||g?(n="number"==typeof e?ki(e):e,t=l(n)):(n=I(e,void 0),t=l(n)),{formattedValue:t,numAsString:n}})),C=(0,g.useState)((function(){return a(Si(e)?t:e,n)})),i=C[0],r=C[1],s=e,c=n;Si(e)&&(s=i.numAsString,c=!0);var d=a(s,c);return(0,g.useMemo)((function(){r(d)}),[d.formattedValue]),[i,function(e,g){e.formattedValue!==i.formattedValue&&r({formattedValue:e.formattedValue,numAsString:e.value}),o(e,g)}]}function Ei(e){return e.replace(/[^0-9]/g,"")}function Li(e){return e}function Ui(e){var t=e.type;void 0===t&&(t="text");var n=e.displayType;void 0===n&&(n="input");var l=e.customInput,I=e.renderText,o=e.getInputRef,a=e.format;void 0===a&&(a=Li);var C=e.removeFormatting;void 0===C&&(C=Ei);var i=e.defaultValue,r=e.valueIsNumericString,s=e.onValueChange,c=e.isAllowed,d=e.onChange;void 0===d&&(d=yi);var A=e.onKeyDown;void 0===A&&(A=yi);var u=e.onMouseUp;void 0===u&&(u=yi);var m=e.onFocus;void 0===m&&(m=yi);var b=e.onBlur;void 0===b&&(b=yi);var Z=e.value,h=e.getCaretBoundary;void 0===h&&(h=zi);var p=e.isValidInputCharacter;void 0===p&&(p=Bi);var G=e.isCharacterSame,y=Gi(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),B=Mi(Z,i,Boolean(r),a,C,s),S=B[0],W=S.formattedValue,V=S.numAsString,f=B[1],v=(0,g.useRef)({formattedValue:W,numAsString:V}),R=function(e,g){v.current={formattedValue:e.formattedValue,numAsString:e.value},f(e,g)},k=(0,g.useState)(!1),X=k[0],J=k[1],Y=(0,g.useRef)(null),H=(0,g.useRef)({setCaretTimeout:null,focusTimeout:null});(0,g.useEffect)((function(){return J(!0),function(){clearTimeout(H.current.setCaretTimeout),clearTimeout(H.current.focusTimeout)}}),[]);var w=a,x=function(e,g){var t=parseFloat(g);return{formattedValue:e,value:g,floatValue:isNaN(t)?void 0:t}},F=function(e,g,t){0===e.selectionStart&&e.selectionEnd===e.value.length||(Ji(e,g),H.current.setCaretTimeout=setTimeout((function(){e.value===t&&e.selectionStart!==e.selectionEnd&&Ji(e,g)}),0))},N=function(e,g,t){return Ki(e,g,h(e),t)},K=function(e,g,t){var n=h(g),l=function(e,g,t,n,l,I,o){void 0===o&&(o=Ni);var a=l.findIndex((function(e){return e})),C=e.slice(0,a);g||t.startsWith(C)||(g=C,t=C+t,n+=C.length);for(var i=t.length,r=e.length,s={},c=new Array(i),d=0;d<i;d++){c[d]=-1;for(var A=0,u=r;A<u;A++)if(o({currentValue:t,lastValue:g,formattedValue:e,currentValueIndex:d,formattedValueIndex:A})&&!0!==s[A]){c[d]=A,s[A]=!0;break}}for(var m=n;m<i&&(-1===c[m]||!I(t[m]));)m++;var b=m===i||-1===c[m]?r:c[m];for(m=n-1;m>0&&-1===c[m];)m--;var Z=-1===m||-1===c[m]?0:c[m]+1;return Z>b?b:n-Z<b-n?Z:b}(g,W,e,t,n,p,G);return Ki(g,l,n)};(0,g.useEffect)((function(){var e=v.current,g=e.formattedValue,t=e.numAsString;W===g||W===V&&g===t||R(x(W,V),{event:void 0,source:bi.props})}),[W,V]);var z=Y.current?Fi(Y.current):void 0;("undefined"!=typeof window?g.useLayoutEffect:g.useEffect)((function(){var e=Y.current;if(W!==v.current.formattedValue&&e){var g=K(v.current.formattedValue,W,z);e.value=W,F(e,g,W)}}),[W]);var M=!X||"undefined"==typeof navigator||navigator.platform&&/iPhone|iPod/.test(navigator.platform)?void 0:"numeric",E=Object.assign({inputMode:M},y,{type:t,value:W,onChange:function(e){(function(e,g,t){var n=xi(W,e),l=Object.assign(Object.assign({},n),{lastValue:W}),I=C(e,l),o=w(I);if(I=C(o,void 0),c&&!c(x(o,I))){var a=g.target,i=Fi(a),r=K(e,W,i);return a.value=W,F(a,r,W),!1}return function(e){var g=e.formattedValue;void 0===g&&(g="");var t=e.input,n=e.setCaretPosition;void 0===n&&(n=!0);var l=e.source,I=e.event,o=e.numAsString,a=e.caretPos;if(t){if(void 0===a&&n){var C=e.inputValue||t.value,i=Fi(t);t.value=g,a=K(C,g,i)}t.value=g,n&&void 0!==a&&F(t,a,g)}g!==W&&R(x(g,o),{event:I,source:l})}({formattedValue:o,numAsString:I,inputValue:e,event:g,source:t,setCaretPosition:!0,input:g.target}),!0})(e.target.value,e,bi.event)&&d(e)},onKeyDown:function(e){var g,t=e.target,n=e.key,l=t.selectionStart,I=t.selectionEnd,o=t.value;if(void 0===o&&(o=""),"ArrowLeft"===n||"Backspace"===n?g=Math.max(l-1,0):"ArrowRight"===n?g=Math.min(l+1,o.length):"Delete"===n&&(g=l),void 0!==g&&l===I){var a=g;"ArrowLeft"===n||"ArrowRight"===n?(a=N(o,g,"ArrowLeft"===n?"left":"right"))!==g&&e.preventDefault():"Delete"!==n||p(o[g])?"Backspace"!==n||p(o[g])||(a=N(o,g,"left")):a=N(o,g,"right"),a!==g&&F(t,a,o),e.isUnitTestRun&&F(t,a,o),A(e)}else A(e)},onMouseUp:function(e){var g=e.target,t=g.selectionStart,n=g.selectionEnd,l=g.value;if(void 0===l&&(l=""),t===n){var I=N(l,t);I!==t&&F(g,I,l)}u(e)},onFocus:function(e){e.persist&&e.persist();var g=e.target;Y.current=g,H.current.focusTimeout=setTimeout((function(){var t=g.selectionStart,n=g.selectionEnd,l=g.value;void 0===l&&(l="");var I=N(l,t);I===t||0===t&&n===l.length||F(g,I,l),m(e)}),0)},onBlur:function(e){Y.current=null,clearTimeout(H.current.focusTimeout),clearTimeout(H.current.setCaretTimeout),b(e)}});if("text"===n)return I?g.createElement(g.Fragment,null,I(W,y)||null):g.createElement("span",Object.assign({},y,{ref:o}),W);if(l){var L=l;return g.createElement(L,Object.assign({},E,{ref:o}))}return g.createElement("input",Object.assign({},E,{ref:o}))}function Qi(e,g){var t=g.decimalScale,n=g.fixedDecimalScale,l=g.prefix;void 0===l&&(l="");var I=g.suffix;void 0===I&&(I="");var o=g.allowNegative,a=g.thousandsGroupStyle;if(void 0===a&&(a="thousand"),""===e||"-"===e)return e;var C=Ti(g),i=C.thousandSeparator,r=C.decimalSeparator,s=0!==t&&-1!==e.indexOf(".")||t&&n,c=fi(e,o),d=c.beforeDecimal,A=c.afterDecimal,u=c.addNegation;return void 0!==t&&(A=vi(A,t,!!n)),i&&(d=function(e,g,t){var n=function(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;default:return/(\d)(?=(\d{3})+(?!\d))/g}}(t),l=e.search(/[1-9]/);return l=-1===l?e.length:l,e.substring(0,l)+e.substring(l,e.length).replace(n,"$1"+g)}(d,i,a)),l&&(d=l+d),I&&(A+=I),u&&(d="-"+d),d+(s&&r||"")+A}function Ti(e){var g=e.decimalSeparator;void 0===g&&(g=".");var t=e.thousandSeparator,n=e.allowedDecimalSeparators;return!0===t&&(t=","),n||(n=[g,"."]),{decimalSeparator:g,thousandSeparator:t,allowedDecimalSeparators:n}}function Di(e){e=function(e){var g=Ti(e),t=g.thousandSeparator,n=g.decimalSeparator,l=e.prefix;void 0===l&&(l="");var I=e.allowNegative;if(void 0===I&&(I=!0),t===n)throw new Error("\n        Decimal separator can't be same as thousand separator.\n        thousandSeparator: "+t+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n        decimalSeparator: '+n+" (default value for decimalSeparator is .)\n     ");return l.startsWith("-")&&I&&(console.error("\n      Prefix can't start with '-' when allowNegative is true.\n      prefix: "+l+"\n      allowNegative: "+I+"\n    "),I=!1),Object.assign(Object.assign({},e),{allowNegative:I})}(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var g=e.suffix,t=e.allowNegative,n=e.allowLeadingZeros,l=e.onKeyDown;void 0===l&&(l=yi);var I=e.onBlur;void 0===I&&(I=yi);var o=e.thousandSeparator,a=e.decimalScale,C=e.fixedDecimalScale,i=e.prefix;void 0===i&&(i="");var r=e.defaultValue,s=e.value,c=e.valueIsNumericString,d=e.onValueChange,A=Gi(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),u=Ti(e),m=u.decimalSeparator,b=u.allowedDecimalSeparators,Z=function(g){return Qi(g,e)},h=function(g,t){return function(e,g,t){var n;void 0===g&&(g=function(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}(e));var l=t.allowNegative,I=t.prefix;void 0===I&&(I="");var o=t.suffix;void 0===o&&(o="");var a=t.decimalScale,C=g.from,i=g.to,r=i.start,s=i.end,c=Ti(t),d=c.allowedDecimalSeparators,A=c.decimalSeparator,u=e[s]===A;if(Bi(e)&&(e===I||e===o)&&""===g.lastValue)return e;if(s-r==1&&-1!==d.indexOf(e[r])){var m=0===a?"":A;e=e.substring(0,r)+m+e.substring(r+1,e.length)}var b=function(e,g,t){var n=!1,l=!1;I.startsWith("-")?n=!1:e.startsWith("--")?(n=!1,l=!0):o.startsWith("-")&&e.length===o.length?n=!1:"-"===e[0]&&(n=!0);var a=n?1:0;return l&&(a=2),a&&(e=e.substring(a),g-=a,t-=a),{value:e,start:g,end:t,hasNegation:n}},Z=b(e,r,s),h=Z.hasNegation;e=(n=Z).value,r=n.start,s=n.end;var p=b(g.lastValue,C.start,C.end),G=p.start,y=p.end,B=p.value,S=e.substring(r,s);!(e.length&&B.length&&(G>B.length-o.length||y<I.length))||S&&o.startsWith(S)||(e=B);var W=0;e.startsWith(I)?W+=I.length:r<I.length&&(W=r),s-=W;var V=(e=e.substring(W)).length,f=e.length-o.length;e.endsWith(o)?V=f:(s>f||s>e.length-o.length)&&(V=s),e=e.substring(0,V),e=function(e,g){void 0===e&&(e="");var t=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),l=t.test(e),I=n.test(e);return e=e.replace(/-/g,""),l&&!I&&g&&(e="-"+e),e}(h?"-"+e:e,l),e=(e.match(function(e,g){return new RegExp("(^-)|[0-9]|"+Vi(e),"g")}(A))||[]).join("");var v=e.indexOf(A),R=fi(e=e.replace(new RegExp(Vi(A),"g"),(function(e,g){return g===v?".":""})),l),k=R.beforeDecimal,X=R.afterDecimal,J=R.addNegation;return i.end-i.start<C.end-C.start&&""===k&&u&&!parseFloat(X)&&(e=J?"-":""),e}(g,t,e)},p=Si(s)?r:s,G=null!=c?c:function(e,g,t){return""===e||!(null==g?void 0:g.match(/\d/))&&!(null==t?void 0:t.match(/\d/))&&"string"==typeof e&&!isNaN(Number(e))}(p,i,g);Si(s)?Si(r)||(G=G||"number"==typeof r):G=G||"number"==typeof s;var y=function(e){return Wi(e)?e:("number"==typeof e&&(e=ki(e)),G&&"number"==typeof a?Xi(e,a,Boolean(C)):e)},B=Mi(y(s),y(r),Boolean(G),Z,h,d),S=B[0],W=S.numAsString,V=S.formattedValue,f=B[1];return Object.assign(Object.assign({},A),{value:V,valueIsNumericString:!1,isValidInputCharacter:function(e){return e===m||Bi(e)},isCharacterSame:function(e){var g=e.currentValue,t=e.lastValue,n=e.formattedValue,l=e.currentValueIndex,I=e.formattedValueIndex,o=g[l],a=n[I],C=xi(t,g).to;return!!(l>=C.start&&l<C.end&&b&&b.includes(o)&&a===m)||o===a},onValueChange:f,format:Z,removeFormatting:h,getCaretBoundary:function(g){return function(e,g){var t=g.prefix;void 0===t&&(t="");var n=g.suffix;void 0===n&&(n="");var l=Array.from({length:e.length+1}).map((function(){return!0})),I="-"===e[0];l.fill(!1,0,t.length+(I?1:0));var o=e.length;return l.fill(!1,o-n.length+1,o+1),l}(g,e)},onKeyDown:function(e){var g=e.target,n=e.key,I=g.selectionStart,r=g.selectionEnd,s=g.value;if(void 0===s&&(s=""),I===r){"Backspace"===n&&"-"===s[0]&&I===i.length+1&&t&&Ji(g,1),a&&C&&("Backspace"===n&&s[I-1]===m?(Ji(g,I-1),e.preventDefault()):"Delete"===n&&s[I]===m&&e.preventDefault()),(null==b?void 0:b.includes(n))&&s[I]===m&&Ji(g,I+1);var c=!0===o?",":o;"Backspace"===n&&s[I-1]===c&&Ji(g,I-1),"Delete"===n&&s[I]===c&&Ji(g,I+1),l(e)}else l(e)},onBlur:function(g){var t=W;if(t.match(/\d/g)||(t=""),n||(t=function(e){if(!e)return e;var g="-"===e[0];g&&(e=e.substring(1,e.length));var t=e.split("."),n=t[0].replace(/^0+/,"")||"0",l=t[1]||"";return(g?"-":"")+n+(l?"."+l:"")}(t)),C&&a&&(t=Xi(t,a,C)),t!==W){var l=Qi(t,e);f({formattedValue:l,value:t,floatValue:parseFloat(t)},{event:g,source:bi.event})}I(g)}})}function ji(e){var t=Di(e);return g.createElement(Ui,Object.assign({},t))}var Pi=l(9032),Oi=l(9962),qi={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function _i(e,g){return e-g}function $i(e,g,t){return null==e?g:Math.min(Math.max(g,e),t)}function er(e,g){var t;const{index:n}=null!=(t=e.reduce(((e,t,n)=>{const l=Math.abs(g-t);return null===e||l<e.distance||l===e.distance?{distance:l,index:n}:e}),null))?t:{};return n}function gr(e,g){if(void 0!==g.current&&e.changedTouches){const t=e;for(let e=0;e<t.changedTouches.length;e+=1){const n=t.changedTouches[e];if(n.identifier===g.current)return{x:n.clientX,y:n.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function tr(e,g,t){return 100*(e-g)/(t-g)}function nr({values:e,newValue:g,index:t}){const n=e.slice();return n[t]=g,n.sort(_i)}function lr({sliderRef:e,activeIndex:g,setActive:t}){var n,l;const I=(0,Q.Z)(e.current);var o;null!=(n=e.current)&&n.contains(I.activeElement)&&Number(null==I||null==(l=I.activeElement)?void 0:l.getAttribute("data-index"))===g||null==(o=e.current)||o.querySelector(`[type="range"][data-index="${g}"]`).focus(),t&&t(g)}function Ir(e,g){return"number"==typeof e&&"number"==typeof g?e===g:"object"==typeof e&&"object"==typeof g&&function(e,g,t=((e,g)=>e===g)){return e.length===g.length&&e.every(((e,n)=>t(e,g[n])))}(e,g)}const or={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},ar=e=>e;let Cr;function ir(){return void 0===Cr&&(Cr="undefined"==typeof CSS||"function"!=typeof CSS.supports||CSS.supports("touch-action","none")),Cr}function rr(e){const{"aria-labelledby":t,defaultValue:n,disabled:l=!1,disableSwap:I=!1,isRtl:o=!1,marks:a=!1,max:C=100,min:i=0,name:r,onChange:c,onChangeCommitted:d,orientation:A="horizontal",rootRef:u,scale:m=ar,step:b=1,tabIndex:Z,value:h}=e,p=g.useRef(),[G,y]=g.useState(-1),[B,S]=g.useState(-1),[W,V]=g.useState(!1),f=g.useRef(0),[v,R]=(0,Pi.Z)({controlled:h,default:null!=n?n:i,name:"Slider"}),k=c&&((e,g,t)=>{const n=e.nativeEvent||e,l=new n.constructor(n.type,n);Object.defineProperty(l,"target",{writable:!0,value:{value:g,name:r}}),c(l,g,t)}),X=Array.isArray(v);let J=X?v.slice().sort(_i):[v];J=J.map((e=>$i(e,i,C)));const Y=!0===a&&null!==b?[...Array(Math.floor((C-i)/b)+1)].map(((e,g)=>({value:i+b*g}))):a||[],H=Y.map((e=>e.value)),{isFocusVisibleRef:w,onBlur:x,onFocus:F,ref:K}=(0,Oi.Z)(),[z,M]=g.useState(-1),E=g.useRef(),L=(0,N.Z)(K,E),U=(0,N.Z)(u,L),D=e=>g=>{var t;const n=Number(g.currentTarget.getAttribute("data-index"));F(g),!0===w.current&&M(n),S(n),null==e||null==(t=e.onFocus)||t.call(e,g)},j=e=>g=>{var t;x(g),!1===w.current&&M(-1),S(-1),null==e||null==(t=e.onBlur)||t.call(e,g)};(0,oe.Z)((()=>{var e;l&&E.current.contains(document.activeElement)&&(null==(e=document.activeElement)||e.blur())}),[l]),l&&-1!==G&&y(-1),l&&-1!==z&&M(-1);const P=e=>g=>{var t;null==(t=e.onChange)||t.call(e,g);const n=Number(g.currentTarget.getAttribute("data-index")),l=J[n],o=H.indexOf(l);let a=g.target.valueAsNumber;if(Y&&null==b){const e=H[H.length-1];a=a>e?e:a<H[0]?H[0]:a<l?H[o-1]:H[o+1]}if(a=$i(a,i,C),X){I&&(a=$i(a,J[n-1]||-1/0,J[n+1]||1/0));const e=a;a=nr({values:J,newValue:a,index:n});let g=n;I||(g=a.indexOf(e)),lr({sliderRef:E,activeIndex:g})}R(a),M(n),k&&!Ir(a,v)&&k(g,a,n),d&&d(g,a)},O=g.useRef();let q=A;o&&"horizontal"===A&&(q+="-reverse");const _=({finger:e,move:g=!1})=>{const{current:t}=E,{width:n,height:l,bottom:o,left:a}=t.getBoundingClientRect();let r,s;if(r=0===q.indexOf("vertical")?(o-e.y)/l:(e.x-a)/n,-1!==q.indexOf("-reverse")&&(r=1-r),s=function(e,g,t){return(t-g)*e+g}(r,i,C),b)s=function(e,g,t){const n=Math.round((e-t)/g)*g+t;return Number(n.toFixed(function(e){if(Math.abs(e)<1){const g=e.toExponential().split("e-"),t=g[0].split(".")[1];return(t?t.length:0)+parseInt(g[1],10)}const g=e.toString().split(".")[1];return g?g.length:0}(g)))}(s,b,i);else{const e=er(H,s);s=H[e]}s=$i(s,i,C);let c=0;if(X){c=g?O.current:er(J,s),I&&(s=$i(s,J[c-1]||-1/0,J[c+1]||1/0));const e=s;s=nr({values:J,newValue:s,index:c}),I&&g||(c=s.indexOf(e),O.current=c)}return{newValue:s,activeIndex:c}},$=(0,T.Z)((e=>{const g=gr(e,p);if(!g)return;if(f.current+=1,"mousemove"===e.type&&0===e.buttons)return void ee(e);const{newValue:t,activeIndex:n}=_({finger:g,move:!0});lr({sliderRef:E,activeIndex:n,setActive:y}),R(t),!W&&f.current>2&&V(!0),k&&!Ir(t,v)&&k(e,t,n)})),ee=(0,T.Z)((e=>{const g=gr(e,p);if(V(!1),!g)return;const{newValue:t}=_({finger:g,move:!0});y(-1),"touchend"===e.type&&S(-1),d&&d(e,t),p.current=void 0,te()})),ge=(0,T.Z)((e=>{if(l)return;ir()||e.preventDefault();const g=e.changedTouches[0];null!=g&&(p.current=g.identifier);const t=gr(e,p);if(!1!==t){const{newValue:g,activeIndex:n}=_({finger:t});lr({sliderRef:E,activeIndex:n,setActive:y}),R(g),k&&!Ir(g,v)&&k(e,g,n)}f.current=0;const n=(0,Q.Z)(E.current);n.addEventListener("touchmove",$),n.addEventListener("touchend",ee)})),te=g.useCallback((()=>{const e=(0,Q.Z)(E.current);e.removeEventListener("mousemove",$),e.removeEventListener("mouseup",ee),e.removeEventListener("touchmove",$),e.removeEventListener("touchend",ee)}),[ee,$]);g.useEffect((()=>{const{current:e}=E;return e.addEventListener("touchstart",ge,{passive:ir()}),()=>{e.removeEventListener("touchstart",ge,{passive:ir()}),te()}}),[te,ge]),g.useEffect((()=>{l&&te()}),[l,te]);const ne=e=>g=>{var t;if(null==(t=e.onMouseDown)||t.call(e,g),l)return;if(g.defaultPrevented)return;if(0!==g.button)return;g.preventDefault();const n=gr(g,p);if(!1!==n){const{newValue:e,activeIndex:t}=_({finger:n});lr({sliderRef:E,activeIndex:t,setActive:y}),R(e),k&&!Ir(e,v)&&k(g,e,t)}f.current=0;const I=(0,Q.Z)(E.current);I.addEventListener("mousemove",$),I.addEventListener("mouseup",ee)},le=tr(X?J[0]:i,i,C),Ie=tr(J[J.length-1],i,C)-le,ae=e=>g=>{var t;null==(t=e.onMouseOver)||t.call(e,g);const n=Number(g.currentTarget.getAttribute("data-index"));S(n)},Ce=e=>g=>{var t;null==(t=e.onMouseLeave)||t.call(e,g),S(-1)};return{active:G,axis:q,axisProps:or,dragging:W,focusedThumbIndex:z,getHiddenInputProps:(g={})=>{var n;const I={onChange:P(g||{}),onFocus:D(g||{}),onBlur:j(g||{})},a=(0,s.Z)({},g,I);return(0,s.Z)({tabIndex:Z,"aria-labelledby":t,"aria-orientation":A,"aria-valuemax":m(C),"aria-valuemin":m(i),name:r,type:"range",min:e.min,max:e.max,step:null===e.step&&e.marks?"any":null!=(n=e.step)?n:void 0,disabled:l},a,{style:(0,s.Z)({},qi,{direction:o?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:(e={})=>{const g={onMouseDown:ne(e||{})},t=(0,s.Z)({},e,g);return(0,s.Z)({ref:U},t)},getThumbProps:(e={})=>{const g={onMouseOver:ae(e||{}),onMouseLeave:Ce(e||{})};return(0,s.Z)({},e,g)},marks:Y,open:B,range:X,rootRef:U,trackLeap:Ie,trackOffset:le,values:J,getThumbStyle:e=>({pointerEvents:-1!==G&&G!==e?"none":void 0})}}function sr(e){return(0,Re.Z)("MuiSlider",e)}var cr=(0,ve.Z)("MuiSlider",["root","active","colorPrimary","colorSecondary","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]);const dr=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function Ar(e){return e}const ur=(0,I.ZP)("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[`color${(0,_e.Z)(t.color)}`],"medium"!==t.size&&g[`size${(0,_e.Z)(t.size)}`],t.marked&&g.marked,"vertical"===t.orientation&&g.vertical,"inverted"===t.track&&g.trackInverted,!1===t.track&&g.trackFalse]}})((({theme:e,ownerState:g})=>(0,s.Z)({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[g.color].main,WebkitTapHighlightColor:"transparent"},"horizontal"===g.orientation&&(0,s.Z)({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},"small"===g.size&&{height:2},g.marked&&{marginBottom:20}),"vertical"===g.orientation&&(0,s.Z)({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},"small"===g.size&&{width:2},g.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${cr.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${cr.dragging}`]:{[`& .${cr.thumb}, & .${cr.track}`]:{transition:"none"}}}))),mr=(0,I.ZP)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,g)=>g.rail})((({ownerState:e})=>(0,s.Z)({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},"horizontal"===e.orientation&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},"vertical"===e.orientation&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},"inverted"===e.track&&{opacity:1}))),br=(0,I.ZP)("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,g)=>g.track})((({theme:e,ownerState:g})=>{const t="light"===e.palette.mode?(0,Te.$n)(e.palette[g.color].main,.62):(0,Te._j)(e.palette[g.color].main,.5);return(0,s.Z)({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},"small"===g.size&&{border:"none"},"horizontal"===g.orientation&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},"vertical"===g.orientation&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},!1===g.track&&{display:"none"},"inverted"===g.track&&{backgroundColor:e.vars?e.vars.palette.Slider[`${g.color}Track`]:t,borderColor:e.vars?e.vars.palette.Slider[`${g.color}Track`]:t})})),Zr=(0,I.ZP)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.thumb,g[`thumbColor${(0,_e.Z)(t.color)}`],"medium"!==t.size&&g[`thumbSize${(0,_e.Z)(t.size)}`]]}})((({theme:e,ownerState:g})=>(0,s.Z)({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},"small"===g.size&&{width:12,height:12},"horizontal"===g.orientation&&{top:"50%",transform:"translate(-50%, -50%)"},"vertical"===g.orientation&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":(0,s.Z)({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},"small"===g.size&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${cr.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / 0.16)`:(0,Te.Fq)(e.palette[g.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${cr.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / 0.16)`:(0,Te.Fq)(e.palette[g.color].main,.16)}`},[`&.${cr.disabled}`]:{"&:hover":{boxShadow:"none"}}}))),hr=(0,I.ZP)((function(e){const{children:t,className:n,value:l}=e,I=(e=>{const{open:g}=e;return{offset:(0,W.Z)(g&&cr.valueLabelOpen),circle:cr.valueLabelCircle,label:cr.valueLabelLabel}})(e);return t?g.cloneElement(t,{className:(0,W.Z)(t.props.className)},(0,m.jsxs)(g.Fragment,{children:[t.props.children,(0,m.jsx)("span",{className:(0,W.Z)(I.offset,n),"aria-hidden":!0,children:(0,m.jsx)("span",{className:I.circle,children:(0,m.jsx)("span",{className:I.label,children:l})})})]})):null}),{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,g)=>g.valueLabel})((({theme:e,ownerState:g})=>(0,s.Z)({[`&.${cr.valueLabelOpen}`]:{transform:("vertical"===g.orientation?"translateY(-50%)":"translateY(-100%)")+" scale(1)"},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:("vertical"===g.orientation?"translateY(-50%)":"translateY(-100%)")+" scale(0)",position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},"horizontal"===g.orientation&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},"vertical"===g.orientation&&{right:"small"===g.size?"20px":"30px",top:"50%",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},"small"===g.size&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"}))),pr=(0,I.ZP)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>(0,I.Dz)(e)&&"markActive"!==e,overridesResolver:(e,g)=>{const{markActive:t}=e;return[g.mark,t&&g.markActive]}})((({theme:e,ownerState:g,markActive:t})=>(0,s.Z)({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},"horizontal"===g.orientation&&{top:"50%",transform:"translate(-1px, -50%)"},"vertical"===g.orientation&&{left:"50%",transform:"translate(-50%, 1px)"},t&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8}))),Gr=(0,I.ZP)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>(0,I.Dz)(e)&&"markLabelActive"!==e,overridesResolver:(e,g)=>g.markLabel})((({theme:e,ownerState:g,markLabelActive:t})=>(0,s.Z)({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},"horizontal"===g.orientation&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},"vertical"===g.orientation&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},t&&{color:(e.vars||e).palette.text.primary}))),yr=({children:e})=>e,Br=g.forwardRef((function(e,t){var n,l,I,o,a,C,r,d,A,u,b,Z,h,p,G,y,B,S,V,f,v,R,k,X;const J=(0,ie.Z)({props:e,name:"MuiSlider"}),Y="rtl"===i().direction,{"aria-label":H,"aria-valuetext":w,"aria-labelledby":x,component:N="span",components:z={},componentsProps:M={},color:E="primary",classes:L,className:Q,disableSwap:T=!1,disabled:D=!1,getAriaLabel:j,getAriaValueText:P,marks:O=!1,max:q=100,min:_=0,orientation:$="horizontal",size:ee="medium",step:ge=1,scale:te=Ar,slotProps:ne,slots:le,track:Ie="normal",valueLabelDisplay:oe="off",valueLabelFormat:ae=Ar}=J,Ce=(0,c.Z)(J,dr),re=(0,s.Z)({},J,{isRtl:Y,max:q,min:_,classes:L,disabled:D,disableSwap:T,orientation:$,marks:O,color:E,size:ee,step:ge,scale:te,track:Ie,valueLabelDisplay:oe,valueLabelFormat:ae}),{axisProps:se,getRootProps:ce,getHiddenInputProps:de,getThumbProps:Ae,open:ue,active:me,axis:be,focusedThumbIndex:Ze,range:he,dragging:pe,marks:Ge,values:ye,trackOffset:Be,trackLeap:Se,getThumbStyle:We}=rr((0,s.Z)({},re,{rootRef:t}));re.marked=Ge.length>0&&Ge.some((e=>e.label)),re.dragging=pe,re.focusedThumbIndex=Ze;const Ve=(e=>{const{disabled:g,dragging:t,marked:n,orientation:l,track:I,classes:o,color:a,size:C}=e,i={root:["root",g&&"disabled",t&&"dragging",n&&"marked","vertical"===l&&"vertical","inverted"===I&&"trackInverted",!1===I&&"trackFalse",a&&`color${(0,_e.Z)(a)}`,C&&`size${(0,_e.Z)(C)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",g&&"disabled",C&&`thumbSize${(0,_e.Z)(C)}`,a&&`thumbColor${(0,_e.Z)(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,F.Z)(i,sr,o)})(re),fe=null!=(n=null!=(l=null==le?void 0:le.root)?l:z.Root)?n:ur,ve=null!=(I=null!=(o=null==le?void 0:le.rail)?o:z.Rail)?I:mr,Re=null!=(a=null!=(C=null==le?void 0:le.track)?C:z.Track)?a:br,ke=null!=(r=null!=(d=null==le?void 0:le.thumb)?d:z.Thumb)?r:Zr,Xe=null!=(A=null!=(u=null==le?void 0:le.valueLabel)?u:z.ValueLabel)?A:hr,Je=null!=(b=null!=(Z=null==le?void 0:le.mark)?Z:z.Mark)?b:pr,Ye=null!=(h=null!=(p=null==le?void 0:le.markLabel)?p:z.MarkLabel)?h:Gr,He=null!=(G=null!=(y=null==le?void 0:le.input)?y:z.Input)?G:"input",we=null!=(B=null==ne?void 0:ne.root)?B:M.root,xe=null!=(S=null==ne?void 0:ne.rail)?S:M.rail,Fe=null!=(V=null==ne?void 0:ne.track)?V:M.track,Ne=null!=(f=null==ne?void 0:ne.thumb)?f:M.thumb,Ke=null!=(v=null==ne?void 0:ne.valueLabel)?v:M.valueLabel,ze=null!=(R=null==ne?void 0:ne.mark)?R:M.mark,Me=null!=(k=null==ne?void 0:ne.markLabel)?k:M.markLabel,Ee=null!=(X=null==ne?void 0:ne.input)?X:M.input,Le=U({elementType:fe,getSlotProps:ce,externalSlotProps:we,externalForwardedProps:Ce,additionalProps:(0,s.Z)({},(qe=fe,(!qe||!K(qe))&&{as:N})),ownerState:(0,s.Z)({},re,null==we?void 0:we.ownerState),className:[Ve.root,Q]}),Ue=U({elementType:ve,externalSlotProps:xe,ownerState:re,className:Ve.rail}),Qe=U({elementType:Re,externalSlotProps:Fe,additionalProps:{style:(0,s.Z)({},se[be].offset(Be),se[be].leap(Se))},ownerState:(0,s.Z)({},re,null==Fe?void 0:Fe.ownerState),className:Ve.track}),Te=U({elementType:ke,getSlotProps:Ae,externalSlotProps:Ne,ownerState:(0,s.Z)({},re,null==Ne?void 0:Ne.ownerState),className:Ve.thumb}),De=U({elementType:Xe,externalSlotProps:Ke,ownerState:(0,s.Z)({},re,null==Ke?void 0:Ke.ownerState),className:Ve.valueLabel}),je=U({elementType:Je,externalSlotProps:ze,ownerState:re,className:Ve.mark}),Pe=U({elementType:Ye,externalSlotProps:Me,ownerState:re,className:Ve.markLabel}),Oe=U({elementType:He,getSlotProps:de,externalSlotProps:Ee,ownerState:re});var qe;return(0,m.jsxs)(fe,(0,s.Z)({},Le,{children:[(0,m.jsx)(ve,(0,s.Z)({},Ue)),(0,m.jsx)(Re,(0,s.Z)({},Qe)),Ge.filter((e=>e.value>=_&&e.value<=q)).map(((e,t)=>{const n=tr(e.value,_,q),l=se[be].offset(n);let I;return I=!1===Ie?-1!==ye.indexOf(e.value):"normal"===Ie&&(he?e.value>=ye[0]&&e.value<=ye[ye.length-1]:e.value<=ye[0])||"inverted"===Ie&&(he?e.value<=ye[0]||e.value>=ye[ye.length-1]:e.value>=ye[0]),(0,m.jsxs)(g.Fragment,{children:[(0,m.jsx)(Je,(0,s.Z)({"data-index":t},je,!K(Je)&&{markActive:I},{style:(0,s.Z)({},l,je.style),className:(0,W.Z)(je.className,I&&Ve.markActive)})),null!=e.label?(0,m.jsx)(Ye,(0,s.Z)({"aria-hidden":!0,"data-index":t},Pe,!K(Ye)&&{markLabelActive:I},{style:(0,s.Z)({},l,Pe.style),className:(0,W.Z)(Ve.markLabel,Pe.className,I&&Ve.markLabelActive),children:e.label})):null]},t)})),ye.map(((e,g)=>{const t=tr(e,_,q),n=se[be].offset(t),l="off"===oe?yr:Xe;return(0,m.jsx)(l,(0,s.Z)({},!K(l)&&{valueLabelFormat:ae,valueLabelDisplay:oe,value:"function"==typeof ae?ae(te(e),g):ae,index:g,open:ue===g||me===g||"on"===oe,disabled:D},De,{children:(0,m.jsx)(ke,(0,s.Z)({"data-index":g},Te,{className:(0,W.Z)(Ve.thumb,Te.className,me===g&&Ve.active,Ze===g&&Ve.focusVisible),style:(0,s.Z)({},n,We(g),Te.style),children:(0,m.jsx)(He,(0,s.Z)({"data-index":g,"aria-label":j?j(g):H,"aria-valuenow":te(e),"aria-labelledby":x,"aria-valuetext":P?P(te(e),g):w,value:ye[g]},Oe))}))}),g)}))]}))}));var Sr=Br;function Wr(e){return void 0!==e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function Vr(e,g){for(let t=0;t<e.length;t+=1)if(g(e[t]))return t;return-1}const fr=function(e={}){const{ignoreAccents:g=!0,ignoreCase:t=!0,limit:n,matchFrom:l="any",stringify:I,trim:o=!1}=e;return(e,{inputValue:a,getOptionLabel:C})=>{let i=o?a.trim():a;t&&(i=i.toLowerCase()),g&&(i=Wr(i));const r=i?e.filter((e=>{let n=(I||C)(e);return t&&(n=n.toLowerCase()),g&&(n=Wr(n)),"start"===l?0===n.indexOf(i):n.indexOf(i)>-1})):e;return"number"==typeof n?r.slice(0,n):r}}(),vr=e=>{var g;return null!==e.current&&(null==(g=e.current.parentElement)?void 0:g.contains(document.activeElement))};function Rr(e){const{unstable_isActiveElementInListbox:t=vr,unstable_classNamePrefix:n="Mui",autoComplete:l=!1,autoHighlight:I=!1,autoSelect:o=!1,blurOnSelect:a=!1,clearOnBlur:C=!e.freeSolo,clearOnEscape:i=!1,componentName:r="useAutocomplete",defaultValue:c=(e.multiple?[]:null),disableClearable:d=!1,disableCloseOnSelect:A=!1,disabled:u,disabledItemsFocusable:m=!1,disableListWrap:b=!1,filterOptions:Z=fr,filterSelectedOptions:h=!1,freeSolo:p=!1,getOptionDisabled:G,getOptionLabel:y=(e=>{var g;return null!=(g=e.label)?g:e}),groupBy:B,handleHomeEndKeys:S=!e.freeSolo,id:W,includeInputInList:V=!1,inputValue:f,isOptionEqualToValue:v=((e,g)=>e===g),multiple:R=!1,onChange:k,onClose:X,onHighlightChange:J,onInputChange:Y,onOpen:H,open:w,openOnFocus:x=!1,options:F,readOnly:N=!1,selectOnFocus:K=!e.freeSolo,value:z}=e,M=(0,Fo.Z)(W);let E=y;E=e=>{const g=y(e);return"string"!=typeof g?String(g):g};const L=g.useRef(!1),U=g.useRef(!0),Q=g.useRef(null),D=g.useRef(null),[j,P]=g.useState(null),[O,q]=g.useState(-1),_=I?0:-1,$=g.useRef(_),[ee,ge]=(0,Pi.Z)({controlled:z,default:c,name:r}),[te,ne]=(0,Pi.Z)({controlled:f,default:"",name:r,state:"inputValue"}),[le,Ie]=g.useState(!1),oe=g.useCallback(((e,g)=>{if(!(R?ee.length<g.length:null!==g)&&!C)return;let t;if(R)t="";else if(null==g)t="";else{const e=E(g);t="string"==typeof e?e:""}te!==t&&(ne(t),Y&&Y(e,t,"reset"))}),[E,te,R,Y,ne,C,ee]),[Ce,ie]=(0,Pi.Z)({controlled:w,default:!1,name:r,state:"open"}),[re,se]=g.useState(!0),ce=!R&&null!=ee&&te===E(ee),de=Ce&&!N,Ae=de?Z(F.filter((e=>!h||!(R?ee:[ee]).some((g=>null!==g&&v(e,g))))),{inputValue:ce&&re?"":te,getOptionLabel:E}):[],ue=(e=>{const t=g.useRef({});return g.useEffect((()=>{t.current=e})),t.current})({filteredOptions:Ae,value:ee,inputValue:te});g.useEffect((()=>{const e=ee!==ue.value;le&&!e||p&&!e||oe(null,ee)}),[ee,oe,le,ue.value,p]);const me=Ce&&Ae.length>0&&!N,be=(0,T.Z)((e=>{-1===e?Q.current.focus():j.querySelector(`[data-tag-index="${e}"]`).focus()}));g.useEffect((()=>{R&&O>ee.length-1&&(q(-1),be(-1))}),[ee,R,O,be]);const Ze=(0,T.Z)((({event:e,index:g,reason:t="auto"})=>{if($.current=g,-1===g?Q.current.removeAttribute("aria-activedescendant"):Q.current.setAttribute("aria-activedescendant",`${M}-option-${g}`),J&&J(e,-1===g?null:Ae[g],t),!D.current)return;const l=D.current.querySelector(`[role="option"].${n}-focused`);l&&(l.classList.remove(`${n}-focused`),l.classList.remove(`${n}-focusVisible`));let I=D.current;if("listbox"!==D.current.getAttribute("role")&&(I=D.current.parentElement.querySelector('[role="listbox"]')),!I)return;if(-1===g)return void(I.scrollTop=0);const o=D.current.querySelector(`[data-option-index="${g}"]`);if(o&&(o.classList.add(`${n}-focused`),"keyboard"===t&&o.classList.add(`${n}-focusVisible`),I.scrollHeight>I.clientHeight&&"mouse"!==t&&"touch"!==t)){const e=o,g=I.clientHeight+I.scrollTop,t=e.offsetTop+e.offsetHeight;t>g?I.scrollTop=t-I.clientHeight:e.offsetTop-e.offsetHeight*(B?1.3:0)<I.scrollTop&&(I.scrollTop=e.offsetTop-e.offsetHeight*(B?1.3:0))}})),he=(0,T.Z)((({event:e,diff:g,direction:t="next",reason:n="auto"})=>{if(!de)return;const I=function(e,g){if(!D.current||-1===e)return-1;let t=e;for(;;){if("next"===g&&t===Ae.length||"previous"===g&&-1===t)return-1;const e=D.current.querySelector(`[data-option-index="${t}"]`),n=!m&&(!e||e.disabled||"true"===e.getAttribute("aria-disabled"));if(!(e&&!e.hasAttribute("tabindex")||n))return t;t+="next"===g?1:-1}}((()=>{const e=Ae.length-1;if("reset"===g)return _;if("start"===g)return 0;if("end"===g)return e;const t=$.current+g;return t<0?-1===t&&V?-1:b&&-1!==$.current||Math.abs(g)>1?0:e:t>e?t===e+1&&V?-1:b||Math.abs(g)>1?e:0:t})(),t);if(Ze({index:I,reason:n,event:e}),l&&"reset"!==g)if(-1===I)Q.current.value=te;else{const e=E(Ae[I]);Q.current.value=e,0===e.toLowerCase().indexOf(te.toLowerCase())&&te.length>0&&Q.current.setSelectionRange(te.length,e.length)}})),pe=g.useCallback((()=>{if(!de)return;if((()=>{if(-1!==$.current&&ue.filteredOptions&&ue.filteredOptions.length!==Ae.length&&ue.inputValue===te&&(R?ee.length===ue.value.length&&ue.value.every(((e,g)=>E(ee[g])===E(e))):(e=ue.value,g=ee,(e?E(e):"")===(g?E(g):"")))){const e=ue.filteredOptions[$.current];if(e&&Ae.some((g=>E(g)===E(e))))return!0}var e,g;return!1})())return;const e=R?ee[0]:ee;if(0!==Ae.length&&null!=e){if(D.current)if(null==e)$.current>=Ae.length-1?Ze({index:Ae.length-1}):Ze({index:$.current});else{const g=Ae[$.current];if(R&&g&&-1!==Vr(ee,(e=>v(g,e))))return;const t=Vr(Ae,(g=>v(g,e)));-1===t?he({diff:"reset"}):Ze({index:t})}}else he({diff:"reset"})}),[Ae.length,!R&&ee,h,he,Ze,de,te,R]),Ge=(0,T.Z)((e=>{(0,ae.Z)(D,e),e&&pe()}));g.useEffect((()=>{pe()}),[pe]);const ye=e=>{Ce||(ie(!0),se(!0),H&&H(e))},Be=(e,g)=>{Ce&&(ie(!1),X&&X(e,g))},Se=(e,g,t,n)=>{if(R){if(ee.length===g.length&&ee.every(((e,t)=>e===g[t])))return}else if(ee===g)return;k&&k(e,g,t,n),ge(g)},We=g.useRef(!1),Ve=(e,g,t="selectOption",n="options")=>{let l=t,I=g;if(R){I=Array.isArray(ee)?ee.slice():[];const e=Vr(I,(e=>v(g,e)));-1===e?I.push(g):"freeSolo"!==n&&(I.splice(e,1),l="removeOption")}oe(e,I),Se(e,I,l,{option:g}),A||e&&(e.ctrlKey||e.metaKey)||Be(e,l),(!0===a||"touch"===a&&We.current||"mouse"===a&&!We.current)&&Q.current.blur()},fe=(e,g)=>{if(!R)return;""===te&&Be(e,"toggleInput");let t=O;-1===O?""===te&&"previous"===g&&(t=ee.length-1):(t+="next"===g?1:-1,t<0&&(t=0),t===ee.length&&(t=-1)),t=function(e,g){if(-1===e)return-1;let t=e;for(;;){if("next"===g&&t===ee.length||"previous"===g&&-1===t)return-1;const e=j.querySelector(`[data-tag-index="${t}"]`);if(e&&e.hasAttribute("tabindex")&&!e.disabled&&"true"!==e.getAttribute("aria-disabled"))return t;t+="next"===g?1:-1}}(t,g),q(t),be(t)},ve=e=>{L.current=!0,ne(""),Y&&Y(e,"","clear"),Se(e,R?[]:null,"clear")},Re=e=>g=>{if(e.onKeyDown&&e.onKeyDown(g),!g.defaultMuiPrevented&&(-1!==O&&-1===["ArrowLeft","ArrowRight"].indexOf(g.key)&&(q(-1),be(-1)),229!==g.which))switch(g.key){case"Home":de&&S&&(g.preventDefault(),he({diff:"start",direction:"next",reason:"keyboard",event:g}));break;case"End":de&&S&&(g.preventDefault(),he({diff:"end",direction:"previous",reason:"keyboard",event:g}));break;case"PageUp":g.preventDefault(),he({diff:-5,direction:"previous",reason:"keyboard",event:g}),ye(g);break;case"PageDown":g.preventDefault(),he({diff:5,direction:"next",reason:"keyboard",event:g}),ye(g);break;case"ArrowDown":g.preventDefault(),he({diff:1,direction:"next",reason:"keyboard",event:g}),ye(g);break;case"ArrowUp":g.preventDefault(),he({diff:-1,direction:"previous",reason:"keyboard",event:g}),ye(g);break;case"ArrowLeft":fe(g,"previous");break;case"ArrowRight":fe(g,"next");break;case"Enter":if(-1!==$.current&&de){const e=Ae[$.current],t=!!G&&G(e);if(g.preventDefault(),t)return;Ve(g,e,"selectOption"),l&&Q.current.setSelectionRange(Q.current.value.length,Q.current.value.length)}else p&&""!==te&&!1===ce&&(R&&g.preventDefault(),Ve(g,te,"createOption","freeSolo"));break;case"Escape":de?(g.preventDefault(),g.stopPropagation(),Be(g,"escape")):i&&(""!==te||R&&ee.length>0)&&(g.preventDefault(),g.stopPropagation(),ve(g));break;case"Backspace":if(R&&!N&&""===te&&ee.length>0){const e=-1===O?ee.length-1:O,t=ee.slice();t.splice(e,1),Se(g,t,"removeOption",{option:ee[e]})}break;case"Delete":if(R&&!N&&""===te&&ee.length>0&&-1!==O){const e=O,t=ee.slice();t.splice(e,1),Se(g,t,"removeOption",{option:ee[e]})}}},ke=e=>{Ie(!0),x&&!L.current&&ye(e)},Xe=e=>{t(D)?Q.current.focus():(Ie(!1),U.current=!0,L.current=!1,o&&-1!==$.current&&de?Ve(e,Ae[$.current],"blur"):o&&p&&""!==te?Ve(e,te,"blur","freeSolo"):C&&oe(e,ee),Be(e,"blur"))},Je=e=>{const g=e.target.value;te!==g&&(ne(g),se(!1),Y&&Y(e,g,"input")),""===g?d||R||Se(e,null,"clear"):ye(e)},Ye=e=>{const g=Number(e.currentTarget.getAttribute("data-option-index"));$.current!==g&&Ze({event:e,index:g,reason:"mouse"})},He=e=>{Ze({event:e,index:Number(e.currentTarget.getAttribute("data-option-index")),reason:"touch"}),We.current=!0},we=e=>{const g=Number(e.currentTarget.getAttribute("data-option-index"));Ve(e,Ae[g],"selectOption"),We.current=!1},xe=e=>g=>{const t=ee.slice();t.splice(e,1),Se(g,t,"removeOption",{option:ee[e]})},Fe=e=>{Ce?Be(e,"toggleInput"):ye(e)},Ne=e=>{e.currentTarget.contains(e.target)&&e.target.getAttribute("id")!==M&&e.preventDefault()},Ke=e=>{e.currentTarget.contains(e.target)&&(Q.current.focus(),K&&U.current&&Q.current.selectionEnd-Q.current.selectionStart==0&&Q.current.select(),U.current=!1)},ze=e=>{u||""!==te&&Ce||Fe(e)};let Me=p&&te.length>0;Me=Me||(R?ee.length>0:null!==ee);let Ee=Ae;return B&&(new Map,Ee=Ae.reduce(((e,g,t)=>{const n=B(g);return e.length>0&&e[e.length-1].group===n?e[e.length-1].options.push(g):e.push({key:t,index:t,group:n,options:[g]}),e}),[])),u&&le&&Xe(),{getRootProps:(e={})=>(0,s.Z)({"aria-owns":me?`${M}-listbox`:null},e,{onKeyDown:Re(e),onMouseDown:Ne,onClick:Ke}),getInputLabelProps:()=>({id:`${M}-label`,htmlFor:M}),getInputProps:()=>({id:M,value:te,onBlur:Xe,onFocus:ke,onChange:Je,onMouseDown:ze,"aria-activedescendant":de?"":null,"aria-autocomplete":l?"both":"list","aria-controls":me?`${M}-listbox`:void 0,"aria-expanded":me,autoComplete:"off",ref:Q,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:u}),getClearProps:()=>({tabIndex:-1,onClick:ve}),getPopupIndicatorProps:()=>({tabIndex:-1,onClick:Fe}),getTagProps:({index:e})=>(0,s.Z)({key:e,"data-tag-index":e,tabIndex:-1},!N&&{onDelete:xe(e)}),getListboxProps:()=>({role:"listbox",id:`${M}-listbox`,"aria-labelledby":`${M}-label`,ref:Ge,onMouseDown:e=>{e.preventDefault()}}),getOptionProps:({index:e,option:g})=>{const t=(R?ee:[ee]).some((e=>null!=e&&v(g,e))),n=!!G&&G(g);return{key:E(g),tabIndex:-1,role:"option",id:`${M}-option-${e}`,onMouseMove:Ye,onClick:we,onTouchStart:He,"data-option-index":e,"aria-disabled":n,"aria-selected":t}},id:M,inputValue:te,value:ee,dirty:Me,expanded:de&&j,popupOpen:de,focused:le||-1!==O,anchorEl:j,setAnchorEl:P,focusedTag:O,groupedOptions:Ee}}function kr(e){return(0,Re.Z)("MuiListSubheader",e)}(0,ve.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Xr=["className","color","component","disableGutters","disableSticky","inset"],Jr=(0,I.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,"default"!==t.color&&g[`color${(0,_e.Z)(t.color)}`],!t.disableGutters&&g.gutters,t.inset&&g.inset,!t.disableSticky&&g.sticky]}})((({theme:e,ownerState:g})=>(0,s.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===g.color&&{color:(e.vars||e).palette.primary.main},"inherit"===g.color&&{color:"inherit"},!g.disableGutters&&{paddingLeft:16,paddingRight:16},g.inset&&{paddingLeft:72},!g.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper}))),Yr=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiListSubheader"}),{className:n,color:l="default",component:I="li",disableGutters:o=!1,disableSticky:a=!1,inset:C=!1}=t,i=(0,c.Z)(t,Xr),r=(0,s.Z)({},t,{color:l,component:I,disableGutters:o,disableSticky:a,inset:C}),d=(e=>{const{classes:g,color:t,disableGutters:n,inset:l,disableSticky:I}=e,o={root:["root","default"!==t&&`color${(0,_e.Z)(t)}`,!n&&"gutters",l&&"inset",!I&&"sticky"]};return(0,F.Z)(o,kr,g)})(r);return(0,m.jsx)(Jr,(0,s.Z)({as:I,className:(0,W.Z)(d.root,n),ref:g,ownerState:r},i))}));Yr.muiSkipListHighlight=!0;var Hr=Yr,wr=(0,jI.Z)((0,m.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function xr(e){return(0,Re.Z)("MuiChip",e)}var Fr=(0,ve.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]);const Nr=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Kr=(0,I.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e,{color:n,iconColor:l,clickable:I,onDelete:o,size:a,variant:C}=t;return[{[`& .${Fr.avatar}`]:g.avatar},{[`& .${Fr.avatar}`]:g[`avatar${(0,_e.Z)(a)}`]},{[`& .${Fr.avatar}`]:g[`avatarColor${(0,_e.Z)(n)}`]},{[`& .${Fr.icon}`]:g.icon},{[`& .${Fr.icon}`]:g[`icon${(0,_e.Z)(a)}`]},{[`& .${Fr.icon}`]:g[`iconColor${(0,_e.Z)(l)}`]},{[`& .${Fr.deleteIcon}`]:g.deleteIcon},{[`& .${Fr.deleteIcon}`]:g[`deleteIcon${(0,_e.Z)(a)}`]},{[`& .${Fr.deleteIcon}`]:g[`deleteIconColor${(0,_e.Z)(n)}`]},{[`& .${Fr.deleteIcon}`]:g[`deleteIcon${(0,_e.Z)(C)}Color${(0,_e.Z)(n)}`]},g.root,g[`size${(0,_e.Z)(a)}`],g[`color${(0,_e.Z)(n)}`],I&&g.clickable,I&&"default"!==n&&g[`clickableColor${(0,_e.Z)(n)})`],o&&g.deletable,o&&"default"!==n&&g[`deletableColor${(0,_e.Z)(n)}`],g[C],g[`${C}${(0,_e.Z)(n)}`]]}})((({theme:e,ownerState:g})=>{const t="light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300];return(0,s.Z)({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Fr.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Fr.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${Fr.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Fr.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Fr.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Fr.icon}`]:(0,s.Z)({marginLeft:5,marginRight:-6},"small"===g.size&&{fontSize:18,marginLeft:4,marginRight:-4},g.iconColor===g.color&&(0,s.Z)({color:e.vars?e.vars.palette.Chip.defaultIconColor:t},"default"!==g.color&&{color:"inherit"})),[`& .${Fr.deleteIcon}`]:(0,s.Z)({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:(0,Te.Fq)(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:(0,Te.Fq)(e.palette.text.primary,.4)}},"small"===g.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==g.color&&{color:e.vars?`rgba(${e.vars.palette[g.color].contrastTextChannel} / 0.7)`:(0,Te.Fq)(e.palette[g.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[g.color].contrastText}})},"small"===g.size&&{height:24},"default"!==g.color&&{backgroundColor:(e.vars||e).palette[g.color].main,color:(e.vars||e).palette[g.color].contrastText},g.onDelete&&{[`&.${Fr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Te.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},g.onDelete&&"default"!==g.color&&{[`&.${Fr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[g.color].dark}})}),(({theme:e,ownerState:g})=>(0,s.Z)({},g.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Te.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Fr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Te.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},g.clickable&&"default"!==g.color&&{[`&:hover, &.${Fr.focusVisible}`]:{backgroundColor:(e.vars||e).palette[g.color].dark}})),(({theme:e,ownerState:g})=>(0,s.Z)({},"outlined"===g.variant&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Fr.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Fr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Fr.avatar}`]:{marginLeft:4},[`& .${Fr.avatarSmall}`]:{marginLeft:2},[`& .${Fr.icon}`]:{marginLeft:4},[`& .${Fr.iconSmall}`]:{marginLeft:2},[`& .${Fr.deleteIcon}`]:{marginRight:5},[`& .${Fr.deleteIconSmall}`]:{marginRight:3}},"outlined"===g.variant&&"default"!==g.color&&{color:(e.vars||e).palette[g.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / 0.7)`:(0,Te.Fq)(e.palette[g.color].main,.7)}`,[`&.${Fr.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Te.Fq)(e.palette[g.color].main,e.palette.action.hoverOpacity)},[`&.${Fr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:(0,Te.Fq)(e.palette[g.color].main,e.palette.action.focusOpacity)},[`& .${Fr.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / 0.7)`:(0,Te.Fq)(e.palette[g.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[g.color].main}}}))),zr=(0,I.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,g)=>{const{ownerState:t}=e,{size:n}=t;return[g.label,g[`label${(0,_e.Z)(n)}`]]}})((({ownerState:e})=>(0,s.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===e.size&&{paddingLeft:8,paddingRight:8})));function Mr(e){return"Backspace"===e.key||"Delete"===e.key}const Er=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiChip"}),{avatar:l,className:I,clickable:o,color:a="default",component:C,deleteIcon:i,disabled:r=!1,icon:d,label:A,onClick:u,onDelete:b,onKeyDown:Z,onKeyUp:h,size:p="medium",variant:G="filled",tabIndex:y,skipFocusWhenDisabled:B=!1}=n,S=(0,c.Z)(n,Nr),V=g.useRef(null),f=(0,Be.Z)(V,t),v=e=>{e.stopPropagation(),b&&b(e)},R=!(!1===o||!u)||o,k=R||b?it:C||"div",X=(0,s.Z)({},n,{component:k,disabled:r,size:p,color:a,iconColor:g.isValidElement(d)&&d.props.color||a,onDelete:!!b,clickable:R,variant:G}),J=(e=>{const{classes:g,disabled:t,size:n,color:l,iconColor:I,onDelete:o,clickable:a,variant:C}=e,i={root:["root",C,t&&"disabled",`size${(0,_e.Z)(n)}`,`color${(0,_e.Z)(l)}`,a&&"clickable",a&&`clickableColor${(0,_e.Z)(l)}`,o&&"deletable",o&&`deletableColor${(0,_e.Z)(l)}`,`${C}${(0,_e.Z)(l)}`],label:["label",`label${(0,_e.Z)(n)}`],avatar:["avatar",`avatar${(0,_e.Z)(n)}`,`avatarColor${(0,_e.Z)(l)}`],icon:["icon",`icon${(0,_e.Z)(n)}`,`iconColor${(0,_e.Z)(I)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,_e.Z)(n)}`,`deleteIconColor${(0,_e.Z)(l)}`,`deleteIcon${(0,_e.Z)(C)}Color${(0,_e.Z)(l)}`]};return(0,F.Z)(i,xr,g)})(X),Y=k===it?(0,s.Z)({component:C||"div",focusVisibleClassName:J.focusVisible},b&&{disableRipple:!0}):{};let H=null;b&&(H=i&&g.isValidElement(i)?g.cloneElement(i,{className:(0,W.Z)(i.props.className,J.deleteIcon),onClick:v}):(0,m.jsx)(wr,{className:(0,W.Z)(J.deleteIcon),onClick:v}));let w=null;l&&g.isValidElement(l)&&(w=g.cloneElement(l,{className:(0,W.Z)(J.avatar,l.props.className)}));let x=null;return d&&g.isValidElement(d)&&(x=g.cloneElement(d,{className:(0,W.Z)(J.icon,d.props.className)})),(0,m.jsxs)(Kr,(0,s.Z)({as:k,className:(0,W.Z)(J.root,I),disabled:!(!R||!r)||void 0,onClick:u,onKeyDown:e=>{e.currentTarget===e.target&&Mr(e)&&e.preventDefault(),Z&&Z(e)},onKeyUp:e=>{e.currentTarget===e.target&&(b&&Mr(e)?b(e):"Escape"===e.key&&V.current&&V.current.blur()),h&&h(e)},ref:f,tabIndex:B&&r?-1:y,ownerState:X},Y,S,{children:[w||x,(0,m.jsx)(zr,{className:(0,W.Z)(J.label),ownerState:X,children:A}),H]}))}));var Lr=Er,Ur=(0,jI.Z)((0,m.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function Qr(e){return(0,Re.Z)("MuiAutocomplete",e)}var Tr,Dr,jr=(0,ve.Z)("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);const Pr=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],Or=["ref"],qr=(0,I.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e,{fullWidth:n,hasClearIcon:l,hasPopupIcon:I,inputFocused:o,size:a}=t;return[{[`& .${jr.tag}`]:g.tag},{[`& .${jr.tag}`]:g[`tagSize${(0,_e.Z)(a)}`]},{[`& .${jr.inputRoot}`]:g.inputRoot},{[`& .${jr.input}`]:g.input},{[`& .${jr.input}`]:o&&g.inputFocused},g.root,n&&g.fullWidth,I&&g.hasPopupIcon,l&&g.hasClearIcon]}})((({ownerState:e})=>(0,s.Z)({[`&.${jr.focused} .${jr.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${jr.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${jr.tag}`]:(0,s.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===e.size&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${jr.inputRoot}`]:{flexWrap:"wrap",[`.${jr.hasPopupIcon}&, .${jr.hasClearIcon}&`]:{paddingRight:30},[`.${jr.hasPopupIcon}.${jr.hasClearIcon}&`]:{paddingRight:56},[`& .${jr.input}`]:{width:0,minWidth:30}},[`& .${la.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${la.root}.${jo.sizeSmall}`]:{[`& .${la.input}`]:{padding:"2px 4px 3px 0"}},[`& .${ya.root}`]:{padding:9,[`.${jr.hasPopupIcon}&, .${jr.hasClearIcon}&`]:{paddingRight:39},[`.${jr.hasPopupIcon}.${jr.hasClearIcon}&`]:{paddingRight:65},[`& .${jr.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${jr.endAdornment}`]:{right:9}},[`& .${ya.root}.${jo.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${jr.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${sa.root}`]:{paddingTop:19,paddingLeft:8,[`.${jr.hasPopupIcon}&, .${jr.hasClearIcon}&`]:{paddingRight:39},[`.${jr.hasPopupIcon}.${jr.hasClearIcon}&`]:{paddingRight:65},[`& .${sa.input}`]:{padding:"7px 4px"},[`& .${jr.endAdornment}`]:{right:9}},[`& .${sa.root}.${jo.sizeSmall}`]:{paddingBottom:1,[`& .${sa.input}`]:{padding:"2.5px 4px"}},[`& .${jo.hiddenLabel}`]:{paddingTop:8},[`& .${sa.root}.${jo.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${jr.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${sa.root}.${jo.hiddenLabel}.${jo.sizeSmall}`]:{[`& .${jr.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${jr.input}`]:(0,s.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})}))),_r=(0,I.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,g)=>g.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),$r=(0,I.ZP)(ut,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,g)=>g.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),es=(0,I.ZP)(ut,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},g)=>(0,s.Z)({},g.popupIndicator,e.popupOpen&&g.popupIndicatorOpen)})((({ownerState:e})=>(0,s.Z)({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"}))),gs=(0,I.ZP)(BI,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[{[`& .${jr.option}`]:g.option},g.popper,t.disablePortal&&g.popperDisablePortal]}})((({theme:e,ownerState:g})=>(0,s.Z)({zIndex:(e.vars||e).zIndex.modal},g.disablePortal&&{position:"absolute"}))),ts=(0,I.ZP)(qe,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,g)=>g.paper})((({theme:e})=>(0,s.Z)({},e.typography.body1,{overflow:"auto"}))),ns=(0,I.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,g)=>g.loading})((({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),ls=(0,I.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,g)=>g.noOptions})((({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),Is=(0,I.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,g)=>g.listbox})((({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${jr.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${jr.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${jr.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${jr.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${jr.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}}))),os=(0,I.ZP)(Hr,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,g)=>g.groupLabel})((({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8}))),as=(0,I.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,g)=>g.groupUl})({padding:0,[`& .${jr.option}`]:{paddingLeft:24}});var Cs=g.forwardRef((function(e,t){var n,l,I,o;const a=(0,ie.Z)({props:e,name:"MuiAutocomplete"}),{autoComplete:C=!1,autoHighlight:i=!1,autoSelect:r=!1,blurOnSelect:d=!1,ChipProps:A,className:u,clearIcon:b=Tr||(Tr=(0,m.jsx)(Ur,{fontSize:"small"})),clearOnBlur:Z=!a.freeSolo,clearOnEscape:h=!1,clearText:p="Clear",closeText:G="Close",componentsProps:y={},defaultValue:B=(a.multiple?[]:null),disableClearable:S=!1,disableCloseOnSelect:V=!1,disabled:f=!1,disabledItemsFocusable:v=!1,disableListWrap:R=!1,disablePortal:k=!1,filterSelectedOptions:X=!1,forcePopupIcon:J="auto",freeSolo:Y=!1,fullWidth:H=!1,getLimitTagsText:w=(e=>`+${e}`),getOptionLabel:x,groupBy:N,handleHomeEndKeys:K=!a.freeSolo,includeInputInList:z=!1,limitTags:M=-1,ListboxComponent:E="ul",ListboxProps:L,loading:U=!1,loadingText:Q="Loading",multiple:T=!1,noOptionsText:D="No options",openOnFocus:j=!1,openText:P="Open",PaperComponent:O=qe,PopperComponent:q=BI,popupIcon:_=Dr||(Dr=(0,m.jsx)(TC,{})),readOnly:$=!1,renderGroup:ee,renderInput:ge,renderOption:te,renderTags:ne,selectOnFocus:le=!a.freeSolo,size:Ie="medium",slotProps:oe={}}=a,ae=(0,c.Z)(a,Pr),{getRootProps:Ce,getInputProps:re,getInputLabelProps:se,getPopupIndicatorProps:ce,getClearProps:de,getTagProps:Ae,getListboxProps:ue,getOptionProps:me,value:be,dirty:Ze,expanded:he,id:pe,popupOpen:Ge,focused:ye,focusedTag:Se,anchorEl:We,setAnchorEl:Ve,inputValue:fe,groupedOptions:ve}=Rr((0,s.Z)({},a,{componentName:"Autocomplete"})),Re=!S&&!f&&Ze&&!$,ke=(!Y||!0===J)&&!1!==J,{onMouseDown:Xe}=re(),{ref:Je}=null!=L?L:{},Ye=ue(),{ref:He}=Ye,we=(0,c.Z)(Ye,Or),xe=(0,Be.Z)(He,Je),Fe=x||(e=>{var g;return null!=(g=e.label)?g:e}),Ne=(0,s.Z)({},a,{disablePortal:k,expanded:he,focused:ye,fullWidth:H,getOptionLabel:Fe,hasClearIcon:Re,hasPopupIcon:ke,inputFocused:-1===Se,popupOpen:Ge,size:Ie}),Ke=(e=>{const{classes:g,disablePortal:t,expanded:n,focused:l,fullWidth:I,hasClearIcon:o,hasPopupIcon:a,inputFocused:C,popupOpen:i,size:r}=e,s={root:["root",n&&"expanded",l&&"focused",I&&"fullWidth",o&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",C&&"inputFocused"],tag:["tag",`tagSize${(0,_e.Z)(r)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",i&&"popupIndicatorOpen"],popper:["popper",t&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,F.Z)(s,Qr,g)})(Ne);let ze;if(T&&be.length>0){const e=e=>(0,s.Z)({className:Ke.tag,disabled:f},Ae(e));ze=ne?ne(be,e,Ne):be.map(((g,t)=>(0,m.jsx)(Lr,(0,s.Z)({label:Fe(g),size:Ie},e({index:t}),A))))}if(M>-1&&Array.isArray(ze)){const e=ze.length-M;!ye&&e>0&&(ze=ze.splice(0,M),ze.push((0,m.jsx)("span",{className:Ke.tag,children:w(e)},ze.length)))}const Me=ee||(e=>(0,m.jsxs)("li",{children:[(0,m.jsx)(os,{className:Ke.groupLabel,ownerState:Ne,component:"div",children:e.group}),(0,m.jsx)(as,{className:Ke.groupUl,ownerState:Ne,children:e.children})]},e.key)),Ee=te||((e,g)=>(0,m.jsx)("li",(0,s.Z)({},e,{children:Fe(g)}))),Le=(e,g)=>{const t=me({option:e,index:g});return Ee((0,s.Z)({},t,{className:Ke.option}),e,{selected:t["aria-selected"],index:g,inputValue:fe},Ne)},Ue=null!=(n=oe.clearIndicator)?n:y.clearIndicator,Qe=null!=(l=oe.paper)?l:y.paper,Te=null!=(I=oe.popper)?I:y.popper,De=null!=(o=oe.popupIndicator)?o:y.popupIndicator;return(0,m.jsxs)(g.Fragment,{children:[(0,m.jsx)(qr,(0,s.Z)({ref:t,className:(0,W.Z)(Ke.root,u),ownerState:Ne},Ce(ae),{children:ge({id:pe,disabled:f,fullWidth:!0,size:"small"===Ie?"small":void 0,InputLabelProps:se(),InputProps:(0,s.Z)({ref:Ve,className:Ke.inputRoot,startAdornment:ze,onClick:e=>{e.target===e.currentTarget&&Xe(e)}},(Re||ke)&&{endAdornment:(0,m.jsxs)(_r,{className:Ke.endAdornment,ownerState:Ne,children:[Re?(0,m.jsx)($r,(0,s.Z)({},de(),{"aria-label":p,title:p,ownerState:Ne},Ue,{className:(0,W.Z)(Ke.clearIndicator,null==Ue?void 0:Ue.className),children:b})):null,ke?(0,m.jsx)(es,(0,s.Z)({},ce(),{disabled:f,"aria-label":Ge?G:P,title:Ge?G:P,ownerState:Ne},De,{className:(0,W.Z)(Ke.popupIndicator,null==De?void 0:De.className),children:_})):null]})}),inputProps:(0,s.Z)({className:Ke.input,disabled:f,readOnly:$},re())})})),We?(0,m.jsx)(gs,(0,s.Z)({as:q,disablePortal:k,style:{width:We?We.clientWidth:null},ownerState:Ne,role:"presentation",anchorEl:We,open:Ge},Te,{className:(0,W.Z)(Ke.popper,null==Te?void 0:Te.className),children:(0,m.jsxs)(ts,(0,s.Z)({ownerState:Ne,as:O},Qe,{className:(0,W.Z)(Ke.paper,null==Qe?void 0:Qe.className),children:[U&&0===ve.length?(0,m.jsx)(ns,{className:Ke.loading,ownerState:Ne,children:Q}):null,0!==ve.length||Y||U?null:(0,m.jsx)(ls,{className:Ke.noOptions,ownerState:Ne,role:"presentation",onMouseDown:e=>{e.preventDefault()},children:D}),ve.length>0?(0,m.jsx)(Is,(0,s.Z)({as:E,className:Ke.listbox,ownerState:Ne},we,L,{ref:xe,children:ve.map(((e,g)=>N?Me({key:e.key,group:e.group,children:e.options.map(((g,t)=>Le(g,e.index+t)))}):Le(e,g)))})):null]}))})):null]})}));const is=(new Date).getFullYear(),rs=1990,ss=parseInt((is-rs)/4,10),cs=({floatValue:e})=>e<=is&&e>=rs,ds=(0,g.forwardRef)((function(e,g){const{onChange:t,...n}=e;return(0,m.jsx)(ji,{...n,getInputRef:g,onValueChange:g=>{t({target:{name:e.name,value:g.value}})},isnumericstring:"true",format:"####",mask:"_",isAllowed:cs})}));function As(e){return`${e}`}ds.propTypes={name:pi().string.isRequired,onChange:pi().func.isRequired};const us=[{value:rs,label:rs},{value:rs+ss,label:rs+ss},{value:rs+2*ss,label:rs+2*ss},{value:rs+3*ss,label:rs+3*ss},{value:is,label:is}],ms=["January","February","March","April","May","June","July","August","September","October","November","December"];var bs=({colorIcons:e="colorIconsDate"})=>{const[t,n]=(0,g.useState)("true"===(localStorage.getItem("checkedTimeInicio")||"true")),[l,I]=(0,g.useState)("true"===(localStorage.getItem("checkedTimeFin")||"true")),[o,a]=(0,g.useState)(localStorage.getItem("colorFechaIcon")||"primary"),C=async(g,t)=>{var n,l="";g&&t?(n="primary",l="300"):g&&!t?(n="secondary",l="220"):!g&&t?(n="success",l="80"):n="warning",localStorage.setItem("colorFechaIcon",n),localStorage.setItem(e,l),a(n)},[i,r]=(0,g.useState)(new Date(localStorage.getItem("timeInicio")||rs+"-01-01T00:00:00")),[s,c]=(0,g.useState)(new Date(localStorage.getItem("timeFin")||is+"-12-28T00:00:00")),[d,A]=(0,g.useState)({NumericFormatYearInicio:i.getFullYear(),NumericFormatYearFin:s.getFullYear()}),[u,b]=(0,g.useState)([i.getFullYear(),s.getFullYear()]),Z=e=>{var g,t=!1;if("NumericFormatYearInicio"===e.target.name){if((g=Math.min(e.target.value,d.NumericFormatYearFin-1))!==d.NumericFormatYearInicio){t=!0;const e=new Date(g,i.getMonth(),1);r(e),localStorage.setItem("timeInicio",e),b([g,u[1]])}}else if("NumericFormatYearFin"===e.target.name&&(g=Math.max(e.target.value,d.NumericFormatYearInicio+1))!==d.NumericFormatYearFin){t=!0;const e=new Date(g,s.getMonth(),25);c(e),localStorage.setItem("timeFin",e),b([u[0],g])}t&&A({...d,[e.target.name]:g})},[h,p]=(0,g.useState)(ms[i.getMonth()]),[G,y]=(0,g.useState)(""),[B,S]=(0,g.useState)(ms[s.getMonth()]),[W,V]=(0,g.useState)("");return(0,m.jsxs)(Zi,{container:!0,sx:{p:2},component:"div",children:[(0,m.jsxs)(Zi,{item:!0,xs:12,children:[(0,m.jsx)(xt,{id:"track-inverted-slider",gutterBottom:!0,children:"Timeline"}),(0,m.jsx)(Sr,{size:"small",value:u,onChange:(e,g,n)=>{if(Array.isArray(g))if(0===n){if(t){var I=Math.min(g[0],u[1]-1);if(I!==u[0]){b([I,u[1]]);const e=new Date(I,i.getMonth(),1);r(e),localStorage.setItem("timeInicio",e),A({...d,NumericFormatYearInicio:I})}}}else if(l){var o=Math.max(g[1],u[0]+1);if(o!==u[1]){b([u[0],o]);const e=new Date(o,s.getMonth(),25);c(e),localStorage.setItem("timeFin",e),A({...d,NumericFormatYearFin:o})}}},valueLabelDisplay:"auto",getAriaValueText:As,step:1,min:rs,max:is,marks:us,color:o,disabled:!t&&!l,sx:{marginLeft:1,maxWidth:"90%"}}),(0,m.jsx)(xg,{sx:{pb:2}})]}),(0,m.jsx)(Zi,{item:!0,xs:12,sx:{pt:2},children:(0,m.jsx)(xt,{})}),(0,m.jsx)(Zi,{item:!0,xs:4,children:(0,m.jsx)(oi,{label:"Year",value:d.NumericFormatYearInicio,disabled:!t,onChange:Z,name:"NumericFormatYearInicio",type:"number",id:"formatted-NumericFormat-input",InputProps:{inputComponent:ds},variant:"standard"})}),(0,m.jsx)(Zi,{item:!0,xs:8,sx:{pl:2},children:(0,m.jsx)(Cs,{value:h,onChange:(e,g)=>{p(g),((e,g)=>{const t=g;var n=ms.findIndex((e=>e===t));const l=i.getFullYear();n<0&&(n=0);const I=new Date(l,n,1);r(I),localStorage.setItem("timeInicio",I)})(0,g)},inputValue:G,onInputChange:(e,g)=>{y(g)},id:"controllable-states-demo",disableClearable:!0,disabled:!t,options:ms,renderInput:e=>(0,m.jsx)(oi,{...e,label:"Month",variant:"standard",inputProps:{...e.inputProps,autoComplete:"new-password"}})})}),(0,m.jsxs)(Zi,{item:!0,xs:12,sx:{pb:2},children:[(0,m.jsx)(xo,{control:(0,m.jsx)(mo,{checked:t,onChange:e=>{C(e.target.checked,l),localStorage.setItem("checkedTimeInicio",e.target.checked),n(e.target.checked)},inputProps:{"aria-label":"controlled"}}),label:"Start"}),(0,m.jsx)(xg,{children:"TO"})]}),(0,m.jsx)(Zi,{item:!0,xs:4,children:(0,m.jsx)(oi,{label:"Year",value:d.NumericFormatYearFin,disabled:!l,onChange:Z,name:"NumericFormatYearFin",type:"number",id:"formatted-NumericFormat-input",InputProps:{inputComponent:ds},variant:"standard"})}),(0,m.jsx)(Zi,{item:!0,xs:8,sx:{pl:2},children:(0,m.jsx)(Cs,{value:B,onChange:(e,g)=>{S(g),((e,g)=>{const t=g;var n=ms.findIndex((e=>e===t));const l=s.getFullYear();n<0&&(n=11);const I=new Date(l,n,25);c(I),localStorage.setItem("timeFin",I)})(0,g)},inputValue:W,onInputChange:(e,g)=>{V(g)},id:"controllable-states-demo",disableClearable:!0,disabled:!l,options:ms,renderInput:e=>(0,m.jsx)(oi,{...e,label:"Month",variant:"standard",inputProps:{...e.inputProps,autoComplete:"new-password"}})})}),(0,m.jsx)(Zi,{item:!0,xs:12,children:(0,m.jsx)(xo,{control:(0,m.jsx)(mo,{checked:l,onChange:e=>{C(t,e.target.checked),localStorage.setItem("checkedTimeFin",e.target.checked),I(e.target.checked)},inputProps:{"aria-label":"controlled"}}),label:"End"})})]})},Zs=(0,jI.Z)((0,m.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),hs=(0,jI.Z)((0,m.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked");const ps=(0,I.ZP)("span")({position:"relative",display:"flex"}),Gs=(0,I.ZP)(Zs)({transform:"scale(1)"}),ys=(0,I.ZP)(hs)((({theme:e,ownerState:g})=>(0,s.Z)({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},g.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})})));var Bs=function(e){const{checked:g=!1,classes:t={},fontSize:n}=e,l=(0,s.Z)({},e,{checked:g});return(0,m.jsxs)(ps,{className:t.root,ownerState:l,children:[(0,m.jsx)(Gs,{fontSize:n,className:t.background,ownerState:l}),(0,m.jsx)(ys,{fontSize:n,className:t.dot,ownerState:l})]})},Ss=l(7450),Ws=g.createContext(void 0);function Vs(e){return(0,Re.Z)("MuiRadio",e)}var fs=(0,ve.Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]);const vs=["checked","checkedIcon","color","icon","name","onChange","size","className"],Rs=(0,I.ZP)(no,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiRadio",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[`color${(0,_e.Z)(t.color)}`]]}})((({theme:e,ownerState:g})=>(0,s.Z)({color:(e.vars||e).palette.text.secondary},!g.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===g.color?e.vars.palette.action.activeChannel:e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Te.Fq)("default"===g.color?e.palette.action.active:e.palette[g.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==g.color&&{[`&.${fs.checked}`]:{color:(e.vars||e).palette[g.color].main}},{[`&.${fs.disabled}`]:{color:(e.vars||e).palette.action.disabled}}))),ks=(0,m.jsx)(Bs,{checked:!0}),Xs=(0,m.jsx)(Bs,{}),Js=g.forwardRef((function(e,t){var n,l;const I=(0,ie.Z)({props:e,name:"MuiRadio"}),{checked:o,checkedIcon:a=ks,color:C="primary",icon:i=Xs,name:r,onChange:d,size:A="medium",className:u}=I,b=(0,c.Z)(I,vs),Z=(0,s.Z)({},I,{color:C,size:A}),h=(e=>{const{classes:g,color:t,size:n}=e,l={root:["root",`color${(0,_e.Z)(t)}`,"medium"!==n&&`size${(0,_e.Z)(n)}`]};return(0,s.Z)({},g,(0,F.Z)(l,Vs,g))})(Z),p=g.useContext(Ws);let G=o;const y=(0,Ss.Z)(d,p&&p.onChange);let B=r;return p&&(void 0===G&&(G=function(e,g){return"object"==typeof g&&null!==g?e===g:String(e)===String(g)}(p.value,I.value)),void 0===B&&(B=p.name)),(0,m.jsx)(Rs,(0,s.Z)({type:"radio",icon:g.cloneElement(i,{fontSize:null!=(n=Xs.props.fontSize)?n:A}),checkedIcon:g.cloneElement(a,{fontSize:null!=(l=ks.props.fontSize)?l:A}),ownerState:Z,classes:h,name:B,checked:G,onChange:y,ref:t,className:(0,W.Z)(h.root,u)},b))}));var Ys=Js;function Hs(e){return(0,Re.Z)("MuiFormGroup",e)}(0,ve.Z)("MuiFormGroup",["root","row","error"]);const ws=["className","row"],xs=(0,I.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.row&&g.row]}})((({ownerState:e})=>(0,s.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})));var Fs=g.forwardRef((function(e,g){const t=(0,ie.Z)({props:e,name:"MuiFormGroup"}),{className:n,row:l=!1}=t,I=(0,c.Z)(t,ws),o=Jo({props:t,muiFormControl:_I(),states:["error"]}),a=(0,s.Z)({},t,{row:l,error:o.error}),C=(e=>{const{classes:g,row:t,error:n}=e,l={root:["root",t&&"row",n&&"error"]};return(0,F.Z)(l,Hs,g)})(a);return(0,m.jsx)(xs,(0,s.Z)({className:(0,W.Z)(C.root,n),ownerState:a,ref:g},I))}));const Ns=["actions","children","defaultValue","name","onChange","value"];var Ks=g.forwardRef((function(e,t){const{actions:n,children:l,defaultValue:I,name:o,onChange:a,value:C}=e,i=(0,c.Z)(e,Ns),r=g.useRef(null),[d,A]=(0,WI.Z)({controlled:C,default:I,name:"RadioGroup"});g.useImperativeHandle(n,(()=>({focus:()=>{let e=r.current.querySelector("input:not(:disabled):checked");e||(e=r.current.querySelector("input:not(:disabled)")),e&&e.focus()}})),[]);const u=(0,Be.Z)(t,r),b=(0,SI.Z)(o),Z=g.useMemo((()=>({name:b,onChange(e){A(e.target.value),a&&a(e,e.target.value)},value:d})),[b,a,A,d]);return(0,m.jsx)(Ws.Provider,{value:Z,children:(0,m.jsx)(Fs,(0,s.Z)({role:"radiogroup",ref:u},i,{children:l}))})}));const zs=({localStorageKey:e})=>(0,m.jsxs)(Ks,{sx:{pl:4},"aria-label":"gender",defaultValue:localStorage.getItem(e)||"nombre_ascendente",name:"radio-buttons-group",onChange:g=>{localStorage.setItem(e,g.target.value),(g=>{var t;"nombre_ascendente"===g?t="260":"nombre_descendente"===g?t="280":"fecha_ascendente"===g?t="80":"fecha_descendente"===g?t="60":"episodios_ascendente"===g?t="220":"episodios_descendente"===g?t="200":"puntuacion_ascendente"===g?t="330":"puntuacion_descendente"===g&&(t="350"),localStorage.setItem(e+"Color",t)})(g.target.value)},children:[(0,m.jsx)(xo,{value:"nombre_ascendente",control:(0,m.jsx)(Ys,{color:"primary",sx:{color:"#e53935"}}),label:"UP Name"}),(0,m.jsx)(xo,{value:"nombre_descendente",control:(0,m.jsx)(Ys,{color:"primary",sx:{color:"#e57373"}}),label:"DOWN Name"}),(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsx)(xo,{value:"fecha_ascendente",control:(0,m.jsx)(Ys,{color:"success",sx:{color:"#00897b"}}),label:"UP Date"}),(0,m.jsx)(xo,{value:"fecha_descendente",control:(0,m.jsx)(Ys,{color:"success",sx:{color:"#4db6ac"}}),label:"DOWN Date"}),(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsx)(xo,{value:"episodios_ascendente",control:(0,m.jsx)(Ys,{color:"secondary",sx:{color:"#5e35b1"}}),label:"UP Episodes"}),(0,m.jsx)(xo,{value:"episodios_descendente",control:(0,m.jsx)(Ys,{color:"secondary",sx:{color:"#9575cd"}}),label:"DOWN Episodes"}),(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsx)(xo,{value:"puntuacion_ascendente",control:(0,m.jsx)(Ys,{color:"warning",sx:{color:"#ffb300"}}),label:"UP Score"}),(0,m.jsx)(xo,{value:"puntuacion_descendente",control:(0,m.jsx)(Ys,{color:"warning",sx:{color:"#ffd54f"}}),label:"DOWN Score"})]});var Ms=(0,g.memo)(zs);const Es=({localStorageKey:e})=>(0,m.jsxs)(Ks,{sx:{pl:4},"aria-label":"gender",defaultValue:localStorage.getItem(e)||"todos",name:"radio-buttons-group",onChange:g=>{localStorage.setItem(e,g.target.value),(g=>{var t;"todos"===g?t="":"saliendo"===g?t="220":"terminado"===g&&(t="45"),localStorage.setItem(e+"Color",t)})(g.target.value)},children:[(0,m.jsx)(xo,{value:"todos",control:(0,m.jsx)(Ys,{}),label:"All"}),(0,m.jsx)(xo,{value:"saliendo",control:(0,m.jsx)(Ys,{color:"secondary"}),label:"Running"}),(0,m.jsx)(xo,{value:"terminado",control:(0,m.jsx)(Ys,{color:"success"}),label:"Ended"})]});var Ls=(0,g.memo)(Es);function Us(e){return(0,Re.Z)("MuiListItem",e)}var Qs=(0,ve.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);function Ts(e){return(0,Re.Z)("MuiListItemSecondaryAction",e)}(0,ve.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);const Ds=["className"],js=(0,I.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.disableGutters&&g.disableGutters]}})((({ownerState:e})=>(0,s.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0}))),Ps=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiListItemSecondaryAction"}),{className:l}=n,I=(0,c.Z)(n,Ds),o=g.useContext(ht),a=(0,s.Z)({},n,{disableGutters:o.disableGutters}),C=(e=>{const{disableGutters:g,classes:t}=e,n={root:["root",g&&"disableGutters"]};return(0,F.Z)(n,Ts,t)})(a);return(0,m.jsx)(js,(0,s.Z)({className:(0,W.Z)(C.root,l),ownerState:a,ref:t},I))}));Ps.muiName="ListItemSecondaryAction";var Os=Ps;const qs=["className"],_s=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],$s=(0,I.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.dense&&g.dense,"flex-start"===t.alignItems&&g.alignItemsFlexStart,t.divider&&g.divider,!t.disableGutters&&g.gutters,!t.disablePadding&&g.padding,t.button&&g.button,t.hasSecondaryAction&&g.secondaryAction]}})((({theme:e,ownerState:g})=>(0,s.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!g.disablePadding&&(0,s.Z)({paddingTop:8,paddingBottom:8},g.dense&&{paddingTop:4,paddingBottom:4},!g.disableGutters&&{paddingLeft:16,paddingRight:16},!!g.secondaryAction&&{paddingRight:48}),!!g.secondaryAction&&{[`& > .${Gt.root}`]:{paddingRight:48}},{[`&.${Qs.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Qs.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Qs.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Qs.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},"flex-start"===g.alignItems&&{alignItems:"flex-start"},g.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},g.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Qs.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}},g.hasSecondaryAction&&{paddingRight:48}))),ec=(0,I.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,g)=>g.container})({position:"relative"});var gc=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiListItem"}),{alignItems:l="center",autoFocus:I=!1,button:o=!1,children:a,className:C,component:i,components:r={},componentsProps:d={},ContainerComponent:A="li",ContainerProps:{className:u}={},dense:b=!1,disabled:Z=!1,disableGutters:h=!1,disablePadding:p=!1,divider:G=!1,focusVisibleClassName:y,secondaryAction:B,selected:S=!1,slotProps:V={},slots:f={}}=n,v=(0,c.Z)(n.ContainerProps,qs),R=(0,c.Z)(n,_s),k=g.useContext(ht),X=g.useMemo((()=>({dense:b||k.dense||!1,alignItems:l,disableGutters:h})),[l,k.dense,b,h]),J=g.useRef(null);(0,Zt.Z)((()=>{I&&J.current&&J.current.focus()}),[I]);const Y=g.Children.toArray(a),H=Y.length&&(0,za.Z)(Y[Y.length-1],["ListItemSecondaryAction"]),w=(0,s.Z)({},n,{alignItems:l,autoFocus:I,button:o,dense:X.dense,disabled:Z,disableGutters:h,disablePadding:p,divider:G,hasSecondaryAction:H,selected:S}),x=(e=>{const{alignItems:g,button:t,classes:n,dense:l,disabled:I,disableGutters:o,disablePadding:a,divider:C,hasSecondaryAction:i,selected:r}=e,s={root:["root",l&&"dense",!o&&"gutters",!a&&"padding",C&&"divider",I&&"disabled",t&&"button","flex-start"===g&&"alignItemsFlexStart",i&&"secondaryAction",r&&"selected"],container:["container"]};return(0,F.Z)(s,Us,n)})(w),N=(0,Be.Z)(J,t),z=f.root||r.Root||$s,M=V.root||d.root||{},E=(0,s.Z)({className:(0,W.Z)(x.root,M.className,C),disabled:Z},R);let L=i||"li";return o&&(E.component=i||"div",E.focusVisibleClassName=(0,W.Z)(Qs.focusVisible,y),L=it),H?(L=E.component||i?L:"div","li"===A&&("li"===L?L="div":"li"===E.component&&(E.component="div")),(0,m.jsx)(ht.Provider,{value:X,children:(0,m.jsxs)(ec,(0,s.Z)({as:A,className:(0,W.Z)(x.container,u),ref:N,ownerState:w},v,{children:[(0,m.jsx)(z,(0,s.Z)({},M,!K(z)&&{as:L,ownerState:(0,s.Z)({},w,M.ownerState)},E,{children:Y})),Y.pop()]}))})):(0,m.jsx)(ht.Provider,{value:X,children:(0,m.jsxs)(z,(0,s.Z)({},M,{as:L,ref:N},!K(z)&&{ownerState:(0,s.Z)({},w,M.ownerState)},E,{children:[Y,B&&(0,m.jsx)(Os,{children:B})]}))})})),tc=l(219);function nc(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)e[n]=t[n]}return e}var lc=function e(g,t){function n(e,n,l){if("undefined"!=typeof document){"number"==typeof(l=nc({},t,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var I="";for(var o in l)l[o]&&(I+="; "+o,!0!==l[o]&&(I+="="+l[o].split(";")[0]));return document.cookie=e+"="+g.write(n,e)+I}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},l=0;l<t.length;l++){var I=t[l].split("="),o=I.slice(1).join("=");try{var a=decodeURIComponent(I[0]);if(n[a]=g.read(o,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,g){n(e,"",nc({},g,{expires:-1}))},withAttributes:function(g){return e(this.converter,nc({},this.attributes,g))},withConverter:function(g){return e(nc({},this.converter,g),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(g)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const Ic=new Date,oc=Ic.getFullYear().toString()+"-"+Ic.getMonth().toString()+"-"+Ic.getDay().toString(),ac=lc.get("csrftoken"),Cc={method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.getItem("access")?"JWT "+localStorage.getItem("access"):null,"X-CSRFToken":ac}};function ic(e,g,t,n=parseInt(localStorage.getItem("page")||"0",10),l=parseInt(localStorage.getItem("rowsPerPage")||"12",10)){var I,o,a="true"===(localStorage.getItem("FilterON")||"true"),C=localStorage.getItem("orden")||"nombre_ascendente",i=localStorage.getItem("tansmicion")||"todos",r=localStorage.getItem("valueRating")||"0";I="true"===(localStorage.getItem("checkedTimeInicio")||"true")?new Date(localStorage.getItem("timeInicio")||rs+"-01-01T00:00:00").toISOString().substring(0,10):"",o="true"===(localStorage.getItem("checkedTimeFin")||"true")?new Date(localStorage.getItem("timeFin")||is+"-12-28T00:00:00").toISOString().substring(0,10):"";var s="";g.forEach((e=>{if("LISTAR"===e.clasificacion){var g=JSON.parse(localStorage.getItem(e.localStorageKey)||"[]");s+="&"+e.localStorageKey+"="+g}})),rc(e+"&filtros="+a+"&pagina="+n+"&cant_pagina="+l+"&orden="+C+"&tansmicion="+i+"&fecha_inicio="+I+"&fecha_fin="+o+"&puntuacion="+r+s,t)}const rc=(e,g,t=!0)=>{const n=Qy+e;var l=!0,I="xCACHE_"+oc;t&&(I+="_"+n,localStorage.getItem(I)&&(l=!1)),l?fetch(n,Cc).then((e=>200===e.status||201===e.status?e.json():401===e.status||e.status>400?(void 0).setState((()=>({placeholder:"Error"}))):void 0)).then((e=>{e?(t&&localStorage.setItem(I,JSON.stringify(e)),g(e)):g(null)})):g(JSON.parse(localStorage.getItem(I)))},sc=(0,I.ZP)((({className:e,...g})=>(0,m.jsx)(xI,{...g,classes:{popper:e}})))((({theme:e})=>({[`& .${fI.tooltip}`]:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,boxShadow:e.shadows[1],fontSize:11,textAlign:"justify"}}))),cc=[{id:0,nombre:"Vacio",descripcion:""}];function dc({apiURL:e,localStorageKey:t}){const[n,l]=(0,g.useState)(cc),[I,o]=(0,g.useState)(1),a=e=>{e&&(o(parseInt(360/e.length,10)),l(e))},[C,i]=(0,g.useState)(JSON.parse(localStorage.getItem(t))||[]),r=e=>{let g=[];g=C.slice();const t=g.findIndex((g=>g==e.target.id));-1!=t?g.length>0&&g.splice(t,1):g.push(e.target.id),i(g.slice())},s=()=>n.map((e=>(0,m.jsx)(sc,{title:e.descripcion,placement:"right-start",arrow:!0,children:(0,m.jsx)(gc,{sx:{pl:4,pt:0,pb:0},children:(0,m.jsx)(xo,{control:(0,m.jsx)(mo,{id:e.id.toString(),onChange:r}),label:e.nombre,checked:-1!=C.findIndex((g=>g==e.id.toString()))})},e.id)},e.id)));return(0,g.useEffect)((()=>{localStorage.setItem(t,JSON.stringify(C)),C.length>0?localStorage.setItem(t+"Color",C.length*I):localStorage.setItem(t+"Color","")}),[C]),(0,g.useEffect)((()=>{localStorage.getItem("LocalStorage"+t)||rc(e,a)}),[]),(0,g.useEffect)((()=>{s()}),[n]),(0,m.jsxs)(x,{children:[(0,m.jsxs)(St,{onClick:()=>{i([])},sx:{pl:4},children:[(0,m.jsx)(tc.Z,{}),(0,m.jsx)(xt,{sx:{pl:1},children:"Clear"})]}),(0,m.jsx)(qe,{style:{maxHeight:200,overflow:"auto"},children:(0,m.jsx)(Tt,{component:"div",disablePadding:!0,children:(0,m.jsx)(Fs,{row:!0,sx:{marginLeft:2},children:s()})})})]})}var Ac=(0,jI.Z)((0,m.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),uc=(0,jI.Z)((0,m.jsx)("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function mc(e){return(0,Re.Z)("MuiRating",e)}var bc=(0,ve.Z)("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]);const Zc=["value"],hc=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function pc(e,g){if(null==e)return e;const t=Math.round(e/g)*g;return Number(t.toFixed(function(e){const g=e.toString().split(".")[1];return g?g.length:0}(g)))}const Gc=(0,I.ZP)("span",{name:"MuiRating",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[{[`& .${bc.visuallyHidden}`]:g.visuallyHidden},g.root,g[`size${(0,_e.Z)(t.size)}`],t.readOnly&&g.readOnly]}})((({theme:e,ownerState:g})=>(0,s.Z)({display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent",[`&.${bc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${bc.focusVisible} .${bc.iconActive}`]:{outline:"1px solid #999"},[`& .${bc.visuallyHidden}`]:qi},"small"===g.size&&{fontSize:e.typography.pxToRem(18)},"large"===g.size&&{fontSize:e.typography.pxToRem(30)},g.readOnly&&{pointerEvents:"none"}))),yc=(0,I.ZP)("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:e},g)=>[g.label,e.emptyValueFocused&&g.labelEmptyValueActive]})((({ownerState:e})=>(0,s.Z)({cursor:"inherit"},e.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"}))),Bc=(0,I.ZP)("span",{name:"MuiRating",slot:"Icon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.icon,t.iconEmpty&&g.iconEmpty,t.iconFilled&&g.iconFilled,t.iconHover&&g.iconHover,t.iconFocus&&g.iconFocus,t.iconActive&&g.iconActive]}})((({theme:e,ownerState:g})=>(0,s.Z)({display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},g.iconActive&&{transform:"scale(1.2)"},g.iconEmpty&&{color:(e.vars||e).palette.action.disabled}))),Sc=(0,I.ZP)("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:e=>(0,I.Dz)(e)&&"iconActive"!==e,overridesResolver:(e,g)=>{const{iconActive:t}=e;return[g.decimal,t&&g.iconActive]}})((({iconActive:e})=>(0,s.Z)({position:"relative"},e&&{transform:"scale(1.2)"})));function Wc(e){const g=(0,c.Z)(e,Zc);return(0,m.jsx)("span",(0,s.Z)({},g))}function Vc(e){const{classes:t,disabled:n,emptyIcon:l,focus:I,getLabelText:o,highlightSelectedOnly:a,hover:C,icon:i,IconContainerComponent:r,isActive:c,itemValue:d,labelProps:A,name:u,onBlur:b,onChange:Z,onClick:h,onFocus:p,readOnly:G,ownerState:y,ratingValue:B,ratingValueRounded:S}=e,V=a?d===B:d<=B,f=d<=C,v=d<=I,R=d===S,k=(0,SI.Z)(),X=(0,m.jsx)(Bc,{as:r,value:d,className:(0,W.Z)(t.icon,V?t.iconFilled:t.iconEmpty,f&&t.iconHover,v&&t.iconFocus,c&&t.iconActive),ownerState:(0,s.Z)({},y,{iconEmpty:!V,iconFilled:V,iconHover:f,iconFocus:v,iconActive:c}),children:l&&!V?l:i});return G?(0,m.jsx)("span",(0,s.Z)({},A,{children:X})):(0,m.jsxs)(g.Fragment,{children:[(0,m.jsxs)(yc,(0,s.Z)({ownerState:(0,s.Z)({},y,{emptyValueFocused:void 0}),htmlFor:k},A,{children:[X,(0,m.jsx)("span",{className:t.visuallyHidden,children:o(d)})]})),(0,m.jsx)("input",{className:t.visuallyHidden,onFocus:p,onBlur:b,onChange:Z,onClick:h,disabled:n,value:d,id:k,type:"radio",name:u,checked:R})]})}const fc=(0,m.jsx)(Ac,{fontSize:"inherit"}),vc=(0,m.jsx)(uc,{fontSize:"inherit"});function Rc(e){return`${e} Star${1!==e?"s":""}`}const kc=g.forwardRef((function(e,t){const n=(0,ie.Z)({name:"MuiRating",props:e}),{className:l,defaultValue:I=null,disabled:o=!1,emptyIcon:a=vc,emptyLabelText:C="Empty",getLabelText:r=Rc,highlightSelectedOnly:d=!1,icon:A=fc,IconContainerComponent:u=Wc,max:b=5,name:Z,onChange:h,onChangeActive:p,onMouseLeave:G,onMouseMove:y,precision:B=1,readOnly:S=!1,size:V="medium",value:f}=n,v=(0,c.Z)(n,hc),R=(0,SI.Z)(Z),[k,X]=(0,WI.Z)({controlled:f,default:I,name:"Rating"}),J=pc(k,B),Y=i(),[{hover:H,focus:w},x]=g.useState({hover:-1,focus:-1});let N=J;-1!==H&&(N=H),-1!==w&&(N=w);const{isFocusVisibleRef:K,onBlur:z,onFocus:M,ref:E}=(0,Ng.Z)(),[L,U]=g.useState(!1),Q=g.useRef(),T=(0,Be.Z)(E,Q,t),D=e=>{let g=""===e.target.value?null:parseFloat(e.target.value);-1!==H&&(g=H),X(g),h&&h(e,g)},j=e=>{0===e.clientX&&0===e.clientY||(x({hover:-1,focus:-1}),X(null),h&&parseFloat(e.target.value)===J&&h(e,null))},P=e=>{M(e),!0===K.current&&U(!0);const g=parseFloat(e.target.value);x((e=>({hover:e.hover,focus:g})))},O=e=>{-1===H&&(z(e),!1===K.current&&U(!1),x((e=>({hover:e.hover,focus:-1}))))},[q,_]=g.useState(!1),$=(0,s.Z)({},n,{defaultValue:I,disabled:o,emptyIcon:a,emptyLabelText:C,emptyValueFocused:q,focusVisible:L,getLabelText:r,icon:A,IconContainerComponent:u,max:b,precision:B,readOnly:S,size:V}),ee=(e=>{const{classes:g,size:t,readOnly:n,disabled:l,emptyValueFocused:I,focusVisible:o}=e,a={root:["root",`size${(0,_e.Z)(t)}`,l&&"disabled",o&&"focusVisible",n&&"readOnly"],label:["label","pristine"],labelEmptyValue:[I&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return(0,F.Z)(a,mc,g)})($);return(0,m.jsxs)(Gc,(0,s.Z)({ref:T,onMouseMove:e=>{y&&y(e);const g=Q.current,{right:t,left:n}=g.getBoundingClientRect(),{width:l}=g.firstChild.getBoundingClientRect();let I;I="rtl"===Y.direction?(t-e.clientX)/(l*b):(e.clientX-n)/(l*b);let o=pc(b*I+B/2,B);o=function(e,g,t){return e<g?g:e>t?t:e}(o,B,b),x((e=>e.hover===o&&e.focus===o?e:{hover:o,focus:o})),U(!1),p&&H!==o&&p(e,o)},onMouseLeave:e=>{G&&G(e),x({hover:-1,focus:-1}),p&&-1!==H&&p(e,-1)},className:(0,W.Z)(ee.root,l,S&&"MuiRating-readOnly"),ownerState:$,role:S?"img":null,"aria-label":S?r(N):null},v,{children:[Array.from(new Array(b)).map(((e,g)=>{const t=g+1,n={classes:ee,disabled:o,emptyIcon:a,focus:w,getLabelText:r,highlightSelectedOnly:d,hover:H,icon:A,IconContainerComponent:u,name:R,onBlur:O,onChange:D,onClick:j,onFocus:P,ratingValue:N,ratingValueRounded:J,readOnly:S,ownerState:$},l=t===Math.ceil(N)&&(-1!==H||-1!==w);if(B<1){const e=Array.from(new Array(1/B));return(0,m.jsx)(Sc,{className:(0,W.Z)(ee.decimal,l&&ee.iconActive),ownerState:$,iconActive:l,children:e.map(((g,l)=>{const I=pc(t-1+(l+1)*B,B);return(0,m.jsx)(Vc,(0,s.Z)({},n,{isActive:!1,itemValue:I,labelProps:{style:e.length-1===l?{}:{width:I===N?(l+1)*B*100+"%":"0%",overflow:"hidden",position:"absolute"}}}),I)}))},t)}return(0,m.jsx)(Vc,(0,s.Z)({},n,{isActive:l,itemValue:t}),t)})),!S&&!o&&(0,m.jsxs)(yc,{className:(0,W.Z)(ee.label,ee.labelEmptyValue),ownerState:$,children:[(0,m.jsx)("input",{className:ee.visuallyHidden,value:"",id:`${R}-empty`,type:"radio",name:R,checked:null==J,onFocus:()=>_(!0),onBlur:()=>_(!1),onChange:D}),(0,m.jsx)("span",{className:ee.visuallyHidden,children:C})]})]}))}));var Xc=kc,Jc=l(4957);const Yc={0:"All",1:"Terrible",2:"Very Low",3:"Low",4:"Below Average",5:"Average",6:"Above Average",7:"High",8:"Very High",9:"Excellent",10:"Exceptional"},Hc=({localStorageKey:e})=>{const[t,n]=(0,g.useState)(localStorage.getItem("colorStarIco")||"#fff9c4"),[l,I]=(0,g.useState)(parseInt(localStorage.getItem(e)||"0",10)),[o,a]=(0,g.useState)(-1);return(0,m.jsxs)(x,{sx:{p:2,display:"block",alignItems:"center"},children:[(0,m.jsx)(Xc,{sx:{color:t},name:"simple-controlled",value:l,max:10,size:"small",onChange:(g,t)=>{(g=>{localStorage.setItem(e,g),I(g),(g=>{var t;t=1===g?"#fbe9e7":2===g?"#ffccbc":3===g?"#ffab91":4===g?"#ff8a65":5===g?"#ff7043":6===g?"#ff5722":7===g?"#f4511e":8===g?"#e64a19":9===g?"#d84315":"#bf360c",localStorage.setItem("colorStarIco",t),g>0?localStorage.setItem(e+"Color",35*g):localStorage.setItem(e+"Color",""),n(t)})(g)})(t)},onChangeActive:(e,g)=>{a(g)},emptyIcon:(0,m.jsx)(Jc.Z,{style:{opacity:.55},fontSize:"inherit"})}),(0,m.jsx)(x,{sx:{pl:1},children:Yc[-1!==o?o:l]})]})};var wc=(0,g.memo)(Hc),xc=l(8162),Fc=l(1241),Nc=l(1334);function Kc(e,g){return e.id<g.id?-1:e.id>g.id?1:0}function zc({items:e,handleDrawerOpen:t,openDrawer:n,requestSync:l}){const[I,o]=(0,g.useState)(n&&JSON.parse(localStorage.getItem("LateralOpenMenu"))||{}),[a,C]=(0,g.useState)("true"===(localStorage.getItem("FilterON")||"true")),[i,r]=(0,g.useState)("true"===(localStorage.getItem("FilterOpen")||"true"));(0,g.useEffect)((()=>{localStorage.setItem("LateralOpenMenu",JSON.stringify(I))}),[I]),(0,g.useEffect)((()=>{n||o({}),localStorage.setItem("LateralOpenMenu",JSON.stringify({}))}),[n]);const s=({item:e})=>"ORDENAR"===e.clasificacion?(0,m.jsx)(Ms,{localStorageKey:e.localStorageKey},e.id):"TRANSMISION"===e.clasificacion?(0,m.jsx)(Ls,{localStorageKey:e.localStorageKey},e.id):"FECHA"===e.clasificacion?(0,m.jsx)(bs,{colorIcons:e.localStorageKey+"Color"},e.id):"LISTAR"===e.clasificacion?(0,m.jsx)(dc,{apiURL:"/principal/"+e.url,localStorageKey:e.localStorageKey},e.id):"PUNTUACION"===e.clasificacion?(0,m.jsx)(wc,{localStorageKey:e.localStorageKey},e.id):void 0;return(0,m.jsx)(x,{sx:{marginLeft:-1},children:(0,m.jsx)(Tt,{children:(0,m.jsxs)(x,{children:[(0,m.jsxs)(St,{onClick:()=>(t(),localStorage.setItem("FilterOpen",!i),void r(!i)),children:[(0,m.jsx)(Rt,{sx:{...!a&&{color:"orange"}},children:(0,m.jsx)(xc.Z,{sx:{width:40}})}),(0,m.jsx)(Mt,{primary:"Filters"}),i?(0,m.jsx)(PI,{}):(0,m.jsx)(OI,{})]}),(0,m.jsxs)(DI,{in:i,timeout:"auto",unmountOnExit:!0,children:[(0,m.jsx)(Tt,{component:"div",disablePadding:!0,children:(0,m.jsxs)(St,{onClick:()=>(localStorage.setItem("FilterON",!a),void C(!a)),children:[(0,m.jsx)(Rt,{sx:{...!a&&{color:"orange"}},children:(0,m.jsx)(Fc.Z,{sx:{width:40}})}),(0,m.jsx)(Mt,{primary:a?"Disable filters":"Activate filters"})]})},0),(0,m.jsx)(Tt,{component:"div",disablePadding:!0,children:(0,m.jsxs)(St,{onClick:()=>l(),children:[(0,m.jsx)(Rt,{children:(0,m.jsx)(Nc.Z,{sx:{width:40}})}),(0,m.jsx)(Mt,{primary:"Update filters"})]})},1),(0,m.jsx)(xg,{variant:"middle"}),(0,m.jsx)(Tt,{component:"div",disablePadding:!0,children:e.sort(Kc).map((e=>{var g=localStorage.getItem(e.localStorageKey+"Color"),n=localStorage.getItem(e.localStorageKey+"Color")?"sepia(13%) saturate(3207%) hue-rotate("+g+"deg)":"";return(0,m.jsxs)(x,{children:[(0,m.jsxs)(St,{onClick:()=>{return g=e.id,t(),void o((e=>({...e,[g]:!e[g]})));var g},children:[(0,m.jsx)(Rt,{color:"primary",sx:{paddingLeft:.5,filter:n},children:(0,m.jsx)("img",{src:e.image,width:30})}),(0,m.jsx)(Mt,{primary:e.nombre}),I[e.id]?(0,m.jsx)(PI,{}):(0,m.jsx)(OI,{})]}),(0,m.jsx)(DI,{in:I[e.id],timeout:"auto",unmountOnExit:!0,children:(0,m.jsx)(Tt,{component:"div",disablePadding:!0,children:(0,m.jsx)(s,{item:e})},e.id)}),(0,m.jsx)(xg,{variant:"middle"})]},e.id)}))},3)]})]},0)})})}const Mc=()=>{let e=wn();return(0,g.useEffect)((()=>{localStorage.setItem("LateralMenuIndex",JSON.stringify(1)),e("/serie",{replace:!0})}),[]),(0,m.jsx)("p",{children:"Inicio"})};var Ec=(0,g.memo)(Mc),Lc=l(2761);const Uc=(0,I.ZP)("div")((({theme:e})=>({position:"relative",marginRight:e.spacing(2),borderRadius:e.shape.borderRadius,backgroundColor:(0,Te.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,Te.Fq)(e.palette.common.white,.25)},marginLeft:0,width:"100%",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(1),width:"auto"}}))),Qc=(0,I.ZP)("div")((({theme:e})=>({padding:e.spacing(0,1.5),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}))),Tc=(0,I.ZP)(ta)((({theme:e})=>({color:"inherit","& .MuiInputBase-input":{padding:e.spacing(1,1,1,0),paddingLeft:`calc(1em + ${e.spacing(4)})`,transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:"12ch","&:focus":{width:"20ch"}}}}))),Dc=({handleEntradaBuscador:e})=>(0,m.jsxs)(Uc,{children:[(0,m.jsx)(Qc,{children:(0,m.jsx)(Lc.Z,{})}),(0,m.jsx)(Tc,{placeholder:"Search",inputProps:{"aria-label":"search"},onChange:g=>{var t=g.target.value;e(t)}})]});var jc=(0,g.memo)(Dc);function Pc(e){return(0,Re.Z)("MuiMenuItem",e)}var Oc=(0,ve.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);const qc=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],_c=(0,I.ZP)(it,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,t.dense&&g.dense,t.divider&&g.divider,!t.disableGutters&&g.gutters]}})((({theme:e,ownerState:g})=>(0,s.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!g.disableGutters&&{paddingLeft:16,paddingRight:16},g.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Oc.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Oc.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Oc.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,Te.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Oc.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Oc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Xg.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Xg.inset}`]:{marginLeft:52},[`& .${Nt.root}`]:{marginTop:0,marginBottom:0},[`& .${Nt.inset}`]:{paddingLeft:36},[`& .${Vt.root}`]:{minWidth:36}},!g.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},g.dense&&(0,s.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${Vt.root} svg`]:{fontSize:"1.25rem"}}))));var $c=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:l=!1,component:I="li",dense:o=!1,divider:a=!1,disableGutters:C=!1,focusVisibleClassName:i,role:r="menuitem",tabIndex:d,className:A}=n,u=(0,c.Z)(n,qc),b=g.useContext(ht),Z=g.useMemo((()=>({dense:o||b.dense||!1,disableGutters:C})),[b.dense,o,C]),h=g.useRef(null);(0,Zt.Z)((()=>{l&&h.current&&h.current.focus()}),[l]);const p=(0,s.Z)({},n,{dense:Z.dense,divider:a,disableGutters:C}),G=(e=>{const{disabled:g,dense:t,divider:n,disableGutters:l,selected:I,classes:o}=e,a={root:["root",t&&"dense",g&&"disabled",!l&&"gutters",n&&"divider",I&&"selected"]},C=(0,F.Z)(a,Pc,o);return(0,s.Z)({},o,C)})(n),y=(0,Be.Z)(h,t);let B;return n.disabled||(B=void 0!==d?d:-1),(0,m.jsx)(ht.Provider,{value:Z,children:(0,m.jsx)(_c,(0,s.Z)({ref:y,role:r,tabIndex:B,component:I,focusVisibleClassName:(0,W.Z)(G.focusVisible,i),className:(0,W.Z)(G.root,A)},u,{ownerState:p,classes:G}))})})),ed=g.createContext(),gd=g.createContext();function td(e){return(0,Re.Z)("MuiTableCell",e)}var nd=(0,ve.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]);const ld=["align","className","component","padding","scope","size","sortDirection","variant"],Id=(0,I.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[t.variant],g[`size${(0,_e.Z)(t.size)}`],"normal"!==t.padding&&g[`padding${(0,_e.Z)(t.padding)}`],"inherit"!==t.align&&g[`align${(0,_e.Z)(t.align)}`],t.stickyHeader&&g.stickyHeader]}})((({theme:e,ownerState:g})=>(0,s.Z)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid\n    ${"light"===e.palette.mode?(0,Te.$n)((0,Te.Fq)(e.palette.divider,1),.88):(0,Te._j)((0,Te.Fq)(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},"head"===g.variant&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},"body"===g.variant&&{color:(e.vars||e).palette.text.primary},"footer"===g.variant&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},"small"===g.size&&{padding:"6px 16px",[`&.${nd.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},"checkbox"===g.padding&&{width:48,padding:"0 0 0 4px"},"none"===g.padding&&{padding:0},"left"===g.align&&{textAlign:"left"},"center"===g.align&&{textAlign:"center"},"right"===g.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===g.align&&{textAlign:"justify"},g.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})));var od,ad,Cd,id,rd,sd,cd,dd,Ad=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiTableCell"}),{align:l="inherit",className:I,component:o,padding:a,scope:C,size:i,sortDirection:r,variant:d}=n,A=(0,c.Z)(n,ld),u=g.useContext(ed),b=g.useContext(gd),Z=b&&"head"===b.variant;let h;h=o||(Z?"th":"td");let p=C;"td"===h?p=void 0:!p&&Z&&(p="col");const G=d||b&&b.variant,y=(0,s.Z)({},n,{align:l,component:h,padding:a||(u&&u.padding?u.padding:"normal"),size:i||(u&&u.size?u.size:"medium"),sortDirection:r,stickyHeader:"head"===G&&u&&u.stickyHeader,variant:G}),B=(e=>{const{classes:g,variant:t,align:n,padding:l,size:I,stickyHeader:o}=e,a={root:["root",t,o&&"stickyHeader","inherit"!==n&&`align${(0,_e.Z)(n)}`,"normal"!==l&&`padding${(0,_e.Z)(l)}`,`size${(0,_e.Z)(I)}`]};return(0,F.Z)(a,td,g)})(y);let S=null;return r&&(S="asc"===r?"ascending":"descending"),(0,m.jsx)(Id,(0,s.Z)({as:h,ref:t,className:(0,W.Z)(B.root,I),"aria-sort":S,scope:p,ownerState:y},A))})),ud=(0,jI.Z)((0,m.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),md=(0,jI.Z)((0,m.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),bd=(0,jI.Z)((0,m.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Zd=(0,jI.Z)((0,m.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage");const hd=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"];var pd=g.forwardRef((function(e,g){const{backIconButtonProps:t,count:n,getItemAriaLabel:l,nextIconButtonProps:I,onPageChange:o,page:a,rowsPerPage:C,showFirstButton:r,showLastButton:d}=e,A=(0,c.Z)(e,hd),u=i();return(0,m.jsxs)("div",(0,s.Z)({ref:g},A,{children:[r&&(0,m.jsx)(ut,{onClick:e=>{o(e,0)},disabled:0===a,"aria-label":l("first",a),title:l("first",a),children:"rtl"===u.direction?od||(od=(0,m.jsx)(bd,{})):ad||(ad=(0,m.jsx)(Zd,{}))}),(0,m.jsx)(ut,(0,s.Z)({onClick:e=>{o(e,a-1)},disabled:0===a,color:"inherit","aria-label":l("previous",a),title:l("previous",a)},t,{children:"rtl"===u.direction?Cd||(Cd=(0,m.jsx)(md,{})):id||(id=(0,m.jsx)(ud,{}))})),(0,m.jsx)(ut,(0,s.Z)({onClick:e=>{o(e,a+1)},disabled:-1!==n&&a>=Math.ceil(n/C)-1,color:"inherit","aria-label":l("next",a),title:l("next",a)},I,{children:"rtl"===u.direction?rd||(rd=(0,m.jsx)(ud,{})):sd||(sd=(0,m.jsx)(md,{}))})),d&&(0,m.jsx)(ut,{onClick:e=>{o(e,Math.max(0,Math.ceil(n/C)-1))},disabled:a>=Math.ceil(n/C)-1,"aria-label":l("last",a),title:l("last",a),children:"rtl"===u.direction?cd||(cd=(0,m.jsx)(Zd,{})):dd||(dd=(0,m.jsx)(bd,{}))})]}))}));function Gd(e){return(0,Re.Z)("MuiTablePagination",e)}var yd,Bd=(0,ve.Z)("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);const Sd=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],Wd=(0,I.ZP)(Ad,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,g)=>g.root})((({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}}))),Vd=(0,I.ZP)(bg,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,g)=>(0,s.Z)({[`& .${Bd.actions}`]:g.actions},g.toolbar)})((({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${Bd.actions}`]:{flexShrink:0,marginLeft:20}}))),fd=(0,I.ZP)("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,g)=>g.spacer})({flex:"1 1 100%"}),vd=(0,I.ZP)("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,g)=>g.selectLabel})((({theme:e})=>(0,s.Z)({},e.typography.body2,{flexShrink:0}))),Rd=(0,I.ZP)(ei,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,g)=>(0,s.Z)({[`& .${Bd.selectIcon}`]:g.selectIcon,[`& .${Bd.select}`]:g.select},g.input,g.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${Bd.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),kd=(0,I.ZP)($c,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,g)=>g.menuItem})({}),Xd=(0,I.ZP)("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,g)=>g.displayedRows})((({theme:e})=>(0,s.Z)({},e.typography.body2,{flexShrink:0})));function Jd({from:e,to:g,count:t}){return`${e}${g} of ${-1!==t?t:`more than ${g}`}`}function Yd(e){return`Go to ${e} page`}var Hd=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiTablePagination"}),{ActionsComponent:l=pd,backIconButtonProps:I,className:o,colSpan:a,component:C=Ad,count:i,getItemAriaLabel:r=Yd,labelDisplayedRows:d=Jd,labelRowsPerPage:A="Rows per page:",nextIconButtonProps:u,onPageChange:b,onRowsPerPageChange:Z,page:h,rowsPerPage:p,rowsPerPageOptions:G=[10,25,50,100],SelectProps:y={},showFirstButton:B=!1,showLastButton:S=!1}=n,V=(0,c.Z)(n,Sd),f=n,v=(e=>{const{classes:g}=e;return(0,F.Z)({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},Gd,g)})(f),R=y.native?"option":kd;let k;C!==Ad&&"td"!==C||(k=a||1e3);const X=(0,SI.Z)(y.id),J=(0,SI.Z)(y.labelId);return(0,m.jsx)(Wd,(0,s.Z)({colSpan:k,ref:t,as:C,ownerState:f,className:(0,W.Z)(v.root,o)},V,{children:(0,m.jsxs)(Vd,{className:v.toolbar,children:[(0,m.jsx)(fd,{className:v.spacer}),G.length>1&&(0,m.jsx)(vd,{className:v.selectLabel,id:J,children:A}),G.length>1&&(0,m.jsx)(Rd,(0,s.Z)({variant:"standard"},!y.variant&&{input:yd||(yd=(0,m.jsx)(ta,{}))},{value:p,onChange:Z,id:X,labelId:J},y,{classes:(0,s.Z)({},y.classes,{root:(0,W.Z)(v.input,v.selectRoot,(y.classes||{}).root),select:(0,W.Z)(v.select,(y.classes||{}).select),icon:(0,W.Z)(v.selectIcon,(y.classes||{}).icon)}),children:G.map((e=>(0,g.createElement)(R,(0,s.Z)({},!K(R)&&{ownerState:f},{className:v.menuItem,key:e.label?e.label:e,value:e.value?e.value:e}),e.label?e.label:e)))})),(0,m.jsx)(Xd,{className:v.displayedRows,children:d({from:0===i?0:h*p+1,to:-1===i?(h+1)*p:-1===p?i:Math.min(i,(h+1)*p),count:-1===i?-1:i,page:h})}),(0,m.jsx)(l,{className:v.actions,backIconButtonProps:I,count:i,nextIconButtonProps:u,onPageChange:b,page:h,rowsPerPage:p,showFirstButton:B,showLastButton:S,getItemAriaLabel:r})]})}))}));const wd=(0,I.ZP)((({className:e,...g})=>(0,m.jsx)(xI,{...g,classes:{popper:e}})))((({theme:e})=>({[`& .${fI.tooltip}`]:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,boxShadow:e.shadows[1],fontSize:11,textAlign:"justify"}}))),xd=({nombre:e,puntuacion:t,descripcion:n,fecha_inicio:l,genero:o=[],cantidad:a,color:C,img:i,size:r})=>{const[s,c]=(0,g.useState)((()=>{var e=0,g=0,t=0,n=0,l=0,I=0;return"large"===r?(e=460,g=1.39,t=1.34,n=1.335,l=1.27,I=1.24):"small"===r?(e=240,g=1.42,t=1.39,n=1.404,l=1.36,I=1.42):(e=350,g=1.4,t=1.36,n=1.36,l=1.3,I=1.275),{CardSizeWidth:e,CardSizeHeight:1.46*e,ImgSize:.78*e,NombreTop:g,PuntuacionTop:t,ImagenTop:n,DescripcionTop:l,FechaTop:I}})),d=(0,I.ZP)("img")({position:"relative",width:s.ImgSize,height:s.ImgSize,top:-s.CardSizeWidth*s.ImagenTop,left:"11%",boxShadow:"0 0 0.75rem "+C}),A=(0,I.ZP)("img")({display:"block",width:"100%",height:"100%"}),u="/media/cards/"+C+".jpg";return(0,m.jsx)(wd,{title:e+": "+n,placement:"right-start",followCursor:!0,children:(0,m.jsxs)(x,{sx:{width:s.CardSizeWidth,height:s.CardSizeHeight},children:[(0,m.jsx)(A,{alt:"complex",src:`${u}`}),(0,m.jsx)(xt,{align:"left",variant:"subtitle1",component:"div",sx:{height:"22px",width:"84%",overflow:"hidden",position:"relative",top:-s.CardSizeWidth*s.NombreTop,left:"8%",color:"black",textShadow:"2px 2px 4px white",fontWeight:"bold"},children:e}),(0,m.jsx)(Xc,{name:"simple-controlled",sx:{height:"4%",width:"80%",position:"relative",top:-s.CardSizeWidth*s.PuntuacionTop,left:"10%",color:"black"},value:t,emptyIcon:(0,m.jsx)(Jc.Z,{style:{opacity:.55},fontSize:"inherit"}),readOnly:!0,size:r,max:10}),(0,m.jsx)(d,{src:`${i||"/media/none.png"}`}),(0,m.jsxs)(x,{sx:{height:"17.5%",width:"83%",overflow:"hidden",verflow:"hidden",position:"relative",top:-s.CardSizeWidth*s.DescripcionTop,left:"8%"},children:[(0,m.jsxs)(xt,{variant:"body2",sx:{textAlign:"justify",fontSize:"12px",color:"black",overflow:"hidden",maxHeight:"80%"},children:["[",o.join(", "),"]"]}),"small"!==r&&(0,m.jsx)(xg,{sx:{backgroundColor:"black"}}),(0,m.jsx)(xt,{variant:"body2",sx:{textAlign:"justify",fontSize:"12px",color:"black"},children:"small"!==r&&n})]}),(0,m.jsxs)(x,{sx:{height:"20px",width:"84%",overflow:"hidden",position:"relative",top:-s.CardSizeWidth*s.FechaTop,left:"8%",display:"flex",alignItems:"center"},children:[(0,m.jsxs)(xt,{variant:"body2",sx:{fontSize:"11px",color:"black",fontWeight:"bold",width:"100px",flexGrow:1},children:["Episodes: ",a]}),(0,m.jsxs)(xt,{variant:"body2",sx:{fontSize:"11px",color:"black",fontWeight:"bold",width:"65px",flexGrow:0},children:["Year: ",l]})]})]})})};var Fd=(0,g.memo)(xd),Nd=l(7925);function Kd(e){return(0,Re.Z)("MuiButton",e)}var zd=(0,ve.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Md=g.createContext({}),Ed=g.createContext(void 0);const Ld=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ud=e=>(0,s.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}}),Qd=(0,I.ZP)(it,{shouldForwardProp:e=>(0,I.FO)(e)||"classes"===e,name:"MuiButton",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[t.variant],g[`${t.variant}${(0,_e.Z)(t.color)}`],g[`size${(0,_e.Z)(t.size)}`],g[`${t.variant}Size${(0,_e.Z)(t.size)}`],"inherit"===t.color&&g.colorInherit,t.disableElevation&&g.disableElevation,t.fullWidth&&g.fullWidth]}})((({theme:e,ownerState:g})=>{var t,n;const l="light"===e.palette.mode?e.palette.grey[300]:e.palette.grey[800],I="light"===e.palette.mode?e.palette.grey.A100:e.palette.grey[700];return(0,s.Z)({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,s.Z)({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Te.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===g.variant&&"inherit"!==g.color&&{backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Te.Fq)(e.palette[g.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===g.variant&&"inherit"!==g.color&&{border:`1px solid ${(e.vars||e).palette[g.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[g.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,Te.Fq)(e.palette[g.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===g.variant&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:I,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},"contained"===g.variant&&"inherit"!==g.color&&{backgroundColor:(e.vars||e).palette[g.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[g.color].main}}),"&:active":(0,s.Z)({},"contained"===g.variant&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${zd.focusVisible}`]:(0,s.Z)({},"contained"===g.variant&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${zd.disabled}`]:(0,s.Z)({color:(e.vars||e).palette.action.disabled},"outlined"===g.variant&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"contained"===g.variant&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},"text"===g.variant&&{padding:"6px 8px"},"text"===g.variant&&"inherit"!==g.color&&{color:(e.vars||e).palette[g.color].main},"outlined"===g.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===g.variant&&"inherit"!==g.color&&{color:(e.vars||e).palette[g.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[g.color].mainChannel} / 0.5)`:`1px solid ${(0,Te.Fq)(e.palette[g.color].main,.5)}`},"contained"===g.variant&&{color:e.vars?e.vars.palette.text.primary:null==(t=(n=e.palette).getContrastText)?void 0:t.call(n,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:l,boxShadow:(e.vars||e).shadows[2]},"contained"===g.variant&&"inherit"!==g.color&&{color:(e.vars||e).palette[g.color].contrastText,backgroundColor:(e.vars||e).palette[g.color].main},"inherit"===g.color&&{color:"inherit",borderColor:"currentColor"},"small"===g.size&&"text"===g.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===g.size&&"text"===g.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===g.size&&"outlined"===g.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===g.size&&"outlined"===g.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===g.size&&"contained"===g.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===g.size&&"contained"===g.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},g.fullWidth&&{width:"100%"})}),(({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${zd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${zd.disabled}`]:{boxShadow:"none"}})),Td=(0,I.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.startIcon,g[`iconSize${(0,_e.Z)(t.size)}`]]}})((({ownerState:e})=>(0,s.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===e.size&&{marginLeft:-2},Ud(e)))),Dd=(0,I.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.endIcon,g[`iconSize${(0,_e.Z)(t.size)}`]]}})((({ownerState:e})=>(0,s.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===e.size&&{marginRight:-2},Ud(e)))),jd=g.forwardRef((function(e,t){const n=g.useContext(Md),l=g.useContext(Ed),I=(0,Nd.Z)(n,e),o=(0,ie.Z)({props:I,name:"MuiButton"}),{children:a,color:C="primary",component:i="button",className:r,disabled:d=!1,disableElevation:A=!1,disableFocusRipple:u=!1,endIcon:b,focusVisibleClassName:Z,fullWidth:h=!1,size:p="medium",startIcon:G,type:y,variant:B="text"}=o,S=(0,c.Z)(o,Ld),V=(0,s.Z)({},o,{color:C,component:i,disabled:d,disableElevation:A,disableFocusRipple:u,fullWidth:h,size:p,type:y,variant:B}),f=(e=>{const{color:g,disableElevation:t,fullWidth:n,size:l,variant:I,classes:o}=e,a={root:["root",I,`${I}${(0,_e.Z)(g)}`,`size${(0,_e.Z)(l)}`,`${I}Size${(0,_e.Z)(l)}`,"inherit"===g&&"colorInherit",t&&"disableElevation",n&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${(0,_e.Z)(l)}`],endIcon:["endIcon",`iconSize${(0,_e.Z)(l)}`]},C=(0,F.Z)(a,Kd,o);return(0,s.Z)({},o,C)})(V),v=G&&(0,m.jsx)(Td,{className:f.startIcon,ownerState:V,children:G}),R=b&&(0,m.jsx)(Dd,{className:f.endIcon,ownerState:V,children:b}),k=l||"";return(0,m.jsxs)(Qd,(0,s.Z)({ownerState:V,className:(0,W.Z)(n.className,f.root,r,k),component:i,disabled:d,focusRipple:!u,focusVisibleClassName:(0,W.Z)(f.focusVisible,Z),ref:t,type:y},S,{classes:f,children:[v,a,R]}))}));var Pd=jd,Od=l(1775),qd=l(9590),_d=l.n(qd),$d=l(1143),eA=l.n($d),gA=l(6774),tA=l.n(gA);function nA(){return nA=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},nA.apply(this,arguments)}function lA(e,g){e.prototype=Object.create(g.prototype),e.prototype.constructor=e,IA(e,g)}function IA(e,g){return IA=Object.setPrototypeOf||function(e,g){return e.__proto__=g,e},IA(e,g)}function oA(e,g){if(null==e)return{};var t,n,l={},I=Object.keys(e);for(n=0;n<I.length;n++)g.indexOf(t=I[n])>=0||(l[t]=e[t]);return l}var aA={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},CA={rel:["amphtml","canonical","alternate"]},iA={type:["application/ld+json"]},rA={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},sA=Object.keys(aA).map((function(e){return aA[e]})),cA={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},dA=Object.keys(cA).reduce((function(e,g){return e[cA[g]]=g,e}),{}),AA=function(e,g){for(var t=e.length-1;t>=0;t-=1){var n=e[t];if(Object.prototype.hasOwnProperty.call(n,g))return n[g]}return null},uA=function(e){var g=AA(e,aA.TITLE),t=AA(e,"titleTemplate");if(Array.isArray(g)&&(g=g.join("")),t&&g)return t.replace(/%s/g,(function(){return g}));var n=AA(e,"defaultTitle");return g||n||void 0},mA=function(e){return AA(e,"onChangeClientState")||function(){}},bA=function(e,g){return g.filter((function(g){return void 0!==g[e]})).map((function(g){return g[e]})).reduce((function(e,g){return nA({},e,g)}),{})},ZA=function(e,g){return g.filter((function(e){return void 0!==e[aA.BASE]})).map((function(e){return e[aA.BASE]})).reverse().reduce((function(g,t){if(!g.length)for(var n=Object.keys(t),l=0;l<n.length;l+=1){var I=n[l].toLowerCase();if(-1!==e.indexOf(I)&&t[I])return g.concat(t)}return g}),[])},hA=function(e,g,t){var n={};return t.filter((function(g){return!!Array.isArray(g[e])||(void 0!==g[e]&&console&&"function"==typeof console.warn&&console.warn("Helmet: "+e+' should be of type "Array". Instead found type "'+typeof g[e]+'"'),!1)})).map((function(g){return g[e]})).reverse().reduce((function(e,t){var l={};t.filter((function(e){for(var t,I=Object.keys(e),o=0;o<I.length;o+=1){var a=I[o],C=a.toLowerCase();-1===g.indexOf(C)||"rel"===t&&"canonical"===e[t].toLowerCase()||"rel"===C&&"stylesheet"===e[C].toLowerCase()||(t=C),-1===g.indexOf(a)||"innerHTML"!==a&&"cssText"!==a&&"itemprop"!==a||(t=a)}if(!t||!e[t])return!1;var i=e[t].toLowerCase();return n[t]||(n[t]={}),l[t]||(l[t]={}),!n[t][i]&&(l[t][i]=!0,!0)})).reverse().forEach((function(g){return e.push(g)}));for(var I=Object.keys(l),o=0;o<I.length;o+=1){var a=I[o],C=nA({},n[a],l[a]);n[a]=C}return e}),[]).reverse()},pA=function(e,g){if(Array.isArray(e)&&e.length)for(var t=0;t<e.length;t+=1)if(e[t][g])return!0;return!1},GA=function(e){return Array.isArray(e)?e.join(""):e},yA=function(e,g){return Array.isArray(e)?e.reduce((function(e,t){return function(e,g){for(var t=Object.keys(e),n=0;n<t.length;n+=1)if(g[t[n]]&&g[t[n]].includes(e[t[n]]))return!0;return!1}(t,g)?e.priority.push(t):e.default.push(t),e}),{priority:[],default:[]}):{default:e}},BA=function(e,g){var t;return nA({},e,((t={})[g]=void 0,t))},SA=[aA.NOSCRIPT,aA.SCRIPT,aA.STYLE],WA=function(e,g){return void 0===g&&(g=!0),!1===g?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},VA=function(e){return Object.keys(e).reduce((function(g,t){var n=void 0!==e[t]?t+'="'+e[t]+'"':""+t;return g?g+" "+n:n}),"")},fA=function(e,g){return void 0===g&&(g={}),Object.keys(e).reduce((function(g,t){return g[cA[t]||t]=e[t],g}),g)},vA=function(e,t){return t.map((function(t,n){var l,I=((l={key:n})["data-rh"]=!0,l);return Object.keys(t).forEach((function(e){var g=cA[e]||e;"innerHTML"===g||"cssText"===g?I.dangerouslySetInnerHTML={__html:t.innerHTML||t.cssText}:I[g]=t[e]})),g.createElement(e,I)}))},RA=function(e,t,n){switch(e){case aA.TITLE:return{toComponent:function(){return n=t.titleAttributes,(l={key:e=t.title})["data-rh"]=!0,I=fA(n,l),[g.createElement(aA.TITLE,I,e)];var e,n,l,I},toString:function(){return function(e,g,t,n){var l=VA(t),I=GA(g);return l?"<"+e+' data-rh="true" '+l+">"+WA(I,n)+"</"+e+">":"<"+e+' data-rh="true">'+WA(I,n)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return fA(t)},toString:function(){return VA(t)}};default:return{toComponent:function(){return vA(e,t)},toString:function(){return function(e,g,t){return g.reduce((function(g,n){var l=Object.keys(n).filter((function(e){return!("innerHTML"===e||"cssText"===e)})).reduce((function(e,g){var l=void 0===n[g]?g:g+'="'+WA(n[g],t)+'"';return e?e+" "+l:l}),""),I=n.innerHTML||n.cssText||"",o=-1===SA.indexOf(e);return g+"<"+e+' data-rh="true" '+l+(o?"/>":">"+I+"</"+e+">")}),"")}(e,t,n)}}}},kA=function(e){var g=e.baseTag,t=e.bodyAttributes,n=e.encode,l=e.htmlAttributes,I=e.noscriptTags,o=e.styleTags,a=e.title,C=void 0===a?"":a,i=e.titleAttributes,r=e.linkTags,s=e.metaTags,c=e.scriptTags,d={toComponent:function(){},toString:function(){return""}};if(e.prioritizeSeoTags){var A=function(e){var g=e.linkTags,t=e.scriptTags,n=e.encode,l=yA(e.metaTags,rA),I=yA(g,CA),o=yA(t,iA);return{priorityMethods:{toComponent:function(){return[].concat(vA(aA.META,l.priority),vA(aA.LINK,I.priority),vA(aA.SCRIPT,o.priority))},toString:function(){return RA(aA.META,l.priority,n)+" "+RA(aA.LINK,I.priority,n)+" "+RA(aA.SCRIPT,o.priority,n)}},metaTags:l.default,linkTags:I.default,scriptTags:o.default}}(e);d=A.priorityMethods,r=A.linkTags,s=A.metaTags,c=A.scriptTags}return{priority:d,base:RA(aA.BASE,g,n),bodyAttributes:RA("bodyAttributes",t,n),htmlAttributes:RA("htmlAttributes",l,n),link:RA(aA.LINK,r,n),meta:RA(aA.META,s,n),noscript:RA(aA.NOSCRIPT,I,n),script:RA(aA.SCRIPT,c,n),style:RA(aA.STYLE,o,n),title:RA(aA.TITLE,{title:C,titleAttributes:i},n)}},XA=[],JA=function(e,g){var t=this;void 0===g&&(g="undefined"!=typeof document),this.instances=[],this.value={setHelmet:function(e){t.context.helmet=e},helmetInstances:{get:function(){return t.canUseDOM?XA:t.instances},add:function(e){(t.canUseDOM?XA:t.instances).push(e)},remove:function(e){var g=(t.canUseDOM?XA:t.instances).indexOf(e);(t.canUseDOM?XA:t.instances).splice(g,1)}}},this.context=e,this.canUseDOM=g,g||(e.helmet=kA({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},YA=g.createContext({}),HA=pi().shape({setHelmet:pi().func,helmetInstances:pi().shape({get:pi().func,add:pi().func,remove:pi().func})}),wA="undefined"!=typeof document,xA=function(e){function t(g){var n;return(n=e.call(this,g)||this).helmetData=new JA(n.props.context,t.canUseDOM),n}return lA(t,e),t.prototype.render=function(){return g.createElement(YA.Provider,{value:this.helmetData.value},this.props.children)},t}(g.Component);xA.canUseDOM=wA,xA.propTypes={context:pi().shape({helmet:pi().shape()}),children:pi().node.isRequired},xA.defaultProps={context:{}},xA.displayName="HelmetProvider";var FA=function(e,g){var t,n=document.head||document.querySelector(aA.HEAD),l=n.querySelectorAll(e+"[data-rh]"),I=[].slice.call(l),o=[];return g&&g.length&&g.forEach((function(g){var n=document.createElement(e);for(var l in g)Object.prototype.hasOwnProperty.call(g,l)&&("innerHTML"===l?n.innerHTML=g.innerHTML:"cssText"===l?n.styleSheet?n.styleSheet.cssText=g.cssText:n.appendChild(document.createTextNode(g.cssText)):n.setAttribute(l,void 0===g[l]?"":g[l]));n.setAttribute("data-rh","true"),I.some((function(e,g){return t=g,n.isEqualNode(e)}))?I.splice(t,1):o.push(n)})),I.forEach((function(e){return e.parentNode.removeChild(e)})),o.forEach((function(e){return n.appendChild(e)})),{oldTags:I,newTags:o}},NA=function(e,g){var t=document.getElementsByTagName(e)[0];if(t){for(var n=t.getAttribute("data-rh"),l=n?n.split(","):[],I=[].concat(l),o=Object.keys(g),a=0;a<o.length;a+=1){var C=o[a],i=g[C]||"";t.getAttribute(C)!==i&&t.setAttribute(C,i),-1===l.indexOf(C)&&l.push(C);var r=I.indexOf(C);-1!==r&&I.splice(r,1)}for(var s=I.length-1;s>=0;s-=1)t.removeAttribute(I[s]);l.length===I.length?t.removeAttribute("data-rh"):t.getAttribute("data-rh")!==o.join(",")&&t.setAttribute("data-rh",o.join(","))}},KA=function(e,g){var t=e.baseTag,n=e.htmlAttributes,l=e.linkTags,I=e.metaTags,o=e.noscriptTags,a=e.onChangeClientState,C=e.scriptTags,i=e.styleTags,r=e.title,s=e.titleAttributes;NA(aA.BODY,e.bodyAttributes),NA(aA.HTML,n),function(e,g){void 0!==e&&document.title!==e&&(document.title=GA(e)),NA(aA.TITLE,g)}(r,s);var c={baseTag:FA(aA.BASE,t),linkTags:FA(aA.LINK,l),metaTags:FA(aA.META,I),noscriptTags:FA(aA.NOSCRIPT,o),scriptTags:FA(aA.SCRIPT,C),styleTags:FA(aA.STYLE,i)},d={},A={};Object.keys(c).forEach((function(e){var g=c[e],t=g.newTags,n=g.oldTags;t.length&&(d[e]=t),n.length&&(A[e]=c[e].oldTags)})),g&&g(),a(e,d,A)},zA=null,MA=function(e){function g(){for(var g,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(g=e.call.apply(e,[this].concat(n))||this).rendered=!1,g}lA(g,e);var t=g.prototype;return t.shouldComponentUpdate=function(e){return!tA()(e,this.props)},t.componentDidUpdate=function(){this.emitChange()},t.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},t.emitChange=function(){var e,g,t=this.props.context,n=t.setHelmet,l=null,I=(e=t.helmetInstances.get().map((function(e){var g=nA({},e.props);return delete g.context,g})),{baseTag:ZA(["href"],e),bodyAttributes:bA("bodyAttributes",e),defer:AA(e,"defer"),encode:AA(e,"encodeSpecialCharacters"),htmlAttributes:bA("htmlAttributes",e),linkTags:hA(aA.LINK,["rel","href"],e),metaTags:hA(aA.META,["name","charset","http-equiv","property","itemprop"],e),noscriptTags:hA(aA.NOSCRIPT,["innerHTML"],e),onChangeClientState:mA(e),scriptTags:hA(aA.SCRIPT,["src","innerHTML"],e),styleTags:hA(aA.STYLE,["cssText"],e),title:uA(e),titleAttributes:bA("titleAttributes",e),prioritizeSeoTags:pA(e,"prioritizeSeoTags")});xA.canUseDOM?(g=I,zA&&cancelAnimationFrame(zA),g.defer?zA=requestAnimationFrame((function(){KA(g,(function(){zA=null}))})):(KA(g),zA=null)):kA&&(l=kA(I)),n(l)},t.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},t.render=function(){return this.init(),null},g}(g.Component);MA.propTypes={context:HA.isRequired},MA.displayName="HelmetDispatcher";var EA=["children"],LA=["children"],UA=function(e){function t(){return e.apply(this,arguments)||this}lA(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){return!_d()(BA(this.props,"helmetData"),BA(e,"helmetData"))},n.mapNestedChildrenToProps=function(e,g){if(!g)return null;switch(e.type){case aA.SCRIPT:case aA.NOSCRIPT:return{innerHTML:g};case aA.STYLE:return{cssText:g};default:throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},n.flattenArrayTypeChildren=function(e){var g,t=e.child,n=e.arrayTypeChildren;return nA({},n,((g={})[t.type]=[].concat(n[t.type]||[],[nA({},e.newChildProps,this.mapNestedChildrenToProps(t,e.nestedChildren))]),g))},n.mapObjectTypeChildren=function(e){var g,t,n=e.child,l=e.newProps,I=e.newChildProps,o=e.nestedChildren;switch(n.type){case aA.TITLE:return nA({},l,((g={})[n.type]=o,g.titleAttributes=nA({},I),g));case aA.BODY:return nA({},l,{bodyAttributes:nA({},I)});case aA.HTML:return nA({},l,{htmlAttributes:nA({},I)});default:return nA({},l,((t={})[n.type]=nA({},I),t))}},n.mapArrayTypeChildrenToProps=function(e,g){var t=nA({},g);return Object.keys(e).forEach((function(g){var n;t=nA({},t,((n={})[g]=e[g],n))})),t},n.warnOnInvalidChildren=function(e,g){return eA()(sA.some((function(g){return e.type===g})),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+sA.join(", ")+" are allowed. Helmet does not support rendering <"+e.type+"> elements. Refer to our API for more information."),eA()(!g||"string"==typeof g||Array.isArray(g)&&!g.some((function(e){return"string"!=typeof e})),"Helmet expects a string as a child of <"+e.type+">. Did you forget to wrap your children in braces? ( <"+e.type+">{``}</"+e.type+"> ) Refer to our API for more information."),!0},n.mapChildrenToProps=function(e,t){var n=this,l={};return g.Children.forEach(e,(function(e){if(e&&e.props){var g=e.props,I=g.children,o=oA(g,EA),a=Object.keys(o).reduce((function(e,g){return e[dA[g]||g]=o[g],e}),{}),C=e.type;switch("symbol"==typeof C?C=C.toString():n.warnOnInvalidChildren(e,I),C){case aA.FRAGMENT:t=n.mapChildrenToProps(I,t);break;case aA.LINK:case aA.META:case aA.NOSCRIPT:case aA.SCRIPT:case aA.STYLE:l=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:l,newChildProps:a,nestedChildren:I});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:a,nestedChildren:I})}}})),this.mapArrayTypeChildrenToProps(l,t)},n.render=function(){var e=this.props,t=e.children,n=oA(e,LA),l=nA({},n),I=n.helmetData;return t&&(l=this.mapChildrenToProps(t,l)),!I||I instanceof JA||(I=new JA(I.context,I.instances)),I?g.createElement(MA,nA({},l,{context:I.value,helmetData:void 0})):g.createElement(YA.Consumer,null,(function(e){return g.createElement(MA,nA({},l,{context:e}))}))},t}(g.Component);function QA(e){return(0,Re.Z)("MuiAlert",e)}UA.propTypes={base:pi().object,bodyAttributes:pi().object,children:pi().oneOfType([pi().arrayOf(pi().node),pi().node]),defaultTitle:pi().string,defer:pi().bool,encodeSpecialCharacters:pi().bool,htmlAttributes:pi().object,link:pi().arrayOf(pi().object),meta:pi().arrayOf(pi().object),noscript:pi().arrayOf(pi().object),onChangeClientState:pi().func,script:pi().arrayOf(pi().object),style:pi().arrayOf(pi().object),title:pi().string,titleAttributes:pi().object,titleTemplate:pi().string,prioritizeSeoTags:pi().bool,helmetData:pi().object},UA.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},UA.displayName="Helmet";var TA=(0,ve.Z)("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),DA=(0,jI.Z)((0,m.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),jA=(0,jI.Z)((0,m.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),PA=(0,jI.Z)((0,m.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),OA=(0,jI.Z)((0,m.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");const qA=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],_A=(0,I.ZP)(qe,{name:"MuiAlert",slot:"Root",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.root,g[t.variant],g[`${t.variant}${(0,_e.Z)(t.color||t.severity)}`]]}})((({theme:e,ownerState:g})=>{const t="light"===e.palette.mode?Te._j:Te.$n,n="light"===e.palette.mode?Te.$n:Te._j,l=g.color||g.severity;return(0,s.Z)({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},l&&"standard"===g.variant&&{color:e.vars?e.vars.palette.Alert[`${l}Color`]:t(e.palette[l].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${l}StandardBg`]:n(e.palette[l].light,.9),[`& .${TA.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette[l].main}},l&&"outlined"===g.variant&&{color:e.vars?e.vars.palette.Alert[`${l}Color`]:t(e.palette[l].light,.6),border:`1px solid ${(e.vars||e).palette[l].light}`,[`& .${TA.icon}`]:e.vars?{color:e.vars.palette.Alert[`${l}IconColor`]}:{color:e.palette[l].main}},l&&"filled"===g.variant&&(0,s.Z)({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${l}FilledColor`],backgroundColor:e.vars.palette.Alert[`${l}FilledBg`]}:{backgroundColor:"dark"===e.palette.mode?e.palette[l].dark:e.palette[l].main,color:e.palette.getContrastText(e.palette[l].main)}))})),$A=(0,I.ZP)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,g)=>g.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),eu=(0,I.ZP)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,g)=>g.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),gu=(0,I.ZP)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,g)=>g.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),tu={success:(0,m.jsx)(DA,{fontSize:"inherit"}),warning:(0,m.jsx)(jA,{fontSize:"inherit"}),error:(0,m.jsx)(PA,{fontSize:"inherit"}),info:(0,m.jsx)(OA,{fontSize:"inherit"})},nu=g.forwardRef((function(e,g){var t,n,l,I,o,a;const C=(0,ie.Z)({props:e,name:"MuiAlert"}),{action:i,children:r,className:d,closeText:A="Close",color:u,components:b={},componentsProps:Z={},icon:h,iconMapping:p=tu,onClose:G,role:y="alert",severity:B="success",slotProps:S={},slots:V={},variant:f="standard"}=C,v=(0,c.Z)(C,qA),R=(0,s.Z)({},C,{color:u,severity:B,variant:f}),k=(e=>{const{variant:g,color:t,severity:n,classes:l}=e,I={root:["root",`${g}${(0,_e.Z)(t||n)}`,`${g}`],icon:["icon"],message:["message"],action:["action"]};return(0,F.Z)(I,QA,l)})(R),X=null!=(t=null!=(n=V.closeButton)?n:b.CloseButton)?t:ut,J=null!=(l=null!=(I=V.closeIcon)?I:b.CloseIcon)?l:Ur,Y=null!=(o=S.closeButton)?o:Z.closeButton,H=null!=(a=S.closeIcon)?a:Z.closeIcon;return(0,m.jsxs)(_A,(0,s.Z)({role:y,elevation:0,ownerState:R,className:(0,W.Z)(k.root,d),ref:g},v,{children:[!1!==h?(0,m.jsx)($A,{ownerState:R,className:k.icon,children:h||p[B]||tu[B]}):null,(0,m.jsx)(eu,{ownerState:R,className:k.message,children:r}),null!=i?(0,m.jsx)(gu,{ownerState:R,className:k.action,children:i}):null,null==i&&G?(0,m.jsx)(gu,{ownerState:R,className:k.action,children:(0,m.jsx)(X,(0,s.Z)({size:"small","aria-label":A,title:A,color:"inherit",onClick:G},Y,{children:(0,m.jsx)(J,(0,s.Z)({fontSize:"small"},H))}))}):null]}))}));var lu=nu;const Iu=(0,I.ZP)((({className:e,...g})=>(0,m.jsx)(xI,{...g,classes:{popper:e}})))((({theme:e})=>({[`& .${fI.tooltip}`]:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,boxShadow:e.shadows[1],fontSize:11,textAlign:"justify"}}))),ou={count:1,results:[{id:0,nombre:"",genero_nombre:["Ninguno"],promedio_puntuaciones:0,sinopsis:"",fecha_salida:"1990",cantidad_episodios:0,color_carta:"grey",image:"/media/none.png",link:"",sizeCards:"small"}]},au=e=>{let g=wn();const{id:t,nombre:n,puntuacion:l,descripcion:o,fecha_inicio:a,genero:C,cantidad_episodios:i,color_carta:r,img:s,apiURL:c,sizeCards:d}=e,A=c+t,u=(0,I.ZP)("img")({display:"block",width:240,height:350});return(0,m.jsx)(Zi,{item:!0,sx:{margin:"auto",marginTop:"15px",overflow:"hidden"},children:0==t?(0,m.jsx)(u,{alt:"complex",src:"/media/cards/back.jpg"}):(0,m.jsx)(Pd,{component:"label",onClick:()=>{const e={id:t,nombre:n,genero_nombre:C,sinopsis:o,emision:"",fecha_salida:a,temporada:"Temporada del "+a,promedio_puntuaciones:l,link_imdb:"https://www.imdb.com/",cantidad_episodios:i,color_carta:r,image:s};localStorage.setItem("SerieData"+t.toString(),JSON.stringify(e)),g(A,{replace:!0})},children:(0,m.jsx)(Fd,{nombre:n,puntuacion:l,descripcion:o,fecha_inicio:a,genero:C,cantidad:i,color:r,img:s,size:d},t)})})},Cu=({apiURL:e,titulo:t,descripcion:n,url:l,filtro:I,update:o})=>{const[a,C]=(0,g.useState)(""),[i,r]=(0,g.useState)(!1),[s,c]=(0,g.useState)(ou),d=e=>{e?(r(!1),c(e)):r(!0)},[A,u]=(0,g.useState)(parseInt(localStorage.getItem("page")||"0",10)),[b,Z]=(0,g.useState)(parseInt(localStorage.getItem("rowsPerPage")||"12",10)),h=(g,t=a)=>{u(0),localStorage.setItem("page","0"),ic("/principal"+e+"?entrada="+t,I,d,1,b)};(0,g.useEffect)((()=>{h()}),[o]);const[p,G]=(0,g.useState)(localStorage.getItem("SizeCards")||"small"),[y,B]=(0,g.useState)(localStorage.getItem("SizeCardsIcons")||"white");return(0,m.jsx)(x,{sx:{width:"100%"},children:(0,m.jsxs)(qe,{sx:{width:"100%",mb:2},children:[(0,m.jsxs)(UA,{children:[(0,m.jsx)("title",{children:t}),(0,m.jsx)("meta",{name:"description",content:n}),(0,m.jsx)("link",{rel:"canonical",href:l})]}),(0,m.jsx)(dg,{position:"static",children:(0,m.jsxs)(bg,{children:[(0,m.jsx)(xt,{variant:"h6",sx:{flexGrow:1,display:{xs:"none",sm:"flex"}},children:t}),(0,m.jsx)(x,{sx:{flexGrow:0,marginRight:2,display:{xs:"none",sm:"flex"}},children:(0,m.jsx)(Iu,{title:"Change the size of the cards",placement:"right-start",followCursor:!0,children:(0,m.jsx)(ut,{"aria-label":"open drawer",edge:"end",sx:{color:y},onClick:()=>{var e="small",g="white";"small"===p?(e="medium",g="#64b5f6"):"large"===p?(e="small",g="white"):"medium"===p&&(e="large",g="#9575cd"),localStorage.setItem("SizeCards",e),G(e),localStorage.setItem("SizeCardsIcons",g),B(g)},children:(0,m.jsx)(Od.Z,{})})})}),(0,m.jsx)(x,{sx:{flexGrow:0},children:(0,m.jsx)(jc,{handleEntradaBuscador:e=>{C(e),h(0,e)}})}),(0,m.jsx)(x,{children:(0,m.jsx)(Iu,{title:"Search with filters",placement:"right-start",followCursor:!0,children:(0,m.jsx)(ut,{color:"inherit","aria-label":"Sync",onClick:h,edge:"start",sx:{margin:"1px"},children:(0,m.jsx)(Nc.Z,{})})})})]})}),(0,m.jsx)(Ro,{sx:{width:"100%"},spacing:2,children:(0,m.jsx)(DI,{in:i,children:(0,m.jsx)(lu,{variant:"filled",severity:"error",children:"No cards were found"})})}),(0,m.jsx)(Zi,{container:!0,children:s.results.map((g=>(0,m.jsx)(au,{id:g.id,nombre:g.nombre,puntuacion:g.promedio_puntuaciones,descripcion:g.sinopsis,fecha_inicio:g.fecha_salida,genero:g.genero_nombre,cantidad_episodios:g.cantidad_episodios,color_carta:g.color_carta,img:g.image,apiURL:e,sizeCards:p},g.id)))},p),(0,m.jsx)(x,{sx:{p:1},children:(0,m.jsx)(Hd,{rowsPerPageOptions:[12,24,48,96],component:"div",count:!s.count||s.count<=0?1024:s.count,page:!s.count||s.count<=0?0:A,onPageChange:(g,t)=>{u(t),localStorage.setItem("page",t),ic("/principal"+e+"?entrada="+a,I,d,t+1,b)},rowsPerPage:b,onRowsPerPageChange:g=>{var t=parseInt(g.target.value,10);Z(t),u(0),localStorage.setItem("rowsPerPage",g.target.value),localStorage.setItem("page","0"),ic("/principal"+e+"?entrada="+a,I,d,1,t)},labelRowsPerPage:"Cards per page:"})})]})})};var iu=(0,g.memo)(Cu);const ru="%[a-f0-9]{2}",su=new RegExp("("+ru+")|([^%]+?)","gi"),cu=new RegExp("("+ru+")+","gi");function du(e,g){try{return[decodeURIComponent(e.join(""))]}catch{}if(1===e.length)return e;g=g||1;const t=e.slice(0,g),n=e.slice(g);return Array.prototype.concat.call([],du(t),du(n))}function Au(e){try{return decodeURIComponent(e)}catch{let g=e.match(su)||[];for(let t=1;t<g.length;t++)g=(e=du(g,t).join("")).match(su)||[];return e}}function uu(e,g){if("string"!=typeof e||"string"!=typeof g)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===g)return[];const t=e.indexOf(g);return-1===t?[]:[e.slice(0,t),e.slice(t+g.length)]}function mu(e,g){const t={};if(Array.isArray(g))for(const n of g){const g=Object.getOwnPropertyDescriptor(e,n);g?.enumerable&&Object.defineProperty(t,n,g)}else for(const n of Reflect.ownKeys(e)){const l=Object.getOwnPropertyDescriptor(e,n);l.enumerable&&g(n,e[n],e)&&Object.defineProperty(t,n,l)}return t}const bu=e=>null==e,Zu=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),hu=Symbol("encodeFragmentIdentifier");function pu(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function Gu(e,g){return g.encode?g.strict?Zu(e):encodeURIComponent(e):e}function yu(e,g){return g.decode?function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return function(e){const g={"%FE%FF":"","%FF%FE":""};let t=cu.exec(e);for(;t;){try{g[t[0]]=decodeURIComponent(t[0])}catch{const e=Au(t[0]);e!==t[0]&&(g[t[0]]=e)}t=cu.exec(e)}g["%C2"]="";const n=Object.keys(g);for(const t of n)e=e.replace(new RegExp(t,"g"),g[t]);return e}(e)}}(e):e}function Bu(e){return Array.isArray(e)?e.sort():"object"==typeof e?Bu(Object.keys(e)).sort(((e,g)=>Number(e)-Number(g))).map((g=>e[g])):e}function Su(e){const g=e.indexOf("#");return-1!==g&&(e=e.slice(0,g)),e}function Wu(e,g){return g.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!g.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function Vu(e){const g=(e=Su(e)).indexOf("?");return-1===g?"":e.slice(g+1)}function fu(e,g){pu((g={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...g}).arrayFormatSeparator);const t=function(e){let g;switch(e.arrayFormat){case"index":return(e,t,n)=>{g=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),g?(void 0===n[e]&&(n[e]={}),n[e][g[1]]=t):n[e]=t};case"bracket":return(e,t,n)=>{g=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),g?void 0!==n[e]?n[e]=[...n[e],t]:n[e]=[t]:n[e]=t};case"colon-list-separator":return(e,t,n)=>{g=/(:list)$/.exec(e),e=e.replace(/:list$/,""),g?void 0!==n[e]?n[e]=[...n[e],t]:n[e]=[t]:n[e]=t};case"comma":case"separator":return(g,t,n)=>{const l="string"==typeof t&&t.includes(e.arrayFormatSeparator),I="string"==typeof t&&!l&&yu(t,e).includes(e.arrayFormatSeparator);t=I?yu(t,e):t;const o=l||I?t.split(e.arrayFormatSeparator).map((g=>yu(g,e))):null===t?t:yu(t,e);n[g]=o};case"bracket-separator":return(g,t,n)=>{const l=/(\[])$/.test(g);if(g=g.replace(/\[]$/,""),!l)return void(n[g]=t?yu(t,e):t);const I=null===t?[]:t.split(e.arrayFormatSeparator).map((g=>yu(g,e)));void 0!==n[g]?n[g]=[...n[g],...I]:n[g]=I};default:return(e,g,t)=>{void 0!==t[e]?t[e]=[...[t[e]].flat(),g]:t[e]=g}}}(g),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const l of e.split("&")){if(""===l)continue;const e=g.decode?l.replace(/\+/g," "):l;let[I,o]=uu(e,"=");void 0===I&&(I=e),o=void 0===o?null:["comma","separator","bracket-separator"].includes(g.arrayFormat)?o:yu(o,g),t(yu(I,g),o,n)}for(const[e,t]of Object.entries(n))if("object"==typeof t&&null!==t)for(const[e,n]of Object.entries(t))t[e]=Wu(n,g);else n[e]=Wu(t,g);return!1===g.sort?n:(!0===g.sort?Object.keys(n).sort():Object.keys(n).sort(g.sort)).reduce(((e,g)=>{const t=n[g];return Boolean(t)&&"object"==typeof t&&!Array.isArray(t)?e[g]=Bu(t):e[g]=t,e}),Object.create(null))}function vu(e,g){if(!e)return"";pu((g={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...g}).arrayFormatSeparator);const t=t=>g.skipNull&&bu(e[t])||g.skipEmptyString&&""===e[t],n=function(e){switch(e.arrayFormat){case"index":return g=>(t,n)=>{const l=t.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,[Gu(g,e),"[",l,"]"].join("")]:[...t,[Gu(g,e),"[",Gu(l,e),"]=",Gu(n,e)].join("")]};case"bracket":return g=>(t,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,[Gu(g,e),"[]"].join("")]:[...t,[Gu(g,e),"[]=",Gu(n,e)].join("")];case"colon-list-separator":return g=>(t,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,[Gu(g,e),":list="].join("")]:[...t,[Gu(g,e),":list=",Gu(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const g="bracket-separator"===e.arrayFormat?"[]=":"=";return t=>(n,l)=>void 0===l||e.skipNull&&null===l||e.skipEmptyString&&""===l?n:(l=null===l?"":l,0===n.length?[[Gu(t,e),g,Gu(l,e)].join("")]:[[n,Gu(l,e)].join(e.arrayFormatSeparator)])}default:return g=>(t,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,Gu(g,e)]:[...t,[Gu(g,e),"=",Gu(n,e)].join("")]}}(g),l={};for(const[g,n]of Object.entries(e))t(g)||(l[g]=n);const I=Object.keys(l);return!1!==g.sort&&I.sort(g.sort),I.map((t=>{const l=e[t];return void 0===l?"":null===l?Gu(t,g):Array.isArray(l)?0===l.length&&"bracket-separator"===g.arrayFormat?Gu(t,g)+"[]":l.reduce(n(t),[]).join("&"):Gu(t,g)+"="+Gu(l,g)})).filter((e=>e.length>0)).join("&")}function Ru(e,g){g={decode:!0,...g};let[t,n]=uu(e,"#");return void 0===t&&(t=e),{url:t?.split("?")?.[0]??"",query:fu(Vu(e),g),...g&&g.parseFragmentIdentifier&&n?{fragmentIdentifier:yu(n,g)}:{}}}function ku(e,g){g={encode:!0,strict:!0,[hu]:!0,...g};const t=Su(e.url).split("?")[0]||"";let n=vu({...fu(Vu(e.url),{sort:!1}),...e.query},g);n&&(n=`?${n}`);let l=function(e){let g="";const t=e.indexOf("#");return-1!==t&&(g=e.slice(t)),g}(e.url);if(e.fragmentIdentifier){const n=new URL(t);n.hash=e.fragmentIdentifier,l=g[hu]?n.hash:`#${e.fragmentIdentifier}`}return`${t}${n}${l}`}function Xu(e,g,t){t={parseFragmentIdentifier:!0,[hu]:!1,...t};const{url:n,query:l,fragmentIdentifier:I}=Ru(e,t);return ku({url:n,query:mu(l,g),fragmentIdentifier:I},t)}function Ju(e,g,t){return Xu(e,Array.isArray(g)?e=>!g.includes(e):(e,t)=>!g(e,t),t)}var Yu=e;const Hu=e=>{localStorage.setItem("access",e.access),localStorage.setItem("refresh",e.refresh),localStorage.setItem("username",e.user),window.location.reload(!0)},wu=e=>{window.location.replace(e.authorization_url)},xu=()=>{rc("/usuario/auth/o/google-oauth2/?redirect_uri="+Qy,wu)},Fu=()=>{const e=Yn();return(0,g.useEffect)((()=>{var g=Yu.parse(e.search);g.state&&g.code&&!localStorage.getItem("access")&&((e,g,t={})=>{const n=Qy+"/usuario/auth/o/google-oauth2/";var l=[];for(var I in t){var o=encodeURIComponent(I),a=encodeURIComponent(t[I]);l.push(o+"="+a)}l=l.join("&");var C={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("access")?"JWT "+localStorage.getItem("access"):null,"X-CSRFToken":ac},withCredentials:!0,body:l};fetch(n,C).then((e=>200===e.status||201===e.status?e.json():401===e.status||e.status>400?(void 0).setState((()=>({placeholder:"Error"}))):void 0)).then((e=>{e&&g(e)}))})(0,Hu,g)}),[e]),(0,m.jsx)(it,{variant:"contained",onClick:xu,color:"success",children:(0,m.jsx)(xt,{variant:"h6",children:localStorage.getItem("access")?localStorage.getItem("username"):"Log in"})})};var Nu=(0,g.memo)(Fu),Ku=l(4613),zu=l(6818);const Mu=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${e}`)})();function Eu(e){const g=[];for(let t=0,n=e.length;t<n;t++)g.push(e[t]);return g}function Lu(e,g){const t=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(g);return t?parseFloat(t.replace("px","")):0}function Uu(e,g={}){return{width:g.width||function(e){const g=Lu(e,"border-left-width"),t=Lu(e,"border-right-width");return e.clientWidth+g+t}(e),height:g.height||function(e){const g=Lu(e,"border-top-width"),t=Lu(e,"border-bottom-width");return e.clientHeight+g+t}(e)}}const Qu=16384;function Tu(e){return new Promise(((g,t)=>{const n=new Image;n.decode=()=>g(n),n.onload=()=>g(n),n.onerror=t,n.crossOrigin="anonymous",n.decoding="async",n.src=e}))}const Du=(e,g)=>{if(e instanceof g)return!0;const t=Object.getPrototypeOf(e);return null!==t&&(t.constructor.name===g.name||Du(t,g))};function ju(e,g,t){const n=window.getComputedStyle(e,t),l=n.getPropertyValue("content");if(""===l||"none"===l)return;const I=Mu();try{g.className=`${g.className} ${I}`}catch(e){return}const o=document.createElement("style");o.appendChild(function(e,g,t){const n=`.${e}:${g}`,l=t.cssText?function(e){const g=e.getPropertyValue("content");return`${e.cssText} content: '${g.replace(/'|"/g,"")}';`}(t):function(e){return Eu(e).map((g=>`${g}: ${e.getPropertyValue(g)}${e.getPropertyPriority(g)?" !important":""};`)).join(" ")}(t);return document.createTextNode(`${n}{${l}}`)}(I,t,n)),g.appendChild(o)}const Pu="application/font-woff",Ou="image/jpeg",qu={woff:Pu,woff2:Pu,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Ou,jpeg:Ou,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function _u(e){const g=function(e){const g=/\.([^./]*?)$/g.exec(e);return g?g[1]:""}(e).toLowerCase();return qu[g]||""}function $u(e){return-1!==e.search(/^(data:)/)}function em(e,g){return`data:${g};base64,${e}`}async function gm(e,g,t){const n=await fetch(e,g);if(404===n.status)throw new Error(`Resource "${n.url}" not found`);const l=await n.blob();return new Promise(((e,g)=>{const I=new FileReader;I.onerror=g,I.onloadend=()=>{try{e(t({res:n,result:I.result}))}catch(e){g(e)}},I.readAsDataURL(l)}))}const tm={};async function nm(e,g,t){const n=function(e,g,t){let n=e.replace(/\?.*/,"");return t&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),g?`[${g}]${n}`:n}(e,g,t.includeQueryParams);if(null!=tm[n])return tm[n];let l;t.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const n=await gm(e,t.fetchRequestInit,(({res:e,result:t})=>(g||(g=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(t))));l=em(n,g)}catch(g){l=t.imagePlaceholder||"";let n=`Failed to fetch resource: ${e}`;g&&(n="string"==typeof g?g:g.message),n&&console.warn(n)}return tm[n]=l,l}const lm=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase();async function Im(e,g,t){return t||!g.filter||g.filter(e)?Promise.resolve(e).then((e=>async function(e,g){return Du(e,HTMLCanvasElement)?async function(e){const g=e.toDataURL();return"data:,"===g?e.cloneNode(!1):Tu(g)}(e):Du(e,HTMLVideoElement)?async function(e,g){if(e.currentSrc){const g=document.createElement("canvas"),t=g.getContext("2d");return g.width=e.clientWidth,g.height=e.clientHeight,null==t||t.drawImage(e,0,0,g.width,g.height),Tu(g.toDataURL())}const t=e.poster,n=_u(t);return Tu(await nm(t,n,g))}(e,g):Du(e,HTMLIFrameElement)?async function(e){var g;try{if(null===(g=null==e?void 0:e.contentDocument)||void 0===g?void 0:g.body)return await Im(e.contentDocument.body,{},!0)}catch(e){}return e.cloneNode(!1)}(e):e.cloneNode(!1)}(e,g))).then((t=>async function(e,g,t){var n,l;let I=[];return I=lm(e)&&e.assignedNodes?Eu(e.assignedNodes()):Du(e,HTMLIFrameElement)&&(null===(n=e.contentDocument)||void 0===n?void 0:n.body)?Eu(e.contentDocument.body.childNodes):Eu((null!==(l=e.shadowRoot)&&void 0!==l?l:e).childNodes),0===I.length||Du(e,HTMLVideoElement)||await I.reduce(((e,n)=>e.then((()=>Im(n,t))).then((e=>{e&&g.appendChild(e)}))),Promise.resolve()),g}(e,t,g))).then((g=>function(e,g){return Du(g,Element)&&(function(e,g){const t=g.style;if(!t)return;const n=window.getComputedStyle(e);n.cssText?(t.cssText=n.cssText,t.transformOrigin=n.transformOrigin):Eu(n).forEach((l=>{let I=n.getPropertyValue(l);if("font-size"===l&&I.endsWith("px")){const e=Math.floor(parseFloat(I.substring(0,I.length-2)))-.1;I=`${e}px`}Du(e,HTMLIFrameElement)&&"display"===l&&"inline"===I&&(I="block"),"d"===l&&g.getAttribute("d")&&(I=`path(${g.getAttribute("d")})`),t.setProperty(l,I,n.getPropertyPriority(l))}))}(e,g),function(e,g){ju(e,g,":before"),ju(e,g,":after")}(e,g),function(e,g){Du(e,HTMLTextAreaElement)&&(g.innerHTML=e.value),Du(e,HTMLInputElement)&&g.setAttribute("value",e.value)}(e,g),function(e,g){if(Du(e,HTMLSelectElement)){const t=g,n=Array.from(t.children).find((g=>e.value===g.getAttribute("value")));n&&n.setAttribute("selected","")}}(e,g)),g}(e,g))).then((e=>async function(e,g){const t=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===t.length)return e;const n={};for(let l=0;l<t.length;l++){const I=t[l].getAttribute("xlink:href");if(I){const t=e.querySelector(I),l=document.querySelector(I);t||!l||n[I]||(n[I]=await Im(l,g,!0))}}const l=Object.values(n);if(l.length){const g="http://www.w3.org/1999/xhtml",t=document.createElementNS(g,"svg");t.setAttribute("xmlns",g),t.style.position="absolute",t.style.width="0",t.style.height="0",t.style.overflow="hidden",t.style.display="none";const n=document.createElementNS(g,"defs");t.appendChild(n);for(let e=0;e<l.length;e++)n.appendChild(l[e]);e.appendChild(t)}return e}(e,g))):null}const om=/url\((['"]?)([^'"]+?)\1\)/g,am=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Cm=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function im(e){return-1!==e.search(om)}async function rm(e,g,t){if(!im(e))return e;const n=function(e,{preferredFontFormat:g}){return g?e.replace(Cm,(e=>{for(;;){const[t,,n]=am.exec(e)||[];if(!n)return"";if(n===g)return`src: ${t};`}})):e}(e,t),l=function(e){const g=[];return e.replace(om,((e,t,n)=>(g.push(n),e))),g.filter((e=>!$u(e)))}(n);return l.reduce(((e,n)=>e.then((e=>async function(e,g,t,n,l){try{const I=t?function(e,g){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const t=document.implementation.createHTMLDocument(),n=t.createElement("base"),l=t.createElement("a");return t.head.appendChild(n),t.body.appendChild(l),g&&(n.href=g),l.href=e,l.href}(g,t):g,o=_u(g);let a;return a=l?em(await l(I),o):await nm(I,o,n),e.replace(function(e){const g=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${g})(['"]?\\))`,"g")}(g),`$1${a}$3`)}catch(e){}return e}(e,n,g,t)))),Promise.resolve(n))}async function sm(e,g,t){var n;const l=null===(n=g.style)||void 0===n?void 0:n.getPropertyValue(e);if(l){const n=await rm(l,null,t);return g.style.setProperty(e,n,g.style.getPropertyPriority(e)),!0}return!1}async function cm(e,g){Du(e,Element)&&(await async function(e,g){await sm("background",e,g)||await sm("background-image",e,g),await sm("mask",e,g)||await sm("mask-image",e,g)}(e,g),await async function(e,g){const t=Du(e,HTMLImageElement);if((!t||$u(e.src))&&(!Du(e,SVGImageElement)||$u(e.href.baseVal)))return;const n=t?e.src:e.href.baseVal,l=await nm(n,_u(n),g);await new Promise(((g,n)=>{e.onload=g,e.onerror=n;const I=e;I.decode&&(I.decode=g),"lazy"===I.loading&&(I.loading="eager"),t?(e.srcset="",e.src=l):e.href.baseVal=l}))}(e,g),await async function(e,g){const t=Eu(e.childNodes).map((e=>cm(e,g)));await Promise.all(t).then((()=>e))}(e,g))}const dm={};async function Am(e){let g=dm[e];if(null!=g)return g;const t=await fetch(e);return g={url:e,cssText:await t.text()},dm[e]=g,g}async function um(e,g){let t=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,l=(t.match(/url\([^)]+\)/g)||[]).map((async l=>{let I=l.replace(n,"$1");return I.startsWith("https://")||(I=new URL(I,e.url).href),gm(I,g.fetchRequestInit,(({result:e})=>(t=t.replace(l,`url(${e})`),[l,e])))}));return Promise.all(l).then((()=>t))}function mm(e){if(null==e)return[];const g=[];let t=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const n=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=n.exec(t);if(null===e)break;g.push(e[0])}t=t.replace(n,"");const l=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,I=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=l.exec(t);if(null===e){if(e=I.exec(t),null===e)break;l.lastIndex=I.lastIndex}else I.lastIndex=l.lastIndex;g.push(e[0])}return g}async function bm(e,g){const t=null!=g.fontEmbedCSS?g.fontEmbedCSS:g.skipFonts?null:await async function(e,g){const t=await async function(e,g){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const t=Eu(e.ownerDocument.styleSheets),n=await async function(e,g){const t=[],n=[];return e.forEach((t=>{if("cssRules"in t)try{Eu(t.cssRules||[]).forEach(((e,l)=>{if(e.type===CSSRule.IMPORT_RULE){let I=l+1;const o=Am(e.href).then((e=>um(e,g))).then((e=>mm(e).forEach((e=>{try{t.insertRule(e,e.startsWith("@import")?I+=1:t.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:e,error:g})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));n.push(o)}}))}catch(l){const I=e.find((e=>null==e.href))||document.styleSheets[0];null!=t.href&&n.push(Am(t.href).then((e=>um(e,g))).then((e=>mm(e).forEach((e=>{I.insertRule(e,t.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",l)}})),Promise.all(n).then((()=>(e.forEach((e=>{if("cssRules"in e)try{Eu(e.cssRules||[]).forEach((e=>{t.push(e)}))}catch(g){console.error(`Error while reading CSS rules from ${e.href}`,g)}})),t)))}(t,g);return function(e){return e.filter((e=>e.type===CSSRule.FONT_FACE_RULE)).filter((e=>im(e.style.getPropertyValue("src"))))}(n)}(e,g);return(await Promise.all(t.map((e=>{const t=e.parentStyleSheet?e.parentStyleSheet.href:null;return rm(e.cssText,t,g)})))).join("\n")}(e,g);if(t){const g=document.createElement("style"),n=document.createTextNode(t);g.appendChild(n),e.firstChild?e.insertBefore(g,e.firstChild):e.appendChild(g)}}async function Zm(e,g={}){const{width:t,height:n}=Uu(e,g),l=await Im(e,g,!0);return await bm(l,g),await cm(l,g),function(e,g){const{style:t}=e;g.backgroundColor&&(t.backgroundColor=g.backgroundColor),g.width&&(t.width=`${g.width}px`),g.height&&(t.height=`${g.height}px`);const n=g.style;null!=n&&Object.keys(n).forEach((e=>{t[e]=n[e]}))}(l,g),await async function(e,g,t){const n="http://www.w3.org/2000/svg",l=document.createElementNS(n,"svg"),I=document.createElementNS(n,"foreignObject");return l.setAttribute("width",`${g}`),l.setAttribute("height",`${t}`),l.setAttribute("viewBox",`0 0 ${g} ${t}`),I.setAttribute("width","100%"),I.setAttribute("height","100%"),I.setAttribute("x","0"),I.setAttribute("y","0"),I.setAttribute("externalResourcesRequired","true"),l.appendChild(I),I.appendChild(e),async function(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))}(l)}(l,t,n)}const hm=(0,I.ZP)((({className:e,...g})=>(0,m.jsx)(xI,{...g,classes:{popper:e}})))((({theme:e})=>({[`& .${fI.tooltip}`]:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,boxShadow:e.shadows[1],fontSize:11,textAlign:"justify"}}))),pm={id:0,nombre:"",genero_nombre:[""],sinopsis:"",emision:"",fecha_salida:"1990",temporada:"Temporada del 1990",promedio_puntuaciones:0,link_imdb:"https://www.imdb.com/",cantidad_episodios:0,color_carta:"grey",image:"/media/none.png"},Gm=({apiURL:e})=>{let t=wn(),n=function(){let{matches:e}=g.useContext(kn),t=e[e.length-1];return t?t.params:{}}();const[l,o]=(0,g.useState)(JSON.parse(localStorage.getItem("SerieData"+n.id))||pm),a=l.image,C=e=>{e&&o(e)},i="/principal/puntuacion/?serie="+n.id,[r,s]=(0,g.useState)([{puntuacion:"0"}]),[c,d]=(0,g.useState)(0),A=e=>{e.length>0&&s(e)},u=e=>{if(localStorage.getItem("access")){var g={puntuacion:e,serie:n.id};((e,g,t={})=>{const n=Qy+e;var l={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:localStorage.getItem("access")?"JWT "+localStorage.getItem("access"):null,"X-CSRFToken":ac},withCredentials:!0,body:JSON.stringify(t)};fetch(n,l).then((e=>200===e.status||201===e.status?e.json():401===e.status||e.status>400?(void 0).setState((()=>({placeholder:"Error"}))):void 0)).then((e=>{e&&g(e)}))})(i,A,g),d(e)}else xu()};(0,g.useEffect)((()=>{rc("/principal"+e+n.id,C),localStorage.getItem("access")&&rc(i,A,!1)}),[]),(0,g.useEffect)((()=>{r&&d(parseInt(r[0].puntuacion))}),[r]);const b=(0,I.ZP)("img")({display:"block"}),Z=(0,g.useRef)(null);return(0,m.jsxs)(qe,{sx:{p:2,margin:"auto",maxWidth:1e3,flexGrow:1},children:[(0,m.jsxs)(UA,{children:[(0,m.jsx)("title",{children:l.nombre}),(0,m.jsx)("meta",{name:"description",content:l.sinopsis}),(0,m.jsx)("link",{rel:"canonical",href:e+n.id})]}),(0,m.jsx)(dg,{position:"static",children:(0,m.jsxs)(bg,{children:[(0,m.jsx)(xt,{variant:"h6",sx:{flexGrow:1},children:l.nombre}),(0,m.jsx)(x,{children:(0,m.jsx)(hm,{title:"Back to list",placement:"right-start",followCursor:!0,children:(0,m.jsx)(ut,{color:"inherit","aria-label":"Sync",onClick:()=>{t("/serie",{replace:!0})},edge:"start",sx:{margin:"1px"},children:(0,m.jsx)(Ku.Z,{})})})}),(0,m.jsx)(x,{sx:{display:c>0?"flex":"none"},children:(0,m.jsx)(hm,{title:"Save",placement:"right-start",followCursor:!0,children:(0,m.jsx)(ut,{color:"inherit","aria-label":"Sync",onClick:()=>{(async function(e,g={}){return(await async function(e,g={}){const{width:t,height:n}=Uu(e,g),l=await Zm(e,g),I=await Tu(l),o=document.createElement("canvas"),a=o.getContext("2d"),C=g.pixelRatio||function(){let e,g;try{g=process}catch(e){}const t=g&&g.env?g.env.devicePixelRatio:null;return t&&(e=parseInt(t,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),i=g.canvasWidth||t,r=g.canvasHeight||n;return o.width=i*C,o.height=r*C,g.skipAutoScale||function(e){(e.width>Qu||e.height>Qu)&&(e.width>Qu&&e.height>Qu?e.width>e.height?(e.height*=Qu/e.width,e.width=Qu):(e.width*=Qu/e.height,e.height=Qu):e.width>Qu?(e.height*=Qu/e.width,e.width=Qu):(e.width*=Qu/e.height,e.height=Qu))}(o),o.style.width=`${i}`,o.style.height=`${r}`,g.backgroundColor&&(a.fillStyle=g.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(I,0,0,o.width,o.height),o}(e,g)).toDataURL()})(Z.current,{cacheBust:!1}).then((e=>{const g=document.createElement("a");g.download=l.nombre,g.href=e,g.click()})).catch((e=>{console.log(e)}))},edge:"start",sx:{margin:"1px"},children:(0,m.jsx)(zu.Z,{})})})})]})}),(0,m.jsxs)(Zi,{container:!0,spacing:2,sx:{marginTop:"10px"},children:[(0,m.jsx)(Zi,{item:!0,sx:{margin:"auto"},children:0==l.id?(0,m.jsxs)(x,{children:[(0,m.jsx)(b,{alt:"complex",src:"/media/cards/back.jpg",sx:{display:{xs:"none",sm:"none",md:"flex"},width:460,height:671}}),(0,m.jsx)(b,{alt:"complex",src:"/media/cards/back.jpg",sx:{display:{xs:"none",sm:"flex",md:"none"},width:350,height:511}}),(0,m.jsx)(b,{alt:"complex",src:"/media/cards/back.jpg",sx:{display:{xs:"flex",sm:"none"},width:240,height:350}})]}):(0,m.jsxs)(Pd,{component:"label",onClick:()=>{window.open(l.link_imdb)},children:[(0,m.jsx)(x,{ref:Z,sx:{display:{xs:"none",sm:"none",md:"flex"}},children:(0,m.jsx)(Fd,{nombre:l.nombre,puntuacion:l.promedio_puntuaciones,descripcion:l.sinopsis,fecha_inicio:l.fecha_salida,genero:l.genero_nombre,cantidad:l.cantidad_episodios,color:l.color_carta,img:a,size:"large"},l.id)}),(0,m.jsx)(x,{sx:{display:{xs:"none",sm:"flex",md:"none"}},children:(0,m.jsx)(Fd,{nombre:l.nombre,puntuacion:l.promedio_puntuaciones,descripcion:l.sinopsis,fecha_inicio:l.fecha_salida,genero:l.genero_nombre,cantidad:l.cantidad_episodios,color:l.color_carta,img:a,size:"medium"},l.id)}),(0,m.jsx)(x,{sx:{display:{xs:"flex",sm:"none"}},children:(0,m.jsx)(Fd,{nombre:l.nombre,puntuacion:l.promedio_puntuaciones,descripcion:l.sinopsis,fecha_inicio:l.fecha_salida,genero:l.genero_nombre,cantidad:l.cantidad_episodios,color:l.color_carta,img:a,size:"small"},l.id)})]})}),(0,m.jsxs)(Zi,{item:!0,xs:!0,children:[(0,m.jsxs)(x,{sx:{display:"flex",alignItems:"center",marginTop:1},children:[(0,m.jsx)(xt,{variant:"subtitle1",component:"div",sx:{flexGrow:1},children:"Your Score:"}),(0,m.jsx)(Xc,{name:"simple-controlled",sx:{flexGrow:0,display:{xs:"none",sm:"flex"}},value:c,onChange:(e,g)=>{u(g)},emptyIcon:(0,m.jsx)(Jc.Z,{style:{opacity:.55},fontSize:"inherit"}),max:10}),(0,m.jsx)(Xc,{name:"simple-controlled",sx:{flexGrow:0,display:{xs:"flex",sm:"none"}},value:c,onChange:(e,g)=>{u(g)},emptyIcon:(0,m.jsx)(Jc.Z,{style:{opacity:.55},fontSize:"inherit"}),size:"small",max:10})]}),(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsx)(x,{children:(0,m.jsx)(xt,{variant:"body1",sx:{textAlign:"justify"},children:l.genero_nombre.join(", ")})}),(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsxs)(x,{sx:{display:"flex",alignItems:"center"},children:[(0,m.jsxs)(xt,{variant:"body1",sx:{textAlign:"justify",flexGrow:1},children:["Episodes: ",l.cantidad_episodios]}),(0,m.jsx)(xt,{variant:"body1",sx:{textAlign:"justify",flexGrow:0},children:l.emision})]}),(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsx)(x,{children:(0,m.jsx)(xt,{variant:"body1",sx:{textAlign:"justify"},children:l.temporada})}),(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsx)(x,{children:(0,m.jsx)(xt,{variant:"body1",sx:{textAlign:"justify",overflow:"auto",maxHeight:460},children:l.sinopsis})})]})]})]})};var ym=(0,g.memo)(Gm);const Bm=(0,I.ZP)("img")({display:"block",maxWidth:"100%"}),Sm=({content:e,titulo:g,descripcion:t,url:n,image:l})=>(0,m.jsx)(x,{sx:{width:"100%"},children:(0,m.jsxs)(qe,{sx:{p:2,margin:"auto",maxWidth:1e3,flexGrow:1},children:[(0,m.jsxs)(UA,{children:[(0,m.jsx)("title",{children:g}),(0,m.jsx)("meta",{name:"description",content:t}),(0,m.jsx)("link",{rel:"canonical",href:n})]}),(0,m.jsx)(dg,{position:"static",children:(0,m.jsx)(bg,{children:(0,m.jsx)(xt,{variant:"h6",sx:{flexGrow:1},children:g})})}),(0,m.jsxs)(qe,{sx:{p:2,margin:2,flexGrow:1},children:[(0,m.jsx)("div",{dangerouslySetInnerHTML:{__html:e}}),(0,m.jsx)(Bm,{src:`${l}`})]}),(0,m.jsx)(x,{sx:{p:1}})]})});var Wm=(0,g.memo)(Sm);function Vm(e){return e+.5|0}const fm=(e,g,t)=>Math.max(Math.min(e,t),g);function vm(e){return fm(Vm(2.55*e),0,255)}function Rm(e){return fm(Vm(255*e),0,255)}function km(e){return fm(Vm(e/2.55)/100,0,1)}function Xm(e){return fm(Vm(100*e),0,100)}const Jm={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ym=[..."0123456789ABCDEF"],Hm=e=>Ym[15&e],wm=e=>Ym[(240&e)>>4]+Ym[15&e],xm=e=>(240&e)>>4==(15&e);const Fm=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Nm(e,g,t){const n=g*Math.min(t,1-t),l=(g,l=(g+e/30)%12)=>t-n*Math.max(Math.min(l-3,9-l,1),-1);return[l(0),l(8),l(4)]}function Km(e,g,t){const n=(n,l=(n+e/60)%6)=>t-t*g*Math.max(Math.min(l,4-l,1),0);return[n(5),n(3),n(1)]}function zm(e,g,t){const n=Nm(e,1,.5);let l;for(g+t>1&&(l=1/(g+t),g*=l,t*=l),l=0;l<3;l++)n[l]*=1-g-t,n[l]+=g;return n}function Mm(e){const g=e.r/255,t=e.g/255,n=e.b/255,l=Math.max(g,t,n),I=Math.min(g,t,n),o=(l+I)/2;let a,C,i;return l!==I&&(i=l-I,C=o>.5?i/(2-l-I):i/(l+I),a=function(e,g,t,n,l){return e===l?(g-t)/n+(g<t?6:0):g===l?(t-e)/n+2:(e-g)/n+4}(g,t,n,i,l),a=60*a+.5),[0|a,C||0,o]}function Em(e,g,t,n){return(Array.isArray(g)?e(g[0],g[1],g[2]):e(g,t,n)).map(Rm)}function Lm(e,g,t){return Em(Nm,e,g,t)}function Um(e){return(e%360+360)%360}const Qm={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Tm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Dm;const jm=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Pm=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Om=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function qm(e,g,t){if(e){let n=Mm(e);n[g]=Math.max(0,Math.min(n[g]+n[g]*t,0===g?360:1)),n=Lm(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function _m(e,g){return e?Object.assign(g||{},e):e}function $m(e){var g={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(g={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(g.a=Rm(e[3]))):(g=_m(e,{r:0,g:0,b:0,a:1})).a=Rm(g.a),g}function eb(e){return"r"===e.charAt(0)?function(e){const g=jm.exec(e);let t,n,l,I=255;if(g){if(g[7]!==t){const e=+g[7];I=g[8]?vm(e):fm(255*e,0,255)}return t=+g[1],n=+g[3],l=+g[5],t=255&(g[2]?vm(t):fm(t,0,255)),n=255&(g[4]?vm(n):fm(n,0,255)),l=255&(g[6]?vm(l):fm(l,0,255)),{r:t,g:n,b:l,a:I}}}(e):function(e){const g=Fm.exec(e);let t,n=255;if(!g)return;g[5]!==t&&(n=g[6]?vm(+g[5]):Rm(+g[5]));const l=Um(+g[2]),I=+g[3]/100,o=+g[4]/100;return t="hwb"===g[1]?function(e,g,t){return Em(zm,e,g,t)}(l,I,o):"hsv"===g[1]?function(e,g,t){return Em(Km,e,g,t)}(l,I,o):Lm(l,I,o),{r:t[0],g:t[1],b:t[2],a:n}}(e)}class gb{constructor(e){if(e instanceof gb)return e;const g=typeof e;let t;var n,l,I;"object"===g?t=$m(e):"string"===g&&(I=(n=e).length,"#"===n[0]&&(4===I||5===I?l={r:255&17*Jm[n[1]],g:255&17*Jm[n[2]],b:255&17*Jm[n[3]],a:5===I?17*Jm[n[4]]:255}:7!==I&&9!==I||(l={r:Jm[n[1]]<<4|Jm[n[2]],g:Jm[n[3]]<<4|Jm[n[4]],b:Jm[n[5]]<<4|Jm[n[6]],a:9===I?Jm[n[7]]<<4|Jm[n[8]]:255})),t=l||function(e){Dm||(Dm=function(){const e={},g=Object.keys(Tm),t=Object.keys(Qm);let n,l,I,o,a;for(n=0;n<g.length;n++){for(o=a=g[n],l=0;l<t.length;l++)I=t[l],a=a.replace(I,Qm[I]);I=parseInt(Tm[o],16),e[a]=[I>>16&255,I>>8&255,255&I]}return e}(),Dm.transparent=[0,0,0,0]);const g=Dm[e.toLowerCase()];return g&&{r:g[0],g:g[1],b:g[2],a:4===g.length?g[3]:255}}(e)||eb(e)),this._rgb=t,this._valid=!!t}get valid(){return this._valid}get rgb(){var e=_m(this._rgb);return e&&(e.a=km(e.a)),e}set rgb(e){this._rgb=$m(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${km(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}(this._rgb):void 0}hexString(){return this._valid?function(e){var g=(e=>xm(e.r)&&xm(e.g)&&xm(e.b)&&xm(e.a))(e)?Hm:wm;return e?"#"+g(e.r)+g(e.g)+g(e.b)+((e,g)=>e<255?g(e):"")(e.a,g):void 0}(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const g=Mm(e),t=g[0],n=Xm(g[1]),l=Xm(g[2]);return e.a<255?`hsla(${t}, ${n}%, ${l}%, ${km(e.a)})`:`hsl(${t}, ${n}%, ${l}%)`}(this._rgb):void 0}mix(e,g){if(e){const t=this.rgb,n=e.rgb;let l;const I=g===l?.5:g,o=2*I-1,a=t.a-n.a,C=((o*a==-1?o:(o+a)/(1+o*a))+1)/2;l=1-C,t.r=255&C*t.r+l*n.r+.5,t.g=255&C*t.g+l*n.g+.5,t.b=255&C*t.b+l*n.b+.5,t.a=I*t.a+(1-I)*n.a,this.rgb=t}return this}interpolate(e,g){return e&&(this._rgb=function(e,g,t){const n=Om(km(e.r)),l=Om(km(e.g)),I=Om(km(e.b));return{r:Rm(Pm(n+t*(Om(km(g.r))-n))),g:Rm(Pm(l+t*(Om(km(g.g))-l))),b:Rm(Pm(I+t*(Om(km(g.b))-I))),a:e.a+t*(g.a-e.a)}}(this._rgb,e._rgb,g)),this}clone(){return new gb(this.rgb)}alpha(e){return this._rgb.a=Rm(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,g=Vm(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=g,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return qm(this._rgb,2,e),this}darken(e){return qm(this._rgb,2,-e),this}saturate(e){return qm(this._rgb,1,e),this}desaturate(e){return qm(this._rgb,1,-e),this}rotate(e){return function(e,g){var t=Mm(e);t[0]=Um(t[0]+g),t=Lm(t),e.r=t[0],e.g=t[1],e.b=t[2]}(this._rgb,e),this}}function tb(){}const nb=(()=>{let e=0;return()=>e++})();function lb(e){return null==e}function Ib(e){if(Array.isArray&&Array.isArray(e))return!0;const g=Object.prototype.toString.call(e);return"[object"===g.slice(0,7)&&"Array]"===g.slice(-6)}function ob(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ab(e){return("number"==typeof e||e instanceof Number)&&isFinite(+e)}function Cb(e,g){return ab(e)?e:g}function ib(e,g){return void 0===e?g:e}const rb=(e,g)=>"string"==typeof e&&e.endsWith("%")?parseFloat(e)/100*g:+e;function sb(e,g,t){if(e&&"function"==typeof e.call)return e.apply(t,g)}function cb(e,g,t,n){let l,I,o;if(Ib(e))if(I=e.length,n)for(l=I-1;l>=0;l--)g.call(t,e[l],l);else for(l=0;l<I;l++)g.call(t,e[l],l);else if(ob(e))for(o=Object.keys(e),I=o.length,l=0;l<I;l++)g.call(t,e[o[l]],o[l])}function db(e,g){let t,n,l,I;if(!e||!g||e.length!==g.length)return!1;for(t=0,n=e.length;t<n;++t)if(l=e[t],I=g[t],l.datasetIndex!==I.datasetIndex||l.index!==I.index)return!1;return!0}function Ab(e){if(Ib(e))return e.map(Ab);if(ob(e)){const g=Object.create(null),t=Object.keys(e),n=t.length;let l=0;for(;l<n;++l)g[t[l]]=Ab(e[t[l]]);return g}return e}function ub(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function mb(e,g,t,n){if(!ub(e))return;const l=g[e],I=t[e];ob(l)&&ob(I)?bb(l,I,n):g[e]=Ab(I)}function bb(e,g,t){const n=Ib(g)?g:[g],l=n.length;if(!ob(e))return e;const I=(t=t||{}).merger||mb;let o;for(let g=0;g<l;++g){if(o=n[g],!ob(o))continue;const l=Object.keys(o);for(let g=0,n=l.length;g<n;++g)I(l[g],e,o,t)}return e}function Zb(e,g){return bb(e,g,{merger:hb})}function hb(e,g,t){if(!ub(e))return;const n=g[e],l=t[e];ob(n)&&ob(l)?Zb(n,l):Object.prototype.hasOwnProperty.call(g,e)||(g[e]=Ab(l))}const pb={"":e=>e,x:e=>e.x,y:e=>e.y};function Gb(e,g){const t=pb[g]||(pb[g]=function(e){const g=function(e){const g=e.split("."),t=[];let n="";for(const e of g)n+=e,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}(e);return e=>{for(const t of g){if(""===t)break;e=e&&e[t]}return e}}(g));return t(e)}function yb(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Bb=e=>void 0!==e,Sb=e=>"function"==typeof e,Wb=(e,g)=>{if(e.size!==g.size)return!1;for(const t of e)if(!g.has(t))return!1;return!0},Vb=Math.PI,fb=2*Vb,vb=Number.POSITIVE_INFINITY,Rb=Vb/180,kb=Vb/2,Xb=Vb/4,Jb=2*Vb/3,Yb=Math.log10,Hb=Math.sign;function wb(e,g,t){return Math.abs(e-g)<t}function xb(e){const g=Math.round(e);e=wb(e,g,e/1e3)?g:e;const t=Math.pow(10,Math.floor(Yb(e))),n=e/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function Fb(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Nb(e){return e*(Vb/180)}function Kb(e){if(!ab(e))return;let g=1,t=0;for(;Math.round(e*g)/g!==e;)g*=10,t++;return t}function zb(e,g){const t=g.x-e.x,n=g.y-e.y,l=Math.sqrt(t*t+n*n);let I=Math.atan2(n,t);return I<-.5*Vb&&(I+=fb),{angle:I,distance:l}}function Mb(e){return(e%fb+fb)%fb}function Eb(e,g,t,n){const l=Mb(e),I=Mb(g),o=Mb(t),a=Mb(I-l),C=Mb(o-l),i=Mb(l-I),r=Mb(l-o);return l===I||l===o||n&&I===o||a>C&&i<r}function Lb(e,g,t){return Math.max(g,Math.min(t,e))}function Ub(e,g,t,n=1e-6){return e>=Math.min(g,t)-n&&e<=Math.max(g,t)+n}function Qb(e,g,t){t=t||(t=>e[t]<g);let n,l=e.length-1,I=0;for(;l-I>1;)n=I+l>>1,t(n)?I=n:l=n;return{lo:I,hi:l}}const Tb=(e,g,t,n)=>Qb(e,t,n?n=>{const l=e[n][g];return l<t||l===t&&e[n+1][g]===t}:n=>e[n][g]<t),Db=(e,g,t)=>Qb(e,t,(n=>e[n][g]>=t)),jb=["push","pop","shift","splice","unshift"];function Pb(e,g){const t=e._chartjs;if(!t)return;const n=t.listeners,l=n.indexOf(g);-1!==l&&n.splice(l,1),n.length>0||(jb.forEach((g=>{delete e[g]})),delete e._chartjs)}const Ob="undefined"==typeof window?function(e){return e()}:window.requestAnimationFrame;function qb(e,g){let t=[],n=!1;return function(...l){t=l,n||(n=!0,Ob.call(window,(()=>{n=!1,e.apply(g,t)})))}}const _b=e=>"start"===e?"left":"end"===e?"right":"center",$b=(e,g,t)=>"start"===e?g:"end"===e?t:(g+t)/2,eZ=e=>0===e||1===e,gZ=(e,g,t)=>-Math.pow(2,10*(e-=1))*Math.sin((e-g)*fb/t),tZ=(e,g,t)=>Math.pow(2,-10*e)*Math.sin((e-g)*fb/t)+1,nZ={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*kb),easeOutSine:e=>Math.sin(e*kb),easeInOutSine:e=>-.5*(Math.cos(Vb*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>eZ(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>eZ(e)?e:gZ(e,.075,.3),easeOutElastic:e=>eZ(e)?e:tZ(e,.075,.3),easeInOutElastic(e){const g=.1125;return eZ(e)?e:e<.5?.5*gZ(2*e,g,.45):.5+.5*tZ(2*e-1,g,.45)},easeInBack(e){const g=1.70158;return e*e*((g+1)*e-g)},easeOutBack(e){const g=1.70158;return(e-=1)*e*((g+1)*e+g)+1},easeInOutBack(e){let g=1.70158;return(e/=.5)<1?e*e*((1+(g*=1.525))*e-g)*.5:.5*((e-=2)*e*((1+(g*=1.525))*e+g)+2)},easeInBounce:e=>1-nZ.easeOutBounce(1-e),easeOutBounce(e){const g=7.5625,t=2.75;return e<1/t?g*e*e:e<2/t?g*(e-=1.5/t)*e+.75:e<2.5/t?g*(e-=2.25/t)*e+.9375:g*(e-=2.625/t)*e+.984375},easeInOutBounce:e=>e<.5?.5*nZ.easeInBounce(2*e):.5*nZ.easeOutBounce(2*e-1)+.5};function lZ(e){if(e&&"object"==typeof e){const g=e.toString();return"[object CanvasPattern]"===g||"[object CanvasGradient]"===g}return!1}function IZ(e){return lZ(e)?e:new gb(e)}function oZ(e){return lZ(e)?e:new gb(e).saturate(.5).darken(.1).hexString()}const aZ=["x","y","borderWidth","radius","tension"],CZ=["color","borderColor","backgroundColor"],iZ=new Map;function rZ(e,g,t){return function(e,g){g=g||{};const t=e+JSON.stringify(g);let n=iZ.get(t);return n||(n=new Intl.NumberFormat(e,g),iZ.set(t,n)),n}(g,t).format(e)}const sZ={values(e){return Ib(e)?e:""+e},numeric(e,g,t){if(0===e)return"0";const n=this.chart.options.locale;let l,I=e;if(t.length>1){const g=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(g<1e-4||g>1e15)&&(l="scientific"),I=function(e,g){let t=g.length>3?g[2].value-g[1].value:g[1].value-g[0].value;return Math.abs(t)>=1&&e!==Math.floor(e)&&(t=e-Math.floor(e)),t}(e,t)}const o=Yb(Math.abs(I)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),C={notation:l,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(C,this.options.ticks.format),rZ(e,n,C)},logarithmic(e,g,t){if(0===e)return"0";const n=t[g].significand||e/Math.pow(10,Math.floor(Yb(e)));return[1,2,3,5,10,15].includes(n)||g>.8*t.length?sZ.numeric.call(this,e,g,t):""}};var cZ={formatters:sZ};const dZ=Object.create(null),AZ=Object.create(null);function uZ(e,g){if(!g)return e;const t=g.split(".");for(let g=0,n=t.length;g<n;++g){const n=t[g];e=e[n]||(e[n]=Object.create(null))}return e}function mZ(e,g,t){return"string"==typeof g?bb(uZ(e,g),t):bb(uZ(e,""),g)}class bZ{constructor(e,g){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,g)=>oZ(g.backgroundColor),this.hoverBorderColor=(e,g)=>oZ(g.borderColor),this.hoverColor=(e,g)=>oZ(g.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(g)}set(e,g){return mZ(this,e,g)}get(e){return uZ(this,e)}describe(e,g){return mZ(AZ,e,g)}override(e,g){return mZ(dZ,e,g)}route(e,g,t,n){const l=uZ(this,e),I=uZ(this,t),o="_"+g;Object.defineProperties(l,{[o]:{value:l[g],writable:!0},[g]:{enumerable:!0,get(){const e=this[o],g=I[n];return ob(e)?Object.assign({},g,e):ib(e,g)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var ZZ=new bZ({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:CZ},numbers:{type:"number",properties:aZ}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,g)=>g.lineWidth,tickColor:(e,g)=>g.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:cZ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function hZ(e,g,t,n,l){let I=g[l];return I||(I=g[l]=e.measureText(l).width,t.push(l)),I>n&&(n=I),n}function pZ(e,g,t){const n=e.currentDevicePixelRatio,l=0!==t?Math.max(t/2,.5):0;return Math.round((g-l)*n)/n+l}function GZ(e,g){(g=g||e.getContext("2d")).save(),g.resetTransform(),g.clearRect(0,0,e.width,e.height),g.restore()}function yZ(e,g,t,n){BZ(e,g,t,n,null)}function BZ(e,g,t,n,l){let I,o,a,C,i,r,s,c;const d=g.pointStyle,A=g.rotation,u=g.radius;let m=(A||0)*Rb;if(d&&"object"==typeof d&&(I=d.toString(),"[object HTMLImageElement]"===I||"[object HTMLCanvasElement]"===I))return e.save(),e.translate(t,n),e.rotate(m),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void e.restore();if(!(isNaN(u)||u<=0)){switch(e.beginPath(),d){default:l?e.ellipse(t,n,l/2,u,0,0,fb):e.arc(t,n,u,0,fb),e.closePath();break;case"triangle":r=l?l/2:u,e.moveTo(t+Math.sin(m)*r,n-Math.cos(m)*u),m+=Jb,e.lineTo(t+Math.sin(m)*r,n-Math.cos(m)*u),m+=Jb,e.lineTo(t+Math.sin(m)*r,n-Math.cos(m)*u),e.closePath();break;case"rectRounded":i=.516*u,C=u-i,o=Math.cos(m+Xb)*C,s=Math.cos(m+Xb)*(l?l/2-i:C),a=Math.sin(m+Xb)*C,c=Math.sin(m+Xb)*(l?l/2-i:C),e.arc(t-s,n-a,i,m-Vb,m-kb),e.arc(t+c,n-o,i,m-kb,m),e.arc(t+s,n+a,i,m,m+kb),e.arc(t-c,n+o,i,m+kb,m+Vb),e.closePath();break;case"rect":if(!A){C=Math.SQRT1_2*u,r=l?l/2:C,e.rect(t-r,n-C,2*r,2*C);break}m+=Xb;case"rectRot":s=Math.cos(m)*(l?l/2:u),o=Math.cos(m)*u,a=Math.sin(m)*u,c=Math.sin(m)*(l?l/2:u),e.moveTo(t-s,n-a),e.lineTo(t+c,n-o),e.lineTo(t+s,n+a),e.lineTo(t-c,n+o),e.closePath();break;case"crossRot":m+=Xb;case"cross":s=Math.cos(m)*(l?l/2:u),o=Math.cos(m)*u,a=Math.sin(m)*u,c=Math.sin(m)*(l?l/2:u),e.moveTo(t-s,n-a),e.lineTo(t+s,n+a),e.moveTo(t+c,n-o),e.lineTo(t-c,n+o);break;case"star":s=Math.cos(m)*(l?l/2:u),o=Math.cos(m)*u,a=Math.sin(m)*u,c=Math.sin(m)*(l?l/2:u),e.moveTo(t-s,n-a),e.lineTo(t+s,n+a),e.moveTo(t+c,n-o),e.lineTo(t-c,n+o),m+=Xb,s=Math.cos(m)*(l?l/2:u),o=Math.cos(m)*u,a=Math.sin(m)*u,c=Math.sin(m)*(l?l/2:u),e.moveTo(t-s,n-a),e.lineTo(t+s,n+a),e.moveTo(t+c,n-o),e.lineTo(t-c,n+o);break;case"line":o=l?l/2:Math.cos(m)*u,a=Math.sin(m)*u,e.moveTo(t-o,n-a),e.lineTo(t+o,n+a);break;case"dash":e.moveTo(t,n),e.lineTo(t+Math.cos(m)*(l?l/2:u),n+Math.sin(m)*u);break;case!1:e.closePath()}e.fill(),g.borderWidth>0&&e.stroke()}}function SZ(e,g,t){return t=t||.5,!g||e&&e.x>g.left-t&&e.x<g.right+t&&e.y>g.top-t&&e.y<g.bottom+t}function WZ(e,g){e.save(),e.beginPath(),e.rect(g.left,g.top,g.right-g.left,g.bottom-g.top),e.clip()}function VZ(e){e.restore()}function fZ(e,g,t,n,l){if(l.strikethrough||l.underline){const I=e.measureText(n),o=g-I.actualBoundingBoxLeft,a=g+I.actualBoundingBoxRight,C=t-I.actualBoundingBoxAscent,i=t+I.actualBoundingBoxDescent,r=l.strikethrough?(C+i)/2:i;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=l.decorationWidth||2,e.moveTo(o,r),e.lineTo(a,r),e.stroke()}}function vZ(e,g){const t=e.fillStyle;e.fillStyle=g.color,e.fillRect(g.left,g.top,g.width,g.height),e.fillStyle=t}function RZ(e,g,t,n,l,I={}){const o=Ib(g)?g:[g],a=I.strokeWidth>0&&""!==I.strokeColor;let C,i;for(e.save(),e.font=l.string,function(e,g){g.translation&&e.translate(g.translation[0],g.translation[1]),lb(g.rotation)||e.rotate(g.rotation),g.color&&(e.fillStyle=g.color),g.textAlign&&(e.textAlign=g.textAlign),g.textBaseline&&(e.textBaseline=g.textBaseline)}(e,I),C=0;C<o.length;++C)i=o[C],I.backdrop&&vZ(e,I.backdrop),a&&(I.strokeColor&&(e.strokeStyle=I.strokeColor),lb(I.strokeWidth)||(e.lineWidth=I.strokeWidth),e.strokeText(i,t,n,I.maxWidth)),e.fillText(i,t,n,I.maxWidth),fZ(e,t,n,i,I),n+=Number(l.lineHeight);e.restore()}function kZ(e,g){const{x:t,y:n,w:l,h:I,radius:o}=g;e.arc(t+o.topLeft,n+o.topLeft,o.topLeft,1.5*Vb,Vb,!0),e.lineTo(t,n+I-o.bottomLeft),e.arc(t+o.bottomLeft,n+I-o.bottomLeft,o.bottomLeft,Vb,kb,!0),e.lineTo(t+l-o.bottomRight,n+I),e.arc(t+l-o.bottomRight,n+I-o.bottomRight,o.bottomRight,kb,0,!0),e.lineTo(t+l,n+o.topRight),e.arc(t+l-o.topRight,n+o.topRight,o.topRight,0,-kb,!0),e.lineTo(t+o.topLeft,n)}const XZ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,JZ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function YZ(e,g){const t=(""+e).match(XZ);if(!t||"normal"===t[1])return 1.2*g;switch(e=+t[2],t[3]){case"px":return e;case"%":e/=100}return g*e}const HZ=e=>+e||0;function wZ(e,g){const t={},n=ob(g),l=n?Object.keys(g):g,I=ob(e)?n?t=>ib(e[t],e[g[t]]):g=>e[g]:()=>e;for(const e of l)t[e]=HZ(I(e));return t}function xZ(e){return wZ(e,{top:"y",right:"x",bottom:"y",left:"x"})}function FZ(e){return wZ(e,["topLeft","topRight","bottomLeft","bottomRight"])}function NZ(e){const g=xZ(e);return g.width=g.left+g.right,g.height=g.top+g.bottom,g}function KZ(e,g){e=e||{},g=g||ZZ.font;let t=ib(e.size,g.size);"string"==typeof t&&(t=parseInt(t,10));let n=ib(e.style,g.style);n&&!(""+n).match(JZ)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const l={family:ib(e.family,g.family),lineHeight:YZ(ib(e.lineHeight,g.lineHeight),t),size:t,style:n,weight:ib(e.weight,g.weight),string:""};return l.string=function(e){return!e||lb(e.size)||lb(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(l),l}function zZ(e,g,t,n){let l,I,o,a=!0;for(l=0,I=e.length;l<I;++l)if(o=e[l],void 0!==o&&(void 0!==g&&"function"==typeof o&&(o=o(g),a=!1),void 0!==t&&Ib(o)&&(o=o[t%o.length],a=!1),void 0!==o))return n&&!a&&(n.cacheable=!1),o}function MZ(e,g){return Object.assign(Object.create(e),g)}function EZ(e,g=[""],t,n,l=(()=>e[0])){const I=t||e;void 0===n&&(n=$Z("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:I,_fallback:n,_getTarget:l,override:t=>EZ([t,...e],g,I,n)};return new Proxy(o,{deleteProperty(g,t){return delete g[t],delete g._keys,delete e[0][t],!0},get(t,n){return DZ(t,n,(()=>function(e,g,t,n){let l;for(const I of g)if(l=$Z(QZ(I,e),t),void 0!==l)return TZ(e,l)?qZ(t,n,e,l):l}(n,g,e,t)))},getOwnPropertyDescriptor(e,g){return Reflect.getOwnPropertyDescriptor(e._scopes[0],g)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(e,g){return eh(e).includes(g)},ownKeys(e){return eh(e)},set(e,g,t){const n=e._storage||(e._storage=l());return e[g]=n[g]=t,delete e._keys,!0}})}function LZ(e,g,t,n){const l={_cacheable:!1,_proxy:e,_context:g,_subProxy:t,_stack:new Set,_descriptors:UZ(e,n),setContext:g=>LZ(e,g,t,n),override:l=>LZ(e.override(l),g,t,n)};return new Proxy(l,{deleteProperty(g,t){return delete g[t],delete e[t],!0},get(e,g,t){return DZ(e,g,(()=>function(e,g,t){const{_proxy:n,_context:l,_subProxy:I,_descriptors:o}=e;let a=n[g];return Sb(a)&&o.isScriptable(g)&&(a=function(e,g,t,n){const{_proxy:l,_context:I,_subProxy:o,_stack:a}=t;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let C=g(I,o||n);return a.delete(e),TZ(e,C)&&(C=qZ(l._scopes,l,e,C)),C}(g,a,e,t)),Ib(a)&&a.length&&(a=function(e,g,t,n){const{_proxy:l,_context:I,_subProxy:o,_descriptors:a}=t;if(void 0!==I.index&&n(e))return g[I.index%g.length];if(ob(g[0])){const t=g,n=l._scopes.filter((e=>e!==t));g=[];for(const C of t){const t=qZ(n,l,e,C);g.push(LZ(t,I,o&&o[e],a))}}return g}(g,a,e,o.isIndexable)),TZ(g,a)&&(a=LZ(a,l,I&&I[g],o)),a}(e,g,t)))},getOwnPropertyDescriptor(g,t){return g._descriptors.allKeys?Reflect.has(e,t)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,t)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(g,t){return Reflect.has(e,t)},ownKeys(){return Reflect.ownKeys(e)},set(g,t,n){return e[t]=n,delete g[t],!0}})}function UZ(e,g={scriptable:!0,indexable:!0}){const{_scriptable:t=g.scriptable,_indexable:n=g.indexable,_allKeys:l=g.allKeys}=e;return{allKeys:l,scriptable:t,indexable:n,isScriptable:Sb(t)?t:()=>t,isIndexable:Sb(n)?n:()=>n}}const QZ=(e,g)=>e?e+yb(g):g,TZ=(e,g)=>ob(g)&&"adapters"!==e&&(null===Object.getPrototypeOf(g)||g.constructor===Object);function DZ(e,g,t){if(Object.prototype.hasOwnProperty.call(e,g))return e[g];const n=t();return e[g]=n,n}function jZ(e,g,t){return Sb(e)?e(g,t):e}const PZ=(e,g)=>!0===e?g:"string"==typeof e?Gb(g,e):void 0;function OZ(e,g,t,n,l){for(const I of g){const g=PZ(t,I);if(g){e.add(g);const I=jZ(g._fallback,t,l);if(void 0!==I&&I!==t&&I!==n)return I}else if(!1===g&&void 0!==n&&t!==n)return null}return!1}function qZ(e,g,t,n){const l=g._rootScopes,I=jZ(g._fallback,t,n),o=[...e,...l],a=new Set;a.add(n);let C=_Z(a,o,t,I||t,n);return null!==C&&(void 0===I||I===t||(C=_Z(a,o,I,C,n),null!==C))&&EZ(Array.from(a),[""],l,I,(()=>function(e,g,t){const n=e._getTarget();g in n||(n[g]={});const l=n[g];return Ib(l)&&ob(t)?t:l||{}}(g,t,n)))}function _Z(e,g,t,n,l){for(;t;)t=OZ(e,g,t,n,l);return t}function $Z(e,g){for(const t of g){if(!t)continue;const g=t[e];if(void 0!==g)return g}}function eh(e){let g=e._keys;return g||(g=e._keys=function(e){const g=new Set;for(const t of e)for(const e of Object.keys(t).filter((e=>!e.startsWith("_"))))g.add(e);return Array.from(g)}(e._scopes)),g}function gh(){return"undefined"!=typeof window&&"undefined"!=typeof document}function th(e){let g=e.parentNode;return g&&"[object ShadowRoot]"===g.toString()&&(g=g.host),g}function nh(e,g,t){let n;return"string"==typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*g.parentNode[t])):n=e,n}Number.EPSILON;const lh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null),Ih=["top","right","bottom","left"];function oh(e,g,t){const n={};t=t?"-"+t:"";for(let l=0;l<4;l++){const I=Ih[l];n[I]=parseFloat(e[g+"-"+I+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const ah=(e,g,t)=>(e>0||g>0)&&(!t||!t.shadowRoot);function Ch(e,g){if("native"in e)return e;const{canvas:t,currentDevicePixelRatio:n}=g,l=lh(t),I="border-box"===l.boxSizing,o=oh(l,"padding"),a=oh(l,"border","width"),{x:C,y:i,box:r}=function(e,g){const t=e.touches,n=t&&t.length?t[0]:e,{offsetX:l,offsetY:I}=n;let o,a,C=!1;if(ah(l,I,e.target))o=l,a=I;else{const e=g.getBoundingClientRect();o=n.clientX-e.left,a=n.clientY-e.top,C=!0}return{x:o,y:a,box:C}}(e,t),s=o.left+(r&&a.left),c=o.top+(r&&a.top);let{width:d,height:A}=g;return I&&(d-=o.width+a.width,A-=o.height+a.height),{x:Math.round((C-s)/d*t.width/n),y:Math.round((i-c)/A*t.height/n)}}const ih=e=>Math.round(10*e)/10;function rh(e,g,t){const n=g||1,l=Math.floor(e.height*n),I=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||o.height!==l||o.width!==I)&&(e.currentDevicePixelRatio=n,o.height=l,o.width=I,e.ctx.setTransform(n,0,0,n,0,0),!0)}const sh=function(){let e=!1;try{const g={get passive(){return e=!0,!1}};window.addEventListener("test",null,g),window.removeEventListener("test",null,g)}catch(e){}return e}();function ch(e,g){const t=function(e,g){return lh(e).getPropertyValue(g)}(e,g),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function dh(e,g,t){return e?function(e,g){return{x(t){return e+e+g-t},setWidth(e){g=e},textAlign(e){return"center"===e?e:"right"===e?"left":"right"},xPlus(e,g){return e-g},leftForLtr(e,g){return e-g}}}(g,t):{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,g){return e+g},leftForLtr(e,g){return e}}}function Ah(e,g){let t,n;"ltr"!==g&&"rtl"!==g||(t=e.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",g,"important"),e.prevTextDirection=n)}function uh(e,g){void 0!==g&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",g[0],g[1]))}class mh{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,g,t,n){const l=g.listeners[n],I=g.duration;l.forEach((n=>n({chart:e,initial:g.initial,numSteps:I,currentStep:Math.min(t-g.start,I)})))}_refresh(){this._request||(this._running=!0,this._request=Ob.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(e=Date.now()){let g=0;this._charts.forEach(((t,n)=>{if(!t.running||!t.items.length)return;const l=t.items;let I,o=l.length-1,a=!1;for(;o>=0;--o)I=l[o],I._active?(I._total>t.duration&&(t.duration=I._total),I.tick(e),a=!0):(l[o]=l[l.length-1],l.pop());a&&(n.draw(),this._notify(n,t,e,"progress")),l.length||(t.running=!1,this._notify(n,t,e,"complete"),t.initial=!1),g+=l.length})),this._lastDate=e,0===g&&(this._running=!1)}_getAnims(e){const g=this._charts;let t=g.get(e);return t||(t={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},g.set(e,t)),t}listen(e,g,t){this._getAnims(e).listeners[g].push(t)}add(e,g){g&&g.length&&this._getAnims(e).items.push(...g)}has(e){return this._getAnims(e).items.length>0}start(e){const g=this._charts.get(e);g&&(g.running=!0,g.start=Date.now(),g.duration=g.items.reduce(((e,g)=>Math.max(e,g._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const g=this._charts.get(e);return!!(g&&g.running&&g.items.length)}stop(e){const g=this._charts.get(e);if(!g||!g.items.length)return;const t=g.items;let n=t.length-1;for(;n>=0;--n)t[n].cancel();g.items=[],this._notify(e,g,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var bh=new mh;const Zh="transparent",hh={boolean(e,g,t){return t>.5?g:e},color(e,g,t){const n=IZ(e||Zh),l=n.valid&&IZ(g||Zh);return l&&l.valid?l.mix(n,t).hexString():g},number(e,g,t){return e+(g-e)*t}};class ph{constructor(e,g,t,n){const l=g[t];n=zZ([e.to,n,l,e.from]);const I=zZ([e.from,l,n]);this._active=!0,this._fn=e.fn||hh[e.type||typeof I],this._easing=nZ[e.easing]||nZ.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=g,this._prop=t,this._from=I,this._to=n,this._promises=void 0}active(){return this._active}update(e,g,t){if(this._active){this._notify(!1);const n=this._target[this._prop],l=t-this._start,I=this._duration-l;this._start=t,this._duration=Math.floor(Math.max(I,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=zZ([e.to,g,n,e.from]),this._from=zZ([e.from,n,g])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const g=e-this._start,t=this._duration,n=this._prop,l=this._from,I=this._loop,o=this._to;let a;if(this._active=l!==o&&(I||g<t),!this._active)return this._target[n]=o,void this._notify(!0);g<0?this._target[n]=l:(a=g/t%2,a=I&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[n]=this._fn(l,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((g,t)=>{e.push({res:g,rej:t})}))}_notify(e){const g=e?"res":"rej",t=this._promises||[];for(let e=0;e<t.length;e++)t[e][g]()}}class Gh{constructor(e,g){this._chart=e,this._properties=new Map,this.configure(g)}configure(e){if(!ob(e))return;const g=Object.keys(ZZ.animation),t=this._properties;Object.getOwnPropertyNames(e).forEach((n=>{const l=e[n];if(!ob(l))return;const I={};for(const e of g)I[e]=l[e];(Ib(l.properties)&&l.properties||[n]).forEach((e=>{e!==n&&t.has(e)||t.set(e,I)}))}))}_animateOptions(e,g){const t=g.options,n=function(e,g){if(!g)return;let t=e.options;if(t)return t.$shared&&(e.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t;e.options=g}(e,t);if(!n)return[];const l=this._createAnimations(n,t);return t.$shared&&function(e,g){const t=[],n=Object.keys(g);for(let g=0;g<n.length;g++){const l=e[n[g]];l&&l.active()&&t.push(l.wait())}return Promise.all(t)}(e.options.$animations,t).then((()=>{e.options=t}),(()=>{})),l}_createAnimations(e,g){const t=this._properties,n=[],l=e.$animations||(e.$animations={}),I=Object.keys(g),o=Date.now();let a;for(a=I.length-1;a>=0;--a){const C=I[a];if("$"===C.charAt(0))continue;if("options"===C){n.push(...this._animateOptions(e,g));continue}const i=g[C];let r=l[C];const s=t.get(C);if(r){if(s&&r.active()){r.update(s,i,o);continue}r.cancel()}s&&s.duration?(l[C]=r=new ph(s,e,C,i),n.push(r)):e[C]=i}return n}update(e,g){if(0===this._properties.size)return void Object.assign(e,g);const t=this._createAnimations(e,g);return t.length?(bh.add(this._chart,t),!0):void 0}}function yh(e,g){const t=e&&e.options||{},n=t.reverse,l=void 0===t.min?g:0,I=void 0===t.max?g:0;return{start:n?I:l,end:n?l:I}}function Bh(e,g){const t=[],n=e._getSortedDatasetMetas(g);let l,I;for(l=0,I=n.length;l<I;++l)t.push(n[l].index);return t}function Sh(e,g,t,n={}){const l=e.keys,I="single"===n.mode;let o,a,C,i;if(null!==g){for(o=0,a=l.length;o<a;++o){if(C=+l[o],C===t){if(n.all)continue;break}i=e.values[C],ab(i)&&(I||0===g||Hb(g)===Hb(i))&&(g+=i)}return g}}function Wh(e,g){const t=e&&e.options.stacked;return t||void 0===t&&void 0!==g.stack}function Vh(e,g,t){const n=e[g]||(e[g]={});return n[t]||(n[t]={})}function fh(e,g,t,n){for(const l of g.getMatchingVisibleMetas(n).reverse()){const g=e[l.index];if(t&&g>0||!t&&g<0)return l.index}return null}function vh(e,g){const{chart:t,_cachedMeta:n}=e,l=t._stacks||(t._stacks={}),{iScale:I,vScale:o,index:a}=n,C=I.axis,i=o.axis,r=function(e,g,t){return`${e.id}.${g.id}.${t.stack||t.type}`}(I,o,n),s=g.length;let c;for(let e=0;e<s;++e){const t=g[e],{[C]:I,[i]:s}=t;c=(t._stacks||(t._stacks={}))[i]=Vh(l,r,I),c[a]=s,c._top=fh(c,o,!0,n.type),c._bottom=fh(c,o,!1,n.type),(c._visualValues||(c._visualValues={}))[a]=s}}function Rh(e,g){const t=e.scales;return Object.keys(t).filter((e=>t[e].axis===g)).shift()}function kh(e,g){const t=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){g=g||e._parsed;for(const e of g){const g=e._stacks;if(!g||void 0===g[n]||void 0===g[n][t])return;delete g[n][t],void 0!==g[n]._visualValues&&void 0!==g[n]._visualValues[t]&&delete g[n]._visualValues[t]}}}const Xh=e=>"reset"===e||"none"===e,Jh=(e,g)=>g?e:Object.assign({},e);class Yh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,g){this.chart=e,this._ctx=e.ctx,this.index=g,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Wh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&kh(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,g=this._cachedMeta,t=this.getDataset(),n=(e,g,t,n)=>"x"===e?g:"r"===e?n:t,l=g.xAxisID=ib(t.xAxisID,Rh(e,"x")),I=g.yAxisID=ib(t.yAxisID,Rh(e,"y")),o=g.rAxisID=ib(t.rAxisID,Rh(e,"r")),a=g.indexAxis,C=g.iAxisID=n(a,l,I,o),i=g.vAxisID=n(a,I,l,o);g.xScale=this.getScaleForId(l),g.yScale=this.getScaleForId(I),g.rScale=this.getScaleForId(o),g.iScale=this.getScaleForId(C),g.vScale=this.getScaleForId(i)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const g=this._cachedMeta;return e===g.iScale?g.vScale:g.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Pb(this._data,this),e._stacked&&kh(e)}_dataCheck(){const e=this.getDataset(),g=e.data||(e.data=[]),t=this._data;if(ob(g))this._data=function(e){const g=Object.keys(e),t=new Array(g.length);let n,l,I;for(n=0,l=g.length;n<l;++n)I=g[n],t[n]={x:I,y:e[I]};return t}(g);else if(t!==g){if(t){Pb(t,this);const e=this._cachedMeta;kh(e),e._parsed=[]}g&&Object.isExtensible(g)&&(this,(n=g)._chartjs?n._chartjs.listeners.push(this):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),jb.forEach((e=>{const g="_onData"+yb(e),t=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...e){const l=t.apply(this,e);return n._chartjs.listeners.forEach((t=>{"function"==typeof t[g]&&t[g](...e)})),l}})})))),this._syncList=[],this._data=g}var n}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const g=this._cachedMeta,t=this.getDataset();let n=!1;this._dataCheck();const l=g._stacked;g._stacked=Wh(g.vScale,g),g.stack!==t.stack&&(n=!0,kh(g),g.stack=t.stack),this._resyncElements(e),(n||l!==g._stacked)&&vh(this,g._parsed)}configure(){const e=this.chart.config,g=e.datasetScopeKeys(this._type),t=e.getOptionScopes(this.getDataset(),g,!0);this.options=e.createResolver(t,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,g){const{_cachedMeta:t,_data:n}=this,{iScale:l,_stacked:I}=t,o=l.axis;let a,C,i,r=0===e&&g===n.length||t._sorted,s=e>0&&t._parsed[e-1];if(!1===this._parsing)t._parsed=n,t._sorted=!0,i=n;else{i=Ib(n[e])?this.parseArrayData(t,n,e,g):ob(n[e])?this.parseObjectData(t,n,e,g):this.parsePrimitiveData(t,n,e,g);const l=()=>null===C[o]||s&&C[o]<s[o];for(a=0;a<g;++a)t._parsed[a+e]=C=i[a],r&&(l()&&(r=!1),s=C);t._sorted=r}I&&vh(this,i)}parsePrimitiveData(e,g,t,n){const{iScale:l,vScale:I}=e,o=l.axis,a=I.axis,C=l.getLabels(),i=l===I,r=new Array(n);let s,c,d;for(s=0,c=n;s<c;++s)d=s+t,r[s]={[o]:i||l.parse(C[d],d),[a]:I.parse(g[d],d)};return r}parseArrayData(e,g,t,n){const{xScale:l,yScale:I}=e,o=new Array(n);let a,C,i,r;for(a=0,C=n;a<C;++a)i=a+t,r=g[i],o[a]={x:l.parse(r[0],i),y:I.parse(r[1],i)};return o}parseObjectData(e,g,t,n){const{xScale:l,yScale:I}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,C=new Array(n);let i,r,s,c;for(i=0,r=n;i<r;++i)s=i+t,c=g[s],C[i]={x:l.parse(Gb(c,o),s),y:I.parse(Gb(c,a),s)};return C}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,g,t){const n=this.chart,l=this._cachedMeta,I=g[e.axis];return Sh({keys:Bh(n,!0),values:g._stacks[e.axis]._visualValues},I,l.index,{mode:t})}updateRangeFromParsed(e,g,t,n){const l=t[g.axis];let I=null===l?NaN:l;const o=n&&t._stacks[g.axis];n&&o&&(n.values=o,I=Sh(n,l,this._cachedMeta.index)),e.min=Math.min(e.min,I),e.max=Math.max(e.max,I)}getMinMax(e,g){const t=this._cachedMeta,n=t._parsed,l=t._sorted&&e===t.iScale,I=n.length,o=this._getOtherScale(e),a=((e,g,t)=>e&&!g.hidden&&g._stacked&&{keys:Bh(t,!0),values:null})(g,t,this.chart),C={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:i,max:r}=function(e){const{min:g,max:t,minDefined:n,maxDefined:l}=e.getUserBounds();return{min:n?g:Number.NEGATIVE_INFINITY,max:l?t:Number.POSITIVE_INFINITY}}(o);let s,c;function d(){c=n[s];const g=c[o.axis];return!ab(c[e.axis])||i>g||r<g}for(s=0;s<I&&(d()||(this.updateRangeFromParsed(C,e,c,a),!l));++s);if(l)for(s=I-1;s>=0;--s)if(!d()){this.updateRangeFromParsed(C,e,c,a);break}return C}getAllParsedValues(e){const g=this._cachedMeta._parsed,t=[];let n,l,I;for(n=0,l=g.length;n<l;++n)I=g[n][e.axis],ab(I)&&t.push(I);return t}getMaxOverflow(){return!1}getLabelAndValue(e){const g=this._cachedMeta,t=g.iScale,n=g.vScale,l=this.getParsed(e);return{label:t?""+t.getLabelForValue(l[t.axis]):"",value:n?""+n.getLabelForValue(l[n.axis]):""}}_update(e){const g=this._cachedMeta;this.update(e||"default"),g._clip=function(e){let g,t,n,l;return ob(e)?(g=e.top,t=e.right,n=e.bottom,l=e.left):g=t=n=l=e,{top:g,right:t,bottom:n,left:l,disabled:!1===e}}(ib(this.options.clip,function(e,g,t){if(!1===t)return!1;const n=yh(e,t),l=yh(g,t);return{top:l.end,right:n.end,bottom:l.start,left:n.start}}(g.xScale,g.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,g=this.chart,t=this._cachedMeta,n=t.data||[],l=g.chartArea,I=[],o=this._drawStart||0,a=this._drawCount||n.length-o,C=this.options.drawActiveElementsOnTop;let i;for(t.dataset&&t.dataset.draw(e,l,o,a),i=o;i<o+a;++i){const g=n[i];g.hidden||(g.active&&C?I.push(g):g.draw(e,l))}for(i=0;i<I.length;++i)I[i].draw(e,l)}getStyle(e,g){const t=g?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(t):this.resolveDataElementOptions(e||0,t)}getContext(e,g,t){const n=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const g=this._cachedMeta.data[e];l=g.$context||(g.$context=function(e,g,t){return MZ(e,{active:!1,dataIndex:g,parsed:void 0,raw:void 0,element:t,index:g,mode:"default",type:"data"})}(this.getContext(),e,g)),l.parsed=this.getParsed(e),l.raw=n.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=function(e,g){return MZ(e,{active:!1,dataset:void 0,datasetIndex:g,index:g,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),l.dataset=n,l.index=l.datasetIndex=this.index;return l.active=!!g,l.mode=t,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,g){return this._resolveElementOptions(this.dataElementType.id,g,e)}_resolveElementOptions(e,g="default",t){const n="active"===g,l=this._cachedDataOpts,I=e+"-"+g,o=l[I],a=this.enableOptionSharing&&Bb(t);if(o)return Jh(o,a);const C=this.chart.config,i=C.datasetElementScopeKeys(this._type,e),r=n?[`${e}Hover`,"hover",e,""]:[e,""],s=C.getOptionScopes(this.getDataset(),i),c=Object.keys(ZZ.elements[e]),d=C.resolveNamedOptions(s,c,(()=>this.getContext(t,n,g)),r);return d.$shared&&(d.$shared=a,l[I]=Object.freeze(Jh(d,a))),d}_resolveAnimations(e,g,t){const n=this.chart,l=this._cachedDataOpts,I=`animation-${g}`,o=l[I];if(o)return o;let a;if(!1!==n.options.animation){const n=this.chart.config,l=n.datasetAnimationScopeKeys(this._type,g),I=n.getOptionScopes(this.getDataset(),l);a=n.createResolver(I,this.getContext(e,t,g))}const C=new Gh(n,a&&a.animations);return a&&a._cacheable&&(l[I]=Object.freeze(C)),C}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,g){return!g||Xh(e)||this.chart._animationsDisabled}_getSharedOptions(e,g){const t=this.resolveDataElementOptions(e,g),n=this._sharedOptions,l=this.getSharedOptions(t),I=this.includeOptions(g,l)||l!==n;return this.updateSharedOptions(l,g,t),{sharedOptions:l,includeOptions:I}}updateElement(e,g,t,n){Xh(n)?Object.assign(e,t):this._resolveAnimations(g,n).update(e,t)}updateSharedOptions(e,g,t){e&&!Xh(g)&&this._resolveAnimations(void 0,g).update(e,t)}_setStyle(e,g,t,n){e.active=n;const l=this.getStyle(g,n);this._resolveAnimations(g,t,n).update(e,{options:!n&&this.getSharedOptions(l)||l})}removeHoverStyle(e,g,t){this._setStyle(e,t,"active",!1)}setHoverStyle(e,g,t){this._setStyle(e,t,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const g=this._data,t=this._cachedMeta.data;for(const[e,g,t]of this._syncList)this[e](g,t);this._syncList=[];const n=t.length,l=g.length,I=Math.min(l,n);I&&this.parse(0,I),l>n?this._insertElements(n,l-n,e):l<n&&this._removeElements(l,n-l)}_insertElements(e,g,t=!0){const n=this._cachedMeta,l=n.data,I=e+g;let o;const a=e=>{for(e.length+=g,o=e.length-1;o>=I;o--)e[o]=e[o-g]};for(a(l),o=e;o<I;++o)l[o]=new this.dataElementType;this._parsing&&a(n._parsed),this.parse(e,g),t&&this.updateElements(l,e,g,"reset")}updateElements(e,g,t,n){}_removeElements(e,g){const t=this._cachedMeta;if(this._parsing){const n=t._parsed.splice(e,g);t._stacked&&kh(t,n)}t.data.splice(e,g)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[g,t,n]=e;this[g](t,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,g){g&&this._sync(["_removeElements",e,g]);const t=arguments.length-2;t&&this._sync(["_insertElements",e,t])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Hh(e){const g=e.iScale,t=function(e,g){if(!e._cache.$bar){const t=e.getMatchingVisibleMetas(g);let n=[];for(let g=0,l=t.length;g<l;g++)n=n.concat(t[g].controller.getAllParsedValues(e));e._cache.$bar=function(e){const g=new Set(e);return g.size===e.length?e:Array.from(g)}(n.sort(((e,g)=>e-g)))}return e._cache.$bar}(g,e.type);let n,l,I,o,a=g._length;const C=()=>{32767!==I&&-32768!==I&&(Bb(o)&&(a=Math.min(a,Math.abs(I-o)||a)),o=I)};for(n=0,l=t.length;n<l;++n)I=g.getPixelForValue(t[n]),C();for(o=void 0,n=0,l=g.ticks.length;n<l;++n)I=g.getPixelForTick(n),C();return a}function wh(e,g,t,n){return Ib(e)?function(e,g,t,n){const l=t.parse(e[0],n),I=t.parse(e[1],n),o=Math.min(l,I),a=Math.max(l,I);let C=o,i=a;Math.abs(o)>Math.abs(a)&&(C=a,i=o),g[t.axis]=i,g._custom={barStart:C,barEnd:i,start:l,end:I,min:o,max:a}}(e,g,t,n):g[t.axis]=t.parse(e,n),g}function xh(e,g,t,n){const l=e.iScale,I=e.vScale,o=l.getLabels(),a=l===I,C=[];let i,r,s,c;for(i=t,r=t+n;i<r;++i)c=g[i],s={},s[l.axis]=a||l.parse(o[i],i),C.push(wh(c,s,I,i));return C}function Fh(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Nh(e,g,t,n){let l=g.borderSkipped;const I={};if(!l)return void(e.borderSkipped=I);if(!0===l)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:C,top:i,bottom:r}=function(e){let g,t,n,l,I;return e.horizontal?(g=e.base>e.x,t="left",n="right"):(g=e.base<e.y,t="bottom",n="top"),g?(l="end",I="start"):(l="start",I="end"),{start:t,end:n,reverse:g,top:l,bottom:I}}(e);"middle"===l&&t&&(e.enableBorderRadius=!0,(t._top||0)===n?l=i:(t._bottom||0)===n?l=r:(I[Kh(r,o,a,C)]=!0,l=i)),I[Kh(l,o,a,C)]=!0,e.borderSkipped=I}function Kh(e,g,t,n){var l,I,o;return n?(o=t,e=zh(e=(l=e)===(I=g)?o:l===o?I:l,t,g)):e=zh(e,g,t),e}function zh(e,g,t){return"start"===e?g:"end"===e?t:e}function Mh(e,{inflateAmount:g},t){e.inflateAmount="auto"===g?1===t?.33:0:g}class Eh extends Yh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,g,t,n){return xh(e,g,t,n)}parseArrayData(e,g,t,n){return xh(e,g,t,n)}parseObjectData(e,g,t,n){const{iScale:l,vScale:I}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,C="x"===l.axis?o:a,i="x"===I.axis?o:a,r=[];let s,c,d,A;for(s=t,c=t+n;s<c;++s)A=g[s],d={},d[l.axis]=l.parse(Gb(A,C),s),r.push(wh(Gb(A,i),d,I,s));return r}updateRangeFromParsed(e,g,t,n){super.updateRangeFromParsed(e,g,t,n);const l=t._custom;l&&g===this._cachedMeta.vScale&&(e.min=Math.min(e.min,l.min),e.max=Math.max(e.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const g=this._cachedMeta,{iScale:t,vScale:n}=g,l=this.getParsed(e),I=l._custom,o=Fh(I)?"["+I.start+", "+I.end+"]":""+n.getLabelForValue(l[n.axis]);return{label:""+t.getLabelForValue(l[t.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const g=this._cachedMeta;this.updateElements(g.data,0,g.data.length,e)}updateElements(e,g,t,n){const l="reset"===n,{index:I,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),C=o.isHorizontal(),i=this._getRuler(),{sharedOptions:r,includeOptions:s}=this._getSharedOptions(g,n);for(let c=g;c<g+t;c++){const g=this.getParsed(c),t=l||lb(g[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(c),d=this._calculateBarIndexPixels(c,i),A=(g._stacks||{})[o.axis],u={horizontal:C,base:t.base,enableBorderRadius:!A||Fh(g._custom)||I===A._top||I===A._bottom,x:C?t.head:d.center,y:C?d.center:t.head,height:C?d.size:Math.abs(t.size),width:C?Math.abs(t.size):d.size};s&&(u.options=r||this.resolveDataElementOptions(c,e[c].active?"active":n));const m=u.options||e[c].options;Nh(u,m,A,I),Mh(u,m,i.ratio),this.updateElement(e[c],c,u,n)}}_getStacks(e,g){const{iScale:t}=this._cachedMeta,n=t.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),l=t.options.stacked,I=[],o=e=>{const t=e.controller.getParsed(g),n=t&&t[e.vScale.axis];if(lb(n)||isNaN(n))return!0};for(const t of n)if((void 0===g||!o(t))&&((!1===l||-1===I.indexOf(t.stack)||void 0===l&&void 0===t.stack)&&I.push(t.stack),t.index===e))break;return I.length||I.push(void 0),I}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,g,t){const n=this._getStacks(e,t),l=void 0!==g?n.indexOf(g):-1;return-1===l?n.length-1:l}_getRuler(){const e=this.options,g=this._cachedMeta,t=g.iScale,n=[];let l,I;for(l=0,I=g.data.length;l<I;++l)n.push(t.getPixelForValue(this.getParsed(l)[t.axis],l));const o=e.barThickness;return{min:o||Hh(g),pixels:n,start:t._startPixel,end:t._endPixel,stackCount:this._getStackCount(),scale:t,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:g,_stacked:t,index:n},options:{base:l,minBarLength:I}}=this,o=l||0,a=this.getParsed(e),C=a._custom,i=Fh(C);let r,s,c=a[g.axis],d=0,A=t?this.applyStack(g,a,t):c;A!==c&&(d=A-c,A=c),i&&(c=C.barStart,A=C.barEnd-C.barStart,0!==c&&Hb(c)!==Hb(C.barEnd)&&(d=0),d+=c);const u=lb(l)||i?d:l;let m=g.getPixelForValue(u);if(r=this.chart.getDataVisibility(e)?g.getPixelForValue(d+A):m,s=r-m,Math.abs(s)<I){s=function(e,g,t){return 0!==e?Hb(e):(g.isHorizontal()?1:-1)*(g.min>=t?1:-1)}(s,g,o)*I,c===o&&(m-=s/2);const e=g.getPixelForDecimal(0),l=g.getPixelForDecimal(1),C=Math.min(e,l),d=Math.max(e,l);m=Math.max(Math.min(m,d),C),r=m+s,t&&!i&&(a._stacks[g.axis]._visualValues[n]=g.getValueForPixel(r)-g.getValueForPixel(m))}if(m===g.getPixelForValue(o)){const e=Hb(s)*g.getLineWidthForValue(o)/2;m+=e,s-=e}return{size:s,base:m,head:r,center:r+s/2}}_calculateBarIndexPixels(e,g){const t=g.scale,n=this.options,l=n.skipNull,I=ib(n.maxBarThickness,1/0);let o,a;if(g.grouped){const t=l?this._getStackCount(e):g.stackCount,C="flex"===n.barThickness?function(e,g,t,n){const l=g.pixels,I=l[e];let o=e>0?l[e-1]:null,a=e<l.length-1?l[e+1]:null;const C=t.categoryPercentage;null===o&&(o=I-(null===a?g.end-g.start:a-I)),null===a&&(a=I+I-o);const i=I-(I-Math.min(o,a))/2*C;return{chunk:Math.abs(a-o)/2*C/n,ratio:t.barPercentage,start:i}}(e,g,n,t):function(e,g,t,n){const l=t.barThickness;let I,o;return lb(l)?(I=g.min*t.categoryPercentage,o=t.barPercentage):(I=l*n,o=1),{chunk:I/n,ratio:o,start:g.pixels[e]-I/2}}(e,g,n,t),i=this._getStackIndex(this.index,this._cachedMeta.stack,l?e:void 0);o=C.start+C.chunk*i+C.chunk/2,a=Math.min(I,C.chunk*C.ratio)}else o=t.getPixelForValue(this.getParsed(e)[t.axis],e),a=Math.min(I,g.min*g.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,g=e.vScale,t=e.data,n=t.length;let l=0;for(;l<n;++l)null!==this.getParsed(l)[g.axis]&&t[l].draw(this._ctx)}}class Lh extends Yh{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const g=e.data;if(g.labels.length&&g.datasets.length){const{labels:{pointStyle:t,color:n}}=e.legend.options;return g.labels.map(((g,l)=>{const I=e.getDatasetMeta(0).controller.getStyle(l);return{text:g,fillStyle:I.backgroundColor,strokeStyle:I.borderColor,fontColor:n,lineWidth:I.borderWidth,pointStyle:t,hidden:!e.getDataVisibility(l),index:l}}))}return[]}},onClick(e,g,t){t.chart.toggleDataVisibility(g.index),t.chart.update()}}}};constructor(e,g){super(e,g),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,g){const t=this.getDataset().data,n=this._cachedMeta;if(!1===this._parsing)n._parsed=t;else{let l,I,o=e=>+t[e];if(ob(t[e])){const{key:e="value"}=this._parsing;o=g=>+Gb(t[g],e)}for(l=e,I=e+g;l<I;++l)n._parsed[l]=o(l)}}_getRotation(){return Nb(this.options.rotation-90)}_getCircumference(){return Nb(this.options.circumference)}_getRotationExtents(){let e=fb,g=-fb;for(let t=0;t<this.chart.data.datasets.length;++t)if(this.chart.isDatasetVisible(t)&&this.chart.getDatasetMeta(t).type===this._type){const n=this.chart.getDatasetMeta(t).controller,l=n._getRotation(),I=n._getCircumference();e=Math.min(e,l),g=Math.max(g,l+I)}return{rotation:e,circumference:g-e}}update(e){const g=this.chart,{chartArea:t}=g,n=this._cachedMeta,l=n.data,I=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,o=Math.max((Math.min(t.width,t.height)-I)/2,0),a=Math.min((i=o,"string"==typeof(C=this.options.cutout)&&C.endsWith("%")?parseFloat(C)/100:+C/i),1);var C,i;const r=this._getRingWeight(this.index),{circumference:s,rotation:c}=this._getRotationExtents(),{ratioX:d,ratioY:A,offsetX:u,offsetY:m}=function(e,g,t){let n=1,l=1,I=0,o=0;if(g<fb){const a=e,C=a+g,i=Math.cos(a),r=Math.sin(a),s=Math.cos(C),c=Math.sin(C),d=(e,g,n)=>Eb(e,a,C,!0)?1:Math.max(g,g*t,n,n*t),A=(e,g,n)=>Eb(e,a,C,!0)?-1:Math.min(g,g*t,n,n*t),u=d(0,i,s),m=d(kb,r,c),b=A(Vb,i,s),Z=A(Vb+kb,r,c);n=(u-b)/2,l=(m-Z)/2,I=-(u+b)/2,o=-(m+Z)/2}return{ratioX:n,ratioY:l,offsetX:I,offsetY:o}}(c,s,a),b=(t.width-I)/d,Z=(t.height-I)/A,h=Math.max(Math.min(b,Z)/2,0),p=rb(this.options.radius,h),G=(p-Math.max(p*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=u*p,this.offsetY=m*p,n.total=this.calculateTotal(),this.outerRadius=p-G*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-G*r,0),this.updateElements(l,0,l.length,e)}_circumference(e,g){const t=this.options,n=this._cachedMeta,l=this._getCircumference();return g&&t.animation.animateRotate||!this.chart.getDataVisibility(e)||null===n._parsed[e]||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*l/fb)}updateElements(e,g,t,n){const l="reset"===n,I=this.chart,o=I.chartArea,a=I.options.animation,C=(o.left+o.right)/2,i=(o.top+o.bottom)/2,r=l&&a.animateScale,s=r?0:this.innerRadius,c=r?0:this.outerRadius,{sharedOptions:d,includeOptions:A}=this._getSharedOptions(g,n);let u,m=this._getRotation();for(u=0;u<g;++u)m+=this._circumference(u,l);for(u=g;u<g+t;++u){const g=this._circumference(u,l),t=e[u],I={x:C+this.offsetX,y:i+this.offsetY,startAngle:m,endAngle:m+g,circumference:g,outerRadius:c,innerRadius:s};A&&(I.options=d||this.resolveDataElementOptions(u,t.active?"active":n)),m+=g,this.updateElement(t,u,I,n)}}calculateTotal(){const e=this._cachedMeta,g=e.data;let t,n=0;for(t=0;t<g.length;t++){const l=e._parsed[t];null===l||isNaN(l)||!this.chart.getDataVisibility(t)||g[t].hidden||(n+=Math.abs(l))}return n}calculateCircumference(e){const g=this._cachedMeta.total;return g>0&&!isNaN(e)?fb*(Math.abs(e)/g):0}getLabelAndValue(e){const g=this._cachedMeta,t=this.chart,n=t.data.labels||[],l=rZ(g._parsed[e],t.options.locale);return{label:n[e]||"",value:l}}getMaxBorderWidth(e){let g=0;const t=this.chart;let n,l,I,o,a;if(!e)for(n=0,l=t.data.datasets.length;n<l;++n)if(t.isDatasetVisible(n)){I=t.getDatasetMeta(n),e=I.data,o=I.controller;break}if(!e)return 0;for(n=0,l=e.length;n<l;++n)a=o.resolveDataElementOptions(n),"inner"!==a.borderAlign&&(g=Math.max(g,a.borderWidth||0,a.hoverBorderWidth||0));return g}getMaxOffset(e){let g=0;for(let t=0,n=e.length;t<n;++t){const e=this.resolveDataElementOptions(t);g=Math.max(g,e.offset||0,e.hoverOffset||0)}return g}_getRingWeightOffset(e){let g=0;for(let t=0;t<e;++t)this.chart.isDatasetVisible(t)&&(g+=this._getRingWeight(t));return g}_getRingWeight(e){return Math.max(ib(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Uh(e,g,t,n){const{controller:l,data:I,_sorted:o}=e,a=l._cachedMeta.iScale;if(a&&g===a.axis&&"r"!==g&&o&&I.length){const e=a._reversePixels?Db:Tb;if(!n)return e(I,g,t);if(l._sharedOptions){const n=I[0],l="function"==typeof n.getRange&&n.getRange(g);if(l){const n=e(I,g,t-l),o=e(I,g,t+l);return{lo:n.lo,hi:o.hi}}}}return{lo:0,hi:I.length-1}}function Qh(e,g,t,n,l){const I=e.getSortedVisibleDatasetMetas(),o=t[g];for(let e=0,t=I.length;e<t;++e){const{index:t,data:a}=I[e],{lo:C,hi:i}=Uh(I[e],g,o,l);for(let e=C;e<=i;++e){const g=a[e];g.skip||n(g,t,e)}}}function Th(e,g,t,n,l){const I=[];return l||e.isPointInArea(g)?(Qh(e,t,g,(function(t,o,a){(l||SZ(t,e.chartArea,0))&&t.inRange(g.x,g.y,n)&&I.push({element:t,datasetIndex:o,index:a})}),!0),I):I}function Dh(e,g,t,n,l,I){return I||e.isPointInArea(g)?"r"!==t||n?function(e,g,t,n,l,I){let o=[];const a=function(e){const g=-1!==e.indexOf("x"),t=-1!==e.indexOf("y");return function(e,n){const l=g?Math.abs(e.x-n.x):0,I=t?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(I,2))}}(t);let C=Number.POSITIVE_INFINITY;return Qh(e,t,g,(function(t,i,r){const s=t.inRange(g.x,g.y,l);if(n&&!s)return;const c=t.getCenterPoint(l);if(!I&&!e.isPointInArea(c)&&!s)return;const d=a(g,c);d<C?(o=[{element:t,datasetIndex:i,index:r}],C=d):d===C&&o.push({element:t,datasetIndex:i,index:r})})),o}(e,g,t,n,l,I):function(e,g,t,n){let l=[];return Qh(e,t,g,(function(e,t,I){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],n),{angle:C}=zb(e,{x:g.x,y:g.y});Eb(C,o,a)&&l.push({element:e,datasetIndex:t,index:I})})),l}(e,g,t,l):[]}function jh(e,g,t,n,l){const I=[],o="x"===t?"inXRange":"inYRange";let a=!1;return Qh(e,t,g,((e,n,C)=>{e[o](g[t],l)&&(I.push({element:e,datasetIndex:n,index:C}),a=a||e.inRange(g.x,g.y,l))})),n&&!a?[]:I}var Ph={evaluateInteractionItems:Qh,modes:{index(e,g,t,n){const l=Ch(g,e),I=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Th(e,l,I,n,o):Dh(e,l,I,!1,n,o),C=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const g=a[0].index,t=e.data[g];t&&!t.skip&&C.push({element:t,datasetIndex:e.index,index:g})})),C):[]},dataset(e,g,t,n){const l=Ch(g,e),I=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?Th(e,l,I,n,o):Dh(e,l,I,!1,n,o);if(a.length>0){const g=a[0].datasetIndex,t=e.getDatasetMeta(g).data;a=[];for(let e=0;e<t.length;++e)a.push({element:t[e],datasetIndex:g,index:e})}return a},point(e,g,t,n){return Th(e,Ch(g,e),t.axis||"xy",n,t.includeInvisible||!1)},nearest(e,g,t,n){const l=Ch(g,e),I=t.axis||"xy",o=t.includeInvisible||!1;return Dh(e,l,I,t.intersect,n,o)},x(e,g,t,n){return jh(e,Ch(g,e),"x",t.intersect,n)},y(e,g,t,n){return jh(e,Ch(g,e),"y",t.intersect,n)}}};const Oh=["left","top","right","bottom"];function qh(e,g){return e.filter((e=>e.pos===g))}function _h(e,g){return e.filter((e=>-1===Oh.indexOf(e.pos)&&e.box.axis===g))}function $h(e,g){return e.sort(((e,t)=>{const n=g?t:e,l=g?e:t;return n.weight===l.weight?n.index-l.index:n.weight-l.weight}))}function ep(e,g,t,n){return Math.max(e[t],g[t])+Math.max(e[n],g[n])}function gp(e,g){e.top=Math.max(e.top,g.top),e.left=Math.max(e.left,g.left),e.bottom=Math.max(e.bottom,g.bottom),e.right=Math.max(e.right,g.right)}function tp(e,g,t,n){const{pos:l,box:I}=t,o=e.maxPadding;if(!ob(l)){t.size&&(e[l]-=t.size);const g=n[t.stack]||{size:0,count:1};g.size=Math.max(g.size,t.horizontal?I.height:I.width),t.size=g.size/g.count,e[l]+=t.size}I.getPadding&&gp(o,I.getPadding());const a=Math.max(0,g.outerWidth-ep(o,e,"left","right")),C=Math.max(0,g.outerHeight-ep(o,e,"top","bottom")),i=a!==e.w,r=C!==e.h;return e.w=a,e.h=C,t.horizontal?{same:i,other:r}:{same:r,other:i}}function np(e,g){const t=g.maxPadding;return function(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{n[e]=Math.max(g[e],t[e])})),n}(e?["left","right"]:["top","bottom"])}function lp(e,g,t,n){const l=[];let I,o,a,C,i,r;for(I=0,o=e.length,i=0;I<o;++I){a=e[I],C=a.box,C.update(a.width||g.w,a.height||g.h,np(a.horizontal,g));const{same:o,other:s}=tp(g,t,a,n);i|=o&&l.length,r=r||s,C.fullSize||l.push(a)}return i&&lp(l,g,t,n)||r}function Ip(e,g,t,n,l){e.top=t,e.left=g,e.right=g+n,e.bottom=t+l,e.width=n,e.height=l}function op(e,g,t,n){const l=t.padding;let{x:I,y:o}=g;for(const a of e){const e=a.box,C=n[a.stack]||{count:1,placed:0,weight:1},i=a.stackWeight/C.weight||1;if(a.horizontal){const n=g.w*i,I=C.size||e.height;Bb(C.start)&&(o=C.start),e.fullSize?Ip(e,l.left,o,t.outerWidth-l.right-l.left,I):Ip(e,g.left+C.placed,o,n,I),C.start=o,C.placed+=n,o=e.bottom}else{const n=g.h*i,o=C.size||e.width;Bb(C.start)&&(I=C.start),e.fullSize?Ip(e,I,l.top,o,t.outerHeight-l.bottom-l.top):Ip(e,I,g.top+C.placed,o,n),C.start=I,C.placed+=n,I=e.right}}g.x=I,g.y=o}var ap={addBox(e,g){e.boxes||(e.boxes=[]),g.fullSize=g.fullSize||!1,g.position=g.position||"top",g.weight=g.weight||0,g._layers=g._layers||function(){return[{z:0,draw(e){g.draw(e)}}]},e.boxes.push(g)},removeBox(e,g){const t=e.boxes?e.boxes.indexOf(g):-1;-1!==t&&e.boxes.splice(t,1)},configure(e,g,t){g.fullSize=t.fullSize,g.position=t.position,g.weight=t.weight},update(e,g,t,n){if(!e)return;const l=NZ(e.options.layout.padding),I=Math.max(g-l.width,0),o=Math.max(t-l.height,0),a=function(e){const g=function(e){const g=[];let t,n,l,I,o,a;for(t=0,n=(e||[]).length;t<n;++t)l=e[t],({position:I,options:{stack:o,stackWeight:a=1}}=l),g.push({index:t,box:l,pos:I,horizontal:l.isHorizontal(),weight:l.weight,stack:o&&I+o,stackWeight:a});return g}(e),t=$h(g.filter((e=>e.box.fullSize)),!0),n=$h(qh(g,"left"),!0),l=$h(qh(g,"right")),I=$h(qh(g,"top"),!0),o=$h(qh(g,"bottom")),a=_h(g,"x"),C=_h(g,"y");return{fullSize:t,leftAndTop:n.concat(I),rightAndBottom:l.concat(C).concat(o).concat(a),chartArea:qh(g,"chartArea"),vertical:n.concat(l).concat(C),horizontal:I.concat(o).concat(a)}}(e.boxes),C=a.vertical,i=a.horizontal;cb(e.boxes,(e=>{"function"==typeof e.beforeLayout&&e.beforeLayout()}));const r=C.reduce(((e,g)=>g.box.options&&!1===g.box.options.display?e:e+1),0)||1,s=Object.freeze({outerWidth:g,outerHeight:t,padding:l,availableWidth:I,availableHeight:o,vBoxMaxWidth:I/2/r,hBoxMaxHeight:o/2}),c=Object.assign({},l);gp(c,NZ(n));const d=Object.assign({maxPadding:c,w:I,h:o,x:l.left,y:l.top},l),A=function(e,g){const t=function(e){const g={};for(const t of e){const{stack:e,pos:n,stackWeight:l}=t;if(!e||!Oh.includes(n))continue;const I=g[e]||(g[e]={count:0,placed:0,weight:0,size:0});I.count++,I.weight+=l}return g}(e),{vBoxMaxWidth:n,hBoxMaxHeight:l}=g;let I,o,a;for(I=0,o=e.length;I<o;++I){a=e[I];const{fullSize:o}=a.box,C=t[a.stack],i=C&&a.stackWeight/C.weight;a.horizontal?(a.width=i?i*n:o&&g.availableWidth,a.height=l):(a.width=n,a.height=i?i*l:o&&g.availableHeight)}return t}(C.concat(i),s);lp(a.fullSize,d,s,A),lp(C,d,s,A),lp(i,d,s,A)&&lp(C,d,s,A),function(e){const g=e.maxPadding;function t(t){const n=Math.max(g[t]-e[t],0);return e[t]+=n,n}e.y+=t("top"),e.x+=t("left"),t("right"),t("bottom")}(d),op(a.leftAndTop,d,s,A),d.x+=d.w,d.y+=d.h,op(a.rightAndBottom,d,s,A),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},cb(a.chartArea,(g=>{const t=g.box;Object.assign(t,e.chartArea),t.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})}))}};class Cp{acquireContext(e,g){}releaseContext(e){return!1}addEventListener(e,g,t){}removeEventListener(e,g,t){}getDevicePixelRatio(){return 1}getMaximumSize(e,g,t,n){return g=Math.max(0,g||e.width),t=t||e.height,{width:g,height:Math.max(0,n?Math.floor(g/n):t)}}isAttached(e){return!0}updateConfig(e){}}class ip extends Cp{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const rp="$chartjs",sp={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cp=e=>null===e||""===e,dp=!!sh&&{passive:!0};function Ap(e,g,t){e.canvas.removeEventListener(g,t,dp)}function up(e,g){for(const t of e)if(t===g||t.contains(g))return!0}function mp(e,g,t){const n=e.canvas,l=new MutationObserver((e=>{let g=!1;for(const t of e)g=g||up(t.addedNodes,n),g=g&&!up(t.removedNodes,n);g&&t()}));return l.observe(document,{childList:!0,subtree:!0}),l}function bp(e,g,t){const n=e.canvas,l=new MutationObserver((e=>{let g=!1;for(const t of e)g=g||up(t.removedNodes,n),g=g&&!up(t.addedNodes,n);g&&t()}));return l.observe(document,{childList:!0,subtree:!0}),l}const Zp=new Map;let hp=0;function pp(){const e=window.devicePixelRatio;e!==hp&&(hp=e,Zp.forEach(((g,t)=>{t.currentDevicePixelRatio!==e&&g()})))}function Gp(e,g,t){const n=e.canvas,l=n&&th(n);if(!l)return;const I=qb(((e,g)=>{const n=l.clientWidth;t(e,g),n<l.clientWidth&&t()}),window),o=new ResizeObserver((e=>{const g=e[0],t=g.contentRect.width,n=g.contentRect.height;0===t&&0===n||I(t,n)}));return o.observe(l),function(e,g){Zp.size||window.addEventListener("resize",pp),Zp.set(e,g)}(e,I),o}function yp(e,g,t){t&&t.disconnect(),"resize"===g&&function(e){Zp.delete(e),Zp.size||window.removeEventListener("resize",pp)}(e)}function Bp(e,g,t){const n=e.canvas,l=qb((g=>{null!==e.ctx&&t(function(e,g){const t=sp[e.type]||e.type,{x:n,y:l}=Ch(e,g);return{type:t,chart:g,native:e,x:void 0!==n?n:null,y:void 0!==l?l:null}}(g,e))}),e);return function(e,g,t){e.addEventListener(g,t,dp)}(n,g,l),l}class Sp extends Cp{acquireContext(e,g){const t=e&&e.getContext&&e.getContext("2d");return t&&t.canvas===e?(function(e,g){const t=e.style,n=e.getAttribute("height"),l=e.getAttribute("width");if(e[rp]={initial:{height:n,width:l,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",cp(l)){const g=ch(e,"width");void 0!==g&&(e.width=g)}if(cp(n))if(""===e.style.height)e.height=e.width/(g||2);else{const g=ch(e,"height");void 0!==g&&(e.height=g)}}(e,g),t):null}releaseContext(e){const g=e.canvas;if(!g[rp])return!1;const t=g[rp].initial;["height","width"].forEach((e=>{const n=t[e];lb(n)?g.removeAttribute(e):g.setAttribute(e,n)}));const n=t.style||{};return Object.keys(n).forEach((e=>{g.style[e]=n[e]})),g.width=g.width,delete g[rp],!0}addEventListener(e,g,t){this.removeEventListener(e,g);const n=e.$proxies||(e.$proxies={}),l={attach:mp,detach:bp,resize:Gp}[g]||Bp;n[g]=l(e,g,t)}removeEventListener(e,g){const t=e.$proxies||(e.$proxies={}),n=t[g];n&&(({attach:yp,detach:yp,resize:yp}[g]||Ap)(e,g,n),t[g]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,g,t,n){return function(e,g,t,n){const l=lh(e),I=oh(l,"margin"),o=nh(l.maxWidth,e,"clientWidth")||vb,a=nh(l.maxHeight,e,"clientHeight")||vb,C=function(e,g,t){let n,l;if(void 0===g||void 0===t){const I=th(e);if(I){const e=I.getBoundingClientRect(),o=lh(I),a=oh(o,"border","width"),C=oh(o,"padding");g=e.width-C.width-a.width,t=e.height-C.height-a.height,n=nh(o.maxWidth,I,"clientWidth"),l=nh(o.maxHeight,I,"clientHeight")}else g=e.clientWidth,t=e.clientHeight}return{width:g,height:t,maxWidth:n||vb,maxHeight:l||vb}}(e,g,t);let{width:i,height:r}=C;if("content-box"===l.boxSizing){const e=oh(l,"border","width"),g=oh(l,"padding");i-=g.width+e.width,r-=g.height+e.height}return i=Math.max(0,i-I.width),r=Math.max(0,n?i/n:r-I.height),i=ih(Math.min(i,o,C.maxWidth)),r=ih(Math.min(r,a,C.maxHeight)),i&&!r&&(r=ih(i/2)),(void 0!==g||void 0!==t)&&n&&C.height&&r>C.height&&(r=C.height,i=ih(Math.floor(r*n))),{width:i,height:r}}(e,g,t,n)}isAttached(e){const g=th(e);return!(!g||!g.isConnected)}}class Wp{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:g,y:t}=this.getProps(["x","y"],e);return{x:g,y:t}}hasValue(){return Fb(this.x)&&Fb(this.y)}getProps(e,g){const t=this.$animations;if(!g||!t)return this;const n={};return e.forEach((e=>{n[e]=t[e]&&t[e].active()?t[e]._to:this[e]})),n}}function Vp(e,g,t,n,l){const I=ib(n,0),o=Math.min(ib(l,e.length),e.length);let a,C,i,r=0;for(t=Math.ceil(t),l&&(a=l-n,t=a/Math.floor(a/t)),i=I;i<0;)r++,i=Math.round(I+r*t);for(C=Math.max(I,0);C<o;C++)C===i&&(g.push(e[C]),r++,i=Math.round(I+r*t))}const fp=(e,g,t)=>"top"===g||"left"===g?e[g]+t:e[g]-t,vp=(e,g)=>Math.min(g||e,e);function Rp(e,g){const t=[],n=e.length/g,l=e.length;let I=0;for(;I<l;I+=n)t.push(e[Math.floor(I)]);return t}function kp(e,g,t){const n=e.ticks.length,l=Math.min(g,n-1),I=e._startPixel,o=e._endPixel,a=1e-6;let C,i=e.getPixelForTick(l);if(!(t&&(C=1===n?Math.max(i-I,o-i):0===g?(e.getPixelForTick(1)-i)/2:(i-e.getPixelForTick(l-1))/2,i+=l<g?C:-C,i<I-a||i>o+a)))return i}function Xp(e){return e.drawTicks?e.tickLength:0}function Jp(e,g){if(!e.display)return 0;const t=KZ(e.font,g),n=NZ(e.padding);return(Ib(e.text)?e.text.length:1)*t.lineHeight+n.height}function Yp(e,g,t){let n=_b(e);return(t&&"right"!==g||!t&&"right"===g)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class Hp extends Wp{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,g){return e}getUserBounds(){let{_userMin:e,_userMax:g,_suggestedMin:t,_suggestedMax:n}=this;return e=Cb(e,Number.POSITIVE_INFINITY),g=Cb(g,Number.NEGATIVE_INFINITY),t=Cb(t,Number.POSITIVE_INFINITY),n=Cb(n,Number.NEGATIVE_INFINITY),{min:Cb(e,t),max:Cb(g,n),minDefined:ab(e),maxDefined:ab(g)}}getMinMax(e){let g,{min:t,max:n,minDefined:l,maxDefined:I}=this.getUserBounds();if(l&&I)return{min:t,max:n};const o=this.getMatchingVisibleMetas();for(let a=0,C=o.length;a<C;++a)g=o[a].controller.getMinMax(this,e),l||(t=Math.min(t,g.min)),I||(n=Math.max(n,g.max));return t=I&&t>n?n:t,n=l&&t>n?t:n,{min:Cb(t,Cb(n,t)),max:Cb(n,Cb(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){sb(this.options.beforeUpdate,[this])}update(e,g,t){const{beginAtZero:n,grace:l,ticks:I}=this.options,o=I.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=g,this._margins=t=Object.assign({left:0,right:0,top:0,bottom:0},t),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+t.left+t.right:this.height+t.top+t.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,g,t){const{min:n,max:l}=e,I=rb(g,(l-n)/2),o=(e,g)=>t&&0===e?0:e+g;return{min:o(n,-Math.abs(I)),max:o(l,I)}}(this,l,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?Rp(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),I.display&&(I.autoSkip||"auto"===I.source)&&(this.ticks=function(e,g){const t=e.options.ticks,n=function(e){const g=e.options.offset,t=e._tickSize(),n=e._length/t+(g?0:1),l=e._maxLength/t;return Math.floor(Math.min(n,l))}(e),l=Math.min(t.maxTicksLimit||n,n),I=t.major.enabled?function(e){const g=[];let t,n;for(t=0,n=e.length;t<n;t++)e[t].major&&g.push(t);return g}(g):[],o=I.length,a=I[0],C=I[o-1],i=[];if(o>l)return function(e,g,t,n){let l,I=0,o=t[0];for(n=Math.ceil(n),l=0;l<e.length;l++)l===o&&(g.push(e[l]),I++,o=t[I*n])}(g,i,I,o/l),i;const r=function(e,g,t){const n=function(e){const g=e.length;let t,n;if(g<2)return!1;for(n=e[0],t=1;t<g;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),l=g.length/t;if(!n)return Math.max(l,1);const I=function(e){const g=[],t=Math.sqrt(e);let n;for(n=1;n<t;n++)e%n==0&&(g.push(n),g.push(e/n));return t===(0|t)&&g.push(t),g.sort(((e,g)=>e-g)).pop(),g}(n);for(let e=0,g=I.length-1;e<g;e++){const g=I[e];if(g>l)return g}return Math.max(l,1)}(I,g,l);if(o>0){let e,t;const n=o>1?Math.round((C-a)/(o-1)):null;for(Vp(g,i,r,lb(n)?0:a-n,a),e=0,t=o-1;e<t;e++)Vp(g,i,r,I[e],I[e+1]);return Vp(g,i,r,C,lb(n)?g.length:C+n),i}return Vp(g,i,r),i}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,g,t=this.options.reverse;this.isHorizontal()?(e=this.left,g=this.right):(e=this.top,g=this.bottom,t=!t),this._startPixel=e,this._endPixel=g,this._reversePixels=t,this._length=g-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){sb(this.options.afterUpdate,[this])}beforeSetDimensions(){sb(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){sb(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),sb(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){sb(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const g=this.options.ticks;let t,n,l;for(t=0,n=e.length;t<n;t++)l=e[t],l.label=sb(g.callback,[l.value,t,e],this)}afterTickToLabelConversion(){sb(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){sb(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,g=e.ticks,t=vp(this.ticks.length,e.ticks.maxTicksLimit),n=g.minRotation||0,l=g.maxRotation;let I,o,a,C=n;if(!this._isVisible()||!g.display||n>=l||t<=1||!this.isHorizontal())return void(this.labelRotation=n);const i=this._getLabelSizes(),r=i.widest.width,s=i.highest.height,c=Lb(this.chart.width-r,0,this.maxWidth);I=e.offset?this.maxWidth/t:c/(t-1),r+6>I&&(I=c/(t-(e.offset?.5:1)),o=this.maxHeight-Xp(e.grid)-g.padding-Jp(e.title,this.chart.options.font),a=Math.sqrt(r*r+s*s),C=Math.min(Math.asin(Lb((i.highest.height+6)/I,-1,1)),Math.asin(Lb(o/a,-1,1))-Math.asin(Lb(s/a,-1,1)))*(180/Vb),C=Math.max(n,Math.min(l,C))),this.labelRotation=C}afterCalculateLabelRotation(){sb(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){sb(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:g,options:{ticks:t,title:n,grid:l}}=this,I=this._isVisible(),o=this.isHorizontal();if(I){const I=Jp(n,g.options.font);if(o?(e.width=this.maxWidth,e.height=Xp(l)+I):(e.height=this.maxHeight,e.width=Xp(l)+I),t.display&&this.ticks.length){const{first:g,last:n,widest:l,highest:I}=this._getLabelSizes(),a=2*t.padding,C=Nb(this.labelRotation),i=Math.cos(C),r=Math.sin(C);if(o){const g=t.mirror?0:r*l.width+i*I.height;e.height=Math.min(this.maxHeight,e.height+g+a)}else{const g=t.mirror?0:i*l.width+r*I.height;e.width=Math.min(this.maxWidth,e.width+g+a)}this._calculatePadding(g,n,r,i)}}this._handleMargins(),o?(this.width=this._length=g.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=g.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,g,t,n){const{ticks:{align:l,padding:I},position:o}=this.options,a=0!==this.labelRotation,C="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,i=this.right-this.getPixelForTick(this.ticks.length-1);let r=0,s=0;a?C?(r=n*e.width,s=t*g.height):(r=t*e.height,s=n*g.width):"start"===l?s=g.width:"end"===l?r=e.width:"inner"!==l&&(r=e.width/2,s=g.width/2),this.paddingLeft=Math.max((r-o+I)*this.width/(this.width-o),0),this.paddingRight=Math.max((s-i+I)*this.width/(this.width-i),0)}else{let t=g.height/2,n=e.height/2;"start"===l?(t=0,n=e.height):"end"===l&&(t=g.height,n=0),this.paddingTop=t+I,this.paddingBottom=n+I}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){sb(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:g}=this.options;return"top"===g||"bottom"===g||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let g,t;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),g=0,t=e.length;g<t;g++)lb(e[g].label)&&(e.splice(g,1),t--,g--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const g=this.options.ticks.sampleSize;let t=this.ticks;g<t.length&&(t=Rp(t,g)),this._labelSizes=e=this._computeLabelSizes(t,t.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,g,t){const{ctx:n,_longestTextCache:l}=this,I=[],o=[],a=Math.floor(g/vp(g,t));let C,i,r,s,c,d,A,u,m,b,Z,h=0,p=0;for(C=0;C<g;C+=a){if(s=e[C].label,c=this._resolveTickFontOptions(C),n.font=d=c.string,A=l[d]=l[d]||{data:{},gc:[]},u=c.lineHeight,m=b=0,lb(s)||Ib(s)){if(Ib(s))for(i=0,r=s.length;i<r;++i)Z=s[i],lb(Z)||Ib(Z)||(m=hZ(n,A.data,A.gc,m,Z),b+=u)}else m=hZ(n,A.data,A.gc,m,s),b=u;I.push(m),o.push(b),h=Math.max(m,h),p=Math.max(b,p)}!function(e,g){cb(e,(e=>{const t=e.gc,n=t.length/2;let l;if(n>g){for(l=0;l<n;++l)delete e.data[t[l]];t.splice(0,n)}}))}(l,g);const G=I.indexOf(h),y=o.indexOf(p),B=e=>({width:I[e]||0,height:o[e]||0});return{first:B(0),last:B(g-1),widest:B(G),highest:B(y),widths:I,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,g){return NaN}getValueForPixel(e){}getPixelForTick(e){const g=this.ticks;return e<0||e>g.length-1?null:this.getPixelForValue(g[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const g=this._startPixel+e*this._length;return Lb(this._alignToPixels?pZ(this.chart,g,0):g,-32768,32767)}getDecimalForPixel(e){const g=(e-this._startPixel)/this._length;return this._reversePixels?1-g:g}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:g}=this;return e<0&&g<0?g:e>0&&g>0?e:0}getContext(e){const g=this.ticks||[];if(e>=0&&e<g.length){const t=g[e];return t.$context||(t.$context=function(e,g,t){return MZ(e,{tick:t,index:g,type:"tick"})}(this.getContext(),e,t))}return this.$context||(this.$context=MZ(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,g=Nb(this.labelRotation),t=Math.abs(Math.cos(g)),n=Math.abs(Math.sin(g)),l=this._getLabelSizes(),I=e.autoSkipPadding||0,o=l?l.widest.width+I:0,a=l?l.highest.height+I:0;return this.isHorizontal()?a*t>o*n?o/t:a/n:a*n<o*t?a/t:o/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const g=this.axis,t=this.chart,n=this.options,{grid:l,position:I,border:o}=n,a=l.offset,C=this.isHorizontal(),i=this.ticks.length+(a?1:0),r=Xp(l),s=[],c=o.setContext(this.getContext()),d=c.display?c.width:0,A=d/2,u=function(e){return pZ(t,e,d)};let m,b,Z,h,p,G,y,B,S,W,V,f;if("top"===I)m=u(this.bottom),G=this.bottom-r,B=m-A,W=u(e.top)+A,f=e.bottom;else if("bottom"===I)m=u(this.top),W=e.top,f=u(e.bottom)-A,G=m+A,B=this.top+r;else if("left"===I)m=u(this.right),p=this.right-r,y=m-A,S=u(e.left)+A,V=e.right;else if("right"===I)m=u(this.left),S=e.left,V=u(e.right)-A,p=m+A,y=this.left+r;else if("x"===g){if("center"===I)m=u((e.top+e.bottom)/2+.5);else if(ob(I)){const e=Object.keys(I)[0],g=I[e];m=u(this.chart.scales[e].getPixelForValue(g))}W=e.top,f=e.bottom,G=m+A,B=G+r}else if("y"===g){if("center"===I)m=u((e.left+e.right)/2);else if(ob(I)){const e=Object.keys(I)[0],g=I[e];m=u(this.chart.scales[e].getPixelForValue(g))}p=m-A,y=p-r,S=e.left,V=e.right}const v=ib(n.ticks.maxTicksLimit,i),R=Math.max(1,Math.ceil(i/v));for(b=0;b<i;b+=R){const e=this.getContext(b),g=l.setContext(e),n=o.setContext(e),I=g.lineWidth,i=g.color,r=n.dash||[],c=n.dashOffset,d=g.tickWidth,A=g.tickColor,u=g.tickBorderDash||[],m=g.tickBorderDashOffset;Z=kp(this,b,a),void 0!==Z&&(h=pZ(t,Z,I),C?p=y=S=V=h:G=B=W=f=h,s.push({tx1:p,ty1:G,tx2:y,ty2:B,x1:S,y1:W,x2:V,y2:f,width:I,color:i,borderDash:r,borderDashOffset:c,tickWidth:d,tickColor:A,tickBorderDash:u,tickBorderDashOffset:m}))}return this._ticksLength=i,this._borderValue=m,s}_computeLabelItems(e){const g=this.axis,t=this.options,{position:n,ticks:l}=t,I=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:C,padding:i,mirror:r}=l,s=Xp(t.grid),c=s+i,d=r?-i:c,A=-Nb(this.labelRotation),u=[];let m,b,Z,h,p,G,y,B,S,W,V,f,v="middle";if("top"===n)G=this.bottom-d,y=this._getXAxisLabelAlignment();else if("bottom"===n)G=this.top+d,y=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(s);y=e.textAlign,p=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(s);y=e.textAlign,p=e.x}else if("x"===g){if("center"===n)G=(e.top+e.bottom)/2+c;else if(ob(n)){const e=Object.keys(n)[0],g=n[e];G=this.chart.scales[e].getPixelForValue(g)+c}y=this._getXAxisLabelAlignment()}else if("y"===g){if("center"===n)p=(e.left+e.right)/2-c;else if(ob(n)){const e=Object.keys(n)[0],g=n[e];p=this.chart.scales[e].getPixelForValue(g)}y=this._getYAxisLabelAlignment(s).textAlign}"y"===g&&("start"===a?v="top":"end"===a&&(v="bottom"));const R=this._getLabelSizes();for(m=0,b=o.length;m<b;++m){Z=o[m],h=Z.label;const e=l.setContext(this.getContext(m));B=this.getPixelForTick(m)+l.labelOffset,S=this._resolveTickFontOptions(m),W=S.lineHeight,V=Ib(h)?h.length:1;const g=V/2,t=e.color,a=e.textStrokeColor,i=e.textStrokeWidth;let s,c=y;if(I?(p=B,"inner"===y&&(c=m===b-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),f="top"===n?"near"===C||0!==A?-V*W+W/2:"center"===C?-R.highest.height/2-g*W+W:-R.highest.height+W/2:"near"===C||0!==A?W/2:"center"===C?R.highest.height/2-g*W:R.highest.height-V*W,r&&(f*=-1),0===A||e.showLabelBackdrop||(p+=W/2*Math.sin(A))):(G=B,f=(1-V)*W/2),e.showLabelBackdrop){const g=NZ(e.backdropPadding),t=R.heights[m],n=R.widths[m];let l=f-g.top,I=0-g.left;switch(v){case"middle":l-=t/2;break;case"bottom":l-=t}switch(y){case"center":I-=n/2;break;case"right":I-=n}s={left:I,top:l,width:n+g.width,height:t+g.height,color:e.backdropColor}}u.push({label:h,font:S,textOffset:f,options:{rotation:A,color:t,strokeColor:a,strokeWidth:i,textAlign:c,textBaseline:v,translation:[p,G],backdrop:s}})}return u}_getXAxisLabelAlignment(){const{position:e,ticks:g}=this.options;if(-Nb(this.labelRotation))return"top"===e?"left":"right";let t="center";return"start"===g.align?t="left":"end"===g.align?t="right":"inner"===g.align&&(t="inner"),t}_getYAxisLabelAlignment(e){const{position:g,ticks:{crossAlign:t,mirror:n,padding:l}}=this.options,I=e+l,o=this._getLabelSizes().widest.width;let a,C;return"left"===g?n?(C=this.right+l,"near"===t?a="left":"center"===t?(a="center",C+=o/2):(a="right",C+=o)):(C=this.right-I,"near"===t?a="right":"center"===t?(a="center",C-=o/2):(a="left",C=this.left)):"right"===g?n?(C=this.left+l,"near"===t?a="right":"center"===t?(a="center",C-=o/2):(a="left",C-=o)):(C=this.left+I,"near"===t?a="left":"center"===t?(a="center",C+=o/2):(a="right",C=this.right)):a="right",{textAlign:a,x:C}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,g=this.options.position;return"left"===g||"right"===g?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===g||"bottom"===g?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:g},left:t,top:n,width:l,height:I}=this;g&&(e.save(),e.fillStyle=g,e.fillRect(t,n,l,I),e.restore())}getLineWidthForValue(e){const g=this.options.grid;if(!this._isVisible()||!g.display)return 0;const t=this.ticks.findIndex((g=>g.value===e));return t>=0?g.setContext(this.getContext(t)).lineWidth:0}drawGrid(e){const g=this.options.grid,t=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,I;const o=(e,g,n)=>{n.width&&n.color&&(t.save(),t.lineWidth=n.width,t.strokeStyle=n.color,t.setLineDash(n.borderDash||[]),t.lineDashOffset=n.borderDashOffset,t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(g.x,g.y),t.stroke(),t.restore())};if(g.display)for(l=0,I=n.length;l<I;++l){const e=n[l];g.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),g.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:g,options:{border:t,grid:n}}=this,l=t.setContext(this.getContext()),I=t.display?l.width:0;if(!I)return;const o=n.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let C,i,r,s;this.isHorizontal()?(C=pZ(e,this.left,I)-I/2,i=pZ(e,this.right,o)+o/2,r=s=a):(r=pZ(e,this.top,I)-I/2,s=pZ(e,this.bottom,o)+o/2,C=i=a),g.save(),g.lineWidth=l.width,g.strokeStyle=l.color,g.beginPath(),g.moveTo(C,r),g.lineTo(i,s),g.stroke(),g.restore()}drawLabels(e){if(!this.options.ticks.display)return;const g=this.ctx,t=this._computeLabelArea();t&&WZ(g,t);const n=this.getLabelItems(e);for(const e of n){const t=e.options,n=e.font;RZ(g,e.label,0,e.textOffset,n,t)}t&&VZ(g)}drawTitle(){const{ctx:e,options:{position:g,title:t,reverse:n}}=this;if(!t.display)return;const l=KZ(t.font),I=NZ(t.padding),o=t.align;let a=l.lineHeight/2;"bottom"===g||"center"===g||ob(g)?(a+=I.bottom,Ib(t.text)&&(a+=l.lineHeight*(t.text.length-1))):a+=I.top;const{titleX:C,titleY:i,maxWidth:r,rotation:s}=function(e,g,t,n){const{top:l,left:I,bottom:o,right:a,chart:C}=e,{chartArea:i,scales:r}=C;let s,c,d,A=0;const u=o-l,m=a-I;if(e.isHorizontal()){if(c=$b(n,I,a),ob(t)){const e=Object.keys(t)[0],n=t[e];d=r[e].getPixelForValue(n)+u-g}else d="center"===t?(i.bottom+i.top)/2+u-g:fp(e,t,g);s=a-I}else{if(ob(t)){const e=Object.keys(t)[0],n=t[e];c=r[e].getPixelForValue(n)-m+g}else c="center"===t?(i.left+i.right)/2-m+g:fp(e,t,g);d=$b(n,o,l),A="left"===t?-kb:kb}return{titleX:c,titleY:d,maxWidth:s,rotation:A}}(this,a,g,o);RZ(e,t.text,0,0,l,{color:t.color,maxWidth:r,rotation:s,textAlign:Yp(o,g,n),textBaseline:"middle",translation:[C,i]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,g=e.ticks&&e.ticks.z||0,t=ib(e.grid&&e.grid.z,-1),n=ib(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Hp.prototype.draw?[{z:t,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:g,draw:e=>{this.drawLabels(e)}}]:[{z:g,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const g=this.chart.getSortedVisibleDatasetMetas(),t=this.axis+"AxisID",n=[];let l,I;for(l=0,I=g.length;l<I;++l){const I=g[l];I[t]!==this.id||e&&I.type!==e||n.push(I)}return n}_resolveTickFontOptions(e){return KZ(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class wp{constructor(e,g,t){this.type=e,this.scope=g,this.override=t,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const g=Object.getPrototypeOf(e);let t;(function(e){return"id"in e&&"defaults"in e})(g)&&(t=this.register(g));const n=this.items,l=e.id,I=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in n||(n[l]=e,function(e,g,t){const n=bb(Object.create(null),[t?ZZ.get(t):{},ZZ.get(g),e.defaults]);ZZ.set(g,n),e.defaultRoutes&&function(e,g){Object.keys(g).forEach((t=>{const n=t.split("."),l=n.pop(),I=[e].concat(n).join("."),o=g[t].split("."),a=o.pop(),C=o.join(".");ZZ.route(I,l,C,a)}))}(g,e.defaultRoutes),e.descriptors&&ZZ.describe(g,e.descriptors)}(e,I,t),this.override&&ZZ.override(e.id,e.overrides)),I}get(e){return this.items[e]}unregister(e){const g=this.items,t=e.id,n=this.scope;t in g&&delete g[t],n&&t in ZZ[n]&&(delete ZZ[n][t],this.override&&delete dZ[t])}}class xp{constructor(){this.controllers=new wp(Yh,"datasets",!0),this.elements=new wp(Wp,"elements"),this.plugins=new wp(Object,"plugins"),this.scales=new wp(Hp,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,g,t){[...g].forEach((g=>{const n=t||this._getRegistryForType(g);t||n.isForType(g)||n===this.plugins&&g.id?this._exec(e,n,g):cb(g,(g=>{const n=t||this._getRegistryForType(g);this._exec(e,n,g)}))}))}_exec(e,g,t){const n=yb(e);sb(t["before"+n],[],t),g[e](t),sb(t["after"+n],[],t)}_getRegistryForType(e){for(let g=0;g<this._typedRegistries.length;g++){const t=this._typedRegistries[g];if(t.isForType(e))return t}return this.plugins}_get(e,g,t){const n=g.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+t+".");return n}}var Fp=new xp;class Np{constructor(){this._init=[]}notify(e,g,t,n){"beforeInit"===g&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const l=n?this._descriptors(e).filter(n):this._descriptors(e),I=this._notify(l,e,g,t);return"afterDestroy"===g&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall")),I}_notify(e,g,t,n){n=n||{};for(const l of e){const e=l.plugin;if(!1===sb(e[t],[g,n,l.options],e)&&n.cancelable)return!1}return!0}invalidate(){lb(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const g=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),g}_createDescriptors(e,g){const t=e&&e.config,n=ib(t.options&&t.options.plugins,{}),l=function(e){const g={},t=[],n=Object.keys(Fp.plugins.items);for(let e=0;e<n.length;e++)t.push(Fp.getPlugin(n[e]));const l=e.plugins||[];for(let e=0;e<l.length;e++){const n=l[e];-1===t.indexOf(n)&&(t.push(n),g[n.id]=!0)}return{plugins:t,localIds:g}}(t);return!1!==n||g?function(e,{plugins:g,localIds:t},n,l){const I=[],o=e.getContext();for(const a of g){const g=a.id,C=Kp(n[g],l);null!==C&&I.push({plugin:a,options:zp(e.config,{plugin:a,local:t[g]},C,o)})}return I}(e,l,n,g):[]}_notifyStateChanges(e){const g=this._oldCache||[],t=this._cache,n=(e,g)=>e.filter((e=>!g.some((g=>e.plugin.id===g.plugin.id))));this._notify(n(g,t),e,"stop"),this._notify(n(t,g),e,"start")}}function Kp(e,g){return g||!1!==e?!0===e?{}:e:null}function zp(e,{plugin:g,local:t},n,l){const I=e.pluginScopeKeys(g),o=e.getOptionScopes(n,I);return t&&g.defaults&&o.push(g.defaults),e.createResolver(o,l,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Mp(e,g){const t=ZZ.datasets[e]||{};return((g.datasets||{})[e]||{}).indexAxis||g.indexAxis||t.indexAxis||"x"}function Ep(e){if("x"===e||"y"===e||"r"===e)return e}function Lp(e,...g){if(Ep(e))return e;for(const n of g){const g=n.axis||("top"===(t=n.position)||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0)||e.length>1&&Ep(e[0].toLowerCase());if(g)return g}var t;throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Up(e,g,t){if(t[g+"AxisID"]===e)return{axis:g}}function Qp(e){const g=e.options||(e.options={});g.plugins=ib(g.plugins,{}),g.scales=function(e,g){const t=dZ[e.type]||{scales:{}},n=g.scales||{},l=Mp(e.type,g),I=Object.create(null);return Object.keys(n).forEach((g=>{const o=n[g];if(!ob(o))return console.error(`Invalid scale configuration for scale: ${g}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${g}`);const a=Lp(g,o,function(e,g){if(g.data&&g.data.datasets){const t=g.data.datasets.filter((g=>g.xAxisID===e||g.yAxisID===e));if(t.length)return Up(e,"x",t[0])||Up(e,"y",t[0])}return{}}(g,e),ZZ.scales[o.type]),C=function(e,g){return e===g?"_index_":"_value_"}(a,l),i=t.scales||{};I[g]=Zb(Object.create(null),[{axis:a},o,i[a],i[C]])})),e.data.datasets.forEach((t=>{const l=t.type||e.type,o=t.indexAxis||Mp(l,g),a=(dZ[l]||{}).scales||{};Object.keys(a).forEach((e=>{const g=function(e,g){let t=e;return"_index_"===e?t=g:"_value_"===e&&(t="x"===g?"y":"x"),t}(e,o),l=t[g+"AxisID"]||g;I[l]=I[l]||Object.create(null),Zb(I[l],[{axis:g},n[l],a[e]])}))})),Object.keys(I).forEach((e=>{const g=I[e];Zb(g,[ZZ.scales[g.type],ZZ.scale])})),I}(e,g)}function Tp(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Dp=new Map,jp=new Set;function Pp(e,g){let t=Dp.get(e);return t||(t=g(),Dp.set(e,t),jp.add(t)),t}const Op=(e,g,t)=>{const n=Gb(g,t);void 0!==n&&e.add(n)};class qp{constructor(e){this._config=function(e){return(e=e||{}).data=Tp(e.data),Qp(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Tp(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Qp(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Pp(e,(()=>[[`datasets.${e}`,""]]))}datasetAnimationScopeKeys(e,g){return Pp(`${e}.transition.${g}`,(()=>[[`datasets.${e}.transitions.${g}`,`transitions.${g}`],[`datasets.${e}`,""]]))}datasetElementScopeKeys(e,g){return Pp(`${e}-${g}`,(()=>[[`datasets.${e}.elements.${g}`,`datasets.${e}`,`elements.${g}`,""]]))}pluginScopeKeys(e){const g=e.id;return Pp(`${this.type}-plugin-${g}`,(()=>[[`plugins.${g}`,...e.additionalOptionScopes||[]]]))}_cachedScopes(e,g){const t=this._scopeCache;let n=t.get(e);return n&&!g||(n=new Map,t.set(e,n)),n}getOptionScopes(e,g,t){const{options:n,type:l}=this,I=this._cachedScopes(e,t),o=I.get(g);if(o)return o;const a=new Set;g.forEach((g=>{e&&(a.add(e),g.forEach((g=>Op(a,e,g)))),g.forEach((e=>Op(a,n,e))),g.forEach((e=>Op(a,dZ[l]||{},e))),g.forEach((e=>Op(a,ZZ,e))),g.forEach((e=>Op(a,AZ,e)))}));const C=Array.from(a);return 0===C.length&&C.push(Object.create(null)),jp.has(g)&&I.set(g,C),C}chartOptionScopes(){const{options:e,type:g}=this;return[e,dZ[g]||{},ZZ.datasets[g]||{},{type:g},ZZ,AZ]}resolveNamedOptions(e,g,t,n=[""]){const l={$shared:!0},{resolver:I,subPrefixes:o}=_p(this._resolverCache,e,n);let a=I;(function(e,g){const{isScriptable:t,isIndexable:n}=UZ(e);for(const l of g){const g=t(l),I=n(l),o=(I||g)&&e[l];if(g&&(Sb(o)||$p(o))||I&&Ib(o))return!0}return!1})(I,g)&&(l.$shared=!1,a=LZ(I,t=Sb(t)?t():t,this.createResolver(e,t,o)));for(const e of g)l[e]=a[e];return l}createResolver(e,g,t=[""],n){const{resolver:l}=_p(this._resolverCache,e,t);return ob(g)?LZ(l,g,void 0,n):l}}function _p(e,g,t){let n=e.get(g);n||(n=new Map,e.set(g,n));const l=t.join();let I=n.get(l);return I||(I={resolver:EZ(g,t),subPrefixes:t.filter((e=>!e.toLowerCase().includes("hover")))},n.set(l,I)),I}const $p=e=>ob(e)&&Object.getOwnPropertyNames(e).reduce(((g,t)=>g||Sb(e[t])),!1),eG=["top","bottom","left","right","chartArea"];function gG(e,g){return"top"===e||"bottom"===e||-1===eG.indexOf(e)&&"x"===g}function tG(e,g){return function(t,n){return t[e]===n[e]?t[g]-n[g]:t[e]-n[e]}}function nG(e){const g=e.chart,t=g.options.animation;g.notifyPlugins("afterRender"),sb(t&&t.onComplete,[e],g)}function lG(e){const g=e.chart,t=g.options.animation;sb(t&&t.onProgress,[e],g)}function IG(e){return gh()&&"string"==typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const oG={},aG=e=>{const g=IG(e);return Object.values(oG).filter((e=>e.canvas===g)).pop()};function CG(e,g,t){const n=Object.keys(e);for(const l of n){const n=+l;if(n>=g){const I=e[l];delete e[l],(t>0||n>g)&&(e[n+t]=I)}}}function iG(e,g,t){return e.options.clip?e[t]:g[t]}class rG{static defaults=ZZ;static instances=oG;static overrides=dZ;static registry=Fp;static version="4.4.0";static getChart=aG;static register(...e){Fp.add(...e),sG()}static unregister(...e){Fp.remove(...e),sG()}constructor(e,g){const t=this.config=new qp(g),n=IG(e),l=aG(n);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const I=t.createResolver(t.chartOptionScopes(),this.getContext());this.platform=new(t.platform||function(e){return!gh()||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ip:Sp}(n)),this.platform.updateConfig(t);const o=this.platform.acquireContext(n,I.aspectRatio),a=o&&o.canvas,C=a&&a.height,i=a&&a.width;this.id=nb(),this.ctx=o,this.canvas=a,this.width=i,this.height=C,this._options=I,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Np,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,g){let t;return function(...n){return g?(clearTimeout(t),t=setTimeout(e,g,n)):e.apply(this,n),g}}((e=>this.update(e)),I.resizeDelay||0),this._dataChanges=[],oG[this.id]=this,o&&a?(bh.listen(this,"complete",nG),bh.listen(this,"progress",lG),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:g},width:t,height:n,_aspectRatio:l}=this;return lb(e)?g&&l?l:n?t/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Fp}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return GZ(this.canvas,this.ctx),this}stop(){return bh.stop(this),this}resize(e,g){bh.running(this)?this._resizeBeforeDraw={width:e,height:g}:this._resize(e,g)}_resize(e,g){const t=this.options,n=this.canvas,l=t.maintainAspectRatio&&this.aspectRatio,I=this.platform.getMaximumSize(n,e,g,l),o=t.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=I.width,this.height=I.height,this._aspectRatio=this.aspectRatio,rh(this,o,!0)&&(this.notifyPlugins("resize",{size:I}),sb(t.onResize,[this,I],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){cb(this.options.scales||{},((e,g)=>{e.id=g}))}buildOrUpdateScales(){const e=this.options,g=e.scales,t=this.scales,n=Object.keys(t).reduce(((e,g)=>(e[g]=!1,e)),{});let l=[];g&&(l=l.concat(Object.keys(g).map((e=>{const t=g[e],n=Lp(e,t),l="r"===n,I="x"===n;return{options:t,dposition:l?"chartArea":I?"bottom":"left",dtype:l?"radialLinear":I?"category":"linear"}})))),cb(l,(g=>{const l=g.options,I=l.id,o=Lp(I,l),a=ib(l.type,g.dtype);void 0!==l.position&&gG(l.position,o)===gG(g.dposition)||(l.position=g.dposition),n[I]=!0;let C=null;I in t&&t[I].type===a?C=t[I]:(C=new(Fp.getScale(a))({id:I,type:a,ctx:this.ctx,chart:this}),t[C.id]=C),C.init(l,e)})),cb(n,((e,g)=>{e||delete t[g]})),cb(t,(e=>{ap.configure(this,e,e.options),ap.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,g=this.data.datasets.length,t=e.length;if(e.sort(((e,g)=>e.index-g.index)),t>g){for(let e=g;e<t;++e)this._destroyDatasetMeta(e);e.splice(g,t-g)}this._sortedMetasets=e.slice(0).sort(tG("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:g}}=this;e.length>g.length&&delete this._stacks,e.forEach(((e,t)=>{0===g.filter((g=>g===e._dataset)).length&&this._destroyDatasetMeta(t)}))}buildOrUpdateControllers(){const e=[],g=this.data.datasets;let t,n;for(this._removeUnreferencedMetasets(),t=0,n=g.length;t<n;t++){const n=g[t];let l=this.getDatasetMeta(t);const I=n.type||this.config.type;if(l.type&&l.type!==I&&(this._destroyDatasetMeta(t),l=this.getDatasetMeta(t)),l.type=I,l.indexAxis=n.indexAxis||Mp(I,this.options),l.order=n.order||0,l.index=t,l.label=""+n.label,l.visible=this.isDatasetVisible(t),l.controller)l.controller.updateIndex(t),l.controller.linkScales();else{const g=Fp.getController(I),{datasetElementType:n,dataElementType:o}=ZZ.datasets[I];Object.assign(g,{dataElementType:Fp.getElement(o),datasetElementType:n&&Fp.getElement(n)}),l.controller=new g(this,t),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){cb(this.data.datasets,((e,g)=>{this.getDatasetMeta(g).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const g=this.config;g.update();const t=this._options=g.createResolver(g.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!t.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let I=0;for(let e=0,g=this.data.datasets.length;e<g;e++){const{controller:g}=this.getDatasetMeta(e),t=!n&&-1===l.indexOf(g);g.buildOrUpdateElements(t),I=Math.max(+g.getMaxOverflow(),I)}I=this._minPadding=t.layout.autoPadding?I:0,this._updateLayout(I),n||cb(l,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tG("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){cb(this.scales,(e=>{ap.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,g=new Set(Object.keys(this._listeners)),t=new Set(e.events);Wb(g,t)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,g=this._getUniformDataChanges()||[];for(const{method:t,start:n,count:l}of g)CG(e,n,"_removeElements"===t?-l:l)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const g=this.data.datasets.length,t=g=>new Set(e.filter((e=>e[0]===g)).map(((e,g)=>g+","+e.splice(1).join(",")))),n=t(0);for(let e=1;e<g;e++)if(!Wb(n,t(e)))return;return Array.from(n).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;ap.update(this,this.width,this.height,e);const g=this.chartArea,t=g.width<=0||g.height<=0;this._layers=[],cb(this.boxes,(e=>{t&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,g)=>{e._idx=g})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,g=this.data.datasets.length;e<g;++e)this.getDatasetMeta(e).controller.configure();for(let g=0,t=this.data.datasets.length;g<t;++g)this._updateDataset(g,Sb(e)?e({datasetIndex:g}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,g){const t=this.getDatasetMeta(e),n={meta:t,index:e,mode:g,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(t.controller._update(g),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(bh.has(this)?this.attached&&!bh.running(this)&&bh.start(this):(this.draw(),nG({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:g}=this._resizeBeforeDraw;this._resize(e,g),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const g=this._layers;for(e=0;e<g.length&&g[e].z<=0;++e)g[e].draw(this.chartArea);for(this._drawDatasets();e<g.length;++e)g[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const g=this._sortedMetasets,t=[];let n,l;for(n=0,l=g.length;n<l;++n){const l=g[n];e&&!l.visible||t.push(l)}return t}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let g=e.length-1;g>=0;--g)this._drawDataset(e[g]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const g=this.ctx,t=e._clip,n=!t.disabled,l=function(e,g){const{xScale:t,yScale:n}=e;return t&&n?{left:iG(t,g,"left"),right:iG(t,g,"right"),top:iG(n,g,"top"),bottom:iG(n,g,"bottom")}:g}(e,this.chartArea),I={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",I)&&(n&&WZ(g,{left:!1===t.left?0:l.left-t.left,right:!1===t.right?this.width:l.right+t.right,top:!1===t.top?0:l.top-t.top,bottom:!1===t.bottom?this.height:l.bottom+t.bottom}),e.controller.draw(),n&&VZ(g),I.cancelable=!1,this.notifyPlugins("afterDatasetDraw",I))}isPointInArea(e){return SZ(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,g,t,n){const l=Ph.modes[g];return"function"==typeof l?l(this,e,t,n):[]}getDatasetMeta(e){const g=this.data.datasets[e],t=this._metasets;let n=t.filter((e=>e&&e._dataset===g)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:g&&g.order||0,index:e,_dataset:g,_parsed:[],_sorted:!1},t.push(n)),n}getContext(){return this.$context||(this.$context=MZ(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const g=this.data.datasets[e];if(!g)return!1;const t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!g.hidden}setDatasetVisibility(e,g){this.getDatasetMeta(e).hidden=!g}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,g,t){const n=t?"show":"hide",l=this.getDatasetMeta(e),I=l.controller._resolveAnimations(void 0,n);Bb(g)?(l.data[g].hidden=!t,this.update()):(this.setDatasetVisibility(e,t),I.update(l,{visible:t}),this.update((g=>g.datasetIndex===e?n:void 0)))}hide(e,g){this._updateVisibility(e,g,!1)}show(e,g){this._updateVisibility(e,g,!0)}_destroyDatasetMeta(e){const g=this._metasets[e];g&&g.controller&&g.controller._destroy(),delete this._metasets[e]}_stop(){let e,g;for(this.stop(),bh.remove(this),e=0,g=this.data.datasets.length;e<g;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:g}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),GZ(e,g),this.platform.releaseContext(g),this.canvas=null,this.ctx=null),delete oG[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,g=this.platform,t=(t,n)=>{g.addEventListener(this,t,n),e[t]=n},n=(e,g,t)=>{e.offsetX=g,e.offsetY=t,this._eventHandler(e)};cb(this.options.events,(e=>t(e,n)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,g=this.platform,t=(t,n)=>{g.addEventListener(this,t,n),e[t]=n},n=(t,n)=>{e[t]&&(g.removeEventListener(this,t,n),delete e[t])},l=(e,g)=>{this.canvas&&this.resize(e,g)};let I;const o=()=>{n("attach",o),this.attached=!0,this.resize(),t("resize",l),t("detach",I)};I=()=>{this.attached=!1,n("resize",l),this._stop(),this._resize(0,0),t("attach",o)},g.isAttached(this.canvas)?o():I()}unbindEvents(){cb(this._listeners,((e,g)=>{this.platform.removeEventListener(this,g,e)})),this._listeners={},cb(this._responsiveListeners,((e,g)=>{this.platform.removeEventListener(this,g,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,g,t){const n=t?"set":"remove";let l,I,o,a;for("dataset"===g&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+n+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){I=e[o];const g=I&&this.getDatasetMeta(I.datasetIndex).controller;g&&g[n+"HoverStyle"](I.element,I.datasetIndex,I.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const g=this._active||[],t=e.map((({datasetIndex:e,index:g})=>{const t=this.getDatasetMeta(e);if(!t)throw new Error("No dataset found at index "+e);return{datasetIndex:e,element:t.data[g],index:g}}));!db(t,g)&&(this._active=t,this._lastEvent=null,this._updateHoverStyles(t,g))}notifyPlugins(e,g,t){return this._plugins.notify(this,e,g,t)}isPluginEnabled(e){return 1===this._plugins._cache.filter((g=>g.plugin.id===e)).length}_updateHoverStyles(e,g,t){const n=this.options.hover,l=(e,g)=>e.filter((e=>!g.some((g=>e.datasetIndex===g.datasetIndex&&e.index===g.index)))),I=l(g,e),o=t?e:l(e,g);I.length&&this.updateHoverStyle(I,n.mode,!1),o.length&&n.mode&&this.updateHoverStyle(o,n.mode,!0)}_eventHandler(e,g){const t={event:e,replay:g,cancelable:!0,inChartArea:this.isPointInArea(e)},n=g=>(g.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",t,n))return;const l=this._handleEvent(e,g,t.inChartArea);return t.cancelable=!1,this.notifyPlugins("afterEvent",t,n),(l||t.changed)&&this.render(),this}_handleEvent(e,g,t){const{_active:n=[],options:l}=this,I=g,o=this._getActiveElements(e,n,t,I),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),C=function(e,g,t,n){return t&&"mouseout"!==e.type?n?g:e:null}(e,this._lastEvent,t,a);t&&(this._lastEvent=null,sb(l.onHover,[e,o,this],this),a&&sb(l.onClick,[e,o,this],this));const i=!db(o,n);return(i||g)&&(this._active=o,this._updateHoverStyles(o,n,g)),this._lastEvent=C,i}_getActiveElements(e,g,t,n){if("mouseout"===e.type)return[];if(!t)return g;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,n)}}function sG(){return cb(rG.instances,(e=>e._plugins.invalidate()))}function cG(e,g,t,n){return{x:t+e*Math.cos(g),y:n+e*Math.sin(g)}}function dG(e,g,t,n,l,I){const{x:o,y:a,startAngle:C,pixelMargin:i,innerRadius:r}=g,s=Math.max(g.outerRadius+n+t-i,0),c=r>0?r+n+t+i:0;let d=0;const A=l-C;if(n){const e=((r>0?r-n:0)+(s>0?s-n:0))/2;d=(A-(0!==e?A*e/(e+n):A))/2}const u=(A-Math.max(.001,A*s-t/Vb)/s)/2,m=C+u+d,b=l-u-d,{outerStart:Z,outerEnd:h,innerStart:p,innerEnd:G}=function(e,g,t,n){const l=wZ(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),I=(t-g)/2,o=Math.min(I,n*g/2),a=e=>{const g=(t-Math.min(I,e))*n/2;return Lb(e,0,Math.min(I,g))};return{outerStart:a(l.outerStart),outerEnd:a(l.outerEnd),innerStart:Lb(l.innerStart,0,o),innerEnd:Lb(l.innerEnd,0,o)}}(g,c,s,b-m),y=s-Z,B=s-h,S=m+Z/y,W=b-h/B,V=c+p,f=c+G,v=m+p/V,R=b-G/f;if(e.beginPath(),I){const g=(S+W)/2;if(e.arc(o,a,s,S,g),e.arc(o,a,s,g,W),h>0){const g=cG(B,W,o,a);e.arc(g.x,g.y,h,W,b+kb)}const t=cG(f,b,o,a);if(e.lineTo(t.x,t.y),G>0){const g=cG(f,R,o,a);e.arc(g.x,g.y,G,b+kb,R+Math.PI)}const n=(b-G/c+(m+p/c))/2;if(e.arc(o,a,c,b-G/c,n,!0),e.arc(o,a,c,n,m+p/c,!0),p>0){const g=cG(V,v,o,a);e.arc(g.x,g.y,p,v+Math.PI,m-kb)}const l=cG(y,m,o,a);if(e.lineTo(l.x,l.y),Z>0){const g=cG(y,S,o,a);e.arc(g.x,g.y,Z,m-kb,S)}}else{e.moveTo(o,a);const g=Math.cos(S)*s+o,t=Math.sin(S)*s+a;e.lineTo(g,t);const n=Math.cos(W)*s+o,l=Math.sin(W)*s+a;e.lineTo(n,l)}e.closePath()}function AG(e,g){const{x:t,y:n,base:l,width:I,height:o}=e.getProps(["x","y","base","width","height"],g);let a,C,i,r,s;return e.horizontal?(s=o/2,a=Math.min(t,l),C=Math.max(t,l),i=n-s,r=n+s):(s=I/2,a=t-s,C=t+s,i=Math.min(n,l),r=Math.max(n,l)),{left:a,top:i,right:C,bottom:r}}function uG(e,g,t,n){return e?0:Lb(g,t,n)}function mG(e,g,t,n){const l=null===g,I=null===t,o=e&&!(l&&I)&&AG(e,n);return o&&(l||Ub(g,o.left,o.right))&&(I||Ub(t,o.top,o.bottom))}function bG(e,g){e.rect(g.x,g.y,g.w,g.h)}function ZG(e,g,t={}){const n=e.x!==t.x?-g:0,l=e.y!==t.y?-g:0,I=(e.x+e.w!==t.x+t.w?g:0)-n,o=(e.y+e.h!==t.y+t.h?g:0)-l;return{x:e.x+n,y:e.y+l,w:e.w+I,h:e.h+o,radius:e.radius}}const hG=(e,g)=>{let{boxHeight:t=g,boxWidth:n=g}=e;return e.usePointStyle&&(t=Math.min(t,g),n=e.pointStyleWidth||Math.min(n,g)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(g,t)}};class pG extends Wp{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,g,t){this.maxWidth=e,this.maxHeight=g,this._margins=t,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let g=sb(e.generateLabels,[this.chart],this)||[];e.filter&&(g=g.filter((g=>e.filter(g,this.chart.data)))),e.sort&&(g=g.sort(((g,t)=>e.sort(g,t,this.chart.data)))),this.options.reverse&&g.reverse(),this.legendItems=g}fit(){const{options:e,ctx:g}=this;if(!e.display)return void(this.width=this.height=0);const t=e.labels,n=KZ(t.font),l=n.size,I=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=hG(t,l);let C,i;g.font=n.string,this.isHorizontal()?(C=this.maxWidth,i=this._fitRows(I,l,o,a)+10):(i=this.maxHeight,C=this._fitCols(I,n,o,a)+10),this.width=Math.min(C,e.maxWidth||this.maxWidth),this.height=Math.min(i,e.maxHeight||this.maxHeight)}_fitRows(e,g,t,n){const{ctx:l,maxWidth:I,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],C=this.lineWidths=[0],i=n+o;let r=e;l.textAlign="left",l.textBaseline="middle";let s=-1,c=-i;return this.legendItems.forEach(((e,d)=>{const A=t+g/2+l.measureText(e.text).width;(0===d||C[C.length-1]+A+2*o>I)&&(r+=i,C[C.length-(d>0?0:1)]=0,c+=i,s++),a[d]={left:0,top:c,row:s,width:A,height:n},C[C.length-1]+=A+o})),r}_fitCols(e,g,t,n){const{ctx:l,maxHeight:I,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],C=this.columnSizes=[],i=I-e;let r=o,s=0,c=0,d=0,A=0;return this.legendItems.forEach(((e,I)=>{const{itemWidth:u,itemHeight:m}=function(e,g,t,n,l){const I=function(e,g,t,n){let l=e.text;return l&&"string"!=typeof l&&(l=l.reduce(((e,g)=>e.length>g.length?e:g))),g+t.size/2+n.measureText(l).width}(n,e,g,t),o=function(e,g,t){let n=e;return"string"!=typeof g.text&&(n=GG(g,t)),n}(l,n,g.lineHeight);return{itemWidth:I,itemHeight:o}}(t,g,l,e,n);I>0&&c+m+2*o>i&&(r+=s+o,C.push({width:s,height:c}),d+=s+o,A++,s=c=0),a[I]={left:d,top:c,col:A,width:u,height:m},s=Math.max(s,u),c+=m+o})),r+=s,C.push({width:s,height:c}),r}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:g,options:{align:t,labels:{padding:n},rtl:l}}=this,I=dh(l,this.left,this.width);if(this.isHorizontal()){let l=0,o=$b(t,this.left+n,this.right-this.lineWidths[l]);for(const a of g)l!==a.row&&(l=a.row,o=$b(t,this.left+n,this.right-this.lineWidths[l])),a.top+=this.top+e+n,a.left=I.leftForLtr(I.x(o),a.width),o+=a.width+n}else{let l=0,o=$b(t,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const a of g)a.col!==l&&(l=a.col,o=$b(t,this.top+e+n,this.bottom-this.columnSizes[l].height)),a.top=o,a.left+=this.left+n,a.left=I.leftForLtr(I.x(a.left),a.width),o+=a.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;WZ(e,this),this._draw(),VZ(e)}}_draw(){const{options:e,columnSizes:g,lineWidths:t,ctx:n}=this,{align:l,labels:I}=e,o=ZZ.color,a=dh(e.rtl,this.left,this.width),C=KZ(I.font),{padding:i}=I,r=C.size,s=r/2;let c;this.drawTitle(),n.textAlign=a.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=C.string;const{boxWidth:d,boxHeight:A,itemHeight:u}=hG(I,r),m=this.isHorizontal(),b=this._computeTitleHeight();c=m?{x:$b(l,this.left+i,this.right-t[0]),y:this.top+i+b,line:0}:{x:this.left+i,y:$b(l,this.top+b+i,this.bottom-g[0].height),line:0},Ah(this.ctx,e.textDirection);const Z=u+i;this.legendItems.forEach(((h,p)=>{n.strokeStyle=h.fontColor,n.fillStyle=h.fontColor;const G=n.measureText(h.text).width,y=a.textAlign(h.textAlign||(h.textAlign=I.textAlign)),B=d+s+G;let S=c.x,W=c.y;if(a.setWidth(this.width),m?p>0&&S+B+i>this.right&&(W=c.y+=Z,c.line++,S=c.x=$b(l,this.left+i,this.right-t[c.line])):p>0&&W+Z>this.bottom&&(S=c.x=S+g[c.line].width+i,c.line++,W=c.y=$b(l,this.top+b+i,this.bottom-g[c.line].height)),function(e,g,t){if(isNaN(d)||d<=0||isNaN(A)||A<0)return;n.save();const l=ib(t.lineWidth,1);if(n.fillStyle=ib(t.fillStyle,o),n.lineCap=ib(t.lineCap,"butt"),n.lineDashOffset=ib(t.lineDashOffset,0),n.lineJoin=ib(t.lineJoin,"miter"),n.lineWidth=l,n.strokeStyle=ib(t.strokeStyle,o),n.setLineDash(ib(t.lineDash,[])),I.usePointStyle){const o={radius:A*Math.SQRT2/2,pointStyle:t.pointStyle,rotation:t.rotation,borderWidth:l},C=a.xPlus(e,d/2);BZ(n,o,C,g+s,I.pointStyleWidth&&d)}else{const I=g+Math.max((r-A)/2,0),o=a.leftForLtr(e,d),C=FZ(t.borderRadius);n.beginPath(),Object.values(C).some((e=>0!==e))?kZ(n,{x:o,y:I,w:d,h:A,radius:C}):n.rect(o,I,d,A),n.fill(),0!==l&&n.stroke()}n.restore()}(a.x(S),W,h),S=((e,g,t,n)=>e===(n?"left":"right")?t:"center"===e?(g+t)/2:g)(y,S+d+s,m?S+B:this.right,e.rtl),function(e,g,t){RZ(n,t.text,e,g+u/2,C,{strikethrough:t.hidden,textAlign:a.textAlign(t.textAlign)})}(a.x(S),W,h),m)c.x+=B+i;else if("string"!=typeof h.text){const e=C.lineHeight;c.y+=GG(h,e)+i}else c.y+=Z})),uh(this.ctx,e.textDirection)}drawTitle(){const e=this.options,g=e.title,t=KZ(g.font),n=NZ(g.padding);if(!g.display)return;const l=dh(e.rtl,this.left,this.width),I=this.ctx,o=g.position,a=t.size/2,C=n.top+a;let i,r=this.left,s=this.width;if(this.isHorizontal())s=Math.max(...this.lineWidths),i=this.top+C,r=$b(e.align,r,this.right-s);else{const g=this.columnSizes.reduce(((e,g)=>Math.max(e,g.height)),0);i=C+$b(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const c=$b(o,r,r+s);I.textAlign=l.textAlign(_b(o)),I.textBaseline="middle",I.strokeStyle=g.color,I.fillStyle=g.color,I.font=t.string,RZ(I,g.text,c,i,t)}_computeTitleHeight(){const e=this.options.title,g=KZ(e.font),t=NZ(e.padding);return e.display?g.lineHeight+t.height:0}_getLegendItemAt(e,g){let t,n,l;if(Ub(e,this.left,this.right)&&Ub(g,this.top,this.bottom))for(l=this.legendHitBoxes,t=0;t<l.length;++t)if(n=l[t],Ub(e,n.left,n.left+n.width)&&Ub(g,n.top,n.top+n.height))return this.legendItems[t];return null}handleEvent(e){const g=this.options;if(!function(e,g){return!("mousemove"!==e&&"mouseout"!==e||!g.onHover&&!g.onLeave)||!(!g.onClick||"click"!==e&&"mouseup"!==e)}(e.type,g))return;const t=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const n=this._hoveredItem,l=((e,g)=>null!==e&&null!==g&&e.datasetIndex===g.datasetIndex&&e.index===g.index)(n,t);n&&!l&&sb(g.onLeave,[e,n,this],this),this._hoveredItem=t,t&&!l&&sb(g.onHover,[e,t,this],this)}else t&&sb(g.onClick,[e,t,this],this)}}function GG(e,g){return g*(e.text?e.text.length:0)}var yG={id:"legend",_element:pG,start(e,g,t){const n=e.legend=new pG({ctx:e.ctx,options:t,chart:e});ap.configure(e,n,t),ap.addBox(e,n)},stop(e){ap.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,g,t){const n=e.legend;ap.configure(e,n,t),n.options=t},afterUpdate(e){const g=e.legend;g.buildLabels(),g.adjustHitBoxes()},afterEvent(e,g){g.replay||e.legend.handleEvent(g.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,g,t){const n=g.datasetIndex,l=t.chart;l.isDatasetVisible(n)?(l.hide(n),g.hidden=!0):(l.show(n),g.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const g=e.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:l,color:I,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const C=e.controller.getStyle(t?0:void 0),i=NZ(C.borderWidth);return{text:g[e.index].label,fillStyle:C.backgroundColor,fontColor:I,hidden:!e.visible,lineCap:C.borderCapStyle,lineDash:C.borderDash,lineDashOffset:C.borderDashOffset,lineJoin:C.borderJoinStyle,lineWidth:(i.width+i.height)/4,strokeStyle:C.borderColor,pointStyle:n||C.pointStyle,rotation:C.rotation,textAlign:l||C.textAlign,borderRadius:o&&(a||C.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class BG extends Wp{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,g){const t=this.options;if(this.left=0,this.top=0,!t.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=g;const n=Ib(t.text)?t.text.length:1;this._padding=NZ(t.padding);const l=n*KZ(t.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:g,left:t,bottom:n,right:l,options:I}=this,o=I.align;let a,C,i,r=0;return this.isHorizontal()?(C=$b(o,t,l),i=g+e,a=l-t):("left"===I.position?(C=t+e,i=$b(o,n,g),r=-.5*Vb):(C=l-e,i=$b(o,g,n),r=.5*Vb),a=n-g),{titleX:C,titleY:i,maxWidth:a,rotation:r}}draw(){const e=this.ctx,g=this.options;if(!g.display)return;const t=KZ(g.font),n=t.lineHeight/2+this._padding.top,{titleX:l,titleY:I,maxWidth:o,rotation:a}=this._drawArgs(n);RZ(e,g.text,0,0,t,{color:g.color,maxWidth:o,rotation:a,textAlign:_b(g.align),textBaseline:"middle",translation:[l,I]})}}var SG={id:"title",_element:BG,start(e,g,t){!function(e,g){const t=new BG({ctx:e.ctx,options:g,chart:e});ap.configure(e,t,g),ap.addBox(e,t),e.titleBlock=t}(e,t)},stop(e){const g=e.titleBlock;ap.removeBox(e,g),delete e.titleBlock},beforeUpdate(e,g,t){const n=e.titleBlock;ap.configure(e,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const WG={average(e){if(!e.length)return!1;let g,t,n=0,l=0,I=0;for(g=0,t=e.length;g<t;++g){const t=e[g].element;if(t&&t.hasValue()){const e=t.tooltipPosition();n+=e.x,l+=e.y,++I}}return{x:n/I,y:l/I}},nearest(e,g){if(!e.length)return!1;let t,n,l,I=g.x,o=g.y,a=Number.POSITIVE_INFINITY;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=(C=g,i=n.getCenterPoint(),Math.sqrt(Math.pow(i.x-C.x,2)+Math.pow(i.y-C.y,2)));e<a&&(a=e,l=n)}}var C,i;if(l){const e=l.tooltipPosition();I=e.x,o=e.y}return{x:I,y:o}}};function VG(e,g){return g&&(Ib(g)?Array.prototype.push.apply(e,g):e.push(g)),e}function fG(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function vG(e,g){const{element:t,datasetIndex:n,index:l}=g,I=e.getDatasetMeta(n).controller,{label:o,value:a}=I.getLabelAndValue(l);return{chart:e,label:o,parsed:I.getParsed(l),raw:e.data.datasets[n].data[l],formattedValue:a,dataset:I.getDataset(),dataIndex:l,datasetIndex:n,element:t}}function RG(e,g){const t=e.chart.ctx,{body:n,footer:l,title:I}=e,{boxWidth:o,boxHeight:a}=g,C=KZ(g.bodyFont),i=KZ(g.titleFont),r=KZ(g.footerFont),s=I.length,c=l.length,d=n.length,A=NZ(g.padding);let u=A.height,m=0,b=n.reduce(((e,g)=>e+g.before.length+g.lines.length+g.after.length),0);b+=e.beforeBody.length+e.afterBody.length,s&&(u+=s*i.lineHeight+(s-1)*g.titleSpacing+g.titleMarginBottom),b&&(u+=d*(g.displayColors?Math.max(a,C.lineHeight):C.lineHeight)+(b-d)*C.lineHeight+(b-1)*g.bodySpacing),c&&(u+=g.footerMarginTop+c*r.lineHeight+(c-1)*g.footerSpacing);let Z=0;const h=function(e){m=Math.max(m,t.measureText(e).width+Z)};return t.save(),t.font=i.string,cb(e.title,h),t.font=C.string,cb(e.beforeBody.concat(e.afterBody),h),Z=g.displayColors?o+2+g.boxPadding:0,cb(n,(e=>{cb(e.before,h),cb(e.lines,h),cb(e.after,h)})),Z=0,t.font=r.string,cb(e.footer,h),t.restore(),m+=A.width,{width:m,height:u}}function kG(e,g,t,n){const{x:l,width:I}=t,{width:o,chartArea:{left:a,right:C}}=e;let i="center";return"center"===n?i=l<=(a+C)/2?"left":"right":l<=I/2?i="left":l>=o-I/2&&(i="right"),function(e,g,t,n){const{x:l,width:I}=n,o=t.caretSize+t.caretPadding;return"left"===e&&l+I+o>g.width||"right"===e&&l-I-o<0||void 0}(i,e,g,t)&&(i="center"),i}function XG(e,g,t){const n=t.yAlign||g.yAlign||function(e,g){const{y:t,height:n}=g;return t<n/2?"top":t>e.height-n/2?"bottom":"center"}(e,t);return{xAlign:t.xAlign||g.xAlign||kG(e,g,t,n),yAlign:n}}function JG(e,g,t,n){const{caretSize:l,caretPadding:I,cornerRadius:o}=e,{xAlign:a,yAlign:C}=t,i=l+I,{topLeft:r,topRight:s,bottomLeft:c,bottomRight:d}=FZ(o);let A=function(e,g){let{x:t,width:n}=e;return"right"===g?t-=n:"center"===g&&(t-=n/2),t}(g,a);const u=function(e,g,t){let{y:n,height:l}=e;return"top"===g?n+=t:n-="bottom"===g?l+t:l/2,n}(g,C,i);return"center"===C?"left"===a?A+=i:"right"===a&&(A-=i):"left"===a?A-=Math.max(r,c)+l:"right"===a&&(A+=Math.max(s,d)+l),{x:Lb(A,0,n.width-g.width),y:Lb(u,0,n.height-g.height)}}function YG(e,g,t){const n=NZ(t.padding);return"center"===g?e.x+e.width/2:"right"===g?e.x+e.width-n.right:e.x+n.left}function HG(e){return VG([],fG(e))}function wG(e,g){const t=g&&g.dataset&&g.dataset.tooltip&&g.dataset.tooltip.callbacks;return t?e.override(t):e}const xG={beforeTitle:tb,title(e){if(e.length>0){const g=e[0],t=g.chart.data.labels,n=t?t.length:0;if(this&&this.options&&"dataset"===this.options.mode)return g.dataset.label||"";if(g.label)return g.label;if(n>0&&g.dataIndex<n)return t[g.dataIndex]}return""},afterTitle:tb,beforeBody:tb,beforeLabel:tb,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let g=e.dataset.label||"";g&&(g+=": ");const t=e.formattedValue;return lb(t)||(g+=t),g},labelColor(e){const g=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:g.borderColor,backgroundColor:g.backgroundColor,borderWidth:g.borderWidth,borderDash:g.borderDash,borderDashOffset:g.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const g=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:g.pointStyle,rotation:g.rotation}},afterLabel:tb,afterBody:tb,beforeFooter:tb,footer:tb,afterFooter:tb};function FG(e,g,t,n){const l=e[g].call(t,n);return void 0===l?xG[g].call(t,n):l}class NG extends Wp{static positioners=WG;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const g=this.chart,t=this.options.setContext(this.getContext()),n=t.enabled&&g.options.animation&&t.animations,l=new Gh(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=(this,MZ(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(e,g){const{callbacks:t}=g,n=FG(t,"beforeTitle",this,e),l=FG(t,"title",this,e),I=FG(t,"afterTitle",this,e);let o=[];return o=VG(o,fG(n)),o=VG(o,fG(l)),o=VG(o,fG(I)),o}getBeforeBody(e,g){return HG(FG(g.callbacks,"beforeBody",this,e))}getBody(e,g){const{callbacks:t}=g,n=[];return cb(e,(e=>{const g={before:[],lines:[],after:[]},l=wG(t,e);VG(g.before,fG(FG(l,"beforeLabel",this,e))),VG(g.lines,FG(l,"label",this,e)),VG(g.after,fG(FG(l,"afterLabel",this,e))),n.push(g)})),n}getAfterBody(e,g){return HG(FG(g.callbacks,"afterBody",this,e))}getFooter(e,g){const{callbacks:t}=g,n=FG(t,"beforeFooter",this,e),l=FG(t,"footer",this,e),I=FG(t,"afterFooter",this,e);let o=[];return o=VG(o,fG(n)),o=VG(o,fG(l)),o=VG(o,fG(I)),o}_createItems(e){const g=this._active,t=this.chart.data,n=[],l=[],I=[];let o,a,C=[];for(o=0,a=g.length;o<a;++o)C.push(vG(this.chart,g[o]));return e.filter&&(C=C.filter(((g,n,l)=>e.filter(g,n,l,t)))),e.itemSort&&(C=C.sort(((g,n)=>e.itemSort(g,n,t)))),cb(C,(g=>{const t=wG(e.callbacks,g);n.push(FG(t,"labelColor",this,g)),l.push(FG(t,"labelPointStyle",this,g)),I.push(FG(t,"labelTextColor",this,g))})),this.labelColors=n,this.labelPointStyles=l,this.labelTextColors=I,this.dataPoints=C,C}update(e,g){const t=this.options.setContext(this.getContext()),n=this._active;let l,I=[];if(n.length){const e=WG[t.position].call(this,n,this._eventPosition);I=this._createItems(t),this.title=this.getTitle(I,t),this.beforeBody=this.getBeforeBody(I,t),this.body=this.getBody(I,t),this.afterBody=this.getAfterBody(I,t),this.footer=this.getFooter(I,t);const g=this._size=RG(this,t),o=Object.assign({},e,g),a=XG(this.chart,t,o),C=JG(t,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,l={opacity:1,x:C.x,y:C.y,width:g.width,height:g.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(l={opacity:0});this._tooltipItems=I,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&t.external&&t.external.call(this,{chart:this.chart,tooltip:this,replay:g})}drawCaret(e,g,t,n){const l=this.getCaretPosition(e,t,n);g.lineTo(l.x1,l.y1),g.lineTo(l.x2,l.y2),g.lineTo(l.x3,l.y3)}getCaretPosition(e,g,t){const{xAlign:n,yAlign:l}=this,{caretSize:I,cornerRadius:o}=t,{topLeft:a,topRight:C,bottomLeft:i,bottomRight:r}=FZ(o),{x:s,y:c}=e,{width:d,height:A}=g;let u,m,b,Z,h,p;return"center"===l?(h=c+A/2,"left"===n?(u=s,m=u-I,Z=h+I,p=h-I):(u=s+d,m=u+I,Z=h-I,p=h+I),b=u):(m="left"===n?s+Math.max(a,i)+I:"right"===n?s+d-Math.max(C,r)-I:this.caretX,"top"===l?(Z=c,h=Z-I,u=m-I,b=m+I):(Z=c+A,h=Z+I,u=m+I,b=m-I),p=Z),{x1:u,x2:m,x3:b,y1:Z,y2:h,y3:p}}drawTitle(e,g,t){const n=this.title,l=n.length;let I,o,a;if(l){const C=dh(t.rtl,this.x,this.width);for(e.x=YG(this,t.titleAlign,t),g.textAlign=C.textAlign(t.titleAlign),g.textBaseline="middle",I=KZ(t.titleFont),o=t.titleSpacing,g.fillStyle=t.titleColor,g.font=I.string,a=0;a<l;++a)g.fillText(n[a],C.x(e.x),e.y+I.lineHeight/2),e.y+=I.lineHeight+o,a+1===l&&(e.y+=t.titleMarginBottom-o)}}_drawColorBox(e,g,t,n,l){const I=this.labelColors[t],o=this.labelPointStyles[t],{boxHeight:a,boxWidth:C}=l,i=KZ(l.bodyFont),r=YG(this,"left",l),s=n.x(r),c=a<i.lineHeight?(i.lineHeight-a)/2:0,d=g.y+c;if(l.usePointStyle){const g={radius:Math.min(C,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},t=n.leftForLtr(s,C)+C/2,i=d+a/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,yZ(e,g,t,i),e.strokeStyle=I.borderColor,e.fillStyle=I.backgroundColor,yZ(e,g,t,i)}else{e.lineWidth=ob(I.borderWidth)?Math.max(...Object.values(I.borderWidth)):I.borderWidth||1,e.strokeStyle=I.borderColor,e.setLineDash(I.borderDash||[]),e.lineDashOffset=I.borderDashOffset||0;const g=n.leftForLtr(s,C),t=n.leftForLtr(n.xPlus(s,1),C-2),o=FZ(I.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=l.multiKeyBackground,kZ(e,{x:g,y:d,w:C,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=I.backgroundColor,e.beginPath(),kZ(e,{x:t,y:d+1,w:C-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(g,d,C,a),e.strokeRect(g,d,C,a),e.fillStyle=I.backgroundColor,e.fillRect(t,d+1,C-2,a-2))}e.fillStyle=this.labelTextColors[t]}drawBody(e,g,t){const{body:n}=this,{bodySpacing:l,bodyAlign:I,displayColors:o,boxHeight:a,boxWidth:C,boxPadding:i}=t,r=KZ(t.bodyFont);let s=r.lineHeight,c=0;const d=dh(t.rtl,this.x,this.width),A=function(t){g.fillText(t,d.x(e.x+c),e.y+s/2),e.y+=s+l},u=d.textAlign(I);let m,b,Z,h,p,G,y;for(g.textAlign=I,g.textBaseline="middle",g.font=r.string,e.x=YG(this,u,t),g.fillStyle=t.bodyColor,cb(this.beforeBody,A),c=o&&"right"!==u?"center"===I?C/2+i:C+2+i:0,h=0,G=n.length;h<G;++h){for(m=n[h],b=this.labelTextColors[h],g.fillStyle=b,cb(m.before,A),Z=m.lines,o&&Z.length&&(this._drawColorBox(g,e,h,d,t),s=Math.max(r.lineHeight,a)),p=0,y=Z.length;p<y;++p)A(Z[p]),s=r.lineHeight;cb(m.after,A)}c=0,s=r.lineHeight,cb(this.afterBody,A),e.y-=l}drawFooter(e,g,t){const n=this.footer,l=n.length;let I,o;if(l){const a=dh(t.rtl,this.x,this.width);for(e.x=YG(this,t.footerAlign,t),e.y+=t.footerMarginTop,g.textAlign=a.textAlign(t.footerAlign),g.textBaseline="middle",I=KZ(t.footerFont),g.fillStyle=t.footerColor,g.font=I.string,o=0;o<l;++o)g.fillText(n[o],a.x(e.x),e.y+I.lineHeight/2),e.y+=I.lineHeight+t.footerSpacing}}drawBackground(e,g,t,n){const{xAlign:l,yAlign:I}=this,{x:o,y:a}=e,{width:C,height:i}=t,{topLeft:r,topRight:s,bottomLeft:c,bottomRight:d}=FZ(n.cornerRadius);g.fillStyle=n.backgroundColor,g.strokeStyle=n.borderColor,g.lineWidth=n.borderWidth,g.beginPath(),g.moveTo(o+r,a),"top"===I&&this.drawCaret(e,g,t,n),g.lineTo(o+C-s,a),g.quadraticCurveTo(o+C,a,o+C,a+s),"center"===I&&"right"===l&&this.drawCaret(e,g,t,n),g.lineTo(o+C,a+i-d),g.quadraticCurveTo(o+C,a+i,o+C-d,a+i),"bottom"===I&&this.drawCaret(e,g,t,n),g.lineTo(o+c,a+i),g.quadraticCurveTo(o,a+i,o,a+i-c),"center"===I&&"left"===l&&this.drawCaret(e,g,t,n),g.lineTo(o,a+r),g.quadraticCurveTo(o,a,o+r,a),g.closePath(),g.fill(),n.borderWidth>0&&g.stroke()}_updateAnimationTarget(e){const g=this.chart,t=this.$animations,n=t&&t.x,l=t&&t.y;if(n||l){const t=WG[e.position].call(this,this._active,this._eventPosition);if(!t)return;const I=this._size=RG(this,e),o=Object.assign({},t,this._size),a=XG(g,e,o),C=JG(e,o,a,g);n._to===C.x&&l._to===C.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=I.width,this.height=I.height,this.caretX=t.x,this.caretY=t.y,this._resolveAnimations().update(this,C))}}_willRender(){return!!this.opacity}draw(e){const g=this.options.setContext(this.getContext());let t=this.opacity;if(!t)return;this._updateAnimationTarget(g);const n={width:this.width,height:this.height},l={x:this.x,y:this.y};t=Math.abs(t)<.001?0:t;const I=NZ(g.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;g.enabled&&o&&(e.save(),e.globalAlpha=t,this.drawBackground(l,e,n,g),Ah(e,g.textDirection),l.y+=I.top,this.drawTitle(l,e,g),this.drawBody(l,e,g),this.drawFooter(l,e,g),uh(e,g.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,g){const t=this._active,n=e.map((({datasetIndex:e,index:g})=>{const t=this.chart.getDatasetMeta(e);if(!t)throw new Error("Cannot find a dataset at index "+e);return{datasetIndex:e,element:t.data[g],index:g}})),l=!db(t,n),I=this._positionChanged(n,g);(l||I)&&(this._active=n,this._eventPosition=g,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,g,t=!0){if(g&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,l=this._active||[],I=this._getActiveElements(e,l,g,t),o=this._positionChanged(I,e),a=g||!db(I,l)||o;return a&&(this._active=I,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,g))),a}_getActiveElements(e,g,t,n){const l=this.options;if("mouseout"===e.type)return[];if(!n)return g;const I=this.chart.getElementsAtEventForMode(e,l.mode,l,t);return l.reverse&&I.reverse(),I}_positionChanged(e,g){const{caretX:t,caretY:n,options:l}=this,I=WG[l.position].call(this,e,g);return!1!==I&&(t!==I.x||n!==I.y)}}var KG={id:"tooltip",_element:NG,positioners:WG,afterInit(e,g,t){t&&(e.tooltip=new NG({chart:e,options:t}))},beforeUpdate(e,g,t){e.tooltip&&e.tooltip.initialize(t)},reset(e,g,t){e.tooltip&&e.tooltip.initialize(t)},afterDraw(e){const g=e.tooltip;if(g&&g._willRender()){const t={tooltip:g};if(!1===e.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0}))return;g.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",t)}},afterEvent(e,g){if(e.tooltip){const t=g.replay;e.tooltip.handleEvent(g.event,t,g.inChartArea)&&(g.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,g)=>g.bodyFont.size,boxWidth:(e,g)=>g.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xG},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function zG(e){const g=this.getLabels();return e>=0&&e<g.length?g[e]:e}function MG(e,g,{horizontal:t,minRotation:n}){const l=Nb(n),I=(t?Math.sin(l):Math.cos(l))||.001,o=.75*g*(""+e).length;return Math.min(g/I,o)}class EG extends Hp{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,g){return lb(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:g,maxDefined:t}=this.getUserBounds();let{min:n,max:l}=this;const I=e=>n=g?n:e,o=e=>l=t?l:e;if(e){const e=Hb(n),g=Hb(l);e<0&&g<0?o(0):e>0&&g>0&&I(0)}if(n===l){let g=0===l?1:Math.abs(.05*l);o(l+g),e||I(n-g)}this.min=n,this.max=l}getTickLimit(){const e=this.options.ticks;let g,{maxTicksLimit:t,stepSize:n}=e;return n?(g=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,g>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${g} ticks. Limiting to 1000.`),g=1e3)):(g=this.computeTickLimit(),t=t||11),t&&(g=Math.min(t,g)),g}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,g=e.ticks;let t=this.getTickLimit();t=Math.max(2,t);const n=function(e,g){const t=[],{bounds:n,step:l,min:I,max:o,precision:a,count:C,maxTicks:i,maxDigits:r,includeBounds:s}=e,c=l||1,d=i-1,{min:A,max:u}=g,m=!lb(I),b=!lb(o),Z=!lb(C),h=(u-A)/(r+1);let p,G,y,B,S=xb((u-A)/d/c)*c;if(S<1e-14&&!m&&!b)return[{value:A},{value:u}];B=Math.ceil(u/S)-Math.floor(A/S),B>d&&(S=xb(B*S/d/c)*c),lb(a)||(p=Math.pow(10,a),S=Math.ceil(S*p)/p),"ticks"===n?(G=Math.floor(A/S)*S,y=Math.ceil(u/S)*S):(G=A,y=u),m&&b&&l&&function(e,g){const t=Math.round(e);return t-g<=e&&t+g>=e}((o-I)/l,S/1e3)?(B=Math.round(Math.min((o-I)/S,i)),S=(o-I)/B,G=I,y=o):Z?(G=m?I:G,y=b?o:y,B=C-1,S=(y-G)/B):(B=(y-G)/S,B=wb(B,Math.round(B),S/1e3)?Math.round(B):Math.ceil(B));const W=Math.max(Kb(S),Kb(G));p=Math.pow(10,lb(a)?W:a),G=Math.round(G*p)/p,y=Math.round(y*p)/p;let V=0;for(m&&(s&&G!==I?(t.push({value:I}),G<I&&V++,wb(Math.round((G+V*S)*p)/p,I,MG(I,h,e))&&V++):G<I&&V++);V<B;++V){const e=Math.round((G+V*S)*p)/p;if(b&&e>o)break;t.push({value:e})}return b&&s&&y!==o?t.length&&wb(t[t.length-1].value,o,MG(o,h,e))?t[t.length-1].value=o:t.push({value:o}):b&&y!==o||t.push({value:y}),t}({maxTicks:t,bounds:e.bounds,min:e.min,max:e.max,precision:g.precision,step:g.stepSize,count:g.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:g.minRotation||0,includeBounds:!1!==g.includeBounds},this._range||this);return"ticks"===e.bounds&&function(e,g,t){let n,l,I;for(n=0,l=e.length;n<l;n++)I=e[n][t],isNaN(I)||(g.min=Math.min(g.min,I),g.max=Math.max(g.max,I))}(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let g=this.min,t=this.max;if(super.configure(),this.options.offset&&e.length){const n=(t-g)/Math.max(e.length-1,1)/2;g-=n,t+=n}this._startValue=g,this._endValue=t,this._valueRange=t-g}getLabelForValue(e){return rZ(e,this.chart.options.locale,this.options.ticks.format)}}class LG extends EG{static id="linear";static defaults={ticks:{callback:cZ.formatters.numeric}};determineDataLimits(){const{min:e,max:g}=this.getMinMax(!0);this.min=ab(e)?e:0,this.max=ab(g)?g:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),g=e?this.width:this.height,t=Nb(this.options.ticks.minRotation),n=(e?Math.sin(t):Math.cos(t))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(g/Math.min(40,l.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}cZ.formatters.logarithmic,cZ.formatters.numeric;const UG="label";function QG(e,g){"function"==typeof e?e(g):e&&(e.current=g)}function TG(e,g){e.labels=g}function DG(e,g){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UG;const n=[];e.datasets=g.map((g=>{const l=e.datasets.find((e=>e[t]===g[t]));return l&&g.data&&!n.includes(l)?(n.push(l),Object.assign(l,g),l):{...g}}))}function jG(e){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UG;const t={labels:[],datasets:[]};return TG(t,e.labels),DG(t,e.datasets,g),t}function PG(e,t){const{height:n=150,width:l=300,redraw:I=!1,datasetIdKey:o,type:a,data:C,options:i,plugins:r=[],fallbackContent:s,updateMode:c,...d}=e,A=(0,g.useRef)(null),u=(0,g.useRef)(),m=()=>{A.current&&(u.current=new rG(A.current,{type:a,data:jG(C,o),options:i&&{...i},plugins:r}),QG(t,u.current))},b=()=>{QG(t,null),u.current&&(u.current.destroy(),u.current=null)};return(0,g.useEffect)((()=>{!I&&u.current&&i&&function(e,g){const t=e.options;t&&g&&Object.assign(t,g)}(u.current,i)}),[I,i]),(0,g.useEffect)((()=>{!I&&u.current&&TG(u.current.config.data,C.labels)}),[I,C.labels]),(0,g.useEffect)((()=>{!I&&u.current&&C.datasets&&DG(u.current.config.data,C.datasets,o)}),[I,C.datasets]),(0,g.useEffect)((()=>{u.current&&(I?(b(),setTimeout(m)):u.current.update(c))}),[I,i,C.labels,C.datasets,c]),(0,g.useEffect)((()=>{u.current&&(b(),setTimeout(m))}),[a]),(0,g.useEffect)((()=>(m(),()=>b())),[]),g.createElement("canvas",Object.assign({ref:A,role:"img",height:n,width:l},d),s)}const OG=(0,g.forwardRef)(PG);function qG(e,t){return rG.register(t),(0,g.forwardRef)(((t,n)=>g.createElement(OG,Object.assign({},t,{ref:n,type:e}))))}const _G=qG("bar",Eh),$G=qG("doughnut",Lh);rG.register(class extends Wp{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,g,t){const n=this.getProps(["x","y"],t),{angle:l,distance:I}=zb(n,{x:e,y:g}),{startAngle:o,endAngle:a,innerRadius:C,outerRadius:i,circumference:r}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],t),s=(this.options.spacing+this.options.borderWidth)/2,c=ib(r,a-o)>=fb||Eb(l,o,a),d=Ub(I,C+s,i+s);return c&&d}getCenterPoint(e){const{x:g,y:t,startAngle:n,endAngle:l,innerRadius:I,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:C}=this.options,i=(n+l)/2,r=(I+o+C+a)/2;return{x:g+Math.cos(i)*r,y:t+Math.sin(i)*r}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:g,circumference:t}=this,n=(g.offset||0)/4,l=(g.spacing||0)/2,I=g.circular;if(this.pixelMargin="inner"===g.borderAlign?.33:0,this.fullCircles=t>fb?Math.floor(t/fb):0,0===t||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*n,Math.sin(o)*n);const a=n*(1-Math.sin(Math.min(Vb,t||0)));e.fillStyle=g.backgroundColor,e.strokeStyle=g.borderColor,function(e,g,t,n,l){const{fullCircles:I,startAngle:o,circumference:a}=g;let C=g.endAngle;if(I){dG(e,g,t,n,C,l);for(let g=0;g<I;++g)e.fill();isNaN(a)||(C=o+(a%fb||fb))}dG(e,g,t,n,C,l),e.fill()}(e,this,a,l,I),function(e,g,t,n,l){const{fullCircles:I,startAngle:o,circumference:a,options:C}=g,{borderWidth:i,borderJoinStyle:r,borderDash:s,borderDashOffset:c}=C,d="inner"===C.borderAlign;if(!i)return;e.setLineDash(s||[]),e.lineDashOffset=c,d?(e.lineWidth=2*i,e.lineJoin=r||"round"):(e.lineWidth=i,e.lineJoin=r||"bevel");let A=g.endAngle;if(I){dG(e,g,t,n,A,l);for(let g=0;g<I;++g)e.stroke();isNaN(a)||(A=o+(a%fb||fb))}d&&function(e,g,t){const{startAngle:n,pixelMargin:l,x:I,y:o,outerRadius:a,innerRadius:C}=g;let i=l/a;e.beginPath(),e.arc(I,o,a,n-i,t+i),C>l?(i=l/C,e.arc(I,o,C,t+i,n-i,!0)):e.arc(I,o,l,t+kb,n-kb),e.closePath(),e.clip()}(e,g,A),I||(dG(e,g,t,n,A,l),e.stroke())}(e,this,a,l,I),e.restore()}},class extends Hp{static id="category";static defaults={ticks:{callback:zG}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const g=this._addedLabels;if(g.length){const e=this.getLabels();for(const{index:t,label:n}of g)e[t]===n&&e.splice(t,1);this._addedLabels=[]}super.init(e)}parse(e,g){if(lb(e))return null;const t=this.getLabels();return((e,g)=>null===e?null:Lb(Math.round(e),0,g))(g=isFinite(g)&&t[g]===e?g:function(e,g,t,n){const l=e.indexOf(g);return-1===l?((e,g,t,n)=>("string"==typeof g?(t=e.push(g)-1,n.unshift({index:t,label:g})):isNaN(g)&&(t=null),t))(e,g,t,n):l!==e.lastIndexOf(g)?t:l}(t,e,ib(g,e),this._addedLabels),t.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:g}=this.getUserBounds();let{min:t,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(t=0),g||(n=this.getLabels().length-1)),this.min=t,this.max=n}buildTicks(){const e=this.min,g=this.max,t=this.options.offset,n=[];let l=this.getLabels();l=0===e&&g===l.length-1?l:l.slice(e,g+1),this._valueRange=Math.max(l.length-(t?0:1),1),this._startValue=this.min-(t?.5:0);for(let t=e;t<=g;t++)n.push({value:t});return n}getLabelForValue(e){return zG.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const g=this.ticks;return e<0||e>g.length-1?null:this.getPixelForValue(g[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}},LG,class extends Wp{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:g,options:{borderColor:t,backgroundColor:n}}=this,{inner:l,outer:I}=function(e){const g=AG(e),t=g.right-g.left,n=g.bottom-g.top,l=function(e,g,t){const n=e.options.borderWidth,l=e.borderSkipped,I=xZ(n);return{t:uG(l.top,I.top,0,t),r:uG(l.right,I.right,0,g),b:uG(l.bottom,I.bottom,0,t),l:uG(l.left,I.left,0,g)}}(e,t/2,n/2),I=function(e,g,t){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),l=e.options.borderRadius,I=FZ(l),o=Math.min(g,t),a=e.borderSkipped,C=n||ob(l);return{topLeft:uG(!C||a.top||a.left,I.topLeft,0,o),topRight:uG(!C||a.top||a.right,I.topRight,0,o),bottomLeft:uG(!C||a.bottom||a.left,I.bottomLeft,0,o),bottomRight:uG(!C||a.bottom||a.right,I.bottomRight,0,o)}}(e,t/2,n/2);return{outer:{x:g.left,y:g.top,w:t,h:n,radius:I},inner:{x:g.left+l.l,y:g.top+l.t,w:t-l.l-l.r,h:n-l.t-l.b,radius:{topLeft:Math.max(0,I.topLeft-Math.max(l.t,l.l)),topRight:Math.max(0,I.topRight-Math.max(l.t,l.r)),bottomLeft:Math.max(0,I.bottomLeft-Math.max(l.b,l.l)),bottomRight:Math.max(0,I.bottomRight-Math.max(l.b,l.r))}}}}(this),o=(a=I.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?kZ:bG;var a;e.save(),I.w===l.w&&I.h===l.h||(e.beginPath(),o(e,ZG(I,g,l)),e.clip(),o(e,ZG(l,-g,I)),e.fillStyle=t,e.fill("evenodd")),e.beginPath(),o(e,ZG(l,g)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,g,t){return mG(this,e,g,t)}inXRange(e,g){return mG(this,e,null,g)}inYRange(e,g){return mG(this,null,e,g)}getCenterPoint(e){const{x:g,y:t,base:n,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(g+n)/2:g,y:l?t:(t+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}},SG,KG,yG);const ey={labels:["LocalHost"],datasets:[{label:"# of Votes",data:[0]}]},gy=({apiURL:e,content:t,titulo:n,descripcion:l,url:I})=>{const o={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:n}}},[a,C]=(0,g.useState)(ey),[i,r]=(0,g.useState)(a.labels),[s,c]=(0,g.useState)({labels:i,datasets:[{label:"# of views",data:i.map((()=>a.datasets.data)),borderColor:"rgb(255, 99, 132, 0.5)",backgroundColor:"rgb(255, 99, 132, 0.5)"}]});return(0,g.useEffect)((()=>{rc("/frontend"+e,C)}),[]),(0,g.useEffect)((()=>{r(a.labels)}),[a]),(0,g.useEffect)((()=>{(()=>{var e=a.datasets.data,g=[],t=[];for(var n in e){var l=Math.floor(226*Math.random()),I=Math.floor(226*Math.random()),o=Math.floor(226*Math.random());g.push("rgb("+l.toString()+", "+I.toString()+", "+o.toString()+", 0.5)"),t.push("rgb("+(l+30).toString()+", "+(I+30).toString()+", "+(o+30).toString()+")")}var C={labels:i,datasets:[{label:"# of views",data:a.datasets.data,borderColor:t,backgroundColor:g}]};c(C)})()}),[i]),(0,m.jsx)(x,{sx:{width:"100%"},children:(0,m.jsxs)(qe,{sx:{p:2,margin:"auto",maxWidth:1e3,flexGrow:1},children:[(0,m.jsxs)(UA,{children:[(0,m.jsx)("title",{children:n}),(0,m.jsx)("meta",{name:"description",content:l}),(0,m.jsx)("link",{rel:"canonical",href:I})]}),(0,m.jsx)(dg,{position:"static",children:(0,m.jsx)(bg,{children:(0,m.jsx)(xt,{variant:"h6",sx:{flexGrow:1},children:n})})}),(0,m.jsxs)(qe,{sx:{p:2,margin:2,flexGrow:1},children:[(0,m.jsx)("div",{dangerouslySetInnerHTML:{__html:t}}),(0,m.jsx)(x,{sx:{maxWidth:600,margin:"auto",padding:3},children:(0,m.jsx)($G,{options:o,data:s})}),(0,m.jsx)(x,{sx:{margin:"auto",padding:3},children:(0,m.jsx)(_G,{options:o,data:s})})]}),(0,m.jsx)(x,{sx:{p:1}})]})})};var ty=(0,g.memo)(gy),ny=l(7447),ly=l(9879),Iy=l(7289),oy=l(265),ay=l(4518),Cy=l(7327),iy=l(8394);function ry(e){return(0,Re.Z)("MuiDialog",e)}var sy=(0,ve.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),cy=g.createContext({});const dy=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Ay=(0,I.ZP)(Ye,{name:"MuiDialog",slot:"Backdrop",overrides:(e,g)=>g.backdrop})({zIndex:-1}),uy=(0,I.ZP)(Ke,{name:"MuiDialog",slot:"Root",overridesResolver:(e,g)=>g.root})({"@media print":{position:"absolute !important"}}),my=(0,I.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.container,g[`scroll${(0,_e.Z)(t.scroll)}`]]}})((({ownerState:e})=>(0,s.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===e.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===e.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}))),by=(0,I.ZP)(qe,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,g)=>{const{ownerState:t}=e;return[g.paper,g[`scrollPaper${(0,_e.Z)(t.scroll)}`],g[`paperWidth${(0,_e.Z)(String(t.maxWidth))}`],t.fullWidth&&g.paperFullWidth,t.fullScreen&&g.paperFullScreen]}})((({theme:e,ownerState:g})=>(0,s.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===g.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===g.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!g.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===g.maxWidth&&{maxWidth:"px"===e.breakpoints.unit?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${sy.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},g.maxWidth&&"xs"!==g.maxWidth&&{maxWidth:`${e.breakpoints.values[g.maxWidth]}${e.breakpoints.unit}`,[`&.${sy.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[g.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},g.fullWidth&&{width:"calc(100% - 64px)"},g.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${sy.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})));var Zy=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiDialog"}),l=i(),I={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:C,BackdropProps:r,children:d,className:A,disableEscapeKeyDown:u=!1,fullScreen:b=!1,fullWidth:Z=!1,maxWidth:h="sm",onBackdropClick:p,onClose:G,open:y,PaperComponent:B=qe,PaperProps:S={},scroll:V="paper",TransitionComponent:f=fe,transitionDuration:v=I,TransitionProps:R}=n,k=(0,c.Z)(n,dy),X=(0,s.Z)({},n,{disableEscapeKeyDown:u,fullScreen:b,fullWidth:Z,maxWidth:h,scroll:V}),J=(e=>{const{classes:g,scroll:t,maxWidth:n,fullWidth:l,fullScreen:I}=e,o={root:["root"],container:["container",`scroll${(0,_e.Z)(t)}`],paper:["paper",`paperScroll${(0,_e.Z)(t)}`,`paperWidth${(0,_e.Z)(String(n))}`,l&&"paperFullWidth",I&&"paperFullScreen"]};return(0,F.Z)(o,ry,g)})(X),Y=g.useRef(),H=(0,Fo.Z)(a),w=g.useMemo((()=>({titleId:H})),[H]);return(0,m.jsx)(uy,(0,s.Z)({className:(0,W.Z)(J.root,A),closeAfterTransition:!0,components:{Backdrop:Ay},componentsProps:{backdrop:(0,s.Z)({transitionDuration:v,as:C},r)},disableEscapeKeyDown:u,onClose:G,open:y,ref:t,onClick:e=>{Y.current&&(Y.current=null,p&&p(e),G&&G(e,"backdropClick"))},ownerState:X},k,{children:(0,m.jsx)(f,(0,s.Z)({appear:!0,in:y,timeout:v,role:"presentation"},R,{children:(0,m.jsx)(my,{className:(0,W.Z)(J.container),onMouseDown:e=>{Y.current=e.target===e.currentTarget},ownerState:X,children:(0,m.jsx)(by,(0,s.Z)({as:B,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":H},S,{className:(0,W.Z)(J.paper,S.className),ownerState:X,children:(0,m.jsx)(cy.Provider,{value:w,children:d})}))})}))}))}));function hy(e){return(0,Re.Z)("MuiDialogTitle",e)}(0,ve.Z)("MuiDialogTitle",["root"]);const py=["className","id"],Gy=(0,I.ZP)(xt,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,g)=>g.root})({padding:"16px 24px",flex:"0 0 auto"});var yy=g.forwardRef((function(e,t){const n=(0,ie.Z)({props:e,name:"MuiDialogTitle"}),{className:l,id:I}=n,o=(0,c.Z)(n,py),a=n,C=(e=>{const{classes:g}=e;return(0,F.Z)({root:["root"]},hy,g)})(a),{titleId:i=I}=g.useContext(cy);return(0,m.jsx)(Gy,(0,s.Z)({component:"h2",className:(0,W.Z)(C.root,l),ownerState:a,ref:t,variant:"h6",id:null!=I?I:i},o))})),By=l(2090),Sy=l.n(By);const Wy=(0,g.createContext)(null),Vy={didCatch:!1,error:null};class fy extends g.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Vy}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var g,t,n=arguments.length,l=new Array(n),I=0;I<n;I++)l[I]=arguments[I];null===(g=(t=this.props).onReset)||void 0===g||g.call(t,{args:l,reason:"imperative-api"}),this.setState(Vy)}}componentDidCatch(e,g){var t,n;null===(t=(n=this.props).onError)||void 0===t||t.call(n,e,g)}componentDidUpdate(e,g){const{didCatch:t}=this.state,{resetKeys:n}=this.props;var l,I;t&&null!==g.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==g.length||e.some(((e,t)=>!Object.is(e,g[t])))}(e.resetKeys,n)&&(null===(l=(I=this.props).onReset)||void 0===l||l.call(I,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(Vy))}render(){const{children:e,fallbackRender:t,FallbackComponent:n,fallback:l}=this.props,{didCatch:I,error:o}=this.state;let a=e;if(I){const e={error:o,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)a=t(e);else if(n)a=(0,g.createElement)(n,e);else{if(null!==l&&!(0,g.isValidElement)(l))throw o;a=l}}return(0,g.createElement)(Wy.Provider,{value:{didCatch:I,error:o,resetErrorBoundary:this.resetErrorBoundary}},a)}}function vy({error:e,resetErrorBoundary:t}){const[n,l]=(0,g.useState)(!0);return(0,m.jsx)(Zy,{onClose:()=>{l(!1)},open:n,children:(0,m.jsxs)(x,{sx:{p:2},children:[(0,m.jsxs)(x,{sx:{display:"flex"},children:[(0,m.jsx)(xt,{variant:"h6",sx:{flexGrow:1},children:"Something went wrong:"}),(0,m.jsx)(Pd,{variant:"contained",sx:{flexGrow:0},endIcon:(0,m.jsx)(Nc.Z,{}),children:"Try again"})]}),(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsx)(xt,{variant:"subtitle2",children:e.message})]})})}class Ry extends g.Component{render(){const{children:e}=this.props;return(0,m.jsx)(fy,{FallbackComponent:vy,onReset:()=>{},resetKeys:["someKey"],children:e})}}var ky=(0,g.memo)(Ry);const Xy={height:240,width:320},Jy=({data:e})=>{const[t,n]=(0,g.useState)(!1);return(0,m.jsxs)(x,{children:[(0,m.jsx)(ut,{color:"inherit","aria-label":"QR",onClick:()=>{n(!0)},sx:{flexGrow:0},children:(0,m.jsx)(iy.Z,{})}),(0,m.jsx)(ky,{children:(0,m.jsxs)(Zy,{onClose:()=>{n(!1)},open:t,children:[(0,m.jsx)(yy,{sx:{margin:"auto"},children:"QR Scanner"}),(0,m.jsx)(Sy(),{delay:100,style:Xy,onError:e=>{console.log({QR_err:e})},onScan:g=>{g&&(e(g.text),console.log({QR:g.text}),n(!1))}})]})})]})};var Yy=(0,g.memo)(Jy);const Hy=(0,g.createContext)({toggleColorMode:()=>{}}),wy=70,xy=(0,I.ZP)((({className:e,...g})=>(0,m.jsx)(xI,{...g,classes:{popper:e}})))((({theme:e})=>({[`& .${fI.tooltip}`]:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,boxShadow:e.shadows[1],fontSize:11,textAlign:"justify"}}))),Fy=e=>({width:210,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),Ny=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:`calc(${e.spacing(7)} + 1px)`}),Ky=(0,I.ZP)("main",{shouldForwardProp:e=>"open"!==e})((({theme:e,open:g})=>({flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginTop:wy-70,...!g&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0}}))),zy=(0,I.ZP)("div")((({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1),...e.mixins.toolbar}))),My=(0,I.ZP)(dg,{shouldForwardProp:e=>"open"!==e})((({theme:e,open:g})=>({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...g&&{marginLeft:210,width:"calc(100% - 210px)",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},...!g&&{width:"100%",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})}}))),Ey=(0,I.ZP)(ag,{shouldForwardProp:e=>"open"!==e})((({theme:e,open:g})=>({width:210,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...g&&{...Fy(e),"& .MuiDrawer-paper":Fy(e)},...!g&&{...Ny(e),"& .MuiDrawer-paper":Ny(e)}})));function Ly(){let e=wn();const t=(0,g.useContext)(Hy),n=i(),[l,I]=(0,g.useState)("true"===localStorage.getItem("open")),o=Qy+"/media/logo.png",a=Qy+"/media/minilogo.png",[C,r]=(0,g.useState)([{id:0,url:"inicio",nombre:"Inicio",clasificacion:"INFO"}]),[s,c]=(0,g.useState)([{id:0,url:"fecha",nombre:"Fecha",clasificacion:"FECHA"}]),[d,A]=(0,g.useState)(0),u=()=>{I(!0),localStorage.setItem("open","true")};(0,g.useEffect)((()=>{rc("/frontend/menu/",r),rc("/frontend/filtro/",c)}),[]);const[b,Z]=(0,g.useState)(!1),[h,p]=(0,g.useState)("");return(0,m.jsxs)(x,{sx:{display:"flex"},children:[(0,m.jsx)(Rg,{}),(0,m.jsx)(My,{position:"fixed",open:l,children:(0,m.jsxs)(bg,{sx:{height:wy},children:[(0,m.jsx)(xy,{title:"Open and close the menu",placement:"right-start",followCursor:!0,children:(0,m.jsx)(ut,{color:"inherit","aria-label":"open drawer",onClick:u,edge:"start",sx:{marginRight:"36px",...l&&{display:"none"}},children:(0,m.jsx)(ny.Z,{})})}),(0,m.jsx)(x,{sx:{flexGrow:1},children:(0,m.jsxs)(it,{onClick:()=>{e("/serie",{replace:!0})},children:[(0,m.jsx)(x,{sx:{display:{xs:"none",sm:"flex"}},children:(0,m.jsx)("img",{src:o,height:wy-7})}),(0,m.jsx)(x,{sx:{display:{xs:"flex",sm:"none"}},children:(0,m.jsx)("img",{src:a,height:wy-10})})]})}),(0,m.jsx)(x,{sx:{flexGrow:0,marginRight:1},children:(0,m.jsx)(xy,{title:"Toggles between dark and light mode",placement:"right-start",followCursor:!0,children:(0,m.jsx)(ut,{onClick:t.toggleColorMode,color:"inherit",children:"dark"===n.palette.mode?(0,m.jsx)(ly.Z,{}):(0,m.jsx)(Iy.Z,{})})})}),(0,m.jsx)(xy,{title:"Sign out, clear the cache and refresh the page.",placement:"right-start",followCursor:!0,children:(0,m.jsx)(ut,{sx:{marginRight:1},onClick:()=>{Ty()},color:"inherit",children:(0,m.jsx)(Cy.Z,{})})}),(0,m.jsx)(xy,{title:"QR Scanner.",placement:"right-start",followCursor:!0,children:(0,m.jsx)(x,{sx:{marginRight:1},children:(0,m.jsx)(Yy,{data:e=>{p(e),Z(!0)}})})}),(0,m.jsxs)(Zy,{onClose:()=>{Z(!1)},open:b,children:[(0,m.jsx)(yy,{sx:{margin:"auto"},children:"QR Scanner"}),(0,m.jsxs)(x,{sx:{p:2},children:[(0,m.jsx)(xg,{sx:{marginTop:1,marginBottom:1}}),(0,m.jsx)(xt,{variant:"subtitle2",children:h})]})]}),(0,m.jsx)(Nu,{})]})}),(0,m.jsxs)(Ey,{variant:"permanent",open:l,children:[(0,m.jsx)(zy,{sx:{height:wy},children:(0,m.jsxs)(ut,{onClick:()=>{I(!1),localStorage.setItem("open","false")},children:["rtl"===n.direction?(0,m.jsx)(bt.Z,{}):(0,m.jsx)(mt.Z,{}),(0,m.jsx)(ny.Z,{})]})}),(0,m.jsx)(xg,{}),(0,m.jsx)(KI,{items:C}),(0,m.jsx)(xg,{}),(0,m.jsx)(zc,{items:s,handleDrawerOpen:u,openDrawer:l,requestSync:()=>{"/serie"===window.location.pathname?A(d+1):e("/serie",{replace:!0})}})]}),(0,m.jsxs)(Ky,{open:l,children:[(0,m.jsx)(zy,{}),(0,m.jsxs)(Tn,{children:[C.map((e=>"LISTAR"===e.clasificacion?(0,m.jsx)(Un,{path:e.url,element:(0,m.jsx)(iu,{apiURL:"/"+e.url+"/",titulo:e.nombre,descripcion:e.descripcion,url:"/"+e.url,filtro:s,update:d},e.url)},e.id):"INFO"===e.clasificacion?(0,m.jsx)(Un,{path:e.url,element:(0,m.jsx)(Wm,{content:e.content,titulo:e.nombre,descripcion:e.descripcion,url:"/"+e.url,image:e.image_body},e.url)},e.id):"GRAPHIC"===e.clasificacion?(0,m.jsx)(Un,{path:e.url,element:(0,m.jsx)(ty,{apiURL:"/"+e.url+"/",content:e.content,titulo:e.nombre,descripcion:e.descripcion,url:"/"+e.url},e.url)},e.id):void 0)),C.map((e=>{if("LISTAR"===e.clasificacion)return(0,m.jsx)(Un,{path:"/"+e.url+"/:id",element:(0,m.jsx)(ym,{apiURL:"/"+e.url+"/"})},e.url+e.id)})),(0,m.jsx)(Un,{path:"",element:(0,m.jsx)(Ec,{})})]})]})]})}function Uy(){const[e,t]=(0,g.useState)(localStorage.getItem("mode")||"dark"),n=(0,g.useMemo)((()=>({toggleColorMode:()=>{t((e=>"light"===e?"dark":"light"))}})),[]),l=(0,g.useMemo)((()=>(0,r.Z)({palette:{primary:{light:oy.Z[500],main:oy.Z[700],dark:oy.Z[900],contrastText:"#fff"},secondary:{light:ay.Z[500],main:ay.Z[700],dark:ay.Z[900],contrastText:"#000"},mode:e}})),[e]);return(0,m.jsxs)(Hy.Provider,{value:n,children:[localStorage.setItem("mode",e),(0,m.jsx)(S,{theme:l,children:(0,m.jsx)(Ly,{})})]})}const Qy=window.location.origin,Ty=()=>{var e=localStorage.getItem("mode");localStorage.clear(),localStorage.setItem("mode",e),caches.keys().then((e=>{e.forEach((e=>{caches.delete(e)}))})),window.location.reload(!0)};var Dy=function(){return(0,m.jsx)(x,{children:(0,m.jsx)(Tn,{children:(0,m.jsx)(Un,{path:"/*",element:(0,m.jsx)(Uy,{})})})})};new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const jy=t.startTransition;function Py(e){let{basename:t,children:n,future:l,window:I}=e,o=g.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:I,v5Compat:!0})&&(a={}),function(e,g,t,n){void 0===n&&(n={});let{window:l=document.defaultView,v5Compat:I=!1}=n,o=l.history,a=Qt.Pop,C=null,i=r();function r(){return(o.state||{idx:null}).idx}function s(){a=Qt.Pop;let e=r(),g=null==e?null:e-i;i=e,C&&C({action:a,location:d.location,delta:g})}function c(e){let g="null"!==l.location.origin?l.location.origin:l.location.href,t="string"==typeof e?e:$t(e);return Pt(g,"No window.location.(origin|href) available to create URL for href: "+t),new URL(t,g)}null==i&&(i=0,o.replaceState(Dt({},o.state,{idx:i}),""));let d={get action(){return a},get location(){return e(l,o)},listen(e){if(C)throw new Error("A history only accepts one active listener");return l.addEventListener(jt,s),C=e,()=>{l.removeEventListener(jt,s),C=null}},createHref(e){return g(l,e)},createURL:c,encodeLocation(e){let g=c(e);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:function(e,g){a=Qt.Push;let n=_t(d.location,e,g);t&&t(n,e),i=r()+1;let s=qt(n,i),c=d.createHref(n);try{o.pushState(s,"",c)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;l.location.assign(c)}I&&C&&C({action:a,location:d.location,delta:1})},replace:function(e,g){a=Qt.Replace;let n=_t(d.location,e,g);t&&t(n,e),i=r();let l=qt(n,i),s=d.createHref(n);o.replaceState(l,"",s),I&&C&&C({action:a,location:d.location,delta:0})},go(e){return o.go(e)}};return d}((function(e,g){let{pathname:t,search:n,hash:l}=e.location;return _t("",{pathname:t,search:n,hash:l},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}),(function(e,g){return"string"==typeof g?g:$t(g)}),null,a)));let C=o.current,[i,r]=g.useState({action:C.action,location:C.location}),{v7_startTransition:s}=l||{},c=g.useCallback((e=>{s&&jy?jy((()=>r(e))):r(e)}),[r,s]);return g.useLayoutEffect((()=>C.listen(c)),[C,c]),g.createElement(Qn,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:C})}var Oy,qy;"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement,function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"}(Oy||(Oy={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(qy||(qy={})),n.createRoot(document.getElementById("root")).render((0,m.jsx)(g.StrictMode,{children:(0,m.jsx)(Py,{children:(0,m.jsx)(xA,{children:(0,m.jsx)(Dy,{})})})}))}()}();